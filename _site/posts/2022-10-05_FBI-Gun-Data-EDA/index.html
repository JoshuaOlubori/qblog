<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Edun Joshua">
<meta name="dcterms.date" content="2022-10-05">

<title>Chamber of (data) secrets - Project: Analyzing Trends in Gun Sales Data across the U.S.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-X2C4499YPY"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-X2C4499YPY', { 'anonymize_ip': true});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Chamber of (data) secrets - Project: Analyzing Trends in Gun Sales Data across the U.S.">
<meta property="og:description" content="An project for Udacity’s Nanodegree">
<meta property="og:image" content="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/dashboard.jpg">
<meta property="og:site-name" content="Chamber of (data) secrets">
<meta name="twitter:title" content="Chamber of (data) secrets - Project: Analyzing Trends in Gun Sales Data across the U.S.">
<meta name="twitter:description" content="An project for Udacity’s Nanodegree">
<meta name="twitter:image" content="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/dashboard.jpg">
<meta name="twitter:creator" content="@olubori_joshua">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts_index.html" rel="" target="">
 <span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Project: Analyzing Trends in Gun Sales Data across the U.S.</h1>
            <p class="subtitle lead">An project for Udacity’s Nanodegree</p>
                                <div class="quarto-categories">
                <div class="quarto-category">python</div>
                <div class="quarto-category">data wrangling</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Edun Joshua </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 5, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions">Research Questions</a></li>
  <li><a href="#data-wrangling-a" id="toc-data-wrangling-a" class="nav-link" data-scroll-target="#data-wrangling-a">Data Wrangling (a)</a>
  <ul class="collapse">
  <li><a href="#general-properties" id="toc-general-properties" class="nav-link" data-scroll-target="#general-properties">General Properties</a></li>
  <li><a href="#in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data" id="toc-in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data" class="nav-link" data-scroll-target="#in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data">In this section I will assess the data to spot irregularities and then clean the data</a></li>
  </ul></li>
  <li><a href="#data-wrangling-b" id="toc-data-wrangling-b" class="nav-link" data-scroll-target="#data-wrangling-b">Data Wrangling (b)</a>
  <ul class="collapse">
  <li><a href="#general-properties-1" id="toc-general-properties-1" class="nav-link" data-scroll-target="#general-properties-1">General Properties</a></li>
  <li><a href="#in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data-1" id="toc-in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data-1" class="nav-link" data-scroll-target="#in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data-1">In this section I will assess the data to spot irregularities and then clean the data</a></li>
  </ul></li>
  <li><a href="#further-wrangling" id="toc-further-wrangling" class="nav-link" data-scroll-target="#further-wrangling">Further Wrangling</a>
  <ul class="collapse">
  <li><a href="#in-this-section-i-will-further-wrangle-the-dataframes-and-derive-calculated-columns" id="toc-in-this-section-i-will-further-wrangle-the-dataframes-and-derive-calculated-columns" class="nav-link" data-scroll-target="#in-this-section-i-will-further-wrangle-the-dataframes-and-derive-calculated-columns"><em>In this section, I will further wrangle the dataframes and derive calculated columns</em></a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-1" id="toc-exploratory-data-analysis-1" class="nav-link" data-scroll-target="#exploratory-data-analysis-1">Exploratory Data Analysis 1</a>
  <ul class="collapse">
  <li><a href="#census-data" id="toc-census-data" class="nav-link" data-scroll-target="#census-data">(Census Data)</a></li>
  </ul></li>
  <li><a href="#data-dictionary" id="toc-data-dictionary" class="nav-link" data-scroll-target="#data-dictionary">Data Dictionary</a></li>
  <li><a href="#preliminary-exploration-on-the-census-data" id="toc-preliminary-exploration-on-the-census-data" class="nav-link" data-scroll-target="#preliminary-exploration-on-the-census-data">Preliminary Exploration on the Census Data</a></li>
  <li><a href="#preparing-gun-sales-data-for-eda" id="toc-preparing-gun-sales-data-for-eda" class="nav-link" data-scroll-target="#preparing-gun-sales-data-for-eda">Preparing Gun Sales Data for EDA</a></li>
  <li><a href="#data-dictionary-1" id="toc-data-dictionary-1" class="nav-link" data-scroll-target="#data-dictionary-1">Data Dictionary</a></li>
  <li><a href="#exploratory-data-analysis-2" id="toc-exploratory-data-analysis-2" class="nav-link" data-scroll-target="#exploratory-data-analysis-2"><strong>Exploratory Data Analysis 2</strong></a>
  <ul class="collapse">
  <li><a href="#gun-sales-data" id="toc-gun-sales-data" class="nav-link" data-scroll-target="#gun-sales-data"><strong>(Gun Sales Data)</strong></a></li>
  </ul></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section">2006</a>
  <ul class="collapse">
  <li><a href="#year-level-questions" id="toc-year-level-questions" class="nav-link" data-scroll-target="#year-level-questions">Year Level Questions</a></li>
  <li><a href="#state-level-questions" id="toc-state-level-questions" class="nav-link" data-scroll-target="#state-level-questions"><strong>State Level Questions</strong></a></li>
  </ul></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1">2016</a>
  <ul class="collapse">
  <li><a href="#year-level-questions-1" id="toc-year-level-questions-1" class="nav-link" data-scroll-target="#year-level-questions-1">Year Level Questions</a></li>
  <li><a href="#state-level-questions-1" id="toc-state-level-questions-1" class="nav-link" data-scroll-target="#state-level-questions-1"><strong>State Level Questions</strong></a></li>
  </ul></li>
  <li><a href="#which-census-data-variables-are-most-associated-with-gun-sales-data" id="toc-which-census-data-variables-are-most-associated-with-gun-sales-data" class="nav-link" data-scroll-target="#which-census-data-variables-are-most-associated-with-gun-sales-data">Which census data variables are most associated with gun sales data?</a>
  <ul class="collapse">
  <li><a href="#data-dictionary-2" id="toc-data-dictionary-2" class="nav-link" data-scroll-target="#data-dictionary-2"><strong>Data Dictionary</strong></a></li>
  <li><a href="#data-dictionary-3" id="toc-data-dictionary-3" class="nav-link" data-scroll-target="#data-dictionary-3"><strong>Data Dictionary</strong></a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysisunivariate" id="toc-exploratory-data-analysisunivariate" class="nav-link" data-scroll-target="#exploratory-data-analysisunivariate">Exploratory Data Analysis(Univariate)</a>
  <ul class="collapse">
  <li><a href="#lets-explore-the-first-5-columns-representing-the-gun-sales-data" id="toc-lets-explore-the-first-5-columns-representing-the-gun-sales-data" class="nav-link" data-scroll-target="#lets-explore-the-first-5-columns-representing-the-gun-sales-data">Let’s explore the first 5 columns, representing the gun sales data</a></li>
  <li><a href="#lets-explore-the-next-5-columns-representing-the-population-by-race" id="toc-lets-explore-the-next-5-columns-representing-the-population-by-race" class="nav-link" data-scroll-target="#lets-explore-the-next-5-columns-representing-the-population-by-race">Let’s explore the next 5 columns, representing the population % by race</a></li>
  <li><a href="#lets-explore-the-next-5-columns-representing-levels-of-education-and-persons-per-household-and-persons-without-health-insurance" id="toc-lets-explore-the-next-5-columns-representing-levels-of-education-and-persons-per-household-and-persons-without-health-insurance" class="nav-link" data-scroll-target="#lets-explore-the-next-5-columns-representing-levels-of-education-and-persons-per-household-and-persons-without-health-insurance">Let’s explore the next 5 columns, representing levels of education and persons per household and persons without health insurance</a></li>
  <li><a href="#lets-explore-the-next-6-columns-representing-economic-data" id="toc-lets-explore-the-next-6-columns-representing-economic-data" class="nav-link" data-scroll-target="#lets-explore-the-next-6-columns-representing-economic-data">Let’s explore the next 6 columns, representing economic data</a></li>
  </ul></li>
  <li><a href="#covariate-analysis" id="toc-covariate-analysis" class="nav-link" data-scroll-target="#covariate-analysis"><strong>Covariate Analysis</strong></a>
  <ul class="collapse">
  <li><a href="#plotting-the-variables-against-gun_sales_per_capita-to-spot-associations" id="toc-plotting-the-variables-against-gun_sales_per_capita-to-spot-associations" class="nav-link" data-scroll-target="#plotting-the-variables-against-gun_sales_per_capita-to-spot-associations"><strong>Plotting the variables against <code>gun_sales_per_capita</code> to spot associations</strong></a></li>
  </ul></li>
  <li><a href="#conclusions" id="toc-conclusions" class="nav-link" data-scroll-target="#conclusions">Conclusions</a>
  <ul class="collapse">
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"><strong>2006</strong></a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"><strong>2015</strong></a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"><strong>2016</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The data comes from the FBI’s National Instant Criminal Background Check System. The NICS is used by to determine whether a prospective buyer is eligible to buy firearms or explosives. Gun shops call into this system to ensure that each customer does not have a criminal record or isn’t otherwise ineligible to make a purchase. The data has been supplemented with state level data from census.gov.</p>
<blockquote class="blockquote">
<p>Mandated by the Brady Handgun Violence Prevention Act of 1993 and launched by the FBI on November 30, 1998, NICS is used by Federal Firearms Licensees (FFLs) to instantly determine whether a prospective buyer is eligible to buy firearms or explosives. Before ringing up the sale, cashiers call in a check to the FBI or to other designated agencies to ensure that each customer does not have a criminal record or isn’t otherwise ineligible to make a purchase. More than 100 million such checks have been made in the last decade, leading to more than 700,000 denials.</p>
</blockquote>
<p>These statistics represent the number of firearm background checks initiated through the NICS. They do not represent the number of firearms sold. According to The Trace, 2015: The FBI’s background check numbers come with caveats: As seen in the late February-early March 2014 bubble, many checks are for concealed carry permits, not actual gun sales. Kentucky runs a new check on each concealed carry license holder each month. And of course, the FBI’s numbers don’t include private gun sales, many of which do not require a background check. Despite those vagaries, the FBI’s NICS numbers are widely accepted as <strong>the best proxy for total gun sales</strong> in a given time period.</p>
<p>In 2015, New York Times ran a similar analysis with the data and estimated sales from background checks with a method suggested by a researcher.</p>
<p>According to them:</p>
<blockquote class="blockquote">
<p>To convert background checks into estimated sales, we relied on a method suggested in the Small Arms Survey by Jurgen Brauer, a professor at Georgia Regents University. Each long gun and handgun check was counted as 1.1 sales. Each multiple-gun check was counted as two sales. Permit checks and other types of checks were omitted. The multiplier is an estimate based on Mr.&nbsp;Brauer’s interviews with gun shop owners.</p>
</blockquote>
<p>This is the method I applied in this analysis.</p>
<p>The NICS is in a wide format and contains a total of 23 variables, out of which I deem only 5 is relevant to this analysis:</p>
<ul>
<li><p>month (monthly data from November 1998 to September 2017)</p></li>
<li><p>state (55 U.S. states and offshore territories)</p></li>
<li><p>handgun (number of check calls)</p></li>
<li><p>long-gun (number of check calls)</p></li>
<li><p>multiple (number of check calls)</p></li>
</ul>
<p>The census data is a wide-table format data with 66 variables measuring quantities for 50 U.S. states. I have selected only 18 variables that I deem relevant to this analysis. The starred variables are just a few of the variables that are present in the raw data that I will not include in this analysis.</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>s/n</th>
<th>Variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Persons under 18 years, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Persons 65 years and over, percent, July 1, 2016,(V2016)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Female persons, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>White alone, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="even">
<td>6</td>
<td>Black or African American alone, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Asian alone, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="even">
<td>8</td>
<td>Median value of owner-occupied housing units, 2011-2015</td>
</tr>
<tr class="odd">
<td>9</td>
<td>Median gross rent, 2011-2015</td>
</tr>
<tr class="even">
<td>10</td>
<td>Persons per household, 2011-2015</td>
</tr>
<tr class="odd">
<td>11</td>
<td>High school graduate or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="even">
<td>12</td>
<td>Bachelor’s degree or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="odd">
<td>13</td>
<td>Persons without health insurance, under age 65 years, percent</td>
</tr>
<tr class="even">
<td>14</td>
<td>Median household income (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="odd">
<td>15</td>
<td>Per capita income in past 12 months (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="even">
<td>16</td>
<td>Persons in poverty, percent</td>
</tr>
<tr class="odd">
<td>17</td>
<td>All firms, 2012</td>
</tr>
<tr class="even">
<td>*</td>
<td>Persons under 5 years, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="odd">
<td>*</td>
<td>Minority-owned firms, 2012</td>
</tr>
<tr class="even">
<td>*</td>
<td>Population per square mile, 2010</td>
</tr>
<tr class="odd">
<td>*</td>
<td>Total employer establishments, 2015</td>
</tr>
<tr class="even">
<td>*</td>
<td>Total employment, 2015</td>
</tr>
<tr class="odd">
<td>*</td>
<td>Total annual payroll, 2015 ($1,000)</td>
</tr>
<tr class="even">
<td>*</td>
<td>Total employment, percent change, 2014-2015</td>
</tr>
<tr class="odd">
<td>*</td>
<td>Total nonemployer establishments, 2015</td>
</tr>
</tbody>
</table>
<p>The 18th variable is state but in the raw data, it would have to be created by transposing the dataframe. The starred variables are just some of the ones I deem irrelevant.</p>
</section>
<section id="research-questions" class="level2">
<h2 class="anchored" data-anchor-id="research-questions">Research Questions</h2>
<p><em>In this analysis, I will answer the following research questions</em>:</p>
<blockquote class="blockquote">
<ul>
<li><em>How many guns were sold in the U.S. in selected years?</em></li>
<li><em>What kind of gun was bought the most in those years?</em></li>
<li><em>What are the overall monthly trends of gun purchases in those years?</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><p><em>What are the top 5 states in terms of gun purchases in the U.S. in those years?</em></p></li>
<li><p><em>What are the most bought gun types in those states?</em></p></li>
<li><p><em>What kind of gun was bought the most in one of those states?</em></p></li>
<li><p><em>What are the overall monthly trends of gun purchases in those states?</em></p></li>
<li><p><em>Which states had the highest growth in gun sales over the span of a decade?</em></p></li>
</ul>
</blockquote>
</section>
<section id="data-wrangling-a" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling-a">Data Wrangling (a)</h2>
<section id="general-properties" class="level3">
<h3 class="anchored" data-anchor-id="general-properties">General Properties</h3>
<p><em>Loading and inspecting the census data</em></p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importing packages.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd, numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt, seaborn <span class="im">as</span> sns</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#% matplotlib inline</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>df_census_raw <span class="op">=</span> pd.read_csv(<span class="st">'Data/US_Census_Data.csv'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>df_census_raw.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Fact</th>
<th data-quarto-table-cell-role="th">Fact Note</th>
<th data-quarto-table-cell-role="th">Alabama</th>
<th data-quarto-table-cell-role="th">Alaska</th>
<th data-quarto-table-cell-role="th">Arizona</th>
<th data-quarto-table-cell-role="th">Arkansas</th>
<th data-quarto-table-cell-role="th">California</th>
<th data-quarto-table-cell-role="th">Colorado</th>
<th data-quarto-table-cell-role="th">Connecticut</th>
<th data-quarto-table-cell-role="th">Delaware</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">South Dakota</th>
<th data-quarto-table-cell-role="th">Tennessee</th>
<th data-quarto-table-cell-role="th">Texas</th>
<th data-quarto-table-cell-role="th">Utah</th>
<th data-quarto-table-cell-role="th">Vermont</th>
<th data-quarto-table-cell-role="th">Virginia</th>
<th data-quarto-table-cell-role="th">Washington</th>
<th data-quarto-table-cell-role="th">West Virginia</th>
<th data-quarto-table-cell-role="th">Wisconsin</th>
<th data-quarto-table-cell-role="th">Wyoming</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>NaN</td>
<td>4,863,300</td>
<td>741,894</td>
<td>6,931,071</td>
<td>2,988,248</td>
<td>39,250,017</td>
<td>5,540,545</td>
<td>3,576,452</td>
<td>952,065</td>
<td>...</td>
<td>865454</td>
<td>6651194</td>
<td>27,862,596</td>
<td>3,051,217</td>
<td>624,594</td>
<td>8,411,808</td>
<td>7,288,000</td>
<td>1,831,102</td>
<td>5,778,708</td>
<td>585,501</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>NaN</td>
<td>4,780,131</td>
<td>710,249</td>
<td>6,392,301</td>
<td>2,916,025</td>
<td>37,254,522</td>
<td>5,029,324</td>
<td>3,574,114</td>
<td>897,936</td>
<td>...</td>
<td>814195</td>
<td>6346298</td>
<td>25,146,100</td>
<td>2,763,888</td>
<td>625,741</td>
<td>8,001,041</td>
<td>6,724,545</td>
<td>1,853,011</td>
<td>5,687,289</td>
<td>563,767</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>NaN</td>
<td>1.70%</td>
<td>4.50%</td>
<td>8.40%</td>
<td>2.50%</td>
<td>5.40%</td>
<td>10.20%</td>
<td>0.10%</td>
<td>6.00%</td>
<td>...</td>
<td>0.063</td>
<td>0.048</td>
<td>10.80%</td>
<td>10.40%</td>
<td>-0.20%</td>
<td>5.10%</td>
<td>8.40%</td>
<td>-1.20%</td>
<td>1.60%</td>
<td>3.90%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Population, Census, April 1, 2010</td>
<td>NaN</td>
<td>4,779,736</td>
<td>710,231</td>
<td>6,392,017</td>
<td>2,915,918</td>
<td>37,253,956</td>
<td>5,029,196</td>
<td>3,574,097</td>
<td>897,934</td>
<td>...</td>
<td>814180</td>
<td>6346105</td>
<td>25,145,561</td>
<td>2,763,885</td>
<td>625,741</td>
<td>8,001,024</td>
<td>6,724,540</td>
<td>1,852,994</td>
<td>5,686,986</td>
<td>563,626</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>NaN</td>
<td>6.00%</td>
<td>7.30%</td>
<td>6.30%</td>
<td>6.40%</td>
<td>6.30%</td>
<td>6.10%</td>
<td>5.20%</td>
<td>5.80%</td>
<td>...</td>
<td>0.071</td>
<td>0.061</td>
<td>7.20%</td>
<td>8.30%</td>
<td>4.90%</td>
<td>6.10%</td>
<td>6.20%</td>
<td>5.50%</td>
<td>5.80%</td>
<td>6.50%</td>
</tr>
</tbody>
</table>

<p>5 rows × 52 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shape of the dataframe</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df_census_raw.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>(85, 52)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># viewing all columns in the dataframe</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df_census_raw.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>Index(['Fact', 'Fact Note', 'Alabama', 'Alaska', 'Arizona', 'Arkansas',
       'California', 'Colorado', 'Connecticut', 'Delaware', 'Florida',
       'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas',
       'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts',
       'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana',
       'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico',
       'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma',
       'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina',
       'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia',
       'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'],
      dtype='object')</code></pre>
</div>
</div>
<section id="dropping-irrelevant-columns" class="level4">
<h4 class="anchored" data-anchor-id="dropping-irrelevant-columns">Dropping Irrelevant Columns</h4>
<p>In this section, I will drop all irrelevant columns from the census dataset, reshape the dataframe and then rename columns for clarity</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dropping the 'Fact Note' column</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>df_census_raw.drop(<span class="st">'Fact Note'</span>, axis<span class="op">=</span><span class="dv">1</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>df_census_raw.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Fact</th>
<th data-quarto-table-cell-role="th">Alabama</th>
<th data-quarto-table-cell-role="th">Alaska</th>
<th data-quarto-table-cell-role="th">Arizona</th>
<th data-quarto-table-cell-role="th">Arkansas</th>
<th data-quarto-table-cell-role="th">California</th>
<th data-quarto-table-cell-role="th">Colorado</th>
<th data-quarto-table-cell-role="th">Connecticut</th>
<th data-quarto-table-cell-role="th">Delaware</th>
<th data-quarto-table-cell-role="th">Florida</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">South Dakota</th>
<th data-quarto-table-cell-role="th">Tennessee</th>
<th data-quarto-table-cell-role="th">Texas</th>
<th data-quarto-table-cell-role="th">Utah</th>
<th data-quarto-table-cell-role="th">Vermont</th>
<th data-quarto-table-cell-role="th">Virginia</th>
<th data-quarto-table-cell-role="th">Washington</th>
<th data-quarto-table-cell-role="th">West Virginia</th>
<th data-quarto-table-cell-role="th">Wisconsin</th>
<th data-quarto-table-cell-role="th">Wyoming</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>4,863,300</td>
<td>741,894</td>
<td>6,931,071</td>
<td>2,988,248</td>
<td>39,250,017</td>
<td>5,540,545</td>
<td>3,576,452</td>
<td>952,065</td>
<td>20,612,439</td>
<td>...</td>
<td>865454</td>
<td>6651194</td>
<td>27,862,596</td>
<td>3,051,217</td>
<td>624,594</td>
<td>8,411,808</td>
<td>7,288,000</td>
<td>1,831,102</td>
<td>5,778,708</td>
<td>585,501</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>4,780,131</td>
<td>710,249</td>
<td>6,392,301</td>
<td>2,916,025</td>
<td>37,254,522</td>
<td>5,029,324</td>
<td>3,574,114</td>
<td>897,936</td>
<td>18,804,592</td>
<td>...</td>
<td>814195</td>
<td>6346298</td>
<td>25,146,100</td>
<td>2,763,888</td>
<td>625,741</td>
<td>8,001,041</td>
<td>6,724,545</td>
<td>1,853,011</td>
<td>5,687,289</td>
<td>563,767</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>1.70%</td>
<td>4.50%</td>
<td>8.40%</td>
<td>2.50%</td>
<td>5.40%</td>
<td>10.20%</td>
<td>0.10%</td>
<td>6.00%</td>
<td>9.60%</td>
<td>...</td>
<td>0.063</td>
<td>0.048</td>
<td>10.80%</td>
<td>10.40%</td>
<td>-0.20%</td>
<td>5.10%</td>
<td>8.40%</td>
<td>-1.20%</td>
<td>1.60%</td>
<td>3.90%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Population, Census, April 1, 2010</td>
<td>4,779,736</td>
<td>710,231</td>
<td>6,392,017</td>
<td>2,915,918</td>
<td>37,253,956</td>
<td>5,029,196</td>
<td>3,574,097</td>
<td>897,934</td>
<td>18,801,310</td>
<td>...</td>
<td>814180</td>
<td>6346105</td>
<td>25,145,561</td>
<td>2,763,885</td>
<td>625,741</td>
<td>8,001,024</td>
<td>6,724,540</td>
<td>1,852,994</td>
<td>5,686,986</td>
<td>563,626</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>6.00%</td>
<td>7.30%</td>
<td>6.30%</td>
<td>6.40%</td>
<td>6.30%</td>
<td>6.10%</td>
<td>5.20%</td>
<td>5.80%</td>
<td>5.50%</td>
<td>...</td>
<td>0.071</td>
<td>0.061</td>
<td>7.20%</td>
<td>8.30%</td>
<td>4.90%</td>
<td>6.10%</td>
<td>6.20%</td>
<td>5.50%</td>
<td>5.80%</td>
<td>6.50%</td>
</tr>
</tbody>
</table>

<p>5 rows × 51 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reshaping the dataframe</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>df_T <span class="op">=</span> df_census_raw.transpose(copy<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># observing the result</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df_T.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
<th data-quarto-table-cell-role="th">2</th>
<th data-quarto-table-cell-role="th">3</th>
<th data-quarto-table-cell-role="th">4</th>
<th data-quarto-table-cell-role="th">5</th>
<th data-quarto-table-cell-role="th">6</th>
<th data-quarto-table-cell-role="th">7</th>
<th data-quarto-table-cell-role="th">8</th>
<th data-quarto-table-cell-role="th">9</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">75</th>
<th data-quarto-table-cell-role="th">76</th>
<th data-quarto-table-cell-role="th">77</th>
<th data-quarto-table-cell-role="th">78</th>
<th data-quarto-table-cell-role="th">79</th>
<th data-quarto-table-cell-role="th">80</th>
<th data-quarto-table-cell-role="th">81</th>
<th data-quarto-table-cell-role="th">82</th>
<th data-quarto-table-cell-role="th">83</th>
<th data-quarto-table-cell-role="th">84</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Fact</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>Population, Census, April 1, 2010</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>Persons under 5 years, percent, April 1, 2010</td>
<td>Persons under 18 years, percent, July 1, 2016,...</td>
<td>Persons under 18 years, percent, April 1, 2010</td>
<td>Persons 65 years and over, percent, July 1, 2...</td>
<td>Persons 65 years and over, percent, April 1, 2010</td>
<td>...</td>
<td>NaN</td>
<td>Value Flags</td>
<td>-</td>
<td>D</td>
<td>F</td>
<td>FN</td>
<td>NaN</td>
<td>S</td>
<td>X</td>
<td>Z</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 85 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking out the new shape</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df_T.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>(51, 85)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecting the columns of interest</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df_T <span class="op">=</span> df_T.iloc[:, <span class="dv">0</span>:<span class="dv">65</span>]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>df_T.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
<th data-quarto-table-cell-role="th">2</th>
<th data-quarto-table-cell-role="th">3</th>
<th data-quarto-table-cell-role="th">4</th>
<th data-quarto-table-cell-role="th">5</th>
<th data-quarto-table-cell-role="th">6</th>
<th data-quarto-table-cell-role="th">7</th>
<th data-quarto-table-cell-role="th">8</th>
<th data-quarto-table-cell-role="th">9</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">55</th>
<th data-quarto-table-cell-role="th">56</th>
<th data-quarto-table-cell-role="th">57</th>
<th data-quarto-table-cell-role="th">58</th>
<th data-quarto-table-cell-role="th">59</th>
<th data-quarto-table-cell-role="th">60</th>
<th data-quarto-table-cell-role="th">61</th>
<th data-quarto-table-cell-role="th">62</th>
<th data-quarto-table-cell-role="th">63</th>
<th data-quarto-table-cell-role="th">64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Fact</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>Population, Census, April 1, 2010</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>Persons under 5 years, percent, April 1, 2010</td>
<td>Persons under 18 years, percent, July 1, 2016,...</td>
<td>Persons under 18 years, percent, April 1, 2010</td>
<td>Persons 65 years and over, percent, July 1, 2...</td>
<td>Persons 65 years and over, percent, April 1, 2010</td>
<td>...</td>
<td>All firms, 2012</td>
<td>Men-owned firms, 2012</td>
<td>Women-owned firms, 2012</td>
<td>Minority-owned firms, 2012</td>
<td>Nonminority-owned firms, 2012</td>
<td>Veteran-owned firms, 2012</td>
<td>Nonveteran-owned firms, 2012</td>
<td>Population per square mile, 2010</td>
<td>Land area in square miles, 2010</td>
<td>FIPS Code</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>374,153</td>
<td>203,604</td>
<td>137,630</td>
<td>92,219</td>
<td>272,651</td>
<td>41,943</td>
<td>316,984</td>
<td>94.4</td>
<td>50,645.33</td>
<td>"01"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>68,032</td>
<td>35,402</td>
<td>22,141</td>
<td>13,688</td>
<td>51,147</td>
<td>7,953</td>
<td>56,091</td>
<td>1.2</td>
<td>570,640.95</td>
<td>"02"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>499,926</td>
<td>245,243</td>
<td>182,425</td>
<td>135,313</td>
<td>344,981</td>
<td>46,780</td>
<td>427,582</td>
<td>56.3</td>
<td>113,594.08</td>
<td>"04"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>231,959</td>
<td>123,158</td>
<td>75,962</td>
<td>35,982</td>
<td>189,029</td>
<td>25,915</td>
<td>192,988</td>
<td>56</td>
<td>52,035.48</td>
<td>"05"</td>
</tr>
</tbody>
</table>

<p>5 rows × 65 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> df_T.iloc[<span class="dv">0</span>, :]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df_T.rename(columns<span class="op">=</span>columns, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>df_T.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population estimates, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population estimates base, April 1, 2010, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, percent change - April 1, 2010 (estimates base) to July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, Census, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">All firms, 2012</th>
<th data-quarto-table-cell-role="th">Men-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Women-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Minority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonminority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Veteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonveteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Population per square mile, 2010</th>
<th data-quarto-table-cell-role="th">Land area in square miles, 2010</th>
<th data-quarto-table-cell-role="th">FIPS Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Fact</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>Population, Census, April 1, 2010</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>Persons under 5 years, percent, April 1, 2010</td>
<td>Persons under 18 years, percent, July 1, 2016,...</td>
<td>Persons under 18 years, percent, April 1, 2010</td>
<td>Persons 65 years and over, percent, July 1, 2...</td>
<td>Persons 65 years and over, percent, April 1, 2010</td>
<td>...</td>
<td>All firms, 2012</td>
<td>Men-owned firms, 2012</td>
<td>Women-owned firms, 2012</td>
<td>Minority-owned firms, 2012</td>
<td>Nonminority-owned firms, 2012</td>
<td>Veteran-owned firms, 2012</td>
<td>Nonveteran-owned firms, 2012</td>
<td>Population per square mile, 2010</td>
<td>Land area in square miles, 2010</td>
<td>FIPS Code</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>374,153</td>
<td>203,604</td>
<td>137,630</td>
<td>92,219</td>
<td>272,651</td>
<td>41,943</td>
<td>316,984</td>
<td>94.4</td>
<td>50,645.33</td>
<td>"01"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>68,032</td>
<td>35,402</td>
<td>22,141</td>
<td>13,688</td>
<td>51,147</td>
<td>7,953</td>
<td>56,091</td>
<td>1.2</td>
<td>570,640.95</td>
<td>"02"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>499,926</td>
<td>245,243</td>
<td>182,425</td>
<td>135,313</td>
<td>344,981</td>
<td>46,780</td>
<td>427,582</td>
<td>56.3</td>
<td>113,594.08</td>
<td>"04"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>231,959</td>
<td>123,158</td>
<td>75,962</td>
<td>35,982</td>
<td>189,029</td>
<td>25,915</td>
<td>192,988</td>
<td>56</td>
<td>52,035.48</td>
<td>"05"</td>
</tr>
</tbody>
</table>

<p>5 rows × 65 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dropping redundant column index</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df_T.drop(<span class="st">'Fact'</span>, axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>df_T.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population estimates, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population estimates base, April 1, 2010, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, percent change - April 1, 2010 (estimates base) to July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, Census, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">All firms, 2012</th>
<th data-quarto-table-cell-role="th">Men-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Women-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Minority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonminority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Veteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonveteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Population per square mile, 2010</th>
<th data-quarto-table-cell-role="th">Land area in square miles, 2010</th>
<th data-quarto-table-cell-role="th">FIPS Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>374,153</td>
<td>203,604</td>
<td>137,630</td>
<td>92,219</td>
<td>272,651</td>
<td>41,943</td>
<td>316,984</td>
<td>94.4</td>
<td>50,645.33</td>
<td>"01"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>68,032</td>
<td>35,402</td>
<td>22,141</td>
<td>13,688</td>
<td>51,147</td>
<td>7,953</td>
<td>56,091</td>
<td>1.2</td>
<td>570,640.95</td>
<td>"02"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>499,926</td>
<td>245,243</td>
<td>182,425</td>
<td>135,313</td>
<td>344,981</td>
<td>46,780</td>
<td>427,582</td>
<td>56.3</td>
<td>113,594.08</td>
<td>"04"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>231,959</td>
<td>123,158</td>
<td>75,962</td>
<td>35,982</td>
<td>189,029</td>
<td>25,915</td>
<td>192,988</td>
<td>56</td>
<td>52,035.48</td>
<td>"05"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>39,250,017</td>
<td>37,254,522</td>
<td>5.40%</td>
<td>37,253,956</td>
<td>6.30%</td>
<td>6.80%</td>
<td>23.20%</td>
<td>25.00%</td>
<td>13.60%</td>
<td>11.40%</td>
<td>...</td>
<td>3,548,449</td>
<td>1,852,580</td>
<td>1,320,085</td>
<td>1,619,857</td>
<td>1,819,107</td>
<td>252,377</td>
<td>3,176,341</td>
<td>239.1</td>
<td>155,779.22</td>
<td>"06"</td>
</tr>
</tbody>
</table>

<p>5 rows × 65 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inspecting the shape of the reshaped dataframe</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>df_T.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>(50, 65)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inspecting all states present in the census data</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>state <span class="op">=</span> df_T.index</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>state</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>Index(['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado',
       'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii', 'Idaho',
       'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',
       'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
       'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada',
       'New Hampshire', 'New Jersey', 'New Mexico', 'New York',
       'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon',
       'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota',
       'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington',
       'West Virginia', 'Wisconsin', 'Wyoming'],
      dtype='object')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dropping irrelevant columns</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df_T.drop(columns<span class="op">=</span>[<span class="st">'Total employer establishments, 2015'</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="st">'Total employment, 2015'</span>,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="st">'Total annual payroll, 2015 ($1,000)'</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="st">'Total employment, percent change, 2014-2015'</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="st">'Total nonemployer establishments, 2015'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>df_T.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population estimates, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population estimates base, April 1, 2010, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, percent change - April 1, 2010 (estimates base) to July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, Census, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">All firms, 2012</th>
<th data-quarto-table-cell-role="th">Men-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Women-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Minority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonminority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Veteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonveteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Population per square mile, 2010</th>
<th data-quarto-table-cell-role="th">Land area in square miles, 2010</th>
<th data-quarto-table-cell-role="th">FIPS Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>374,153</td>
<td>203,604</td>
<td>137,630</td>
<td>92,219</td>
<td>272,651</td>
<td>41,943</td>
<td>316,984</td>
<td>94.4</td>
<td>50,645.33</td>
<td>"01"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>68,032</td>
<td>35,402</td>
<td>22,141</td>
<td>13,688</td>
<td>51,147</td>
<td>7,953</td>
<td>56,091</td>
<td>1.2</td>
<td>570,640.95</td>
<td>"02"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>499,926</td>
<td>245,243</td>
<td>182,425</td>
<td>135,313</td>
<td>344,981</td>
<td>46,780</td>
<td>427,582</td>
<td>56.3</td>
<td>113,594.08</td>
<td>"04"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>231,959</td>
<td>123,158</td>
<td>75,962</td>
<td>35,982</td>
<td>189,029</td>
<td>25,915</td>
<td>192,988</td>
<td>56</td>
<td>52,035.48</td>
<td>"05"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>39,250,017</td>
<td>37,254,522</td>
<td>5.40%</td>
<td>37,253,956</td>
<td>6.30%</td>
<td>6.80%</td>
<td>23.20%</td>
<td>25.00%</td>
<td>13.60%</td>
<td>11.40%</td>
<td>...</td>
<td>3,548,449</td>
<td>1,852,580</td>
<td>1,320,085</td>
<td>1,619,857</td>
<td>1,819,107</td>
<td>252,377</td>
<td>3,176,341</td>
<td>239.1</td>
<td>155,779.22</td>
<td>"06"</td>
</tr>
</tbody>
</table>

<p>5 rows × 60 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dropping more irrelevant columns</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>df_T.drop(columns<span class="op">=</span>[<span class="st">'Men-owned firms, 2012'</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="st">'Women-owned firms, 2012'</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="st">'Minority-owned firms, 2012'</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="st">'Nonminority-owned firms, 2012'</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="st">'Veteran-owned firms, 2012'</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="st">'Nonveteran-owned firms, 2012'</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="st">'Population per square mile, 2010'</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="st">'Land area in square miles, 2010'</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="st">'FIPS Code'</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="st">'In civilian labor force, total, percent of population age 16 years+, 2011-2015'</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="st">'In civilian labor force, female, percent of population age 16 years+, 2011-2015'</span>,</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="st">'Total accommodation and food services sales, 2012 ($1,000)'</span>,</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="st">'Total health care and social assistance receipts/revenue, 2012 ($1,000)'</span>,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="st">'Total manufacturers shipments, 2012 ($1,000)'</span>,</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="st">'Total merchant wholesaler sales, 2012 ($1,000)'</span>,</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="st">'Total retail sales, 2012 ($1,000)'</span>,</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="st">'Total retail sales per capita, 2012'</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="st">'Mean travel time to work (minutes), workers age 16 years+, 2011-2015'</span>,</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="st">'With a disability, under age 65 years, percent, 2011-2015'</span>,</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="st">'Living in same house 1 year ago, percent of persons age 1 year+, 2011-2015'</span>,</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="st">'Language other than English spoken at home, percent of persons age 5 years+, 2011-2015'</span>,</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="st">'Building permits, 2016'</span>,</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="st">'Households, 2011-2015'</span>,</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="st">'Median selected monthly owner costs -with a mortgage, 2011-2015'</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="st">'Median selected monthly owner costs -without a mortgage, 2011-2015'</span>,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a><span class="st">'Native Hawaiian and Other Pacific Islander alone, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a><span class="st">'Two or More Races, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="st">'Hispanic or Latino, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a><span class="st">'White alone, not Hispanic or Latino, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a><span class="st">'Veterans, 2011-2015'</span>,</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a><span class="st">'Foreign born persons, percent, 2011-2015'</span>,</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a><span class="st">'Housing units,  July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a><span class="st">'Housing units, April 1, 2010'</span>,</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="st">'Owner-occupied housing unit rate, 2011-2015'</span>,</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a><span class="st">'American Indian and Alaska Native alone, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a><span class="st">'Persons 65 years and over, percent, April 1, 2010'</span>,</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a><span class="st">'Female persons, percent, April 1, 2010'</span>,</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a><span class="st">'Persons under 18 years, percent, April 1, 2010'</span>,</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a><span class="st">'Persons under 5 years, percent, April 1, 2010'</span>,</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a><span class="st">'Population estimates base, April 1, 2010,  (V2016)'</span>,</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a><span class="st">'Population, percent change - April 1, 2010 (estimates base) to July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a><span class="st">'Population, Census, April 1, 2010'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>df_T.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population estimates, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Female persons, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">White alone, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Black or African American alone, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Asian alone, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Median value of owner-occupied housing units, 2011-2015</th>
<th data-quarto-table-cell-role="th">Median gross rent, 2011-2015</th>
<th data-quarto-table-cell-role="th">Persons per household, 2011-2015</th>
<th data-quarto-table-cell-role="th">High school graduate or higher, percent of persons age 25 years+, 2011-2015</th>
<th data-quarto-table-cell-role="th">Bachelor's degree or higher, percent of persons age 25 years+, 2011-2015</th>
<th data-quarto-table-cell-role="th">Persons without health insurance, under age 65 years, percent</th>
<th data-quarto-table-cell-role="th">Median household income (in 2015 dollars), 2011-2015</th>
<th data-quarto-table-cell-role="th">Per capita income in past 12 months (in 2015 dollars), 2011-2015</th>
<th data-quarto-table-cell-role="th">Persons in poverty, percent</th>
<th data-quarto-table-cell-role="th">All firms, 2012</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>6.00%</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>7.30%</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6.30%</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking dataframe</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>df_T.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>(50, 18)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking columns</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>df_T.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>Index(['Population estimates, July 1, 2016,  (V2016)',
       'Persons under 5 years, percent, July 1, 2016,  (V2016)',
       'Persons under 18 years, percent, July 1, 2016,  (V2016)',
       'Persons 65 years and over, percent,  July 1, 2016,  (V2016)',
       'Female persons, percent,  July 1, 2016,  (V2016)',
       'White alone, percent, July 1, 2016,  (V2016)',
       'Black or African American alone, percent, July 1, 2016,  (V2016)',
       'Asian alone, percent, July 1, 2016,  (V2016)',
       'Median value of owner-occupied housing units, 2011-2015',
       'Median gross rent, 2011-2015', 'Persons per household, 2011-2015',
       'High school graduate or higher, percent of persons age 25 years+, 2011-2015',
       'Bachelor's degree or higher, percent of persons age 25 years+, 2011-2015',
       'Persons  without health insurance, under age 65 years, percent',
       'Median household income (in 2015 dollars), 2011-2015',
       'Per capita income in past 12 months (in 2015 dollars), 2011-2015',
       'Persons in poverty, percent', 'All firms, 2012'],
      dtype='object')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># renaming the columns for clarity</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>df_T.rename(columns<span class="op">=</span>{<span class="st">'Population estimates, July 1, 2016,  (V2016)'</span>:<span class="st">'pop_2016'</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="st">'Persons under 5 years, percent, July 1, 2016,  (V2016)'</span>:<span class="st">'under_5'</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="st">'Persons under 18 years, percent, July 1, 2016,  (V2016)'</span>:<span class="st">'under_18'</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="st">'Persons 65 years and over, percent,  July 1, 2016,  (V2016)'</span>:<span class="st">'65_above'</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="st">'Female persons, percent,  July 1, 2016,  (V2016)'</span>:<span class="st">'female_pct'</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="st">'White alone, percent, July 1, 2016,  (V2016)'</span>:<span class="st">'white_pct'</span>,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="st">'Black or African American alone, percent, July 1, 2016,  (V2016)'</span>:<span class="st">'black_pct'</span>,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="st">'Asian alone, percent, July 1, 2016,  (V2016)'</span>:<span class="st">'asian_pct'</span>,</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="st">'Median value of owner-occupied housing units, 2011-2015'</span>:<span class="st">'median_hu'</span>,</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="st">'Median gross rent, 2011-2015'</span>:<span class="st">'median_gross_rent'</span>,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="st">'Persons per household, 2011-2015'</span>:<span class="st">'pe_hh'</span>,</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="st">'High school graduate or higher, percent of persons age 25 years+, 2011-2015'</span>:<span class="st">'high_school_grad_higher'</span>,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="st">'Bachelor</span><span class="ch">\'</span><span class="st">s degree or higher, percent of persons age 25 years+, 2011-2015'</span>:<span class="st">'bsc_higher'</span>,</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="st">'Persons  without health insurance, under age 65 years, percent'</span>:<span class="st">'pe_whi'</span>,</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="st">'Median household income (in 2015 dollars), 2011-2015'</span>:<span class="st">'median_hh_income'</span>,</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="st">'Per capita income in past 12 months (in 2015 dollars), 2011-2015'</span>:<span class="st">'per_cap_inc'</span>,</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="st">'Persons in poverty, percent'</span>:<span class="st">'poverty_pct'</span>,</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="st">'All firms, 2012'</span>:<span class="st">'firms'</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>df_T.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_5</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>6.00%</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>7.30%</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6.30%</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>6.40%</td>
<td>23.60%</td>
<td>16.30%</td>
<td>50.90%</td>
<td>79.40%</td>
<td>15.70%</td>
<td>1.60%</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.80%</td>
<td>21.10%</td>
<td>9.30%</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.20%</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>39,250,017</td>
<td>6.30%</td>
<td>23.20%</td>
<td>13.60%</td>
<td>50.30%</td>
<td>72.70%</td>
<td>6.50%</td>
<td>14.80%</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.80%</td>
<td>31.40%</td>
<td>8.30%</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.30%</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I subsequently decided to drop 'under_5' as it relates little to the problem statement</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>df_T.drop(columns<span class="op">=</span><span class="st">'under_5'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data" class="level3">
<h3 class="anchored" data-anchor-id="in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data">In this section I will assess the data to spot irregularities and then clean the data</h3>
<p>Using pandas to explore&nbsp;<code>df_T</code>&nbsp;to answer the following questions about the characteristics of the datasets:</p>
<ul>
<li><p><em>number of states in each dataset</em></p></li>
<li><p><em>number of columns in each datase</em>t</p></li>
<li><p><em>duplicate rows in each dataset</em></p></li>
<li><p><em>datatypes of columns</em></p></li>
<li><p><em>features with missing values</em></p></li>
<li><p><em>number of non-null unique values for features in each dataset</em></p></li>
<li><p><em>what those unique values are and counts for each</em></p></li>
<li><p><em>Number of rows with missing values in each dataset</em></p></li>
<li><p><em>Types of fuels present in each dataset</em></p></li>
</ul>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking out the head of the dataframe</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>df_T.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>23.60%</td>
<td>16.30%</td>
<td>50.90%</td>
<td>79.40%</td>
<td>15.70%</td>
<td>1.60%</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.80%</td>
<td>21.10%</td>
<td>9.30%</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.20%</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>39,250,017</td>
<td>23.20%</td>
<td>13.60%</td>
<td>50.30%</td>
<td>72.70%</td>
<td>6.50%</td>
<td>14.80%</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.80%</td>
<td>31.40%</td>
<td>8.30%</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.30%</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of states</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'There are </span><span class="sc">{</span>df_T<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> rows (representing each state in the contiguous U.S. and Alaska) in this dataset'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 50 rows (representing each state in the contiguous U.S. and Alaska) in this dataset</code></pre>
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of columns</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'There are </span><span class="sc">{</span>df_T<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss"> columns'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 17 columns</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of duplicate rows</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>df_T.duplicated().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># datatypes of each column</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>df_T.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 50 entries, Alabama to Wyoming
Data columns (total 17 columns):
 #   Column                   Non-Null Count  Dtype 
---  ------                   --------------  ----- 
 0   pop_2016                 50 non-null     object
 1   under_18                 50 non-null     object
 2   65_above                 50 non-null     object
 3   female_pct               50 non-null     object
 4   white_pct                50 non-null     object
 5   black_pct                50 non-null     object
 6   asian_pct                50 non-null     object
 7   median_hu                50 non-null     object
 8   median_gross_rent        50 non-null     object
 9   pe_hh                    50 non-null     object
 10  high_school_grad_higher  50 non-null     object
 11  bsc_higher               50 non-null     object
 12  pe_whi                   50 non-null     object
 13  median_hh_income         50 non-null     object
 14  per_cap_inc              50 non-null     object
 15  poverty_pct              50 non-null     object
 16  firms                    50 non-null     object
dtypes: object(17)
memory usage: 7.0+ KB</code></pre>
</div>
</div>
<p>The datatypes are oddly all in object type. This was because of the transpose function I used earlier in the script to convert the data from wide to long According to the pandas documentation, when <em>transpose()</em> is called upon a dataframe with heterogeneous datatypes, all the columns are converted to the object datatype.</p>
<p>I will fix this later.</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># features with missing values</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>df_T.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>pop_2016                   0
under_18                   0
65_above                   0
female_pct                 0
white_pct                  0
black_pct                  0
asian_pct                  0
median_hu                  0
median_gross_rent          0
pe_hh                      0
high_school_grad_higher    0
bsc_higher                 0
pe_whi                     0
median_hh_income           0
per_cap_inc                0
poverty_pct                0
firms                      0
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of rows with missing values</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>df_T.isnull().<span class="bu">any</span>(axis<span class="op">=</span><span class="dv">1</span>).<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saving for later</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>df_T.to_csv(<span class="st">'Data/df_T_01.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reading in the data</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>df_U <span class="op">=</span> pd.read_csv(<span class="st">'Data/df_T_01.csv'</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>df_U.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4,863,300</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741,894</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6,931,071</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2,988,248</td>
<td>23.60%</td>
<td>16.30%</td>
<td>50.90%</td>
<td>79.40%</td>
<td>15.70%</td>
<td>1.60%</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.80%</td>
<td>21.10%</td>
<td>9.30%</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.20%</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39,250,017</td>
<td>23.20%</td>
<td>13.60%</td>
<td>50.30%</td>
<td>72.70%</td>
<td>6.50%</td>
<td>14.80%</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.80%</td>
<td>31.40%</td>
<td>8.30%</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.30%</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dropping renaming column</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>df_U.rename(columns<span class="op">=</span>{<span class="st">'Unnamed: 0'</span>:<span class="st">'state'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>df_U.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4,863,300</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741,894</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6,931,071</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2,988,248</td>
<td>23.60%</td>
<td>16.30%</td>
<td>50.90%</td>
<td>79.40%</td>
<td>15.70%</td>
<td>1.60%</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.80%</td>
<td>21.10%</td>
<td>9.30%</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.20%</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39,250,017</td>
<td>23.20%</td>
<td>13.60%</td>
<td>50.30%</td>
<td>72.70%</td>
<td>6.50%</td>
<td>14.80%</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.80%</td>
<td>31.40%</td>
<td>8.30%</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.30%</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>One of the reasons the data is stored as the object type is because of the ‘%’, ‘,’, and ‘$’ symbols. In the following cells, I remove these offending characters</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extracting digits from the following columns using regex</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>cols_extract <span class="op">=</span> [<span class="st">'under_18'</span>,<span class="st">'65_above'</span>, <span class="st">'female_pct'</span>, <span class="st">'white_pct'</span>, <span class="st">'black_pct'</span>, <span class="st">'asian_pct'</span>,<span class="st">'high_school_grad_higher'</span>, <span class="st">'bsc_higher'</span>, <span class="st">'pe_whi'</span>, <span class="st">'poverty_pct'</span>]</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> cols_extract:</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    df_U[col]<span class="op">=</span> df_U[col].<span class="bu">str</span>.extract(<span class="vs">r'(\d*\.?\d+)'</span>).astype(<span class="bu">float</span>)</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>df_U.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4,863,300</td>
<td>22.6</td>
<td>16.1</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.1</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741,894</td>
<td>25.2</td>
<td>10.4</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.9</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6,931,071</td>
<td>23.5</td>
<td>16.9</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.4</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2,988,248</td>
<td>23.6</td>
<td>16.3</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.2</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39,250,017</td>
<td>23.2</td>
<td>13.6</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.3</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># removing the dollar sign symbol using a lambda function and converting to the float datatype</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>cols_extract <span class="op">=</span> [<span class="st">'pop_2016'</span>, <span class="st">'median_hu'</span>, <span class="st">'median_gross_rent'</span>, <span class="st">'median_hh_income'</span>, <span class="st">'per_cap_inc'</span>, <span class="st">'firms'</span>]</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> cols_extract:</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    df_U[col]<span class="op">=</span> df_U[col].<span class="bu">apply</span>(<span class="kw">lambda</span> x: x.replace(<span class="st">'$'</span>,<span class="st">''</span>).replace(<span class="st">','</span>,<span class="st">''</span>) <span class="cf">if</span> <span class="bu">isinstance</span>(x, <span class="bu">str</span>) <span class="cf">else</span> x).astype(<span class="bu">float</span>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>df_U.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>22.6</td>
<td>16.1</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>125500.0</td>
<td>717.0</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>43623.0</td>
<td>24091.0</td>
<td>17.1</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>25.2</td>
<td>10.4</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>250000.0</td>
<td>1146.0</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>72515.0</td>
<td>33413.0</td>
<td>9.9</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>23.5</td>
<td>16.9</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>167500.0</td>
<td>913.0</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>50255.0</td>
<td>25848.0</td>
<td>16.4</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>23.6</td>
<td>16.3</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>111400.0</td>
<td>677.0</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>41371.0</td>
<td>22798.0</td>
<td>17.2</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>23.2</td>
<td>13.6</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>385500.0</td>
<td>1255.0</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>14.3</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking the transformed datatypes</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>df_U.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 50 entries, 0 to 49
Data columns (total 18 columns):
 #   Column                   Non-Null Count  Dtype  
---  ------                   --------------  -----  
 0   state                    50 non-null     object 
 1   pop_2016                 50 non-null     float64
 2   under_18                 50 non-null     float64
 3   65_above                 50 non-null     float64
 4   female_pct               50 non-null     float64
 5   white_pct                50 non-null     float64
 6   black_pct                50 non-null     float64
 7   asian_pct                50 non-null     float64
 8   median_hu                50 non-null     float64
 9   median_gross_rent        50 non-null     float64
 10  pe_hh                    50 non-null     float64
 11  high_school_grad_higher  50 non-null     float64
 12  bsc_higher               50 non-null     float64
 13  pe_whi                   50 non-null     float64
 14  median_hh_income         50 non-null     float64
 15  per_cap_inc              50 non-null     float64
 16  poverty_pct              50 non-null     float64
 17  firms                    50 non-null     float64
dtypes: float64(17), object(1)
memory usage: 7.2+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shape of the new dataframe</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>df_U.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>(50, 18)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tail of the new dataframe</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>df_U.tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">45</td>
<td>Virginia</td>
<td>8411808.0</td>
<td>22.2</td>
<td>14.6</td>
<td>50.8</td>
<td>70.0</td>
<td>19.8</td>
<td>6.6</td>
<td>245000.0</td>
<td>1116.0</td>
<td>2.62</td>
<td>88.3</td>
<td>36.3</td>
<td>10.1</td>
<td>65015.0</td>
<td>34152.0</td>
<td>11.0</td>
<td>653193.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">46</td>
<td>Washington</td>
<td>7288000.0</td>
<td>22.4</td>
<td>14.8</td>
<td>50.0</td>
<td>80.0</td>
<td>4.1</td>
<td>8.6</td>
<td>259500.0</td>
<td>1014.0</td>
<td>2.56</td>
<td>90.4</td>
<td>32.9</td>
<td>6.9</td>
<td>61062.0</td>
<td>31762.0</td>
<td>11.3</td>
<td>541522.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">47</td>
<td>West Virginia</td>
<td>1831102.0</td>
<td>20.5</td>
<td>18.8</td>
<td>50.5</td>
<td>93.6</td>
<td>3.6</td>
<td>0.8</td>
<td>103800.0</td>
<td>643.0</td>
<td>2.43</td>
<td>85.0</td>
<td>19.2</td>
<td>6.5</td>
<td>41751.0</td>
<td>23450.0</td>
<td>17.9</td>
<td>114435.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">48</td>
<td>Wisconsin</td>
<td>5778708.0</td>
<td>22.3</td>
<td>16.1</td>
<td>50.3</td>
<td>87.5</td>
<td>6.6</td>
<td>2.8</td>
<td>165800.0</td>
<td>776.0</td>
<td>2.43</td>
<td>91.0</td>
<td>27.8</td>
<td>6.2</td>
<td>53357.0</td>
<td>28340.0</td>
<td>11.8</td>
<td>432980.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>Wyoming</td>
<td>585501.0</td>
<td>23.7</td>
<td>15.0</td>
<td>48.9</td>
<td>92.8</td>
<td>1.3</td>
<td>1.0</td>
<td>194800.0</td>
<td>789.0</td>
<td>2.49</td>
<td>92.3</td>
<td>25.7</td>
<td>13.4</td>
<td>58840.0</td>
<td>29803.0</td>
<td>11.3</td>
<td>62427.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summary statistics</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>df_U.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>5.000000e+01</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>5.000000e+01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>6.448927e+06</td>
<td>17.425780</td>
<td>11.81044</td>
<td>38.511740</td>
<td>60.397020</td>
<td>8.360900</td>
<td>3.63118</td>
<td>192026.000000</td>
<td>879.880000</td>
<td>2.582000</td>
<td>67.424100</td>
<td>22.363160</td>
<td>7.078540</td>
<td>54311.860000</td>
<td>28491.780000</td>
<td>10.05498</td>
<td>5.548918e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>7.271769e+06</td>
<td>9.936137</td>
<td>6.84738</td>
<td>21.584467</td>
<td>35.861896</td>
<td>9.917937</td>
<td>5.79106</td>
<td>79742.431821</td>
<td>181.106761</td>
<td>0.164105</td>
<td>37.882927</td>
<td>13.383697</td>
<td>5.044314</td>
<td>8949.529115</td>
<td>4103.284534</td>
<td>6.26358</td>
<td>6.645229e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>5.855010e+05</td>
<td>0.197000</td>
<td>0.14500</td>
<td>0.487000</td>
<td>0.685000</td>
<td>0.020000</td>
<td>0.01500</td>
<td>103100.000000</td>
<td>643.000000</td>
<td>2.320000</td>
<td>0.842000</td>
<td>0.241000</td>
<td>0.051000</td>
<td>39665.000000</td>
<td>21057.000000</td>
<td>0.10700</td>
<td>6.242700e+04</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>1.850106e+06</td>
<td>19.025000</td>
<td>10.42500</td>
<td>48.000000</td>
<td>34.175000</td>
<td>0.650000</td>
<td>0.80000</td>
<td>136600.000000</td>
<td>743.500000</td>
<td>2.482500</td>
<td>81.825000</td>
<td>19.575000</td>
<td>3.225000</td>
<td>47526.000000</td>
<td>25443.750000</td>
<td>7.80000</td>
<td>1.478222e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>4.559320e+06</td>
<td>22.250000</td>
<td>15.00000</td>
<td>50.300000</td>
<td>77.400000</td>
<td>4.700000</td>
<td>2.35000</td>
<td>165900.000000</td>
<td>818.500000</td>
<td>2.550000</td>
<td>87.850000</td>
<td>27.200000</td>
<td>7.050000</td>
<td>52601.000000</td>
<td>27669.500000</td>
<td>11.35000</td>
<td>3.535155e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>7.198768e+06</td>
<td>23.450000</td>
<td>16.10000</td>
<td>50.900000</td>
<td>87.275000</td>
<td>12.400000</td>
<td>4.55000</td>
<td>237300.000000</td>
<td>1001.500000</td>
<td>2.637500</td>
<td>90.625000</td>
<td>31.075000</td>
<td>10.100000</td>
<td>60599.000000</td>
<td>30977.000000</td>
<td>14.25000</td>
<td>5.933612e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>3.925002e+07</td>
<td>30.200000</td>
<td>19.90000</td>
<td>51.600000</td>
<td>94.800000</td>
<td>37.700000</td>
<td>37.70000</td>
<td>515300.000000</td>
<td>1438.000000</td>
<td>3.150000</td>
<td>92.800000</td>
<td>40.500000</td>
<td>18.600000</td>
<td>74551.000000</td>
<td>38803.000000</td>
<td>20.80000</td>
<td>3.548449e+06</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saving for later</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>df_U.to_csv(<span class="st">'Data/df_census_cleaned.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, on to wrangle the second dataset in this project – NCIS gun data</p>
</section>
</section>
<section id="data-wrangling-b" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling-b">Data Wrangling (b)</h2>
<section id="general-properties-1" class="level3">
<h3 class="anchored" data-anchor-id="general-properties-1">General Properties</h3>
<p><em>Loading and inspecting the census data</em></p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reading the data in</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>df_gun <span class="op">=</span> pd.read_excel(<span class="st">'Data/gun_data.xlsx'</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>df_gun.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">permit</th>
<th data-quarto-table-cell-role="th">permit_recheck</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">other</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">admin</th>
<th data-quarto-table-cell-role="th">prepawn_handgun</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">returned_other</th>
<th data-quarto-table-cell-role="th">rentals_handgun</th>
<th data-quarto-table-cell-role="th">rentals_long_gun</th>
<th data-quarto-table-cell-role="th">private_sale_handgun</th>
<th data-quarto-table-cell-role="th">private_sale_long_gun</th>
<th data-quarto-table-cell-role="th">private_sale_other</th>
<th data-quarto-table-cell-role="th">return_to_seller_handgun</th>
<th data-quarto-table-cell-role="th">return_to_seller_long_gun</th>
<th data-quarto-table-cell-role="th">return_to_seller_other</th>
<th data-quarto-table-cell-role="th">totals</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2017-09</td>
<td>Alabama</td>
<td>16717.0</td>
<td>0.0</td>
<td>5734.0</td>
<td>6320.0</td>
<td>221.0</td>
<td>317</td>
<td>0.0</td>
<td>15.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>9.0</td>
<td>16.0</td>
<td>3.0</td>
<td>0.0</td>
<td>0.0</td>
<td>3.0</td>
<td>32019</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2017-09</td>
<td>Alaska</td>
<td>209.0</td>
<td>2.0</td>
<td>2320.0</td>
<td>2930.0</td>
<td>219.0</td>
<td>160</td>
<td>0.0</td>
<td>5.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>17.0</td>
<td>24.0</td>
<td>1.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>6303</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2017-09</td>
<td>Arizona</td>
<td>5069.0</td>
<td>382.0</td>
<td>11063.0</td>
<td>7946.0</td>
<td>920.0</td>
<td>631</td>
<td>0.0</td>
<td>13.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>38.0</td>
<td>12.0</td>
<td>2.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>28394</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2017-09</td>
<td>Arkansas</td>
<td>2935.0</td>
<td>632.0</td>
<td>4347.0</td>
<td>6063.0</td>
<td>165.0</td>
<td>366</td>
<td>51.0</td>
<td>12.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>13.0</td>
<td>23.0</td>
<td>0.0</td>
<td>0.0</td>
<td>2.0</td>
<td>1.0</td>
<td>17747</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2017-09</td>
<td>California</td>
<td>57839.0</td>
<td>0.0</td>
<td>37165.0</td>
<td>24581.0</td>
<td>2984.0</td>
<td>0</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>123506</td>
</tr>
</tbody>
</table>

<p>5 rows × 27 columns</p>
</div>
</div>
</div>
</section>
<section id="in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data-1" class="level3">
<h3 class="anchored" data-anchor-id="in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data-1">In this section I will assess the data to spot irregularities and then clean the data</h3>
<p>Using pandas to explore <code>df_T</code> to answer the following questions about the characteristics of the datasets:</p>
<ul>
<li><p><em>number of states in each dataset</em></p></li>
<li><p><em>number of columns in each datase</em>t</p></li>
<li><p><em>duplicate rows in each dataset</em></p></li>
<li><p><em>datatypes of columns</em></p></li>
<li><p><em>features with missing values</em></p></li>
<li><p><em>number of non-null unique values for features in each dataset</em></p></li>
<li><p><em>what those unique values are and counts for each</em></p></li>
<li><p><em>Number of rows with missing values in each dataset</em></p></li>
<li><p><em>Types of fuels present in each dataset</em></p></li>
</ul>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecting relevant columns</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>col_gun <span class="op">=</span> [<span class="st">'state'</span>, <span class="st">'month'</span>, <span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>df_gun_raw <span class="op">=</span>  df_gun[col_gun]</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>df_gun_raw.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>2017-09</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2017-09</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>2017-09</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2017-09</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>2017-09</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of rows</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Rows: </span><span class="sc">{</span>df_gun_raw<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># number of columns</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Columns: </span><span class="sc">{</span>df_gun_raw<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 12485
Columns: 5</code></pre>
</div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicate rows </span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw.duplicated().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># datatypes of columns</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 5 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   month     12485 non-null  object 
 2   handgun   12465 non-null  float64
 3   long_gun  12466 non-null  float64
 4   multiple  12485 non-null  int64  
dtypes: float64(2), int64(1), object(2)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of non-null unique values for features</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw[<span class="st">'state'</span>].nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>55</code></pre>
</div>
</div>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># what those unique values are and counts for each</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw.state.value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>state
Alabama                 227
Puerto Rico             227
Nevada                  227
New Hampshire           227
New Jersey              227
New Mexico              227
New York                227
North Carolina          227
North Dakota            227
Ohio                    227
Oklahoma                227
Oregon                  227
Pennsylvania            227
Rhode Island            227
Montana                 227
South Carolina          227
South Dakota            227
Tennessee               227
Texas                   227
Utah                    227
Vermont                 227
Virgin Islands          227
Virginia                227
Washington              227
West Virginia           227
Wisconsin               227
Nebraska                227
Missouri                227
Alaska                  227
Idaho                   227
Arizona                 227
Arkansas                227
California              227
Colorado                227
Connecticut             227
Delaware                227
District of Columbia    227
Florida                 227
Georgia                 227
Guam                    227
Hawaii                  227
Illinois                227
Mississippi             227
Indiana                 227
Iowa                    227
Kansas                  227
Kentucky                227
Louisiana               227
Maine                   227
Mariana Islands         227
Maryland                227
Massachusetts           227
Michigan                227
Minnesota               227
Wyoming                 227
Name: count, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># observing the result</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 5 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   month     12485 non-null  object 
 2   handgun   12465 non-null  float64
 3   long_gun  12466 non-null  float64
 4   multiple  12485 non-null  int64  
dtypes: float64(2), int64(1), object(2)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># renaming the column appropriately</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw.rename(columns<span class="op">=</span>{<span class="st">'month'</span>:<span class="st">'date'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>df_gun_raw.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 5 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   date      12485 non-null  object 
 2   handgun   12465 non-null  float64
 3   long_gun  12466 non-null  float64
 4   multiple  12485 non-null  int64  
dtypes: float64(2), int64(1), object(2)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># converting to datetime</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw[<span class="st">'date'</span>] <span class="op">=</span> pd.to_datetime(df_gun_raw[<span class="st">'date'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'%Y-%m'</span>)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>df_gun_raw[<span class="st">'date'</span>].head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>0   2017-09-01
1   2017-09-01
2   2017-09-01
3   2017-09-01
4   2017-09-01
Name: date, dtype: datetime64[ns]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>df_gun_raw.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 5 columns):
 #   Column    Non-Null Count  Dtype         
---  ------    --------------  -----         
 0   state     12485 non-null  object        
 1   date      12485 non-null  datetime64[ns]
 2   handgun   12465 non-null  float64       
 3   long_gun  12466 non-null  float64       
 4   multiple  12485 non-null  int64         
dtypes: datetime64[ns](1), float64(2), int64(1), object(1)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>df_gun_raw.date.dt.year</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>0        2017
1        2017
2        2017
3        2017
4        2017
         ... 
12480    1998
12481    1998
12482    1998
12483    1998
12484    1998
Name: date, Length: 12485, dtype: int32</code></pre>
</div>
</div>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extracting year and month data from the date column</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw[<span class="st">'year'</span>] <span class="op">=</span> df_gun_raw[<span class="st">'date'</span>].dt.year</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>df_gun_raw[<span class="st">'month'</span>] <span class="op">=</span> df_gun_raw[<span class="st">'date'</span>].dt.month</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>df_gun_raw.head(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>2017-09-01</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dropping the redundant date column</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw.drop(columns<span class="op">=</span><span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>df_gun_raw.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># observing the tail of the data</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw.tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">12480</td>
<td>Virginia</td>
<td>14.0</td>
<td>2.0</td>
<td>8</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12481</td>
<td>Washington</td>
<td>65.0</td>
<td>286.0</td>
<td>8</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12482</td>
<td>West Virginia</td>
<td>149.0</td>
<td>251.0</td>
<td>5</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12483</td>
<td>Wisconsin</td>
<td>25.0</td>
<td>214.0</td>
<td>2</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12484</td>
<td>Wyoming</td>
<td>45.0</td>
<td>49.0</td>
<td>5</td>
<td>1998</td>
<td>11</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking out metadata of dataframe</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 6 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   handgun   12465 non-null  float64
 2   long_gun  12466 non-null  float64
 3   multiple  12485 non-null  int64  
 4   year      12485 non-null  int32  
 5   month     12485 non-null  int32  
dtypes: float64(2), int32(2), int64(1), object(1)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saving data for later</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>df_gun_raw.to_csv(<span class="st">'Data/df_gun_cleaned.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="further-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="further-wrangling">Further Wrangling</h2>
<section id="in-this-section-i-will-further-wrangle-the-dataframes-and-derive-calculated-columns" class="level3">
<h3 class="anchored" data-anchor-id="in-this-section-i-will-further-wrangle-the-dataframes-and-derive-calculated-columns"><em>In this section, I will further wrangle the dataframes and derive calculated columns</em></h3>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reading in the census data</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>df1<span class="op">=</span>pd.read_csv(<span class="st">'Data/df_census_cleaned.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>df1.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>22.6</td>
<td>16.1</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>125500.0</td>
<td>717.0</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>43623.0</td>
<td>24091.0</td>
<td>17.1</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>25.2</td>
<td>10.4</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>250000.0</td>
<td>1146.0</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>72515.0</td>
<td>33413.0</td>
<td>9.9</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>23.5</td>
<td>16.9</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>167500.0</td>
<td>913.0</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>50255.0</td>
<td>25848.0</td>
<td>16.4</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>23.6</td>
<td>16.3</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>111400.0</td>
<td>677.0</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>41371.0</td>
<td>22798.0</td>
<td>17.2</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>23.2</td>
<td>13.6</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>385500.0</td>
<td>1255.0</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>14.3</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reading in the gun sales data</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>df2<span class="op">=</span>pd.read_csv(<span class="st">'Data/df_gun_cleaned.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>df2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking out the shape of the census dataframe</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>df1.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>(50, 18)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking out the shape of the gun dataframe</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>df2.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>(12485, 6)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I want to have a calculated column for the % of adult population (between 18 &amp; 65),</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="co"># as I think this would be more relevant to the analysis than the data on children and elderly population</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">'adults_below_65'</span>] <span class="op">=</span> <span class="dv">100</span> <span class="op">-</span> (df1[<span class="st">'under_18'</span>]  <span class="op">+</span>  df1[<span class="st">'65_above'</span>])</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>df1.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>22.6</td>
<td>16.1</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>125500.0</td>
<td>717.0</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>43623.0</td>
<td>24091.0</td>
<td>17.1</td>
<td>374153.0</td>
<td>61.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>25.2</td>
<td>10.4</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>250000.0</td>
<td>1146.0</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>72515.0</td>
<td>33413.0</td>
<td>9.9</td>
<td>68032.0</td>
<td>64.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>23.5</td>
<td>16.9</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>167500.0</td>
<td>913.0</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>50255.0</td>
<td>25848.0</td>
<td>16.4</td>
<td>499926.0</td>
<td>59.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>23.6</td>
<td>16.3</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>111400.0</td>
<td>677.0</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>41371.0</td>
<td>22798.0</td>
<td>17.2</td>
<td>231959.0</td>
<td>60.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>23.2</td>
<td>13.6</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>385500.0</td>
<td>1255.0</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>14.3</td>
<td>3548449.0</td>
<td>63.2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dropping the afore-used columns</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>df1.drop(columns<span class="op">=</span>[<span class="st">'under_18'</span>, <span class="st">'65_above'</span>], inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>df1.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>125500.0</td>
<td>717.0</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>43623.0</td>
<td>24091.0</td>
<td>17.1</td>
<td>374153.0</td>
<td>61.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>250000.0</td>
<td>1146.0</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>72515.0</td>
<td>33413.0</td>
<td>9.9</td>
<td>68032.0</td>
<td>64.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>167500.0</td>
<td>913.0</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>50255.0</td>
<td>25848.0</td>
<td>16.4</td>
<td>499926.0</td>
<td>59.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>111400.0</td>
<td>677.0</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>41371.0</td>
<td>22798.0</td>
<td>17.2</td>
<td>231959.0</td>
<td>60.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>385500.0</td>
<td>1255.0</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>14.3</td>
<td>3548449.0</td>
<td>63.2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grouping the columns in similar group</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>demographic <span class="op">=</span> [</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'state'</span>,</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pop_2016"</span>,</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"female_pct"</span>,</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"white_pct"</span>,</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"black_pct"</span>,</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"asian_pct"</span>,</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pe_hh"</span>,</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"pe_whi"</span>,</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"adults_below_65"</span></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>education <span class="op">=</span> [</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"high_school_grad_higher"</span>,</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"bsc_higher"</span></span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-20"><a href="#cb87-20" aria-hidden="true" tabindex="-1"></a>finances <span class="op">=</span> [</span>
<span id="cb87-21"><a href="#cb87-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"median_hu"</span>,</span>
<span id="cb87-22"><a href="#cb87-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"median_gross_rent"</span>,</span>
<span id="cb87-23"><a href="#cb87-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"poverty_pct"</span>,</span>
<span id="cb87-24"><a href="#cb87-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"median_hh_income"</span>,</span>
<span id="cb87-25"><a href="#cb87-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"per_cap_inc"</span>,</span>
<span id="cb87-26"><a href="#cb87-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"firms"</span></span>
<span id="cb87-27"><a href="#cb87-27" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># new column ordering</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>new_col_order <span class="op">=</span> (demographic <span class="op">+</span> education <span class="op">+</span> finances)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="co"># checking if the number of items in new_col_order is the same as in the original column</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span>(df1.columns) <span class="op">==</span> <span class="bu">set</span>(new_col_order)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>True</code></pre>
</div>
</div>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># proceeding to reorder</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> df1[new_col_order]</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>df1.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>2.55</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>2.81</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>2.69</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>2.53</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>2.96</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saving for later</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>df1.to_csv(<span class="st">'Data/df_census_cleaned_1.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="exploratory-data-analysis-1" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis-1">Exploratory Data Analysis 1</h2>
<section id="census-data" class="level3">
<h3 class="anchored" data-anchor-id="census-data">(Census Data)</h3>
<div class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reading in the dataset, and viewing heads, tails and  and random sample of the rows </span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df_census_cleaned_1.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>df1.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>2.55</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>2.81</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>2.69</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>2.53</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>2.96</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># viewing tail of data</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>df1.tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">45</td>
<td>Virginia</td>
<td>8411808.0</td>
<td>50.8</td>
<td>70.0</td>
<td>19.8</td>
<td>6.6</td>
<td>2.62</td>
<td>10.1</td>
<td>63.2</td>
<td>88.3</td>
<td>36.3</td>
<td>245000.0</td>
<td>1116.0</td>
<td>11.0</td>
<td>65015.0</td>
<td>34152.0</td>
<td>653193.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">46</td>
<td>Washington</td>
<td>7288000.0</td>
<td>50.0</td>
<td>80.0</td>
<td>4.1</td>
<td>8.6</td>
<td>2.56</td>
<td>6.9</td>
<td>62.8</td>
<td>90.4</td>
<td>32.9</td>
<td>259500.0</td>
<td>1014.0</td>
<td>11.3</td>
<td>61062.0</td>
<td>31762.0</td>
<td>541522.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">47</td>
<td>West Virginia</td>
<td>1831102.0</td>
<td>50.5</td>
<td>93.6</td>
<td>3.6</td>
<td>0.8</td>
<td>2.43</td>
<td>6.5</td>
<td>60.7</td>
<td>85.0</td>
<td>19.2</td>
<td>103800.0</td>
<td>643.0</td>
<td>17.9</td>
<td>41751.0</td>
<td>23450.0</td>
<td>114435.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">48</td>
<td>Wisconsin</td>
<td>5778708.0</td>
<td>50.3</td>
<td>87.5</td>
<td>6.6</td>
<td>2.8</td>
<td>2.43</td>
<td>6.2</td>
<td>61.6</td>
<td>91.0</td>
<td>27.8</td>
<td>165800.0</td>
<td>776.0</td>
<td>11.8</td>
<td>53357.0</td>
<td>28340.0</td>
<td>432980.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>Wyoming</td>
<td>585501.0</td>
<td>48.9</td>
<td>92.8</td>
<td>1.3</td>
<td>1.0</td>
<td>2.49</td>
<td>13.4</td>
<td>61.3</td>
<td>92.3</td>
<td>25.7</td>
<td>194800.0</td>
<td>789.0</td>
<td>11.3</td>
<td>58840.0</td>
<td>29803.0</td>
<td>62427.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># viewing random sample</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>df1.sample(n<span class="op">=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">48</td>
<td>Wisconsin</td>
<td>5778708.0</td>
<td>50.300</td>
<td>87.500</td>
<td>6.600</td>
<td>2.800</td>
<td>2.43</td>
<td>6.200</td>
<td>61.600</td>
<td>91.000</td>
<td>27.800</td>
<td>165800.0</td>
<td>776.0</td>
<td>11.800</td>
<td>53357.0</td>
<td>28340.0</td>
<td>432980.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>Iowa</td>
<td>3134693.0</td>
<td>50.300</td>
<td>91.400</td>
<td>3.700</td>
<td>2.500</td>
<td>2.42</td>
<td>5.000</td>
<td>60.300</td>
<td>91.500</td>
<td>26.700</td>
<td>129200.0</td>
<td>697.0</td>
<td>11.800</td>
<td>53183.0</td>
<td>27950.0</td>
<td>259121.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">41</td>
<td>Tennessee</td>
<td>6651194.0</td>
<td>0.512</td>
<td>0.787</td>
<td>0.171</td>
<td>0.018</td>
<td>2.53</td>
<td>0.106</td>
<td>99.617</td>
<td>0.855</td>
<td>0.249</td>
<td>142100.0</td>
<td>764.0</td>
<td>0.158</td>
<td>45219.0</td>
<td>25227.0</td>
<td>550453.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>Illinois</td>
<td>12801539.0</td>
<td>50.900</td>
<td>77.200</td>
<td>14.700</td>
<td>5.500</td>
<td>2.63</td>
<td>7.400</td>
<td>62.500</td>
<td>87.900</td>
<td>32.300</td>
<td>173800.0</td>
<td>907.0</td>
<td>13.000</td>
<td>57574.0</td>
<td>30494.0</td>
<td>1135017.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.700</td>
<td>66.100</td>
<td>3.800</td>
<td>6.300</td>
<td>2.81</td>
<td>15.500</td>
<td>64.400</td>
<td>92.100</td>
<td>28.000</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.900</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Getting the dimensions of the DataFrame with the .shape attribute:</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>df1.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>(50, 17)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  List the data type of each column, the number of non-missing values, and memory usage with the .info method:</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>df1.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 50 entries, 0 to 49
Data columns (total 17 columns):
 #   Column                   Non-Null Count  Dtype  
---  ------                   --------------  -----  
 0   state                    50 non-null     object 
 1   pop_2016                 50 non-null     float64
 2   female_pct               50 non-null     float64
 3   white_pct                50 non-null     float64
 4   black_pct                50 non-null     float64
 5   asian_pct                50 non-null     float64
 6   pe_hh                    50 non-null     float64
 7   pe_whi                   50 non-null     float64
 8   adults_below_65          50 non-null     float64
 9   high_school_grad_higher  50 non-null     float64
 10  bsc_higher               50 non-null     float64
 11  median_hu                50 non-null     float64
 12  median_gross_rent        50 non-null     float64
 13  poverty_pct              50 non-null     float64
 14  median_hh_income         50 non-null     float64
 15  per_cap_inc              50 non-null     float64
 16  firms                    50 non-null     float64
dtypes: float64(16), object(1)
memory usage: 7.0+ KB</code></pre>
</div>
</div>
<p>There are 50 rows in this dataset representing each state of the U.S measured by 16 features of interest The data is clean: there are no null values, and the datatypes are appropriate</p>
</section>
</section>
<section id="data-dictionary" class="level2">
<h2 class="anchored" data-anchor-id="data-dictionary">Data Dictionary</h2>
<table class="table">
<colgroup>
<col style="width: 26%">
<col style="width: 26%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>s/n</strong></th>
<th style="text-align: left;"><strong>Variable</strong></th>
<th style="text-align: left;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">state</td>
<td style="text-align: left;">Each of the 50 states of the contiguous U.S.</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">pop_2016</td>
<td style="text-align: left;">Population estimates by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">female_pct</td>
<td style="text-align: left;">Female persons, percent, by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">white_pct</td>
<td style="text-align: left;">White alone, percent, by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">black_pct</td>
<td style="text-align: left;">Black or African American alone, percent by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">asian_pct</td>
<td style="text-align: left;">Asian alone, percent, July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">6</td>
<td style="text-align: left;">pe_hh</td>
<td style="text-align: left;">Persons per household, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">7</td>
<td style="text-align: left;">pe_whi</td>
<td style="text-align: left;">Persons without health insurance, under age 65 years, percent</td>
</tr>
<tr class="odd">
<td style="text-align: left;">8</td>
<td style="text-align: left;">adults_below_65</td>
<td style="text-align: left;">adults older than 18, younger than 65, percent, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">9</td>
<td style="text-align: left;">high_school_grad_higher</td>
<td style="text-align: left;">High school graduate or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10</td>
<td style="text-align: left;">bsc_higher</td>
<td style="text-align: left;">Bachelor\’s degree or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">11</td>
<td style="text-align: left;">median_hu</td>
<td style="text-align: left;">Median value of owner-occupied housing units, 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12</td>
<td style="text-align: left;">median_gross_rent</td>
<td style="text-align: left;">Median gross rent, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">13</td>
<td style="text-align: left;">poverty_pct</td>
<td style="text-align: left;">Persons in poverty, percent</td>
</tr>
<tr class="odd">
<td style="text-align: left;">14</td>
<td style="text-align: left;">median_hh_income</td>
<td style="text-align: left;">Median household income (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">15</td>
<td style="text-align: left;">per_cap_inc</td>
<td style="text-align: left;">Per capita income in past 12 months (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">16</td>
<td style="text-align: left;">firms</td>
<td style="text-align: left;">All firms, 2012</td>
</tr>
</tbody>
</table>
<div class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># displaying summary statistics</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>df1.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>5.000000e+01</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>5.000000e+01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>6.448927e+06</td>
<td>38.511740</td>
<td>60.397020</td>
<td>8.360900</td>
<td>3.63118</td>
<td>2.582000</td>
<td>7.078540</td>
<td>70.76378</td>
<td>67.424100</td>
<td>22.363160</td>
<td>192026.000000</td>
<td>879.880000</td>
<td>10.05498</td>
<td>54311.860000</td>
<td>28491.780000</td>
<td>5.548918e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>7.271769e+06</td>
<td>21.584467</td>
<td>35.861896</td>
<td>9.917937</td>
<td>5.79106</td>
<td>0.164105</td>
<td>5.044314</td>
<td>16.41933</td>
<td>37.882927</td>
<td>13.383697</td>
<td>79742.431821</td>
<td>181.106761</td>
<td>6.26358</td>
<td>8949.529115</td>
<td>4103.284534</td>
<td>6.645229e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>5.855010e+05</td>
<td>0.487000</td>
<td>0.685000</td>
<td>0.020000</td>
<td>0.01500</td>
<td>2.320000</td>
<td>0.051000</td>
<td>58.90000</td>
<td>0.842000</td>
<td>0.241000</td>
<td>103100.000000</td>
<td>643.000000</td>
<td>0.10700</td>
<td>39665.000000</td>
<td>21057.000000</td>
<td>6.242700e+04</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>1.850106e+06</td>
<td>48.000000</td>
<td>34.175000</td>
<td>0.650000</td>
<td>0.80000</td>
<td>2.482500</td>
<td>3.225000</td>
<td>61.15000</td>
<td>81.825000</td>
<td>19.575000</td>
<td>136600.000000</td>
<td>743.500000</td>
<td>7.80000</td>
<td>47526.000000</td>
<td>25443.750000</td>
<td>1.478222e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>4.559320e+06</td>
<td>50.300000</td>
<td>77.400000</td>
<td>4.700000</td>
<td>2.35000</td>
<td>2.550000</td>
<td>7.050000</td>
<td>62.25000</td>
<td>87.850000</td>
<td>27.200000</td>
<td>165900.000000</td>
<td>818.500000</td>
<td>11.35000</td>
<td>52601.000000</td>
<td>27669.500000</td>
<td>3.535155e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>7.198768e+06</td>
<td>50.900000</td>
<td>87.275000</td>
<td>12.400000</td>
<td>4.55000</td>
<td>2.637500</td>
<td>10.100000</td>
<td>64.30000</td>
<td>90.625000</td>
<td>31.075000</td>
<td>237300.000000</td>
<td>1001.500000</td>
<td>14.25000</td>
<td>60599.000000</td>
<td>30977.000000</td>
<td>5.933612e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>3.925002e+07</td>
<td>51.600000</td>
<td>94.800000</td>
<td>37.700000</td>
<td>37.70000</td>
<td>3.150000</td>
<td>18.600000</td>
<td>99.63800</td>
<td>92.800000</td>
<td>40.500000</td>
<td>515300.000000</td>
<td>1438.000000</td>
<td>20.80000</td>
<td>74551.000000</td>
<td>38803.000000</td>
<td>3.548449e+06</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting the kde of some variables to have a sense of the data distribution</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">'darkgrid'</span>)</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4, ax5) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">5</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">4</span>))</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"pop_2016"</span>].plot.kde(ax<span class="op">=</span>ax1)</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'KDE plot for pop_2016'</span>)</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"female_pct"</span>].plot.kde(ax<span class="op">=</span>ax2)</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'KDE plot for female_pct'</span>)</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"white_pct"</span>].plot.kde(ax<span class="op">=</span>ax3)</span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">'KDE plot for white_pct'</span>)</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"pe_hh"</span>].plot.kde(ax<span class="op">=</span>ax4)</span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>ax4.set_title(<span class="st">'KDE plot for pe_hh'</span>)</span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"median_hu"</span>].plot.kde(ax<span class="op">=</span>ax5)</span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a>ax5.set_title(<span class="st">'KDE plot for median_hu'</span>)</span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-70-output-1.png" width="1541" height="372"></p>
</div>
</div>
<p>Upon viewing the kde plot, there seems to be some unusually low values for the percentages columns. This was a result of some of the percentage columns being formatted as decimals After inspection, I identified the offending rows as rows[30:42]. To correct these rows, I simply target rows having values less than a benchmark below which the values cannot possibly be valid and multiply by 100</p>
<div class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># correcting `female_pct` column</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>mask1 <span class="op">=</span> df1[<span class="st">'female_pct'</span>] <span class="op">&lt;</span> <span class="dv">5</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>col1 <span class="op">=</span> [<span class="st">'female_pct'</span>]</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>df1.loc[mask1, col1] <span class="op">=</span> df1.loc[mask1, col1] <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking that values are reasonable</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>df1.female_pct.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<pre><code>count    50.000000
mean     50.564000
std       0.801213
min      47.700000
25%      50.200000
50%      50.650000
75%      51.175000
max      51.600000
Name: female_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking offending rows</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>df1.white_pct[<span class="dv">30</span>:<span class="dv">42</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>30    0.826
31    0.699
32    0.710
33    0.879
34    0.825
35    0.746
36    0.874
37    0.824
38    0.844
39    0.685
40    0.852
41    0.787
Name: white_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># standardizing</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>mask3 <span class="op">=</span> df1[<span class="st">'white_pct'</span>] <span class="op">&lt;</span> <span class="dv">1</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>col3 <span class="op">=</span> [<span class="st">'white_pct'</span>]</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>df1.loc[mask3, col3] <span class="op">=</span> df1.loc[mask3, col3] <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking result</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>df1.white_pct[<span class="dv">30</span>:<span class="dv">42</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>30    82.6
31    69.9
32    71.0
33    87.9
34    82.5
35    74.6
36    87.4
37    82.4
38    84.4
39    68.5
40    85.2
41    78.7
Name: white_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fishing rows</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>df1.black_pct.sort_values()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>40     0.020
36     0.021
30     0.025
33     0.029
35     0.078
38     0.081
37     0.118
34     0.128
41     0.171
31     0.177
32     0.222
39     0.275
25     0.600
11     0.800
49     1.300
44     1.300
43     1.400
28     1.500
18     1.500
10     2.200
47     3.600
14     3.700
1      3.800
46     4.100
5      4.500
2      4.900
26     5.000
22     6.200
15     6.200
4      6.500
48     6.600
16     8.300
20     8.600
27     9.600
13     9.700
24    11.800
6     11.800
42    12.600
21    14.200
12    14.700
29    15.000
3     15.700
8     16.800
45    19.800
7     22.600
0     26.800
19    30.700
9     32.000
17    32.600
23    37.700
Name: black_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking for a particular row to see if indeed the value is valid, which it is</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>df1.loc[<span class="dv">25</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<pre><code>state                        Montana
pop_2016                   1042520.0
female_pct                      49.7
white_pct                       89.2
black_pct                        0.6
asian_pct                        0.8
pe_hh                           2.41
pe_whi                           9.8
adults_below_65                 60.5
high_school_grad_higher         92.8
bsc_higher                      29.5
median_hu                   193500.0
median_gross_rent              711.0
poverty_pct                     13.3
median_hh_income             47169.0
per_cap_inc                  26381.0
firms                       112419.0
Name: 25, dtype: object</code></pre>
</div>
</div>
<div class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># correcting 'black_pct</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>mask2 <span class="op">=</span> df1[<span class="st">'black_pct'</span>] <span class="op">&lt;</span> <span class="fl">0.3</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>col2 <span class="op">=</span> [<span class="st">'black_pct'</span>]</span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>df1.loc[mask2, col2] <span class="op">=</span> df1.loc[mask2, col2] <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking result</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>df1.black_pct.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="78">
<pre><code>count    50.000000
mean     11.024000
std       9.631868
min       0.600000
25%       3.625000
50%       8.200000
75%      15.525000
max      37.700000
Name: black_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fishing out offending rows</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>df1.asian_pct.sort_values()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>40     0.015
33     0.015
39     0.016
30     0.017
41     0.018
35     0.022
34     0.022
32     0.029
37     0.035
38     0.036
36     0.045
31     0.089
47     0.800
25     0.800
49     1.000
23     1.100
18     1.200
0      1.400
16     1.500
11     1.500
3      1.600
44     1.800
17     1.800
24     2.000
13     2.200
14     2.500
26     2.500
43     2.500
28     2.700
48     2.800
8      2.900
15     3.000
21     3.100
5      3.300
2      3.400
7      4.000
9      4.100
6      4.700
42     4.800
22     4.900
12     5.500
1      6.300
19     6.600
45     6.600
20     6.700
46     8.600
27     8.700
29     9.800
4     14.800
10    37.700
Name: asian_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>mask4 <span class="op">=</span> df1[<span class="st">'asian_pct'</span>] <span class="op">&lt;</span> <span class="fl">0.3</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>col4 <span class="op">=</span> [<span class="st">'asian_pct'</span>]</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>df1.loc[mask4, col4] <span class="op">=</span> df1.loc[mask4, col4] <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking results</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>df1.asian_pct.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="81">
<pre><code>count    50.000000
mean      4.342000
std       5.561973
min       0.800000
25%       1.725000
50%       2.850000
75%       4.775000
max      37.700000
Name: asian_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># correcting 'high_school_grad_higher'</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>mask5 <span class="op">=</span> df1[<span class="st">'high_school_grad_higher'</span>] <span class="op">&lt;</span> <span class="dv">5</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>col5 <span class="op">=</span> [<span class="st">'high_school_grad_higher'</span>]</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>df1.loc[mask5, col5] <span class="op">=</span> df1.loc[mask5, col5] <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking result</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>df1.bsc_higher.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="83">
<pre><code>count    50.000000
mean     22.363160
std      13.383697
min       0.241000
25%      19.575000
50%      27.200000
75%      31.075000
max      40.500000
Name: bsc_higher, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>df1.bsc_higher.sort_values()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<pre><code>35     0.241
41     0.249
39     0.258
34     0.261
30     0.263
40     0.270
33     0.277
32     0.284
37     0.286
36     0.308
38     0.319
31     0.342
47    19.200
23    20.700
3     21.100
16    22.300
17    22.500
27    23.000
0     23.500
13    24.100
49    25.700
11    25.900
14    26.700
21    26.900
24    27.100
8     27.300
2     27.500
42    27.600
48    27.800
1     28.000
9     28.800
18    29.000
26    29.300
25    29.500
7     30.000
10    30.800
15    31.000
43    31.100
4     31.400
12    32.300
46    32.900
22    33.700
28    34.900
44    36.000
45    36.300
29    36.800
6     37.600
19    37.900
5     38.100
20    40.500
Name: bsc_higher, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>mask6 <span class="op">=</span> df1[<span class="st">'bsc_higher'</span>] <span class="op">&lt;</span> <span class="dv">2</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>col6 <span class="op">=</span> [<span class="st">'bsc_higher'</span>]</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>df1.loc[mask6, col6] <span class="op">=</span> df1.loc[mask6, col6] <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>df1.bsc_higher.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<pre><code>count    50.00000
mean     29.01200
std       4.93404
min      19.20000
25%      25.95000
50%      28.20000
75%      31.77500
max      40.50000
Name: bsc_higher, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>mask7 <span class="op">=</span> df1[<span class="st">'pe_whi'</span>] <span class="op">&lt;</span> <span class="dv">1</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>col7 <span class="op">=</span> [<span class="st">'pe_whi'</span>]</span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>df1.loc[mask7, col7] <span class="op">=</span> df1.loc[mask7, col7] <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># correcting the last % column</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>mask8 <span class="op">=</span> df1[<span class="st">'poverty_pct'</span>] <span class="op">&lt;</span> <span class="dv">1</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>col8 <span class="op">=</span> [<span class="st">'poverty_pct'</span>]</span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>df1.loc[mask8, col8] <span class="op">=</span> df1.loc[mask8, col8] <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking the summary statistics again</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>df1.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="89">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>5.000000e+01</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>5.000000e+01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>6.448927e+06</td>
<td>50.564000</td>
<td>79.308000</td>
<td>11.024000</td>
<td>4.342000</td>
<td>2.582000</td>
<td>9.310000</td>
<td>70.76378</td>
<td>88.224000</td>
<td>29.01200</td>
<td>192026.000000</td>
<td>879.880000</td>
<td>13.518000</td>
<td>54311.860000</td>
<td>28491.780000</td>
<td>5.548918e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>7.271769e+06</td>
<td>0.801213</td>
<td>12.335908</td>
<td>9.631868</td>
<td>5.561973</td>
<td>0.164105</td>
<td>3.456095</td>
<td>16.41933</td>
<td>3.089585</td>
<td>4.93404</td>
<td>79742.431821</td>
<td>181.106761</td>
<td>3.019778</td>
<td>8949.529115</td>
<td>4103.284534</td>
<td>6.645229e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>5.855010e+05</td>
<td>47.700000</td>
<td>25.800000</td>
<td>0.600000</td>
<td>0.800000</td>
<td>2.320000</td>
<td>2.900000</td>
<td>58.90000</td>
<td>81.800000</td>
<td>19.20000</td>
<td>103100.000000</td>
<td>643.000000</td>
<td>7.300000</td>
<td>39665.000000</td>
<td>21057.000000</td>
<td>6.242700e+04</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>1.850106e+06</td>
<td>50.200000</td>
<td>72.475000</td>
<td>3.625000</td>
<td>1.725000</td>
<td>2.482500</td>
<td>6.625000</td>
<td>61.15000</td>
<td>85.600000</td>
<td>25.95000</td>
<td>136600.000000</td>
<td>743.500000</td>
<td>11.300000</td>
<td>47526.000000</td>
<td>25443.750000</td>
<td>1.478222e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>4.559320e+06</td>
<td>50.650000</td>
<td>82.100000</td>
<td>8.200000</td>
<td>2.850000</td>
<td>2.550000</td>
<td>9.350000</td>
<td>62.25000</td>
<td>88.850000</td>
<td>28.20000</td>
<td>165900.000000</td>
<td>818.500000</td>
<td>13.300000</td>
<td>52601.000000</td>
<td>27669.500000</td>
<td>3.535155e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>7.198768e+06</td>
<td>51.175000</td>
<td>87.500000</td>
<td>15.525000</td>
<td>4.775000</td>
<td>2.637500</td>
<td>11.550000</td>
<td>64.30000</td>
<td>90.850000</td>
<td>31.77500</td>
<td>237300.000000</td>
<td>1001.500000</td>
<td>15.375000</td>
<td>60599.000000</td>
<td>30977.000000</td>
<td>5.933612e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>3.925002e+07</td>
<td>51.600000</td>
<td>94.800000</td>
<td>37.700000</td>
<td>37.700000</td>
<td>3.150000</td>
<td>18.600000</td>
<td>99.63800</td>
<td>92.800000</td>
<td>40.50000</td>
<td>515300.000000</td>
<td>1438.000000</td>
<td>20.800000</td>
<td>74551.000000</td>
<td>38803.000000</td>
<td>3.548449e+06</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking distribution again</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting the kde of some variables to have a sense of the data distribution</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4, ax5) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">5</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">4</span>))</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"pop_2016"</span>].plot.kde(ax<span class="op">=</span>ax1)</span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'KDE plot for pop_2016'</span>)</span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"female_pct"</span>].plot.kde(ax<span class="op">=</span>ax2)</span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'KDE plot for female_pct'</span>)</span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"white_pct"</span>].plot.kde(ax<span class="op">=</span>ax3)</span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">'KDE plot for white_pct'</span>)</span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-15"><a href="#cb132-15" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"pe_hh"</span>].plot.kde(ax<span class="op">=</span>ax4)</span>
<span id="cb132-16"><a href="#cb132-16" aria-hidden="true" tabindex="-1"></a>ax4.set_title(<span class="st">'KDE plot for pe_hh'</span>)</span>
<span id="cb132-17"><a href="#cb132-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-18"><a href="#cb132-18" aria-hidden="true" tabindex="-1"></a>df1[<span class="st">"median_hu"</span>].plot.kde(ax<span class="op">=</span>ax5)</span>
<span id="cb132-19"><a href="#cb132-19" aria-hidden="true" tabindex="-1"></a>ax5.set_title(<span class="st">'KDE plot for median_hu'</span>)</span>
<span id="cb132-20"><a href="#cb132-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-21"><a href="#cb132-21" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-91-output-1.png" width="1541" height="372"></p>
</div>
</div>
<p>Now, the min values have no unusual numbers<br>
Proceeding to EDA…</p>
</section>
<section id="preliminary-exploration-on-the-census-data" class="level2">
<h2 class="anchored" data-anchor-id="preliminary-exploration-on-the-census-data">Preliminary Exploration on the Census Data</h2>
<p>Since the census dataset isn’t the focus of this analysis, I will just do some brief exploration of the dataframe</p>
<ul>
<li><p><em>What are the most populated and least states?</em></p></li>
<li><p><em>Which states have highest and least black population?</em></p></li>
<li><p><em>Which states have highest and lowest median household income?</em></p></li>
</ul>
<div class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What are the most populated and least states?</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> df1[[<span class="st">'state'</span>, <span class="st">'pop_2016'</span>]].nlargest(<span class="dv">5</span>,<span class="st">'pop_2016'</span>)</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> df1[[<span class="st">'state'</span>, <span class="st">'pop_2016'</span>]].nsmallest(<span class="dv">5</span>,<span class="st">'pop_2016'</span>)</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>c_list <span class="op">=</span> [a, b]</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>pd.concat(c_list, keys<span class="op">=</span>[<span class="st">'most populated'</span>, <span class="st">'least pupulated'</span>], axis<span class="op">=</span><span class="st">'rows'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="91">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">most populated</td>
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">42</td>
<td>Texas</td>
<td>27862596.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Florida</td>
<td>20612439.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>New York</td>
<td>19745289.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>Illinois</td>
<td>12801539.0</td>
</tr>
<tr class="even">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">least pupulated</td>
<td data-quarto-table-cell-role="th">49</td>
<td>Wyoming</td>
<td>585501.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">44</td>
<td>Vermont</td>
<td>624594.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>North Dakota</td>
<td>757952.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">40</td>
<td>South Dakota</td>
<td>865454.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Which states have highest and least black population?</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> df1[[<span class="st">'state'</span>, <span class="st">'black_pct'</span>]].nlargest(<span class="dv">5</span>,<span class="st">'black_pct'</span>)</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> df1[[<span class="st">'state'</span>, <span class="st">'black_pct'</span>]].nsmallest(<span class="dv">5</span>,<span class="st">'black_pct'</span>)</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>c_list <span class="op">=</span> [a, b]</span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>pd.concat(c_list, keys<span class="op">=</span>[<span class="st">'high black population'</span>, <span class="st">'low black population'</span>], axis<span class="op">=</span><span class="st">'rows'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="92">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">black_pct</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">high black population</td>
<td data-quarto-table-cell-role="th">23</td>
<td>Mississippi</td>
<td>37.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>Louisiana</td>
<td>32.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>Georgia</td>
<td>32.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>Maryland</td>
<td>30.7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">39</td>
<td>South Carolina</td>
<td>27.5</td>
</tr>
<tr class="even">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">low black population</td>
<td data-quarto-table-cell-role="th">25</td>
<td>Montana</td>
<td>0.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>Idaho</td>
<td>0.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">44</td>
<td>Vermont</td>
<td>1.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>Wyoming</td>
<td>1.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">43</td>
<td>Utah</td>
<td>1.4</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Which states have highest and lowest median household income?</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> df1[[<span class="st">'state'</span>, <span class="st">'median_hh_income'</span>]].nlargest(<span class="dv">5</span>,<span class="st">'median_hh_income'</span>)</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> df1[[<span class="st">'state'</span>, <span class="st">'median_hh_income'</span>]].nsmallest(<span class="dv">5</span>,<span class="st">'median_hh_income'</span>)</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>c_list <span class="op">=</span> [a, b]</span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>pd.concat(c_list, keys<span class="op">=</span>[<span class="st">'high median household income ($)'</span>, <span class="st">'low median household income ($)'</span>], axis<span class="op">=</span><span class="st">'rows'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="93">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">high median household income ($)</td>
<td data-quarto-table-cell-role="th">19</td>
<td>Maryland</td>
<td>74551.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>72515.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>New Jersey</td>
<td>72093.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>Connecticut</td>
<td>70331.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>Hawaii</td>
<td>69515.0</td>
</tr>
<tr class="even">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">low median household income ($)</td>
<td data-quarto-table-cell-role="th">23</td>
<td>Mississippi</td>
<td>39665.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>41371.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">47</td>
<td>West Virginia</td>
<td>41751.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>43623.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>Kentucky</td>
<td>43740.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saving for later</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>df1.to_csv(<span class="st">'Data/df_census_cleaned_v2.csv'</span>, index<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="preparing-gun-sales-data-for-eda" class="level2">
<h2 class="anchored" data-anchor-id="preparing-gun-sales-data-for-eda">Preparing Gun Sales Data for EDA</h2>
<p><em>In this section, I will prepare the dataframe for EDA</em>:</p>
<div class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reading in the dataset, and viewing heads, tails and  and random sample of the rows </span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df_gun_cleaned.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>df2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="95">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking tail of data</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>df2.tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="96">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">12480</td>
<td>Virginia</td>
<td>14.0</td>
<td>2.0</td>
<td>8</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12481</td>
<td>Washington</td>
<td>65.0</td>
<td>286.0</td>
<td>8</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12482</td>
<td>West Virginia</td>
<td>149.0</td>
<td>251.0</td>
<td>5</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12483</td>
<td>Wisconsin</td>
<td>25.0</td>
<td>214.0</td>
<td>2</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12484</td>
<td>Wyoming</td>
<td>45.0</td>
<td>49.0</td>
<td>5</td>
<td>1998</td>
<td>11</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># viewing random sample</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>df2.sample(n<span class="op">=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="97">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">5493</td>
<td>Vermont</td>
<td>619.0</td>
<td>683.0</td>
<td>46</td>
<td>2009</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7244</td>
<td>Oregon</td>
<td>4271.0</td>
<td>8203.0</td>
<td>290</td>
<td>2006</td>
<td>10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4102</td>
<td>New Jersey</td>
<td>2449.0</td>
<td>1754.0</td>
<td>80</td>
<td>2011</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10568</td>
<td>District of Columbia</td>
<td>1.0</td>
<td>0.0</td>
<td>0</td>
<td>2001</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12033</td>
<td>South Carolina</td>
<td>4369.0</td>
<td>4793.0</td>
<td>77</td>
<td>1999</td>
<td>7</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Getting the dimensions of the DataFrame with the .shape attribute:</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>df2.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="98">
<pre><code>(12485, 6)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking for nulls</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>df2.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="99">
<pre><code>state        0
handgun     20
long_gun    19
multiple     0
year         0
month        0
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># revealing the nulls</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> df2.long_gun.isnull()</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>df2[mask]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="100">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7914</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7969</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8024</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8079</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8134</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8189</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8299</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8354</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8409</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8491</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2004</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9674</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2003</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12011</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12066</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12121</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12176</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12231</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12286</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12341</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12396</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1998</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>After doing some research, I could not find adequate data on gun purchases on these islands. If any, I figured it is going to be insubstantial anyway. So I proceed to fill these NaNs with zero.</p>
<div class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fill nans with 0</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>df2.long_gun.fillna(<span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>df2.handgun.fillna(<span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inspecting</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>df2.isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="102">
<pre><code>state       0
handgun     0
long_gun    0
multiple    0
year        0
month       0
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  List the data type of each column, the number of non-missing values, and memory usage with the .info method:</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>df2.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 12485 entries, 0 to 12484
Data columns (total 6 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   handgun   12485 non-null  float64
 2   long_gun  12485 non-null  float64
 3   multiple  12485 non-null  int64  
 4   year      12485 non-null  int64  
 5   month     12485 non-null  int64  
dtypes: float64(2), int64(3), object(1)
memory usage: 682.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saving for later</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>df2.to_csv(<span class="st">'Data/df2_gun_cleaned_v2.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df2_gun_cleaned_v2.csv'</span>)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>df2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="105">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>There are 12485 rows in this dataset representing each month per state, from 1998 - 2017. The data is clean: there are no null values, and the datatypes are appropriately assigned.</p>
</section>
<section id="data-dictionary-1" class="level2">
<h2 class="anchored" data-anchor-id="data-dictionary-1">Data Dictionary</h2>
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>s/n</strong></th>
<th style="text-align: left;"><strong>Variable</strong></th>
<th style="text-align: left;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">state</td>
<td style="text-align: left;">Each of the 50 states of the contiguous U.S.</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">handgun</td>
<td style="text-align: left;">Population estimates by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">long_gun</td>
<td style="text-align: left;">Female persons, percent, by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">multiple</td>
<td style="text-align: left;">White alone, percent, by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">year</td>
<td style="text-align: left;">Black or African American alone, percent by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">month</td>
<td style="text-align: left;">Asian alone, percent, July 1, 2016</td>
</tr>
</tbody>
</table>
<div class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># displaying summary statistics</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>df2.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="106">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>12485.000000</td>
<td>12485.000000</td>
<td>12485.000000</td>
<td>12485.000000</td>
<td>12485.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>5931.364277</td>
<td>7798.960833</td>
<td>268.603364</td>
<td>2007.792952</td>
<td>6.484581</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>8614.954626</td>
<td>9307.740581</td>
<td>783.185073</td>
<td>5.468296</td>
<td>3.451944</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>1998.000000</td>
<td>1.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>857.000000</td>
<td>2063.000000</td>
<td>15.000000</td>
<td>2003.000000</td>
<td>3.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>3046.000000</td>
<td>5114.000000</td>
<td>125.000000</td>
<td>2008.000000</td>
<td>6.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>7277.000000</td>
<td>10374.000000</td>
<td>301.000000</td>
<td>2013.000000</td>
<td>9.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>107224.000000</td>
<td>108058.000000</td>
<td>38907.000000</td>
<td>2017.000000</td>
<td>12.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Following a [NY Times recommendation], gun sales can be approximated from check calls </span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="co"># by multiplying checks for handgun and long_gun by a factor of 1.1 and that of multiple by 2</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'handgun'</span>] <span class="op">=</span> df2[<span class="st">'handgun'</span>].mul(<span class="fl">1.1</span>)</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'long_gun'</span>] <span class="op">=</span> df2[<span class="st">'long_gun'</span>].mul(<span class="fl">1.1</span>)</span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'multiple'</span>] <span class="op">=</span> df2[<span class="st">'multiple'</span>].mul(<span class="dv">2</span>)</span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a>df2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="107">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>6307.4</td>
<td>6952.0</td>
<td>634</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2552.0</td>
<td>3223.0</td>
<td>320</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>12169.3</td>
<td>8740.6</td>
<td>1262</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4781.7</td>
<td>6669.3</td>
<td>732</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>40881.5</td>
<td>27039.1</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I am interested in gun trends in 2006, 2015 and 2016</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="co"># so I extract data for those years</span></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>df2_2006 <span class="op">=</span> df2[df2[<span class="st">'year'</span>] <span class="op">==</span> <span class="dv">2006</span>]</span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>df2_2015 <span class="op">=</span> df2[df2[<span class="st">'year'</span>] <span class="op">==</span> <span class="dv">2015</span>]</span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>df2_2016 <span class="op">=</span> df2[df2[<span class="st">'year'</span>] <span class="op">==</span> <span class="dv">2016</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Since the year variable is now redundant, I opt to drop them</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="co"># I use the reset_index method to have the index start from 0</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>df2_2006 <span class="op">=</span> df2_2006.drop(columns<span class="op">=</span><span class="st">'year'</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>df2_2015 <span class="op">=</span> df2_2015.drop(columns<span class="op">=</span><span class="st">'year'</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>df2_2016 <span class="op">=</span> df2_2016.drop(columns<span class="op">=</span><span class="st">'year'</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking the result</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>df2_2006.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="110">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saving for later</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>df2_2006.to_csv(<span class="st">'Data/df2_2006.csv'</span>)</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>df2_2015.to_csv(<span class="st">'Data/df2_2015.csv'</span>)</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>df2_2016.to_csv(<span class="st">'Data/df2_2016.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Viewing the head of the three dataframes</p>
<div class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>df2_2006 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df2_2006.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>df2_2015 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df2_2015.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>df2_2016 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df2_2016.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>df2_2006.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="112">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>df2_2015.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="113">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>52365.5</td>
<td>37081.0</td>
<td>3504</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>5791.5</td>
<td>5101.8</td>
<td>428</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>28118.2</td>
<td>16197.5</td>
<td>1990</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>15158.0</td>
<td>16765.1</td>
<td>1042</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>81838.9</td>
<td>53638.2</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>df2_2016.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="114">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="exploratory-data-analysis-2" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis-2"><strong>Exploratory Data Analysis 2</strong></h2>
<section id="gun-sales-data" class="level3">
<h3 class="anchored" data-anchor-id="gun-sales-data"><strong>(Gun Sales Data)</strong></h3>
<p><em>In this section, I will answer the following research questions</em>:</p>
<blockquote class="blockquote">
<p>Year Level Questions: - <em>How many guns were sold in the U.S. in 2006?</em> - <em>What kind of gun was bought the most?</em> - <em>What are the overall monthly trends of gun purchases in 2006?</em></p>
<p>State Level Questions</p>
<ul>
<li><p>What are the top 5 states in terms of gun purchases in the U.S. in 2006?</p></li>
<li><p>What are the most bought gun types in those states?</p></li>
<li><p>What kind of gun was bought the most in one of those states?</p></li>
<li><p>What are the overall monthly trends of gun purchases in those states?</p></li>
</ul>
<p>Which states had the highest growth in gun sales over the span of a decade?</p>
</blockquote>
</section>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">2006</h2>
<div class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>df2_2006 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df2_2006.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>df2_2006.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="115">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>df2_2006.describe().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="116">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">handgun</td>
<td>660.0</td>
<td>4068.875000</td>
<td>4725.841945</td>
<td>0.0</td>
<td>671.00</td>
<td>2560.25</td>
<td>5929.00</td>
<td>27432.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">long_gun</td>
<td>660.0</td>
<td>7982.651667</td>
<td>9051.901614</td>
<td>0.0</td>
<td>2091.10</td>
<td>5649.60</td>
<td>10799.80</td>
<td>68093.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">multiple</td>
<td>660.0</td>
<td>394.293939</td>
<td>779.232091</td>
<td>0.0</td>
<td>55.50</td>
<td>232.00</td>
<td>522.00</td>
<td>15684.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">month</td>
<td>660.0</td>
<td>6.500000</td>
<td>3.454671</td>
<td>1.0</td>
<td>3.75</td>
<td>6.50</td>
<td>9.25</td>
<td>12.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="117">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting the kde of the variables to have a sense of the data distribution</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="co"># check how to change line color</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">'darkgrid'</span>)</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">4</span>))</span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>df2_2006[<span class="st">"handgun"</span>].plot.kde(ax<span class="op">=</span>ax1)</span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'KDE plot for handgun'</span>)</span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-11"><a href="#cb163-11" aria-hidden="true" tabindex="-1"></a>df2_2006[<span class="st">"long_gun"</span>].plot.kde(ax<span class="op">=</span>ax2)</span>
<span id="cb163-12"><a href="#cb163-12" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'KDE plot for long_gun'</span>)</span>
<span id="cb163-13"><a href="#cb163-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-14"><a href="#cb163-14" aria-hidden="true" tabindex="-1"></a>df2_2006[<span class="st">"multiple"</span>].plot.kde(ax<span class="op">=</span>ax3)</span>
<span id="cb163-15"><a href="#cb163-15" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">'KDE plot for multiple'</span>)</span>
<span id="cb163-16"><a href="#cb163-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-17"><a href="#cb163-17" aria-hidden="true" tabindex="-1"></a>df2_2006[<span class="st">"month"</span>].plot.kde(ax<span class="op">=</span>ax4)</span>
<span id="cb163-18"><a href="#cb163-18" aria-hidden="true" tabindex="-1"></a>ax4.set_title(<span class="st">'KDE plot for month'</span>)</span>
<span id="cb163-19"><a href="#cb163-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-20"><a href="#cb163-20" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-118-output-1.png" width="1582" height="356"></p>
</div>
</div>
<section id="year-level-questions" class="level3">
<h3 class="anchored" data-anchor-id="year-level-questions">Year Level Questions</h3>
<ul>
<li><p>How many guns were sold in the U.S. in 2006?</p></li>
<li><p>What kind of gun was bought the most?</p></li>
<li><p>What are the overall monthly trends of gun purchases in 2006?</p></li>
</ul>
<p><em>How many guns were sold in the U.S. in 2006?</em></p>
<div class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>df2_2006[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="118">
<pre><code>8214241.6000000015</code></pre>
</div>
</div>
<p><em>What type of gun sold the most?</em></p>
<div class="cell" data-execution_count="119">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">'darkgrid'</span>)</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> df2_2006[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>df2_2006[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().plot.barh(table<span class="op">=</span>d)</span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a>plt.setp(ax.get_xticklabels(), y<span class="op">=</span><span class="fl">.05</span>)</span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a>plt.setp(ax.get_xticklines(), visible<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-10"><a href="#cb166-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df2_2006[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().sort_values(ascending<span class="op">=</span><span class="va">False</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>long_gun    5268550.1
handgun     2685457.5
multiple     260234.0
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-120-output-2.png" width="680" height="527"></p>
</div>
</div>
<p><em>What is the trend of gun sales throughout the year in 2006?</em></p>
<div class="cell" data-execution_count="120">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>df2_2006.groupby(<span class="st">'month'</span>)[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().plot.line(title<span class="op">=</span><span class="st">'Monthly Trends of Gun Sales in 2006'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="120">
<pre><code>&lt;Axes: title={'center': 'Monthly Trends of Gun Sales in 2006'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-121-output-2.png" width="594" height="447"></p>
</div>
</div>
</section>
<section id="state-level-questions" class="level3">
<h3 class="anchored" data-anchor-id="state-level-questions"><strong>State Level Questions</strong></h3>
<ul>
<li><p>What are the top 5 states in terms of gun purchases in the U.S. in 2006?</p></li>
<li><p>What are the most bought gun types in those states?</p></li>
<li><p>What are the overall monthly trends of gun purchases in those states?</p></li>
</ul>
<p><em>What are the top 5 states in terms of gun purchases in the U.S. in 2006?</em></p>
<div class="cell" data-execution_count="121">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>df2_2006.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="121">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="122">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>df2_2006[<span class="st">'total'</span>] <span class="op">=</span> df2_2006[<span class="st">'handgun'</span>] <span class="op">+</span> df2_2006[<span class="st">'long_gun'</span>] <span class="op">+</span> df2_2006[<span class="st">'multiple'</span>]</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>df2_2006.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="122">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
<td>40522.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
<td>5519.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
<td>22014.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
<td>22282.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
<td>56579.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="123">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">'darkgrid'</span>)</span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>df2_2006.groupby(<span class="st">'state'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().sort_values(ascending<span class="op">=</span><span class="va">False</span>).head().plot.barh(ax<span class="op">=</span>ax1, title<span class="op">=</span><span class="st">'Top 5 States by Gun Sales'</span>)</span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a>df2_2006.groupby(<span class="st">'state'</span>)[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>,<span class="st">'total'</span>]].<span class="bu">sum</span>().nlargest(<span class="dv">5</span>, <span class="st">'total'</span>).plot.bar(ax<span class="op">=</span>ax2, title<span class="op">=</span><span class="st">'Breakdown of Gun Sales by Type'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="123">
<pre><code>&lt;Axes: title={'center': 'Breakdown of Gun Sales by Type'}, xlabel='state'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-124-output-2.png" width="1018" height="514"></p>
</div>
</div>
<p><em>What are the top 5 states in terms of gun purchases in the U.S. in 2006?</em></p>
<p><em>What are the most bought gun types in those states?</em></p>
<div class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What are the overall monthly trends of gun purchases overall and in those top 5 states?</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="co"># i.e month on x, sales on y, faceted by states</span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>df2_2006.groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(title <span class="op">=</span> <span class="st">'Overall Monthly Trend of Gun Sales in the U.S. in 2006'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="124">
<pre><code>&lt;Axes: title={'center': 'Overall Monthly Trend of Gun Sales in the U.S. in 2006'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-125-output-2.png" width="568" height="447"></p>
</div>
</div>
<div class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4, ax5) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">5</span>, figsize<span class="op">=</span>(<span class="dv">25</span>, <span class="dv">5</span>))</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>crit_1 <span class="op">=</span> df2_2006.state <span class="op">==</span> <span class="st">'Texas'</span></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>crit_2 <span class="op">=</span> df2_2006.state <span class="op">==</span> <span class="st">'Pennsylvania'</span></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>crit_3 <span class="op">=</span> df2_2006.state <span class="op">==</span> <span class="st">'California'</span></span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>crit_4 <span class="op">=</span> df2_2006.state <span class="op">==</span> <span class="st">'Florida'</span></span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>crit_5 <span class="op">=</span> df2_2006.state <span class="op">==</span> <span class="st">'Ohio'</span></span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a>df2_2006[crit_1].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(</span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax1, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in Texas'</span>)</span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a>df2_2006[crit_2].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(</span>
<span id="cb176-11"><a href="#cb176-11" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax2, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in Pennsylvania'</span>)</span>
<span id="cb176-12"><a href="#cb176-12" aria-hidden="true" tabindex="-1"></a>df2_2006[crit_3].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(</span>
<span id="cb176-13"><a href="#cb176-13" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax3, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in California'</span>)</span>
<span id="cb176-14"><a href="#cb176-14" aria-hidden="true" tabindex="-1"></a>df2_2006[crit_4].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(</span>
<span id="cb176-15"><a href="#cb176-15" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax4, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in Florida'</span>)</span>
<span id="cb176-16"><a href="#cb176-16" aria-hidden="true" tabindex="-1"></a>df2_2006[crit_5].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(</span>
<span id="cb176-17"><a href="#cb176-17" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax5, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in Ohio'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="125">
<pre><code>&lt;Axes: title={'center': 'Monthly Gun Sales Trends in Ohio'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-126-output-2.png" width="1933" height="447"></p>
</div>
</div>
</section>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">2016</h2>
<div class="cell" data-execution_count="126">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reading in the data</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>df2_2016 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df2_2016.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>df2_2016.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="126">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="127">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># deriving summary statistics</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>df2_2016.describe().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="127">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">handgun</td>
<td>660.0</td>
<td>13475.830000</td>
<td>15766.508622</td>
<td>0.0</td>
<td>2685.925</td>
<td>7737.95</td>
<td>18134.325</td>
<td>79888.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">long_gun</td>
<td>660.0</td>
<td>9980.851667</td>
<td>10916.172474</td>
<td>0.0</td>
<td>3268.650</td>
<td>6524.10</td>
<td>14035.450</td>
<td>102546.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">multiple</td>
<td>660.0</td>
<td>780.978788</td>
<td>1099.305994</td>
<td>0.0</td>
<td>16.000</td>
<td>401.00</td>
<td>1058.000</td>
<td>7782.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">month</td>
<td>660.0</td>
<td>6.500000</td>
<td>3.454671</td>
<td>1.0</td>
<td>3.750</td>
<td>6.50</td>
<td>9.250</td>
<td>12.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="128">
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting the kde of the variables to have a sense of the data distribution</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="co"># check how to change line color</span></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">4</span>))</span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a>df2_2016[<span class="st">"handgun"</span>].plot.kde(ax<span class="op">=</span>ax1)</span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">'KDE plot for handgun'</span>)</span>
<span id="cb180-7"><a href="#cb180-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-8"><a href="#cb180-8" aria-hidden="true" tabindex="-1"></a>df2_2016[<span class="st">"long_gun"</span>].plot.kde(ax<span class="op">=</span>ax2)</span>
<span id="cb180-9"><a href="#cb180-9" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">'KDE plot for long_gun'</span>)</span>
<span id="cb180-10"><a href="#cb180-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-11"><a href="#cb180-11" aria-hidden="true" tabindex="-1"></a>df2_2016[<span class="st">"multiple"</span>].plot.kde(ax<span class="op">=</span>ax3)</span>
<span id="cb180-12"><a href="#cb180-12" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">'KDE plot for multiple'</span>)</span>
<span id="cb180-13"><a href="#cb180-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-14"><a href="#cb180-14" aria-hidden="true" tabindex="-1"></a>df2_2016[<span class="st">"month"</span>].plot.kde(ax<span class="op">=</span>ax4)</span>
<span id="cb180-15"><a href="#cb180-15" aria-hidden="true" tabindex="-1"></a>ax4.set_title(<span class="st">'KDE plot for month'</span>)</span>
<span id="cb180-16"><a href="#cb180-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-17"><a href="#cb180-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-129-output-1.png" width="1541" height="356"></p>
</div>
</div>
<section id="year-level-questions-1" class="level3">
<h3 class="anchored" data-anchor-id="year-level-questions-1">Year Level Questions</h3>
<ul>
<li><p>How many guns were sold in the U.S. in 2016?</p></li>
<li><p>What kind of gun was bought the most?</p></li>
<li><p>What are the overall monthly trends of gun purchases in 2016?</p></li>
</ul>
<p><em>How many guns were sold in the U.S. in 2016?</em></p>
<div class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>df2_2016[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="129">
<pre><code>15996855.9</code></pre>
</div>
</div>
<p><em>what type of gun sold the most?</em></p>
<div class="cell" data-execution_count="130">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">6</span>))</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> df2_2016[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().sort_values(ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>df2_2016[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().plot.barh(table<span class="op">=</span>d)</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>plt.setp(ax.get_xticklabels(), y<span class="op">=</span><span class="fl">.05</span>)</span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>plt.setp(ax.get_xticklines(), visible<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df2_2016[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().sort_values(ascending<span class="op">=</span><span class="va">False</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>handgun     8894047.8
long_gun    6587362.1
multiple     515446.0
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-131-output-2.png" width="680" height="527"></p>
</div>
</div>
<p><em>Trend of gun sales throughout the year in 2016</em></p>
<div class="cell" data-execution_count="131">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>df2_2016.groupby(<span class="st">'month'</span>)[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]].<span class="bu">sum</span>().plot.line(title<span class="op">=</span><span class="st">'Monthly Trends of Gun Sales in 2016'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="131">
<pre><code>&lt;Axes: title={'center': 'Monthly Trends of Gun Sales in 2016'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-132-output-2.png" width="594" height="447"></p>
</div>
</div>
</section>
<section id="state-level-questions-1" class="level3">
<h3 class="anchored" data-anchor-id="state-level-questions-1"><strong>State Level Questions</strong></h3>
<ul>
<li>What are the top 5 states in terms of gun purchases in the U.S. in 2016?</li>
<li>What are the most bought gun types in those states?</li>
<li>What was the most purchased gun in those states?</li>
<li>What are the overall monthly trends of gun purchases in those states?</li>
</ul>
<div class="cell" data-execution_count="132">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>df2_2016.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="132">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="133">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>df2_2016[<span class="st">'total'</span>] <span class="op">=</span> df2_2016[<span class="st">'handgun'</span>] <span class="op">+</span> df2_2016[<span class="st">'long_gun'</span>] <span class="op">+</span> df2_2016[<span class="st">'multiple'</span>]</span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>df2_2016.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="133">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
<td>35443.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
<td>8945.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
<td>36395.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
<td>25657.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
<td>172560.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><em>What are the top 5 states in terms of gun purchases in the U.S. in 2016?</em> <em>What are the most bought gun types in those states?</em></p>
<div class="cell" data-execution_count="134">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">5</span>))</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>df2_2016.groupby(<span class="st">'state'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().sort_values(ascending<span class="op">=</span><span class="va">False</span>).head().plot.barh(ax<span class="op">=</span>ax1, title<span class="op">=</span><span class="st">'Top 5 States by Gun Sales'</span>)</span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>df2_2016.groupby(<span class="st">'state'</span>)[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>,<span class="st">'total'</span>]].<span class="bu">sum</span>().nlargest(<span class="dv">5</span>, <span class="st">'total'</span>).plot.bar(ax<span class="op">=</span>ax2, title<span class="op">=</span><span class="st">'Breakdown of Gun Sales by Type'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="134">
<pre><code>&lt;Axes: title={'center': 'Breakdown of Gun Sales by Type'}, xlabel='state'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-135-output-2.png" width="1018" height="514"></p>
</div>
</div>
<p><em>What are the overall monthly trends of gun purchases?</em></p>
<div class="cell" data-execution_count="135">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>df2_2016.groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(title <span class="op">=</span> <span class="st">'Overall Monthly Trend of Gun Sales in the U.S. in 2016'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="135">
<pre><code>&lt;Axes: title={'center': 'Overall Monthly Trend of Gun Sales in the U.S. in 2016'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-136-output-2.png" width="568" height="447"></p>
</div>
</div>
<div class="cell" data-execution_count="136">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4, ax5) <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">5</span>, figsize<span class="op">=</span>(<span class="dv">25</span>,<span class="dv">5</span>))</span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>crit_1 <span class="op">=</span> df2_2016.state <span class="op">==</span> <span class="st">'Texas'</span></span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>crit_2 <span class="op">=</span> df2_2016.state <span class="op">==</span> <span class="st">'California'</span></span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>crit_3 <span class="op">=</span> df2_2016.state <span class="op">==</span> <span class="st">'Florida'</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>crit_4 <span class="op">=</span> df2_2016.state <span class="op">==</span> <span class="st">'Pennsylvania'</span></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>crit_5 <span class="op">=</span> df2_2016.state <span class="op">==</span> <span class="st">'Ohio'</span></span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>df2_2016[crit_1].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(ax<span class="op">=</span>ax1, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in Texas'</span>)</span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a>df2_2016[crit_2].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(ax<span class="op">=</span>ax2, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in California'</span>)</span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a>df2_2016[crit_3].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(ax<span class="op">=</span>ax3, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in Florida'</span>)</span>
<span id="cb193-11"><a href="#cb193-11" aria-hidden="true" tabindex="-1"></a>df2_2016[crit_4].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(ax<span class="op">=</span>ax4, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in Pennsylvania'</span>)</span>
<span id="cb193-12"><a href="#cb193-12" aria-hidden="true" tabindex="-1"></a>df2_2016[crit_5].groupby(<span class="st">'month'</span>)[<span class="st">'total'</span>].<span class="bu">sum</span>().plot.line(ax<span class="op">=</span>ax5, title<span class="op">=</span><span class="st">'Monthly Gun Sales Trends in Ohio'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="136">
<pre><code>&lt;Axes: title={'center': 'Monthly Gun Sales Trends in Ohio'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-137-output-2.png" width="1933" height="447"></p>
</div>
</div>
<p><em>Which states have the highest growth in gun registrations over the span of a decade?</em>&nbsp;</p>
<p><strong>To answer this question, I will:</strong></p>
<ol type="1">
<li><p>Load the 2016 dataframe</p></li>
<li><p>Create a new column named&nbsp;<code>total</code>&nbsp;which is the sum of the three form of gun sales</p></li>
<li><p>Drop the individual form of gun sales as they are now irrelevant to the research question</p></li>
<li><p>Rename the columns for clarity</p></li>
<li><p>Follow the above procedure for the 2006 dataframe</p></li>
<li><p>Merge both dataframes on&nbsp;<code>state</code>&nbsp;</p></li>
<li><p>Subtract&nbsp;<code>total_2016</code>&nbsp;from&nbsp;total_2006’ to get a column for change</p></li>
<li><p>Create a percentage change column</p></li>
<li><p>Sort the dataframe by <code>%_change</code> and visualize the result</p></li>
</ol>
<div class="cell" data-execution_count="137">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2016 dataframe is loaded</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>df2_2016.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="137">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
<td>35443.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
<td>8945.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
<td>36395.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
<td>25657.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
<td>172560.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="138">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>df2_2016[<span class="st">'total'</span>] <span class="op">=</span> df2_2016[<span class="st">'handgun'</span>] <span class="op">+</span> df2_2016[<span class="st">'long_gun'</span>] <span class="op">+</span> df2_2016[<span class="st">'multiple'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="139">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># aggregating df2 on the gun sales columns</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>df2_2016 <span class="op">=</span> df2_2016.groupby(<span class="st">'state'</span>)[[<span class="st">'handgun'</span>,<span class="st">'long_gun'</span>,<span class="st">'multiple'</span>, <span class="st">'total'</span>]].<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="140">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dropping columns</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> [<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>df2_2016.drop(columns<span class="op">=</span>cols, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>df2_2016.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="140">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="141">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># renaming for clarity</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>df2_2016.rename(columns<span class="op">=</span><span class="kw">lambda</span> x: x <span class="op">+</span> <span class="st">"_2016"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a>df2_2016.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="141">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now I follow the sme procedures for the 2006 dataframe</p>
<div class="cell" data-execution_count="142">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>df2_2006.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="142">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
<td>40522.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
<td>5519.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
<td>22014.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
<td>22282.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
<td>56579.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="143">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>df2_2006[<span class="st">'total'</span>] <span class="op">=</span> df2_2006[<span class="st">'handgun'</span>] <span class="op">+</span> df2_2006[<span class="st">'long_gun'</span>] <span class="op">+</span> df2_2006[<span class="st">'multiple'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="144">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>df2_2006 <span class="op">=</span> df2_2006.groupby(<span class="st">'state'</span>)[[<span class="st">'handgun'</span>,<span class="st">'long_gun'</span>,<span class="st">'multiple'</span>, <span class="st">'total'</span>]].<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="145">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>cols <span class="op">=</span> [<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>]</span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>df2_2006.drop(columns<span class="op">=</span>cols, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>df2_2006.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="145">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>232324.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>48404.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>177284.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>142397.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>504970.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="146">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rename columns for clarity</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>df2_2006.rename(columns<span class="op">=</span><span class="kw">lambda</span> x: x <span class="op">+</span> <span class="st">"_2006"</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a>df2_2006.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="146">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2006</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>232324.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>48404.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>177284.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>142397.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>504970.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now, I merge both dataframes on ‘state’</p>
<div class="cell" data-execution_count="147">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># merging the dataframe</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>combined_df <span class="op">=</span> df2_2016.merge(df2_2006, on<span class="op">=</span><span class="st">'state'</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a>combined_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="147">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
<th data-quarto-table-cell-role="th">total_2006</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
<td>232324.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
<td>48404.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
<td>177284.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
<td>142397.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
<td>504970.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="148">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add column for total_change</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>combined_df[<span class="st">'total_change'</span>] <span class="op">=</span> combined_df[<span class="st">'total_2016'</span>] <span class="op">-</span> combined_df[<span class="st">'total_2006'</span>]</span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>combined_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="148">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
<th data-quarto-table-cell-role="th">total_2006</th>
<th data-quarto-table-cell-role="th">total_change</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
<td>232324.7</td>
<td>83359.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
<td>48404.4</td>
<td>38043.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
<td>177284.5</td>
<td>141880.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
<td>142397.6</td>
<td>45002.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
<td>504970.9</td>
<td>721424.6</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="149">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adding a column for % change and rounding to 2 d.f.</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>combined_df[<span class="st">'%_change'</span>] <span class="op">=</span> ((combined_df[<span class="st">'total_change'</span>] <span class="op">/</span> combined_df[<span class="st">'total_2006'</span>]) <span class="op">*</span> <span class="dv">100</span>).<span class="bu">round</span>(<span class="dv">2</span>)</span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>combined_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="149">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
<th data-quarto-table-cell-role="th">total_2006</th>
<th data-quarto-table-cell-role="th">total_change</th>
<th data-quarto-table-cell-role="th">%_change</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
<td>232324.7</td>
<td>83359.9</td>
<td>35.88</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
<td>48404.4</td>
<td>38043.4</td>
<td>78.59</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
<td>177284.5</td>
<td>141880.7</td>
<td>80.03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
<td>142397.6</td>
<td>45002.8</td>
<td>31.60</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
<td>504970.9</td>
<td>721424.6</td>
<td>142.86</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="150">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="co"># states with the greatest changes in gun sales from 2006 to 2016</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>combined_df.sort_values(by<span class="op">=</span><span class="st">'%_change'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="150">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
<th data-quarto-table-cell-role="th">total_2006</th>
<th data-quarto-table-cell-role="th">total_change</th>
<th data-quarto-table-cell-role="th">%_change</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Guam</td>
<td>2233.9</td>
<td>390.9</td>
<td>1843.0</td>
<td>471.48</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Illinois</td>
<td>606898.6</td>
<td>181086.6</td>
<td>425812.0</td>
<td>235.14</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">New Jersey</td>
<td>131282.8</td>
<td>41572.1</td>
<td>89710.7</td>
<td>215.80</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Connecticut</td>
<td>182806.8</td>
<td>58656.7</td>
<td>124150.1</td>
<td>211.66</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Massachusetts</td>
<td>134658.8</td>
<td>43577.9</td>
<td>91080.9</td>
<td>209.01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Delaware</td>
<td>54120.0</td>
<td>18561.4</td>
<td>35558.6</td>
<td>191.57</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">District of Columbia</td>
<td>811.3</td>
<td>279.0</td>
<td>532.3</td>
<td>190.79</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Rhode Island</td>
<td>30910.6</td>
<td>11853.8</td>
<td>19056.8</td>
<td>160.77</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Indiana</td>
<td>519104.0</td>
<td>200853.4</td>
<td>318250.6</td>
<td>158.45</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New Hampshire</td>
<td>124641.0</td>
<td>48451.3</td>
<td>76189.7</td>
<td>157.25</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Florida</td>
<td>1126678.0</td>
<td>448412.9</td>
<td>678265.1</td>
<td>151.26</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Missouri</td>
<td>550714.2</td>
<td>222703.8</td>
<td>328010.4</td>
<td>147.29</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
<td>504970.9</td>
<td>721424.6</td>
<td>142.86</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Tennessee</td>
<td>604447.0</td>
<td>257610.1</td>
<td>346836.9</td>
<td>134.64</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Washington</td>
<td>417704.5</td>
<td>190076.1</td>
<td>227628.4</td>
<td>119.76</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>493366.8</td>
<td>227299.8</td>
<td>266067.0</td>
<td>117.06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>735052.3</td>
<td>343179.8</td>
<td>391872.5</td>
<td>114.19</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>368982.5</td>
<td>173129.4</td>
<td>195853.1</td>
<td>113.13</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Virginia</td>
<td>556531.8</td>
<td>265476.9</td>
<td>291054.9</td>
<td>109.63</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Maryland</td>
<td>137290.7</td>
<td>65591.9</td>
<td>71698.8</td>
<td>109.31</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">South Carolina</td>
<td>250854.6</td>
<td>126091.3</td>
<td>124763.3</td>
<td>98.95</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Texas</td>
<td>1297197.5</td>
<td>657275.5</td>
<td>639922.0</td>
<td>97.36</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maine</td>
<td>110103.5</td>
<td>56676.4</td>
<td>53427.1</td>
<td>94.27</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oklahoma</td>
<td>347686.5</td>
<td>179211.3</td>
<td>168475.2</td>
<td>94.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>353919.5</td>
<td>182485.6</td>
<td>171433.9</td>
<td>93.94</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Wisconsin</td>
<td>381738.4</td>
<td>205512.6</td>
<td>176225.8</td>
<td>85.75</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Vermont</td>
<td>42660.3</td>
<td>23028.2</td>
<td>19632.1</td>
<td>85.25</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Puerto Rico</td>
<td>17264.5</td>
<td>9504.8</td>
<td>7759.7</td>
<td>81.64</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">South Dakota</td>
<td>99014.2</td>
<td>54671.6</td>
<td>44342.6</td>
<td>81.11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Nevada</td>
<td>122135.3</td>
<td>67496.1</td>
<td>54639.2</td>
<td>80.95</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
<td>177284.5</td>
<td>141880.7</td>
<td>80.03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
<td>48404.4</td>
<td>38043.4</td>
<td>78.59</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">New Mexico</td>
<td>145071.8</td>
<td>83798.5</td>
<td>61273.3</td>
<td>73.12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Louisiana</td>
<td>358999.0</td>
<td>214295.7</td>
<td>144703.3</td>
<td>67.53</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">West Virginia</td>
<td>201117.9</td>
<td>122062.6</td>
<td>79055.3</td>
<td>64.77</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Minnesota</td>
<td>315347.5</td>
<td>193136.1</td>
<td>122211.4</td>
<td>63.28</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">North Dakota</td>
<td>61330.8</td>
<td>38198.7</td>
<td>23132.1</td>
<td>60.56</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Idaho</td>
<td>117137.4</td>
<td>72988.4</td>
<td>44149.0</td>
<td>60.49</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Kansas</td>
<td>178892.4</td>
<td>112153.3</td>
<td>66739.1</td>
<td>59.51</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Michigan</td>
<td>328993.7</td>
<td>209450.2</td>
<td>119543.5</td>
<td>57.07</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Pennsylvania</td>
<td>880410.3</td>
<td>571519.3</td>
<td>308891.0</td>
<td>54.05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mississippi</td>
<td>243585.2</td>
<td>168252.6</td>
<td>75332.6</td>
<td>44.77</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Montana</td>
<td>109175.1</td>
<td>75877.6</td>
<td>33297.5</td>
<td>43.88</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Wyoming</td>
<td>55812.4</td>
<td>39540.8</td>
<td>16271.6</td>
<td>41.15</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
<td>232324.7</td>
<td>83359.9</td>
<td>35.88</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Georgia</td>
<td>370340.7</td>
<td>273600.3</td>
<td>96740.4</td>
<td>35.36</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
<td>142397.6</td>
<td>45002.8</td>
<td>31.60</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">North Carolina</td>
<td>218489.4</td>
<td>166084.1</td>
<td>52405.3</td>
<td>31.55</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Kentucky</td>
<td>288612.1</td>
<td>226781.0</td>
<td>61831.1</td>
<td>27.26</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Utah</td>
<td>114069.4</td>
<td>95817.3</td>
<td>18252.1</td>
<td>19.05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Virgin Islands</td>
<td>365.3</td>
<td>354.5</td>
<td>10.8</td>
<td>3.05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Nebraska</td>
<td>31196.1</td>
<td>32570.0</td>
<td>-1373.9</td>
<td>-4.22</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Iowa</td>
<td>41988.4</td>
<td>51636.0</td>
<td>-9647.6</td>
<td>-18.68</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mariana Islands</td>
<td>17.6</td>
<td>25.3</td>
<td>-7.7</td>
<td>-30.43</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Hawaii</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Visualizing results</p>
<div class="cell" data-execution_count="151">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>combined_df[<span class="st">'%_change'</span>].head(<span class="dv">10</span>).plot.line(</span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'state'</span>, y<span class="op">=</span><span class="st">'%_change'</span>, title<span class="op">=</span><span class="st">''</span>, figsize<span class="op">=</span>(<span class="dv">20</span>, <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="151">
<pre><code>&lt;Axes: xlabel='state'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-152-output-2.png" width="1539" height="354"></p>
</div>
</div>
</section>
</section>
<section id="which-census-data-variables-are-most-associated-with-gun-sales-data" class="level2">
<h2 class="anchored" data-anchor-id="which-census-data-variables-are-most-associated-with-gun-sales-data">Which census data variables are most associated with gun sales data?</h2>
<p><em>To answer this question, I proceed merge the dataframes</em></p>
<div class="cell" data-execution_count="152">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reading in the census data</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df_census_cleaned_v2.csv'</span>)</span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a>df1.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="152">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>2.55</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>2.81</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>2.69</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>2.53</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>2.96</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="data-dictionary-2" class="level3">
<h3 class="anchored" data-anchor-id="data-dictionary-2"><strong>Data Dictionary</strong></h3>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">s/n</th>
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">state</td>
<td style="text-align: left;">Each of the 50 states of the contiguous U.S.</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">pop_2016</td>
<td style="text-align: left;">Population estimates by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">female_pct</td>
<td style="text-align: left;">Female persons, percent, by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">white_pct</td>
<td style="text-align: left;">White alone, percent, by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">black_pct</td>
<td style="text-align: left;">Black or African American alone, percent by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">asian_pct</td>
<td style="text-align: left;">Asian alone, percent, July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">6</td>
<td style="text-align: left;">pe_hh</td>
<td style="text-align: left;">Persons per household, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">7</td>
<td style="text-align: left;">pe_whi</td>
<td style="text-align: left;">Persons without health insurance, under age 65 years, percent</td>
</tr>
<tr class="odd">
<td style="text-align: left;">8</td>
<td style="text-align: left;">adults_below_65</td>
<td style="text-align: left;">adults older than 18, younger than 65, percent, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">9</td>
<td style="text-align: left;">high_school_grad_higher</td>
<td style="text-align: left;">High school graduate or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10</td>
<td style="text-align: left;">bsc_higher</td>
<td style="text-align: left;">Bachelor’s degree or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">11</td>
<td style="text-align: left;">median_hu</td>
<td style="text-align: left;">Median value of owner-occupied housing units, 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12</td>
<td style="text-align: left;">median_gross_rent</td>
<td style="text-align: left;">Median gross rent, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">13</td>
<td style="text-align: left;">poverty_pct</td>
<td style="text-align: left;">Persons in poverty, percent</td>
</tr>
<tr class="odd">
<td style="text-align: left;">14</td>
<td style="text-align: left;">median_hh_income</td>
<td style="text-align: left;">Median household income (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">15</td>
<td style="text-align: left;">per_cap_inc</td>
<td style="text-align: left;">Per capita income in past 12 months (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">16</td>
<td style="text-align: left;">firms</td>
<td style="text-align: left;">All firms, 2012</td>
</tr>
</tbody>
</table>
<div class="cell" data-execution_count="153">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reading in the gun data </span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.read_csv(<span class="st">'Data/df2_2016.csv'</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a>df2.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="153">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="data-dictionary-3" class="level3">
<h3 class="anchored" data-anchor-id="data-dictionary-3"><strong>Data Dictionary</strong></h3>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">s/n</th>
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">state</td>
<td style="text-align: left;">Each of the 55 states and territories of the .U.S.</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">handgun</td>
<td style="text-align: left;">handgun checks, transformed into sales by a factor of 1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">long_gun</td>
<td style="text-align: left;">long-gun checks, transformed into sales by a factor of 1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">multiple</td>
<td style="text-align: left;">multiple gun checks, transformed into sales by a factor of 2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">month</td>
<td style="text-align: left;">months of 2016</td>
</tr>
</tbody>
</table>
<div class="cell" data-execution_count="154">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of unique states in census dataframe</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a>df1.state.nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="154">
<pre><code>50</code></pre>
</div>
</div>
<div class="cell" data-execution_count="155">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of unique states in gun sales dataframe</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a>df2.state.nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="155">
<pre><code>55</code></pre>
</div>
</div>
<div class="cell" data-execution_count="156">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co"># getting the uncommon territories in both datasets</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> df1.state</span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> df2.state.unique()</span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a>common_states <span class="op">=</span> s1[s1.isin(s2)]</span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> df2.query(<span class="st">"state not in @common_states"</span>)</span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a>s3.loc[:, <span class="st">'state'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="156">
<pre><code>array(['District of Columbia', 'Guam', 'Mariana Islands', 'Puerto Rico',
       'Virgin Islands'], dtype=object)</code></pre>
</div>
</div>
<p>These territories are part of the commonwealth of the United States but are not part of the mainland.</p>
<div class="cell" data-execution_count="157">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating 'total' column</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>df2[<span class="st">'total'</span>] <span class="op">=</span> df2[<span class="st">'handgun'</span>] <span class="op">+</span> df2[<span class="st">'long_gun'</span>] <span class="op">+</span> df2[<span class="st">'multiple'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="158">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="co"># aggregating df2 on the gun sales columns</span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>df2_agg <span class="op">=</span> df2.groupby(<span class="st">'state'</span>)[[<span class="st">'handgun'</span>,<span class="st">'long_gun'</span>,<span class="st">'multiple'</span>, <span class="st">'total'</span>]].<span class="bu">sum</span>()</span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a>df2_agg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="158">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>168435.3</td>
<td>134159.3</td>
<td>13090</td>
<td>315684.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>41240.1</td>
<td>40575.7</td>
<td>4632</td>
<td>86447.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>183462.4</td>
<td>119886.8</td>
<td>15816</td>
<td>319165.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>88268.4</td>
<td>90332.0</td>
<td>8800</td>
<td>187400.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>616390.5</td>
<td>610005.0</td>
<td>0</td>
<td>1226395.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>266752.2</td>
<td>198028.6</td>
<td>28586</td>
<td>493366.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Connecticut</td>
<td>134612.5</td>
<td>48194.3</td>
<td>0</td>
<td>182806.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Delaware</td>
<td>28131.4</td>
<td>23920.6</td>
<td>2068</td>
<td>54120.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">District of Columbia</td>
<td>742.5</td>
<td>52.8</td>
<td>16</td>
<td>811.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Florida</td>
<td>728538.8</td>
<td>347855.2</td>
<td>50284</td>
<td>1126678.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Georgia</td>
<td>214280.0</td>
<td>141104.7</td>
<td>14956</td>
<td>370340.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Guam</td>
<td>1373.9</td>
<td>726.0</td>
<td>134</td>
<td>2233.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Hawaii</td>
<td>0.0</td>
<td>0.0</td>
<td>0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Idaho</td>
<td>51175.3</td>
<td>61150.1</td>
<td>4812</td>
<td>117137.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Illinois</td>
<td>387652.1</td>
<td>194980.5</td>
<td>24266</td>
<td>606898.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Indiana</td>
<td>306000.2</td>
<td>194939.8</td>
<td>18164</td>
<td>519104.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Iowa</td>
<td>3069.0</td>
<td>38779.4</td>
<td>140</td>
<td>41988.4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Kansas</td>
<td>89227.6</td>
<td>81122.8</td>
<td>8542</td>
<td>178892.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Kentucky</td>
<td>154793.1</td>
<td>119933.0</td>
<td>13886</td>
<td>288612.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Louisiana</td>
<td>188746.8</td>
<td>153034.2</td>
<td>17218</td>
<td>358999.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maine</td>
<td>53729.5</td>
<td>51458.0</td>
<td>4916</td>
<td>110103.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mariana Islands</td>
<td>0.0</td>
<td>17.6</td>
<td>0</td>
<td>17.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maryland</td>
<td>57535.5</td>
<td>79081.2</td>
<td>674</td>
<td>137290.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Massachusetts</td>
<td>83574.7</td>
<td>46124.1</td>
<td>4960</td>
<td>134658.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Michigan</td>
<td>181365.8</td>
<td>141997.9</td>
<td>5630</td>
<td>328993.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Minnesota</td>
<td>147358.2</td>
<td>157897.3</td>
<td>10092</td>
<td>315347.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Mississippi</td>
<td>130955.0</td>
<td>102104.2</td>
<td>10526</td>
<td>243585.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Missouri</td>
<td>302229.4</td>
<td>222978.8</td>
<td>25506</td>
<td>550714.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Montana</td>
<td>41301.7</td>
<td>62517.4</td>
<td>5356</td>
<td>109175.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Nebraska</td>
<td>1888.7</td>
<td>29143.4</td>
<td>164</td>
<td>31196.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Nevada</td>
<td>72773.8</td>
<td>41915.5</td>
<td>7446</td>
<td>122135.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New Hampshire</td>
<td>75381.9</td>
<td>49149.1</td>
<td>110</td>
<td>124641.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">New Jersey</td>
<td>77273.9</td>
<td>54008.9</td>
<td>0</td>
<td>131282.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New Mexico</td>
<td>76377.4</td>
<td>61230.4</td>
<td>7464</td>
<td>145071.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">New York</td>
<td>146613.5</td>
<td>217437.0</td>
<td>4932</td>
<td>368982.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">North Carolina</td>
<td>18254.5</td>
<td>194610.9</td>
<td>5624</td>
<td>218489.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">North Dakota</td>
<td>21972.5</td>
<td>37414.3</td>
<td>1944</td>
<td>61330.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>434027.0</td>
<td>268359.3</td>
<td>32666</td>
<td>735052.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Oklahoma</td>
<td>182799.1</td>
<td>143565.4</td>
<td>21322</td>
<td>347686.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>196587.6</td>
<td>157331.9</td>
<td>0</td>
<td>353919.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Pennsylvania</td>
<td>706455.2</td>
<td>173955.1</td>
<td>0</td>
<td>880410.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Puerto Rico</td>
<td>14056.9</td>
<td>2657.6</td>
<td>550</td>
<td>17264.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Rhode Island</td>
<td>15688.2</td>
<td>11224.4</td>
<td>3998</td>
<td>30910.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">South Carolina</td>
<td>145720.3</td>
<td>96154.3</td>
<td>8980</td>
<td>250854.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">South Dakota</td>
<td>40172.0</td>
<td>54474.2</td>
<td>4368</td>
<td>99014.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Tennessee</td>
<td>351085.9</td>
<td>231177.1</td>
<td>22184</td>
<td>604447.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Texas</td>
<td>701223.6</td>
<td>529769.9</td>
<td>66204</td>
<td>1297197.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Utah</td>
<td>52141.1</td>
<td>59546.3</td>
<td>2382</td>
<td>114069.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Vermont</td>
<td>20152.0</td>
<td>20738.3</td>
<td>1770</td>
<td>42660.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Virgin Islands</td>
<td>292.6</td>
<td>62.7</td>
<td>10</td>
<td>365.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Virginia</td>
<td>325559.3</td>
<td>230972.5</td>
<td>0</td>
<td>556531.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Washington</td>
<td>235516.6</td>
<td>166131.9</td>
<td>16056</td>
<td>417704.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">West Virginia</td>
<td>101336.4</td>
<td>89215.5</td>
<td>10566</td>
<td>201117.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Wisconsin</td>
<td>204930.0</td>
<td>175762.4</td>
<td>1046</td>
<td>381738.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Wyoming</td>
<td>24825.9</td>
<td>28396.5</td>
<td>2590</td>
<td>55812.4</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Merging on df1’s state column</p>
<div class="cell" data-execution_count="159">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>merged_df <span class="op">=</span> df2_agg.merge(df1, on<span class="op">=</span><span class="st">'state'</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>merged_df.head(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="159">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">total</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>168435.3</td>
<td>134159.3</td>
<td>13090</td>
<td>315684.6</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>...</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>41240.1</td>
<td>40575.7</td>
<td>4632</td>
<td>86447.8</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>...</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>183462.4</td>
<td>119886.8</td>
<td>15816</td>
<td>319165.2</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>...</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>88268.4</td>
<td>90332.0</td>
<td>8800</td>
<td>187400.4</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>...</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>616390.5</td>
<td>610005.0</td>
<td>0</td>
<td>1226395.5</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>...</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Colorado</td>
<td>266752.2</td>
<td>198028.6</td>
<td>28586</td>
<td>493366.8</td>
<td>5540545.0</td>
<td>49.7</td>
<td>87.5</td>
<td>4.5</td>
<td>3.3</td>
<td>...</td>
<td>8.6</td>
<td>63.8</td>
<td>90.7</td>
<td>38.1</td>
<td>247800.0</td>
<td>1002.0</td>
<td>11.0</td>
<td>60629.0</td>
<td>32217.0</td>
<td>547352.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Connecticut</td>
<td>134612.5</td>
<td>48194.3</td>
<td>0</td>
<td>182806.8</td>
<td>3576452.0</td>
<td>51.2</td>
<td>80.6</td>
<td>11.8</td>
<td>4.7</td>
<td>...</td>
<td>5.7</td>
<td>62.8</td>
<td>89.9</td>
<td>37.6</td>
<td>270500.0</td>
<td>1075.0</td>
<td>9.8</td>
<td>70331.0</td>
<td>38803.0</td>
<td>326693.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Delaware</td>
<td>28131.4</td>
<td>23920.6</td>
<td>2068</td>
<td>54120.0</td>
<td>952065.0</td>
<td>51.6</td>
<td>70.1</td>
<td>22.6</td>
<td>4.0</td>
<td>...</td>
<td>6.6</td>
<td>61.0</td>
<td>88.4</td>
<td>30.0</td>
<td>231500.0</td>
<td>1018.0</td>
<td>11.7</td>
<td>60509.0</td>
<td>30554.0</td>
<td>73418.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Florida</td>
<td>728538.8</td>
<td>347855.2</td>
<td>50284</td>
<td>1126678.0</td>
<td>20612439.0</td>
<td>51.1</td>
<td>77.6</td>
<td>16.8</td>
<td>2.9</td>
<td>...</td>
<td>15.3</td>
<td>60.0</td>
<td>86.9</td>
<td>27.3</td>
<td>159000.0</td>
<td>1002.0</td>
<td>14.7</td>
<td>47507.0</td>
<td>26829.0</td>
<td>2100187.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Georgia</td>
<td>214280.0</td>
<td>141104.7</td>
<td>14956</td>
<td>370340.7</td>
<td>10310371.0</td>
<td>51.3</td>
<td>61.2</td>
<td>32.0</td>
<td>4.1</td>
<td>...</td>
<td>14.8</td>
<td>62.5</td>
<td>85.4</td>
<td>28.8</td>
<td>148100.0</td>
<td>879.0</td>
<td>16.0</td>
<td>49620.0</td>
<td>25737.0</td>
<td>929864.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>Hawaii</td>
<td>0.0</td>
<td>0.0</td>
<td>0</td>
<td>0.0</td>
<td>1428557.0</td>
<td>49.8</td>
<td>25.8</td>
<td>2.2</td>
<td>37.7</td>
<td>...</td>
<td>4.2</td>
<td>61.3</td>
<td>91.0</td>
<td>30.8</td>
<td>515300.0</td>
<td>1438.0</td>
<td>9.3</td>
<td>69515.0</td>
<td>29822.0</td>
<td>118454.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Idaho</td>
<td>51175.3</td>
<td>61150.1</td>
<td>4812</td>
<td>117137.4</td>
<td>1683140.0</td>
<td>49.9</td>
<td>93.3</td>
<td>0.8</td>
<td>1.5</td>
<td>...</td>
<td>11.8</td>
<td>58.9</td>
<td>89.5</td>
<td>25.9</td>
<td>162900.0</td>
<td>743.0</td>
<td>14.4</td>
<td>47583.0</td>
<td>23399.0</td>
<td>146642.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>Illinois</td>
<td>387652.1</td>
<td>194980.5</td>
<td>24266</td>
<td>606898.6</td>
<td>12801539.0</td>
<td>50.9</td>
<td>77.2</td>
<td>14.7</td>
<td>5.5</td>
<td>...</td>
<td>7.4</td>
<td>62.5</td>
<td>87.9</td>
<td>32.3</td>
<td>173800.0</td>
<td>907.0</td>
<td>13.0</td>
<td>57574.0</td>
<td>30494.0</td>
<td>1135017.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>Indiana</td>
<td>306000.2</td>
<td>194939.8</td>
<td>18164</td>
<td>519104.0</td>
<td>6633053.0</td>
<td>50.7</td>
<td>85.6</td>
<td>9.7</td>
<td>2.2</td>
<td>...</td>
<td>9.4</td>
<td>61.3</td>
<td>87.8</td>
<td>24.1</td>
<td>124200.0</td>
<td>745.0</td>
<td>14.1</td>
<td>49255.0</td>
<td>25346.0</td>
<td>479059.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>Iowa</td>
<td>3069.0</td>
<td>38779.4</td>
<td>140</td>
<td>41988.4</td>
<td>3134693.0</td>
<td>50.3</td>
<td>91.4</td>
<td>3.7</td>
<td>2.5</td>
<td>...</td>
<td>5.0</td>
<td>60.3</td>
<td>91.5</td>
<td>26.7</td>
<td>129200.0</td>
<td>697.0</td>
<td>11.8</td>
<td>53183.0</td>
<td>27950.0</td>
<td>259121.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Kansas</td>
<td>89227.6</td>
<td>81122.8</td>
<td>8542</td>
<td>178892.4</td>
<td>2907289.0</td>
<td>50.2</td>
<td>86.6</td>
<td>6.2</td>
<td>3.0</td>
<td>...</td>
<td>10.1</td>
<td>60.4</td>
<td>90.2</td>
<td>31.0</td>
<td>132000.0</td>
<td>757.0</td>
<td>12.1</td>
<td>52205.0</td>
<td>27706.0</td>
<td>239118.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Kentucky</td>
<td>154793.1</td>
<td>119933.0</td>
<td>13886</td>
<td>288612.1</td>
<td>4436974.0</td>
<td>50.7</td>
<td>88.0</td>
<td>8.3</td>
<td>1.5</td>
<td>...</td>
<td>6.0</td>
<td>61.6</td>
<td>84.2</td>
<td>22.3</td>
<td>123200.0</td>
<td>675.0</td>
<td>18.5</td>
<td>43740.0</td>
<td>24063.0</td>
<td>331546.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>Louisiana</td>
<td>188746.8</td>
<td>153034.2</td>
<td>17218</td>
<td>358999.0</td>
<td>4681666.0</td>
<td>51.1</td>
<td>63.2</td>
<td>32.6</td>
<td>1.8</td>
<td>...</td>
<td>11.9</td>
<td>61.8</td>
<td>83.4</td>
<td>22.5</td>
<td>144100.0</td>
<td>788.0</td>
<td>20.2</td>
<td>45047.0</td>
<td>24981.0</td>
<td>414291.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>Maine</td>
<td>53729.5</td>
<td>51458.0</td>
<td>4916</td>
<td>110103.5</td>
<td>1331479.0</td>
<td>51.0</td>
<td>94.8</td>
<td>1.5</td>
<td>1.2</td>
<td>...</td>
<td>9.9</td>
<td>61.5</td>
<td>91.6</td>
<td>29.0</td>
<td>173800.0</td>
<td>777.0</td>
<td>12.5</td>
<td>49331.0</td>
<td>27655.0</td>
<td>139570.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>Maryland</td>
<td>57535.5</td>
<td>79081.2</td>
<td>674</td>
<td>137290.7</td>
<td>6016447.0</td>
<td>51.6</td>
<td>59.3</td>
<td>30.7</td>
<td>6.6</td>
<td>...</td>
<td>7.0</td>
<td>63.0</td>
<td>89.4</td>
<td>37.9</td>
<td>286900.0</td>
<td>1230.0</td>
<td>9.7</td>
<td>74551.0</td>
<td>36897.0</td>
<td>531953.0</td>
</tr>
</tbody>
</table>

<p>20 rows × 21 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="160">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># checking for nans throughout the dataframe</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>merged_df.isnull().<span class="bu">sum</span>().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="160">
<pre><code>0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="161">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>merged_df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 50 entries, 0 to 49
Data columns (total 21 columns):
 #   Column                   Non-Null Count  Dtype  
---  ------                   --------------  -----  
 0   state                    50 non-null     object 
 1   handgun                  50 non-null     float64
 2   long_gun                 50 non-null     float64
 3   multiple                 50 non-null     int64  
 4   total                    50 non-null     float64
 5   pop_2016                 50 non-null     float64
 6   female_pct               50 non-null     float64
 7   white_pct                50 non-null     float64
 8   black_pct                50 non-null     float64
 9   asian_pct                50 non-null     float64
 10  pe_hh                    50 non-null     float64
 11  pe_whi                   50 non-null     float64
 12  adults_below_65          50 non-null     float64
 13  high_school_grad_higher  50 non-null     float64
 14  bsc_higher               50 non-null     float64
 15  median_hu                50 non-null     float64
 16  median_gross_rent        50 non-null     float64
 17  poverty_pct              50 non-null     float64
 18  median_hh_income         50 non-null     float64
 19  per_cap_inc              50 non-null     float64
 20  firms                    50 non-null     float64
dtypes: float64(19), int64(1), object(1)
memory usage: 8.3+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="162">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>merged_df.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="162">
<pre><code>(50, 21)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="163">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># saving for later</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>merged_df.to_csv(<span class="st">'Data/merged_cleaned_data.csv'</span>, index<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="exploratory-data-analysisunivariate" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysisunivariate">Exploratory Data Analysis(Univariate)</h2>
<p><em>(Merged dataframe)</em></p>
<section id="lets-explore-the-first-5-columns-representing-the-gun-sales-data" class="level3">
<h3 class="anchored" data-anchor-id="lets-explore-the-first-5-columns-representing-the-gun-sales-data">Let’s explore the first 5 columns, representing the gun sales data</h3>
<div class="cell" data-execution_count="164">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>merged_df <span class="op">=</span> pd.read_csv(<span class="st">'Data/merged_cleaned_data.csv'</span>)</span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>merged_df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="164">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">total</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>168435.3</td>
<td>134159.3</td>
<td>13090</td>
<td>315684.6</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>...</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>41240.1</td>
<td>40575.7</td>
<td>4632</td>
<td>86447.8</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>...</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>183462.4</td>
<td>119886.8</td>
<td>15816</td>
<td>319165.2</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>...</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>88268.4</td>
<td>90332.0</td>
<td>8800</td>
<td>187400.4</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>...</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>616390.5</td>
<td>610005.0</td>
<td>0</td>
<td>1226395.5</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>...</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

<p>5 rows × 21 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="165">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>merged_df.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 50 entries, 0 to 49
Data columns (total 21 columns):
 #   Column                   Non-Null Count  Dtype  
---  ------                   --------------  -----  
 0   state                    50 non-null     object 
 1   handgun                  50 non-null     float64
 2   long_gun                 50 non-null     float64
 3   multiple                 50 non-null     int64  
 4   total                    50 non-null     float64
 5   pop_2016                 50 non-null     float64
 6   female_pct               50 non-null     float64
 7   white_pct                50 non-null     float64
 8   black_pct                50 non-null     float64
 9   asian_pct                50 non-null     float64
 10  pe_hh                    50 non-null     float64
 11  pe_whi                   50 non-null     float64
 12  adults_below_65          50 non-null     float64
 13  high_school_grad_higher  50 non-null     float64
 14  bsc_higher               50 non-null     float64
 15  median_hu                50 non-null     float64
 16  median_gross_rent        50 non-null     float64
 17  poverty_pct              50 non-null     float64
 18  median_hh_income         50 non-null     float64
 19  per_cap_inc              50 non-null     float64
 20  firms                    50 non-null     float64
dtypes: float64(19), int64(1), object(1)
memory usage: 8.3+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="166">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">'whitegrid'</span>)</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">4</span>))</span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a>merged_df.handgun.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax1)</span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true" tabindex="-1"></a>merged_df.long_gun.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax2)</span>
<span id="cb232-8"><a href="#cb232-8" aria-hidden="true" tabindex="-1"></a>merged_df.multiple.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax3)</span>
<span id="cb232-9"><a href="#cb232-9" aria-hidden="true" tabindex="-1"></a>merged_df.total.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax4)</span>
<span id="cb232-10"><a href="#cb232-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-11"><a href="#cb232-11" aria-hidden="true" tabindex="-1"></a>ax1.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribution of Handgun Sales'</span>)</span>
<span id="cb232-12"><a href="#cb232-12" aria-hidden="true" tabindex="-1"></a>ax2.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribution of Long-gun Sales'</span>)</span>
<span id="cb232-13"><a href="#cb232-13" aria-hidden="true" tabindex="-1"></a>ax3.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribution of Multiple Sales'</span>)</span>
<span id="cb232-14"><a href="#cb232-14" aria-hidden="true" tabindex="-1"></a>ax4.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribution of Total Sales'</span>)</span>
<span id="cb232-15"><a href="#cb232-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-16"><a href="#cb232-16" aria-hidden="true" tabindex="-1"></a>sns.despine(right<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb232-17"><a href="#cb232-17" aria-hidden="true" tabindex="-1"></a>sns.despine(offset<span class="op">=</span><span class="dv">0</span>, trim<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-167-output-1.png" width="1524" height="372"></p>
</div>
</div>
<div class="cell" data-execution_count="167">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summary statistics</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>merged_df[[<span class="st">'handgun'</span>, <span class="st">'long_gun'</span>, <span class="st">'multiple'</span>, <span class="st">'total'</span>]].describe().T</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="167">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">handgun</td>
<td>50.0</td>
<td>177551.638</td>
<td>185945.395696</td>
<td>0.0</td>
<td>51416.750</td>
<td>132783.75</td>
<td>211942.500</td>
<td>728538.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">long_gun</td>
<td>50.0</td>
<td>131676.908</td>
<td>118931.726762</td>
<td>0.0</td>
<td>49726.325</td>
<td>99129.25</td>
<td>175310.575</td>
<td>610005.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">multiple</td>
<td>50.0</td>
<td>10294.720</td>
<td>13047.318153</td>
<td>0.0</td>
<td>1813.500</td>
<td>5490.00</td>
<td>14688.500</td>
<td>66204.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">total</td>
<td>50.0</td>
<td>319523.266</td>
<td>302625.048243</td>
<td>0.0</td>
<td>114836.400</td>
<td>231037.30</td>
<td>378888.975</td>
<td>1297197.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>As expected with data regarding sales, the data is heavily right-skewed; with most of gun sales on the low end, evidenced by the mean being greater than the median.</p>
</section>
<section id="lets-explore-the-next-5-columns-representing-the-population-by-race" class="level3">
<h3 class="anchored" data-anchor-id="lets-explore-the-next-5-columns-representing-the-population-by-race">Let’s explore the next 5 columns, representing the population % by race</h3>
<div class="cell" data-execution_count="168">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">'whitegrid'</span>)</span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4, ax5) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">5</span>, figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">4</span>))</span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>merged_df.pop_2016.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax1)</span>
<span id="cb234-6"><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a>merged_df.female_pct.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax2)</span>
<span id="cb234-7"><a href="#cb234-7" aria-hidden="true" tabindex="-1"></a>merged_df.black_pct.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax3)</span>
<span id="cb234-8"><a href="#cb234-8" aria-hidden="true" tabindex="-1"></a>merged_df.white_pct.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax4)</span>
<span id="cb234-9"><a href="#cb234-9" aria-hidden="true" tabindex="-1"></a>merged_df.asian_pct.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax5)</span>
<span id="cb234-10"><a href="#cb234-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-11"><a href="#cb234-11" aria-hidden="true" tabindex="-1"></a>ax1.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribution of the Whole Population'</span>)</span>
<span id="cb234-12"><a href="#cb234-12" aria-hidden="true" tabindex="-1"></a>ax2.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribution of the </span><span class="sc">% F</span><span class="st">emale Population'</span>)</span>
<span id="cb234-13"><a href="#cb234-13" aria-hidden="true" tabindex="-1"></a>ax3.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribution of the % Black Population'</span>)</span>
<span id="cb234-14"><a href="#cb234-14" aria-hidden="true" tabindex="-1"></a>ax4.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribution of the %  White Population'</span>)</span>
<span id="cb234-15"><a href="#cb234-15" aria-hidden="true" tabindex="-1"></a>ax5.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Distribution of the % Asian Population'</span>)</span>
<span id="cb234-16"><a href="#cb234-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-17"><a href="#cb234-17" aria-hidden="true" tabindex="-1"></a>sns.despine(right<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb234-18"><a href="#cb234-18" aria-hidden="true" tabindex="-1"></a>sns.despine(offset<span class="op">=</span><span class="dv">0</span>, trim<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-169-output-1.png" width="1537" height="372"></p>
</div>
</div>
</section>
<section id="lets-explore-the-next-5-columns-representing-levels-of-education-and-persons-per-household-and-persons-without-health-insurance" class="level3">
<h3 class="anchored" data-anchor-id="lets-explore-the-next-5-columns-representing-levels-of-education-and-persons-per-household-and-persons-without-health-insurance">Let’s explore the next 5 columns, representing levels of education and persons per household and persons without health insurance</h3>
<div class="cell" data-execution_count="169">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">'whitegrid'</span>)</span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4, ax5) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">5</span>, figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">4</span>))</span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a>merged_df. pe_hh.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax1)</span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true" tabindex="-1"></a>merged_df.pe_whi.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax2)</span>
<span id="cb235-7"><a href="#cb235-7" aria-hidden="true" tabindex="-1"></a>merged_df.adults_below_65.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax3)</span>
<span id="cb235-8"><a href="#cb235-8" aria-hidden="true" tabindex="-1"></a>merged_df.high_school_grad_higher.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax4)</span>
<span id="cb235-9"><a href="#cb235-9" aria-hidden="true" tabindex="-1"></a>merged_df.bsc_higher.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax5)</span>
<span id="cb235-10"><a href="#cb235-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-11"><a href="#cb235-11" aria-hidden="true" tabindex="-1"></a>ax1.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'count of persons per household'</span>)</span>
<span id="cb235-12"><a href="#cb235-12" aria-hidden="true" tabindex="-1"></a>ax2.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'count of persons without health insurance'</span>)</span>
<span id="cb235-13"><a href="#cb235-13" aria-hidden="true" tabindex="-1"></a>ax3.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'adult population below 65'</span>)</span>
<span id="cb235-14"><a href="#cb235-14" aria-hidden="true" tabindex="-1"></a>ax4.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'High School Graduates or Higher'</span>)</span>
<span id="cb235-15"><a href="#cb235-15" aria-hidden="true" tabindex="-1"></a>ax5.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Bachelor Degree Holders or Higher'</span>)</span>
<span id="cb235-16"><a href="#cb235-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-17"><a href="#cb235-17" aria-hidden="true" tabindex="-1"></a>sns.despine(right<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb235-18"><a href="#cb235-18" aria-hidden="true" tabindex="-1"></a>sns.despine(offset<span class="op">=</span><span class="dv">0</span>, trim<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-170-output-1.png" width="1531" height="356"></p>
</div>
</div>
</section>
<section id="lets-explore-the-next-6-columns-representing-economic-data" class="level3">
<h3 class="anchored" data-anchor-id="lets-explore-the-next-6-columns-representing-economic-data">Let’s explore the next 6 columns, representing economic data</h3>
<div class="cell" data-execution_count="170">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>sns.set_style(<span class="st">'whitegrid'</span>)</span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>fig, (ax1, ax2, ax3, ax4, ax5, ax6) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">6</span>, figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">4</span>))</span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a>merged_df.median_hu.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax1)</span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true" tabindex="-1"></a>merged_df.median_gross_rent.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax2)</span>
<span id="cb236-7"><a href="#cb236-7" aria-hidden="true" tabindex="-1"></a>merged_df.poverty_pct .hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax3)</span>
<span id="cb236-8"><a href="#cb236-8" aria-hidden="true" tabindex="-1"></a>merged_df.median_hh_income.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax4)</span>
<span id="cb236-9"><a href="#cb236-9" aria-hidden="true" tabindex="-1"></a>merged_df.per_cap_inc.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax5)</span>
<span id="cb236-10"><a href="#cb236-10" aria-hidden="true" tabindex="-1"></a>merged_df.firms.hist(bins<span class="op">=</span><span class="dv">20</span>, ax<span class="op">=</span>ax6)</span>
<span id="cb236-11"><a href="#cb236-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-12"><a href="#cb236-12" aria-hidden="true" tabindex="-1"></a>ax1.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Housing Units Value'</span>)</span>
<span id="cb236-13"><a href="#cb236-13" aria-hidden="true" tabindex="-1"></a>ax2.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Median Gross Rent'</span>)</span>
<span id="cb236-14"><a href="#cb236-14" aria-hidden="true" tabindex="-1"></a>ax3.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'% Persons in Poverty'</span>)</span>
<span id="cb236-15"><a href="#cb236-15" aria-hidden="true" tabindex="-1"></a>ax4.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Median Household Income'</span>)</span>
<span id="cb236-16"><a href="#cb236-16" aria-hidden="true" tabindex="-1"></a>ax5.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'Per Capita Income'</span>)</span>
<span id="cb236-17"><a href="#cb236-17" aria-hidden="true" tabindex="-1"></a>ax6.<span class="bu">set</span>(title<span class="op">=</span><span class="st">'All firms'</span>)</span>
<span id="cb236-18"><a href="#cb236-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-19"><a href="#cb236-19" aria-hidden="true" tabindex="-1"></a>sns.despine(right<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb236-20"><a href="#cb236-20" aria-hidden="true" tabindex="-1"></a>sns.despine(offset<span class="op">=</span><span class="dv">0</span>, trim<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-171-output-1.png" width="1531" height="372"></p>
</div>
</div>
</section>
</section>
<section id="covariate-analysis" class="level2">
<h2 class="anchored" data-anchor-id="covariate-analysis"><strong>Covariate Analysis</strong></h2>
<p>I want to create a new calculated column: <code>gun_sales_per_capita</code>, which would be derived from the division of total gun sales by state populations. This would provide a more appropriate baseline for the comparison of gun sales between states</p>
<div class="cell" data-execution_count="171">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a>merged_df[<span class="st">'gun_sales_per_capita'</span>] <span class="op">=</span> merged_df[<span class="st">'total'</span>] <span class="op">/</span> merged_df[<span class="st">'pop_2016'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="172">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>merged_df[<span class="st">'gun_sales_per_capita'</span>].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="172">
<pre><code>count    50.000000
mean      0.060184
std       0.028694
min       0.000000
25%       0.038424
50%       0.063000
75%       0.081355
max       0.116523
Name: gun_sales_per_capita, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="173">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># getting the correlations with gun per capita</span></span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a>merged_df.drop(columns<span class="op">=</span><span class="st">"state"</span>).corrwith(other<span class="op">=</span>merged_df[<span class="st">'gun_sales_per_capita'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="173">
<pre><code>handgun                    0.029506
long_gun                  -0.056207
multiple                   0.122681
total                      0.001330
pop_2016                  -0.335466
female_pct                -0.384595
white_pct                  0.382182
black_pct                 -0.223373
asian_pct                 -0.492825
pe_hh                     -0.386078
pe_whi                     0.275326
adults_below_65            0.103166
high_school_grad_higher    0.147886
bsc_higher                -0.356364
median_hu                 -0.408704
median_gross_rent         -0.462526
poverty_pct                0.169764
median_hh_income          -0.319988
per_cap_inc               -0.260645
firms                     -0.337613
gun_sales_per_capita       1.000000
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="174">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># visualizing the correlations</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">15</span>))</span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> merged_df.drop(columns<span class="op">=</span><span class="st">"state"</span>).corr()</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> np.zeros_like(corr, dtype<span class="op">=</span><span class="bu">bool</span>)</span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true" tabindex="-1"></a>mask[np.triu_indices_from(mask)] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-9"><a href="#cb242-9" aria-hidden="true" tabindex="-1"></a>sns.heatmap(corr, mask<span class="op">=</span>mask, fmt<span class="op">=</span><span class="st">".2f"</span>, annot<span class="op">=</span><span class="va">True</span>, ax<span class="op">=</span>ax,</span>
<span id="cb242-10"><a href="#cb242-10" aria-hidden="true" tabindex="-1"></a>            cmap<span class="op">=</span><span class="st">"RdBu"</span>, vmin<span class="op">=-</span><span class="dv">1</span>, vmax<span class="op">=</span><span class="dv">1</span>, square<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="174">
<pre><code>&lt;Axes: &gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-175-output-2.png" width="1225" height="1184"></p>
</div>
</div>
<section id="plotting-the-variables-against-gun_sales_per_capita-to-spot-associations" class="level3">
<h3 class="anchored" data-anchor-id="plotting-the-variables-against-gun_sales_per_capita-to-spot-associations"><strong>Plotting the variables against <code>gun_sales_per_capita</code> to spot associations</strong></h3>
<div class="cell" data-execution_count="175">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>sns.pairplot(merged_df, x_vars<span class="op">=</span>[<span class="st">'pop_2016'</span>, <span class="st">'female_pct'</span>, <span class="st">'white_pct'</span>, <span class="st">'black_pct'</span>, <span class="st">'asian_pct'</span>], y_vars<span class="op">=</span>[<span class="st">'gun_sales_per_capita'</span>], kind<span class="op">=</span><span class="st">'reg'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-176-output-1.png" width="1181" height="241"></p>
</div>
</div>
<div class="cell" data-execution_count="176">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a>sns.pairplot(merged_df, x_vars<span class="op">=</span>[<span class="st">'pe_hh'</span>, <span class="st">'pe_whi'</span>,<span class="st">'adults_below_65'</span>, <span class="st">'high_school_grad_higher'</span>, <span class="st">'bsc_higher'</span>], y_vars<span class="op">=</span>[<span class="st">'gun_sales_per_capita'</span>], kind<span class="op">=</span><span class="st">'reg'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-177-output-1.png" width="1181" height="241"></p>
</div>
</div>
<div class="cell" data-execution_count="177">
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>sns.pairplot(merged_df, x_vars<span class="op">=</span>[<span class="st">'median_hu'</span>, <span class="st">'median_gross_rent'</span>,<span class="st">'poverty_pct'</span>, <span class="st">'median_hh_income'</span>, <span class="st">'per_cap_inc'</span>, <span class="st">'firms'</span>], y_vars<span class="op">=</span>[<span class="st">'gun_sales_per_capita'</span>], kind<span class="op">=</span><span class="st">'reg'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-html/cell-178-output-1.png" width="1417" height="241"></p>
</div>
</div>
<p><em>Which census data is most associated with high gun sales per capita</em></p>
<table class="table">
<colgroup>
<col style="width: 59%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Positive/Negative Correlation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">persons per household (pe_hh)</td>
<td style="text-align: left;">negative</td>
</tr>
<tr class="even">
<td style="text-align: left;">persons without health insurance (pe_whi)</td>
<td style="text-align: left;">positive</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bachelor degree holder or higher (bsc_higher)</td>
<td style="text-align: left;">negative</td>
</tr>
<tr class="even">
<td style="text-align: left;">median housing unit costs (median_hu)</td>
<td style="text-align: left;">negative</td>
</tr>
<tr class="odd">
<td style="text-align: left;">median gross rent</td>
<td style="text-align: left;">negative</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="conclusions" class="level2">
<h2 class="anchored" data-anchor-id="conclusions">Conclusions</h2>
<p><em>Caveats!</em><br>
<strong>The findings of these analysis are summarised below. These are tentative and do indicate any causal relationship between variables.</strong></p>
<blockquote class="blockquote">
<ul>
<li><p><em>The most populous states in the United States in 2016 are California, Texas, Florida, New York and Illinois.</em></p></li>
<li><p><em>The least populous states are Wyoming, Vermont, Alaska, North Dakota and South Dakota.</em></p></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><p><em>States with the highest median household income in 2016 are Maryland, Alaska, New Jersey, Connecticut and Hawaii.</em></p></li>
<li><p><em>States with the lowest median household income in 2016 are Mississippi, Arkankas, West Virginia, Alabama, and Kentucky.</em></p></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><p><em>States with the highest black population in 2016 are Mississippi, Louisiana, Georgia, Maryland and South Carolina.</em></p></li>
<li><p><em>States with the lowest black population in 2016 are Montana, Idaho, Vermont, Wyoming and Utah.</em></p></li>
</ul>
</blockquote>
<section id="section-2" class="level3">
<h3 class="anchored" data-anchor-id="section-2"><strong>2006</strong></h3>
<blockquote class="blockquote">
<ul>
<li><em>Long guns were sold the most in 2006 with about 5,268,550 units sold.</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>In 2006, handgun sales varied between 200 thousand and 300 thousand units throughout the year. However, long-gun sales started strongly at around 400 thousand units in January, started sinking in March till a year-low of just below 300 thousand units before dramatically shooting up to about 800 thousand units at the end of the year</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>The top 5 states in terms of gun sales are Texas, Pennsylvania, California, Florida and Ohio.</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>Among these states, only in Florida were handgun sales greater than long-gun sales.</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>All these states experience a remarkable dip in sales in the middle of the year.</em></li>
</ul>
</blockquote>
</section>
<section id="section-3" class="level3">
<h3 class="anchored" data-anchor-id="section-3"><strong>2015</strong></h3>
<blockquote class="blockquote">
<p><em>9 years later in 2015, handguns became most bought gun types with a total of about 8 million units sold across all states in the U.S.</em></p>
</blockquote>
<blockquote class="blockquote">
<p><em>The same trend of a dip in sales around the middle of the year and a sharp rise in purchases towards the end of the year persists.</em></p>
</blockquote>
<blockquote class="blockquote">
<p><em>Texas remains the top state in terms of gun purchases.</em></p>
</blockquote>
</section>
<section id="section-4" class="level3">
<h3 class="anchored" data-anchor-id="section-4"><strong>2016</strong></h3>
<blockquote class="blockquote">
<p><em>A year later in 2016, total gun sales reached a little short of 16 million units. Handguns led the way at more than 8 million units.</em></p>
</blockquote>
<blockquote class="blockquote">
<p><em>Gun sales started relatively high compared to the previous years. I note the double dip in sales with second dip occuring around September. This double dip was mostly prominent in Florida. Another trend of note is that long-gun sales almost superceded handgun sales country-wise in November.</em></p>
</blockquote>
<blockquote class="blockquote">
<p><em>Texas, California, Florida, Pennsylvania and Ohio remains the top states in terms of gun purchases</em></p>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>Guam, Illinois, New Jersey, Connecticut and Massachusetts show the highest percentage increase in gun sales over the span of a decade (2006 - 2016). Hawaii, Mariana Islands, Iowa and Nebraska actually had gun sales reduced.</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>Gun sales per capita is weakly negatively correlated with <code>persons per household</code>; <code>persons without health insurance</code> (positive); <code>bachelor degree holder or higher</code> (negative)</em>; <em><code>median housing unit costs</code> (negative)</em>; <em><code>median gross rent</code> (negative)</em></li>
</ul>
</blockquote>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="JoshuaOlubori/qblog" data-repo-id="R_kgDOKvhXew" data-category="General" data-category-id="DIC_kwDOKvhXe84CbFeH" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Blog made with 💚 and <a href="https://quarto.org/">Quarto</a>, by Edun Joshua. License: <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA 2.0</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>