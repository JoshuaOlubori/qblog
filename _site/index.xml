<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Chamber of (data) secrets</title>
<link>https://joshuaolubori.onrender.com/index.html</link>
<atom:link href="https://joshuaolubori.onrender.com/index.xml" rel="self" type="application/rss+xml"/>
<description>A data science blog by Edun Joshua</description>
<image>
<url>https://joshuaolubori.onrender.com/profile.JPEG</url>
<title>Chamber of (data) secrets</title>
<link>https://joshuaolubori.onrender.com/index.html</link>
</image>
<generator>quarto-1.3.450</generator>
<lastBuildDate>Wed, 31 Jan 2024 23:00:00 GMT</lastBuildDate>
<item>
  <title>Pushing the Boundaries of Excel</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2024-02-01_Onyx-January/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p><img src="https://joshuaolubori.onrender.com/posts/2024-02-01_Onyx-January/dashboard.png" class="img-fluid" data-fig-align="center" alt="cover image"> Recently, I took on the challenge presented by Onyx Data’s January visualization challenge. Despite the availability of popular BI tools like Tableau and Power BI, I decided to push the limits of Excel and create an aesthetic dashboard.</p>
<p>After missing out on the December edition due to laptop issues, I was determined to participate in the January challenge. The dataset provided by Onyx Data included various fields such as course ID, title, URL, pricing, subscribers, reviews, lectures, level, duration, publication timestamp, and subject category.</p>
<p>To begin, I organized my data and created pivot tables on a separate sheet to keep them organized.</p>
</section>
<section id="data-summary" class="level2">
<h2 class="anchored" data-anchor-id="data-summary">Data summary</h2>
<p>course_id: A unique identifier for each course. course_title: The title of the course. url: URL of the course on Udemy. is_paid: Indicates whether the course is paid or free. price: The price of the course (if it’s a paid course). num_subscribers: The number of subscribers for the course. num_reviews: The number of reviews the course has received. num_lectures: The number of lectures in the course. level: The level of the course (e.g., All Levels, Intermediate Level). content_duration: The duration of the course content in hours. published_timestamp: The date and time when the course was published. subject: The subject category of the course.</p>
</section>
<section id="design-elements" class="level2">
<h2 class="anchored" data-anchor-id="design-elements">Design Elements</h2>
<section id="pivot-tables" class="level3">
<h3 class="anchored" data-anchor-id="pivot-tables">Pivot tables</h3>
<p>Every chart and metric in the dashboard was derived from pivot tables, ensuring a structured approach to data visualization. <img src="https://joshuaolubori.onrender.com/posts/2024-02-01_Onyx-January/pivot tables.png" class="img-fluid" alt="Pivot Tables"></p>
</section>
<section id="calculations-sheet" class="level3">
<h3 class="anchored" data-anchor-id="calculations-sheet">Calculations sheet</h3>
<p>Because for some reason, I could not pull single figures from the pivot tables directly into the dashboard, I had to link them from an intermediate calculations sheet. <img src="https://joshuaolubori.onrender.com/posts/2024-02-01_Onyx-January/calculations.png" class="img-fluid" alt="Calculations"></p>
</section>
<section id="gradients" class="level3">
<h3 class="anchored" data-anchor-id="gradients">Gradients</h3>
<p>Inspired by <a href="https://www.youtube.com/@OtherLevels">Other Level’s on YouTube</a>, I used gradients to add a 3D feel to the dashboard, enhancing its visual appeal. <img src="https://joshuaolubori.onrender.com/posts/2024-02-01_Onyx-January/gradients.png" class="img-fluid" alt="Gradients"></p>
</section>
<section id="custom-graphics" class="level3">
<h3 class="anchored" data-anchor-id="custom-graphics">Custom graphics</h3>
<p>Using Excel’s built-in shapes and applying creative styling, I added custom graphics to enhance the dashboard’s aesthetics. <img src="https://joshuaolubori.onrender.com/posts/2024-02-01_Onyx-January/custom graphics.png" class="img-fluid" alt="Custom graphics"></p>
</section>
<section id="slicers" class="level3">
<h3 class="anchored" data-anchor-id="slicers">Slicers</h3>
<p>There are two slicers in this dashboard. One general slicer that filter by month running vertically along the right side of the dashboard, and another bright orange slicer that slices by year and only affects the “Revenue and suscriber growth trends” and “Does a course’s price justifies its revenue?” charts. To style them, I had to create their own Slicer Styles <img src="https://joshuaolubori.onrender.com/posts/2024-02-01_Onyx-January/slicers.png" class="img-fluid" alt="Slicers"></p>
<p>You can view the raw Excel file on Excel Online <a href="https://1drv.ms/x/s!AixyqU7UsljGhlrccNA2mc7wzepr?e=2y4aTg">here</a></p>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p>Creating this dashboard was both challenging and rewarding. Despite the initial limitations of Excel, I was able to produce a visually appealing and functional dashboard that met the requirements of the challenge.</p>
</section>
</section>
<section id="contact-me" class="level2">
<h2 class="anchored" data-anchor-id="contact-me">Contact me</h2>
<p>For more information or to connect, you can find me on LinkedIn <a href="https://www.linkedin.com/in/joshua-edun">here</a> or email me at <a href="joshuaolubori@gmail.com">joshuaolubori@gmail.com</a></p>


</section>

 ]]></description>
  <category>Excel</category>
  <category>data visualisation</category>
  <guid>https://joshuaolubori.onrender.com/posts/2024-02-01_Onyx-January/index.html</guid>
  <pubDate>Wed, 31 Jan 2024 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2024-02-01_Onyx-January/dashboard.png" medium="image" type="image/png" height="53" width="144"/>
</item>
<item>
  <title>Aqua Vista College Database</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2024-01-20_Aqua-Vista/index.html</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2024-01-20_Aqua-Vista/Boscombe Timeline Diagram Graph.png" class="img-fluid figure-img"></p>
</figure>
</div>
<section id="task-introduction" class="level2">
<h2 class="anchored" data-anchor-id="task-introduction">Task Introduction</h2>
<p>Based on the case study (interview scripts and required reports) at the end of this brief, provide the following:</p>
<ul>
<li><p><strong>Conceptual ERD with justifications of design choices</strong></p></li>
<li><p><strong>Logical Design utilising skeleton tables</strong></p>
<ul>
<li>Primary Keys are underlined, and Foreign Keys have an asterisk next to them. e.g.&nbsp;table_name(table_id, table_attribute, other_table_id*)</li>
</ul></li>
<li><p><strong>Indication of report creation</strong></p>
<ul>
<li>Indicate which tables from your design would be used, and what are the common values.</li>
</ul></li>
<li><p><strong>Outline of data accuracy strategy</strong></p>
<ul>
<li>What concrete measures would you take to ensure data can be analysed to aid prediction?</li>
</ul></li>
</ul>
<p><u><strong>To achieve a distinction:</strong></u></p>
<ul>
<li><p>The Conceptual ERD fully covers the case study’s entities and relationships. There are justifications provided for the design choices based on the case study’s statements. The justifications are thought through, concrete and well-argued.</p></li>
<li><p>The Logical Design is in the required format, and it is directly derived from and related to the produced Conceptual ERD. Where design choices needed to be taken, they are clearly indicated and justified. Problematic relationships, such as many-to-many relationships have been resolved correctly.</p></li>
<li><p>A clear indication which entities/tables had to be included to produce the required reports, and which matching fields were used.</p></li>
<li><p>A mature and concrete strategy to ensure data accuracy is provided which is relevant for the given case study.</p></li>
</ul>
</section>
<section id="conceptual-erd" class="level2">
<h2 class="anchored" data-anchor-id="conceptual-erd">Conceptual ERD</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://drive.google.com/file/d/1GN0GldyXjL1rbZR1xtUoeO48Zm1_WF1B/view?usp=sharing"><img src="https://joshuaolubori.onrender.com/posts/2024-01-20_Aqua-Vista/Boscombe Beach University (Conceptual) v3.jpeg" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Aqua Vista College Database - Conceptual ERD. (Click to view full image online)</figcaption>
</figure>
</div>
</section>
<section id="logical-design" class="level2">
<h2 class="anchored" data-anchor-id="logical-design">Logical Design</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://drive.google.com/file/d/13HxRuYCcAWOEFdGclFkyBaL3onfc-kpu/view?usp=sharing"><img src="https://joshuaolubori.onrender.com/posts/2024-01-20_Aqua-Vista/Boscombe Beach University (Logical) v2.jpeg" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Aqua Vista College - Logical Design. (Click to view full image online)</figcaption>
</figure>
</div>
</section>
<section id="design-justifications" class="level2">
<h2 class="anchored" data-anchor-id="design-justifications">Design Justifications</h2>
<section id="office-allocation" class="level4">
<h4 class="anchored" data-anchor-id="office-allocation">Office Allocation:</h4>
<p>Implementing a dedicated “<code>Office</code>” entity and bridge table for academic staff assignments unlocks the following advantages: <strong>flexibility</strong> to track office occupancy dynamically with start and end dates, <strong>data efficiency</strong> by avoiding redundancy through centralized office details and shared/single occupancy flags, and <strong>clarity</strong> by decoupling physical locations from reporting structures and staff attributes, leading to a more interpretable model.</p>
</section>
<section id="line-management" class="level4">
<h4 class="anchored" data-anchor-id="line-management">Line Management</h4>
<p>Representing the Academic Staff reporting structure within the university is elegantly achieved through a self-referencing <code>AcademicStaff</code> entity. This leverages a natural one-to-one relationship referencing the line_manager_id attribute, allowing each staff member to have a designated manager while managers oversee multiple staff as needed. This avoids the redundancy of a dedicated line manager table, maintaining streamlined queries and ensuring consistent data. The self-referencing approach eliminates the need for additional joins, keeping the model clear and easily traversable.</p>
</section>
<section id="resolving-the-many-to-many-relationship-between-academicstaff-and-unit" class="level4">
<h4 class="anchored" data-anchor-id="resolving-the-many-to-many-relationship-between-academicstaff-and-unit">Resolving the many-to-many relationship between AcademicStaff and Unit</h4>
<p>The Head of Department interview revealed that: some academics teach several units, some none, and units can have multiple instructors. A dedicated bridge table elegantly untangles this many-to-many relationship.</p>
<p>Beyond capturing the current teaching relationships, this design offer these benefits:</p>
<ul>
<li>Dynamic tracking: Start and end dates record teaching history, combating the “slowly changing dimensions” issue and aiding analysis of past assignments.</li>
<li>Future-proof scalability: Easily extend the model to track different appointment types or add new analytical data.</li>
<li>Efficient queries: The bridge table centralizes teaching data, making queries related to instructors or units much faster than sifting through individual records.</li>
</ul>
<p>This robust design allows valuable insights for analysis, reporting, and career progression tracking, while laying a flexible foundation for future changes.</p>
</section>
<section id="modelling-academic-staffs-research-interests" class="level4">
<h4 class="anchored" data-anchor-id="modelling-academic-staffs-research-interests">Modelling Academic Staff’s Research Interests</h4>
<p>Following the Head of Department’s emphasis - “all academic staff members are required to record their research interests” - research interests are modeled as a mandatory one-to-many relationship with academic staff. Every staff member must actively record their research interests, and this relationship is reflected by the Crow’s Foot notation in the relationship between the entities.</p>
</section>
<section id="subjects-and-units" class="level4">
<h4 class="anchored" data-anchor-id="subjects-and-units">Subjects and Units</h4>
<p>A many-to-many relationship exists between these two entities, as outlined in the requirements derived from the interview with the Head of Department. This relationship is effectively resolved by a bridge table, aligning with the fact that a <code>Unit</code> may encompass multiple <code>Subjects</code>, and conversely, a <code>Subject</code> can be associated with multiple <code>Units</code>.</p>
<p>The Industry Liaison Lead validates that subjects are open to proposals from companies. To address this requirement, a <em>proposed_by_company</em> foreign key field is incorporated, establishing a connection with the Industry Partner entity. This ensures that the relationship between subjects and proposing companies is appropriately represented in the database structure.</p>
</section>
<section id="course-enrollment" class="level4">
<h4 class="anchored" data-anchor-id="course-enrollment">Course Enrollment</h4>
<p>The interview underscores that students dedicate themselves to a single course at a time, establishing a one-to-one relationship between a student and their presently enrolled course. Although students eventually undertake multiple courses throughout their program, this is done sequentially, indicating that they are not concurrently enrolled in several courses.</p>
<p>This design facilitates the historical tracking of student enrollment. While the primary focus is on the current course, there arises a necessity to trace past courses undertaken by a student. Introducing a bridge table offers an efficient means of storing and retrieving historical enrollment data without cluttering the <code>Student</code> or <strong><code>Course</code></strong> entities.</p>
<p>The bridge table offers flexibility to manage potential scenarios such as course changes or leaves of absence, ensuring a precise record of all courses a student has enrolled in during their program. The <em>course_completion_status</em> attribute enables this record-keeping through a check constraint represented as an ENUM datatype with values like “Completed,” “Ongoing,” and “Withdrawn.”</p>
<p>Additional attributes may be incorporated into the bridge table for each enrollment record, including start and end dates, course completion status, grades, or even reasons for withdrawal if applicable. This supplementary information proves valuable for subsequent analysis and reporting purposes.</p>
</section>
<section id="unit-attendance-and-session" class="level4">
<h4 class="anchored" data-anchor-id="unit-attendance-and-session">Unit, Attendance and Session</h4>
<p>This approach incorporates a bridge table between students and sessions to record attendance. Reflecting the Head of Department’s statement that “A session can be a lecture, seminar, or lab associated with a unit,” an ENUM constraint on the <em>session_type</em> attribute ensures adherence to these three specified values.</p>
<p>Moreover, as per the emphasis on sessions potentially being part of extra-curricular events with external speakers, the design introduces a distinct entity, “<em>extra-curricular_event</em>,” to capture this information. The relationship is non-mandatory, and the Crow’s Foot notation appropriately signifies this flexibility.</p>
<p>Given that units encompass sessions and sessions relate to subjects, the design establishes a connection between the <em>session_id</em> attribute and the <em>subject_id</em> attribute through the <code>unit_subject</code> bridge table. This alignment is logical, considering each unit-subject combination functions as an independent entity, allowing for variations in their respective sessions.</p>
<p>To address the requirement that a subject may not yet be part of any unit or session, the presence of an <em>approval_status</em> ENUM attribute effectively manages this condition.</p>
</section>
<section id="industrial-partnership" class="level4">
<h4 class="anchored" data-anchor-id="industrial-partnership">Industrial Partnership</h4>
<p>The interview with the Industrial Liaison Lead sheds light on the interaction between the school and industry partners. Industrial partners are embodied in an <code>Industry Partner</code> entity, contributing through the delivery of <code>Talks</code> on specific subjects. This is depicted as a one-to-many optional relationship with the <code>Talks</code> entity, along with a one-to-one relationship between <code>Talks</code> and <code>Subject</code>.</p>
<p>In the discussion, the official affirms that companies can propose multiple subjects, and conversely, a subject can be proposed by multiple companies, establishing a resolved many-to-many relationship through the <code>industry_partners_subject</code> bridge table, linking Industry <code>Partner</code> to <code>Subject</code>. This bridge table serves to capture additional proposal details, including the proposal date and description.</p>
<p>Recognizing that not all subjects are covered by industry partners, an optional relationship is indicated between <code>subject</code> and <code>industry_partner_subject</code> using Crow’s Foot notation. The <em>subject_type</em> has an ENUM type, offering values “traditional” and “proposed.”</p>
<p>The <em>subject_type</em> attribute distinguishes a subject’s origin, marking it as either proposed by an industry partner or part of Aqua Vista’s traditional curriculum.</p>
</section>
<section id="talks-and-activity" class="level4">
<h4 class="anchored" data-anchor-id="talks-and-activity">Talks and Activity</h4>
<p>Talks may encompass various activities, and it is affirmed that recording these activities is crucial. As a solution, an activity entity has been established, featuring a <em>talk_id</em> foreign key referencing the Talks entity. Each talk or activity is associated with a designated contact person, fulfilling this requirement through the inclusion of a <em>contact_person_phone</em> attribute that stores the contact information of the designated person. I could not confirm if the contact person is a staff of the school, otherwise, I would relate this attribute to the academic_staff entity.</p>
<p>Recognizing that not all partners engage in delivering talks, the model accommodates this by incorporating an optional one-to-many relationship between industry partners and talks. This ensures flexibility in representing instances where some industry partners may not be involved in delivering talks.</p>
</section>
</section>
<section id="indication-of-report-creation" class="level2">
<h2 class="anchored" data-anchor-id="indication-of-report-creation">Indication of report creation</h2>
<section id="identifying-the-sessions-most-students-attended-out-of-all-subjects-delivered-by-an-external-company" class="level3">
<h3 class="anchored" data-anchor-id="identifying-the-sessions-most-students-attended-out-of-all-subjects-delivered-by-an-external-company">Identifying the sessions most students attended out of all subjects delivered by an external company</h3>
<p><strong>Tables:</strong></p>
<ol type="1">
<li><strong>Attendance:</strong> Tracks student participation, linking <strong>student_id</strong> to <strong>session_id</strong>.</li>
<li><strong>Session:</strong> Holds information about individual sessions, including the associated <strong>unit_subject_id</strong>.</li>
<li><strong>Unit_Subject:</strong> Bridges sessions and subjects, connecting <strong>session_id</strong> to <strong>unit_subject_id</strong>.</li>
<li><strong>Subject:</strong> Captures subject details, including a unique <strong>subject_id</strong> and a “<strong>subject_type</strong>” flag indicating external involvement.</li>
</ol>
<p><strong>Common Values:</strong></p>
<ul>
<li><strong>SessionID:</strong> Unique identifier for each session, linking <code>Attendance</code> and <code>Session</code> data.</li>
<li><strong>UnitSubjectID:</strong> Unique identifier for each <code>Unit-Subject</code>, acting as the bridge between <code>Session</code> and <code>Subject</code> tables.</li>
<li><strong>SubjectID:</strong> Unique identifier for each <code>Subject</code>, enabling filtering for those externally proposed in the <code>Subject</code> table.</li>
</ul>
<p><strong>Methodology:</strong></p>
<ol type="1">
<li><strong>Filter Sessions:</strong> Using the <code>Subject</code> table’s “subject_type” flag as a filter, I select only sessions linked to subjects tagged as “<em>External</em>”</li>
<li><strong>Join and Aggregate:</strong> By joining Attendance, Session, Unit_Subject_Junction, and Subject tables on their respective common values, we can count the number of students attending each session.</li>
<li><strong>Identify Maximum Attendance:</strong> Finally, we sort the aggregated data by student attendance in descending order and locate the session with the highest attendance count, pinpointing the most popular session delivered by an external company.</li>
</ol>
<p>The following SQL query will deliver the report:</p>
<blockquote class="blockquote">
<p><code>SELECT s.SessionID, COUNT(a.StudentID) AS AttendanceCount</code></p>
<p><code>FROM Attendance a JOIN Session s ON a.SessionID = s.SessionID</code></p>
<p><code>JOIN Unit_Subject_Junction usj ON s.UnitSubjectID = usj.UnitSubjectID</code></p>
<p><code>JOIN Subject sub ON usj.SubjectID = sub.SubjectID</code></p>
<p><code>WHERE sub.subject_type = "External"GROUP BY s.SessionID ORDER BY AttendanceCount DESC LIMIT 1;</code></p>
</blockquote>
</section>
<section id="identifying-the-unit-with-the-most-sessions-delivered-by-a-company-on-any-subject" class="level3">
<h3 class="anchored" data-anchor-id="identifying-the-unit-with-the-most-sessions-delivered-by-a-company-on-any-subject">Identifying the unit with the most sessions delivered by a company on any subject</h3>
<p>To reveal the unit hosting the most sessions delivered by companies across all subjects, the following entities are identified.</p>
<p><strong>Tables:</strong></p>
<ol type="1">
<li><p><strong>Session</strong>: Captures session details, including the associated <strong>unit_subject_id</strong>.</p></li>
<li><p><strong>Unit_Subject</strong>: Bridges sessions to units and subjects, connecting <strong>session_id</strong> to <strong>unit_subject_id</strong> and <strong>subject_id</strong>.</p></li>
<li><p><strong>Unit</strong>: Holds unit information, including the unique <strong>unit_id</strong>.</p></li>
<li><p><strong>Subject</strong>: Stores subject details, including the <strong>subject_type</strong> flag indicating company involvement.</p></li>
</ol>
<p><strong>Common Values:</strong></p>
<ol type="1">
<li><strong>UnitSubjectID</strong>: Unique identifier for each unit-subject, linking <code>Session</code> and <code>Unit_Subject</code> tables.</li>
<li><strong>UnitID</strong>: Unique identifier for each Unit, connecting <code>Unit_Subject</code> and <code>Unit</code> tables.</li>
<li><strong>SubjectID</strong>: Unique identifier for each subject, enabling filtering for those marked as externally proposed in the Subject table.</li>
</ol>
<p><strong>Methodology:</strong></p>
<ol type="1">
<li><p><strong>Filter Company-Delivered Sessions</strong>: Employ the <code>WHERE</code> clause to select only sessions linked to subjects where the <strong>subject_type</strong> flag is “Exernal”. This ensures we focus on sessions originating from external partnerships.</p></li>
<li><p><strong>Join and Aggregate</strong>: By joining <code>Session</code>, <code>Unit_Subject</code>, and <code>Unit</code> tables on their respective common values, we associate sessions with their corresponding units and count the total number of sessions per unit.</p></li>
<li><p><strong>Identify Top Unit</strong>: We order the aggregated data by session count in descending order. The unit at the top boasts the highest number of sessions delivered by a company, making it the champion of external collaborations.</p></li>
</ol>
<p>The following SQL query will deliver the report:</p>
<blockquote class="blockquote">
<p><code>SELECT u.unit_id, u.unit_name, COUNT(s.session_id) AS session_count</code></p>
<p><code>FROM Session s JOIN Unit_Subject_Junction usj ON s.unit_subject_id = usj.unit_subject_id</code></p>
<p><code>JOIN Unit u ON usj.unit_id = u.unit_id</code></p>
<p><code>JOIN Subject sub ON usj.subject_id = sub.subject_id</code></p>
<p><code>WHERE sub.subject_type = "External"</code></p>
<p><code>GROUP BY u.unit_id, u.unit_name ORDER BY session_count DESC LIMIT 1;</code></p>
</blockquote>
</section>
</section>
<section id="identifying-the-academic-staff-with-the-most-research-interests" class="level2">
<h2 class="anchored" data-anchor-id="identifying-the-academic-staff-with-the-most-research-interests">Identifying The Academic staff with the most Research Interests</h2>
<p>To uncover the academic staff member with the most diverse research interests within your Aqua Vista College, the database design offers the insights through two tables:</p>
<p><strong>Tables:</strong></p>
<ul>
<li><strong>academic_staff:</strong> This table holds core information about staff members, including their unique <code>staff_id</code> and <code>first_name</code>.</li>
<li><strong>research_interests:</strong> This table captures details about staff members’ research pursuits, linking them to individual staff through the <code>staff_id</code> and providing descriptive <code>research_title</code> information.</li>
</ul>
<p><strong>The Bridge: Shared Values:</strong></p>
<p><code>staff_id</code>. links these 2 tables together. This unique identifier, present in both tables, allows to seamlessly connect each staff member with their respective research interests.</p>
<p><strong>Methodology:</strong></p>
<ol type="1">
<li><strong>Connecting the Dots:</strong> We’ll employ a JOIN operation to merge the <code>academic_staff</code> and <code>research_interests</code> tables on the <code>staff_id</code> column. This creates a unified view where each staff member is accompanied by their research areas.</li>
<li><strong>Quantifying Passion:</strong> For each staff member, we’ll utilize the <code>COUNT()</code> function to determine the total number of research interests listed in the <code>research_interests</code> table associated with their <code>staff_id</code>. This effectively quantifies their research diversity.</li>
<li><strong>Crowning the Champion:</strong> Finally, we’ll order the combined data by the <code>count</code> of research interests in descending order. The staff member at the top, boasting the highest count, emerges as the champion of diversified research pursuits within your institution.</li>
</ol>
<p>The following SQL query will deliver the report:</p>
<blockquote class="blockquote">
<p><code>SELECT as.staff_id, as.first_name, COUNT(ri.research_id) AS research_interest_count</code></p>
<p><code>FROM academic_staff as JOIN research_interests ri ON as.staff_id = ri.staff_id</code></p>
<p><code>GROUP BY as.staff_id, as.first_name</code></p>
<p><code>ORDER BY research_interest_count DESC LIMIT 1;</code></p>
</blockquote>
</section>
<section id="data-accuracy-strategy" class="level2">
<h2 class="anchored" data-anchor-id="data-accuracy-strategy">Data Accuracy Strategy</h2>
<section id="data-accuracy-strategy-for-institutional-research-and-teaching-analysis" class="level3">
<h3 class="anchored" data-anchor-id="data-accuracy-strategy-for-institutional-research-and-teaching-analysis">Data Accuracy Strategy for Institutional Research and Teaching Analysis:</h3>
<p><strong><em>Objective: Establish the database reliably for analyzing research interests, teaching involvement, and other key academic elements.</em></strong></p>
<p><strong>Concrete Measures:</strong></p>
<p>Enum Constraints for Research Interests: Apply ENUM constraints, such as for the “category” field in the academic_staff table, restricting values to a predefined set (“lecturers” or “demonstrators”). Integrate drop-down menus in the front-end to facilitate user selection, minimizing ambiguity and ensuring consistency.</p>
<p>Teaching Units: Implement lookups or autocomplete features for existing units in the front-end, preventing typographical errors and eliminating duplicate entries during data entry.</p>
<p>Enforce Temporal Validity in Office Allocation: Enact data integrity rules to prohibit overlapping occupancy periods or exceeding office capacity, enhancing accuracy in office allocation records.</p>
<p>Ensure Acyclic Relationships: Incorporate checks to validate acyclic relationships within the line-management hierarchy, preventing the formation of circular dependencies and ensuring a transparent organizational structure.</p>
<p>Cascade Deletion: Employ cascading actions for the line_manager_id foreign key. By using “ON DELETE CASCADE” and “ON UPDATE CASCADE” in SQL, ensure that changes to staff members cascade appropriately, maintaining referential integrity.</p>
<p>Periodic Audits: Conduct routine data consistency checks to identify and rectify duplicates or incomplete entries, enhancing overall data accuracy.</p>
<p>Random Sampling: Implement manual verification through random sampling of research interests and teaching assignments against employee resumes or course schedules, providing an additional layer of accuracy validation.</p>
<p>Peer Review: Foster departmental reviews of research areas and unit affiliations to encourage collective scrutiny and improvement of data accuracy.</p>
</section>
<section id="data-accuracy-strategy-for-enhancing-student-attendance-and-course-insights" class="level3">
<h3 class="anchored" data-anchor-id="data-accuracy-strategy-for-enhancing-student-attendance-and-course-insights">Data Accuracy Strategy for Enhancing Student Attendance and Course Insights</h3>
<p><strong><em>Objective: Establish a foundation of reliable data to facilitate accurate attendance tracking, course optimization, and predictive student success analysis.</em></strong></p>
<p><strong>Concrete Measures:</strong></p>
<p>Course and Unit Information: Use ENUM constraint to ensure that data entered into each field adheres to predefined standards. For instance, enforce constraints on fields like attendance_status to accept only valid values (e.g., “present,” “absent”).</p>
<p>Implement validation rules to prevent duplicate entries and maintain course levels within defined ranges.</p>
<p>Attendance Data: Use foreign key constraints in the physical model to restrict attendance entry to valid student IDs, session IDs, and dates, preventing errors and inconsistencies.</p>
<p>Session Details: Ensure temporal validity (i.e.&nbsp;using the start_date and end_date attributes) by designing checks in the physical model to avoid conflicts and maintain data integrity.</p>
</section>
</section>
<section id="sql-create-statements" class="level2">
<h2 class="anchored" data-anchor-id="sql-create-statements">SQL CREATE statements</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb1-1"></span>
<span id="cb1-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> course (</span>
<span id="cb1-3">  course_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-4">  course_title <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-5">  course_name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-6">  course_level <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb1-7">);</span>
<span id="cb1-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> student (</span>
<span id="cb1-9">  student_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-10">  first_name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-11">  last_name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-12">  date_of_birth <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-13">  email <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-14">  phone_number <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span></span>
<span id="cb1-15">);</span>
<span id="cb1-16"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> course_enrolment (</span>
<span id="cb1-17">  student_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-18">  course_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-19">  course_completion_status ENUM(Completed, course_enrolment),</span>
<span id="cb1-20">  grade ENUM(<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"A"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"B"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"C"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"D"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"E"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"F"</span>),</span>
<span id="cb1-21">  phone_number <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-22">  start_date <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-23">  end_date <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-24">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_course_enrolment.course_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (course_id) </span>
<span id="cb1-25">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> course(course_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">UPDATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASCADE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DELETE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">RESTRICT</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Update updated course_ids but do not allow deletions in the parent table,</span></span>
<span id="cb1-26">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_course_enrolment.student_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (student_id) </span>
<span id="cb1-27">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> student(student_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">UPDATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASCADE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DELETE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">RESTRICT</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Update updated student_ids but do not allow deletions in the parent table</span></span>
<span id="cb1-28">);</span>
<span id="cb1-29"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> industry_partners (</span>
<span id="cb1-30">  company_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-31">  company_name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>),</span>
<span id="cb1-32">);</span>
<span id="cb1-33"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> talks (</span>
<span id="cb1-34">  talk_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-35">  subject_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-36">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">date</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-37">  contact_person_phone <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-38">  company_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-39">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_talks.company_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (company_id) </span>
<span id="cb1-40">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> industry_partners(company_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">UPDATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASCADE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DELETE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASCADE</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Cascade updates and deletions to the parent table,</span></span>
<span id="cb1-41">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_talks.subject_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (subject_id) </span>
<span id="cb1-42">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> industry_partners(subject_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">UPDATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASCADE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DELETE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASCADE</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Cascade updates and deletions to the parent table</span></span>
<span id="cb1-43">);</span>
<span id="cb1-44"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> activity (</span>
<span id="cb1-45">  activity_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-46">  talk_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-47">  activity_name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-48">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_activity.talk_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (talk_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> talks(talk_id)</span>
<span id="cb1-49">);</span>
<span id="cb1-50"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> research_interest (</span>
<span id="cb1-51">  research_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-52">  staff_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-53">  research_area <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>),</span>
<span id="cb1-54">  research_title <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-55">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_research_interest.staff_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (staff_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> academic_staff(staff_id)</span>
<span id="cb1-56">);</span>
<span id="cb1-57"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> subject (</span>
<span id="cb1-58">  subject_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-59">  subject_name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>),</span>
<span id="cb1-60">  description TEXT,</span>
<span id="cb1-61">  approval_status ENUM(<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"Approved"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"Pending"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">" Rejected"</span>) subject_type ENUM(Traditional, External) is_extra <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> curricular <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">BOOLEAN</span></span>
<span id="cb1-62">);</span>
<span id="cb1-63"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> unit (</span>
<span id="cb1-64">  unit_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-65">  unit_title <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>)</span>
<span id="cb1-66">);</span>
<span id="cb1-67"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> unit_subject (</span>
<span id="cb1-68">  unit_subject_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-69">  unit_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-70">  subject_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-71">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_unit_subject.unit_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (unit_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> unit(unit_id),</span>
<span id="cb1-72">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_unit_subject.subject_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (subject_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> subject(subject_id)</span>
<span id="cb1-73">);</span>
<span id="cb1-74"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">session</span> (</span>
<span id="cb1-75">  session_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-76">  unit_subject_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-77">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">date</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-78">  session_type ENUM(<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"Lecture"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"Seminar"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"Lab"</span>),</span>
<span id="cb1-79">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_session.unit_subject_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (unit_subject_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> unit_subject(unit_subject_id)</span>
<span id="cb1-80">);</span>
<span id="cb1-81"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> office (</span>
<span id="cb1-82">  office_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-83">  office_name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-84">  location <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-85">  capacity <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">NUMERIC</span></span>
<span id="cb1-86">);</span>
<span id="cb1-87"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> academic_staff (</span>
<span id="cb1-88">  staff_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-89">  first_name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-90">  last_name <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-91">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">category</span> ENUM(<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"lecturers"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"demonstrators"</span>),</span>
<span id="cb1-92">  line_manager_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-93">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_academic_staff.staff_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (line_manager_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> academic_staff(staff_id)</span>
<span id="cb1-94">);</span>
<span id="cb1-95"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> attendance (</span>
<span id="cb1-96">  attendance_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-97">  student_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-98">  session_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-99">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">date</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-100">  attendance_status ENUM(<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"Present"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"Absent"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"Excused"</span>),</span>
<span id="cb1-101">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_attendance.session_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (session_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">session</span>(session_id),</span>
<span id="cb1-102">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_attendance.student_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (student_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> student(student_id)</span>
<span id="cb1-103">);</span>
<span id="cb1-104"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> office_allocation (</span>
<span id="cb1-105">  staff_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-106">  office_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-107">  start_date <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-108">  end_date <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-109">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_office_allocation.staff_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (staff_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> academic_staff(staff_id),</span>
<span id="cb1-110">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_office_allocation.office_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (office_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> office(office_id)</span>
<span id="cb1-111">);</span>
<span id="cb1-112"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> industry_partners_subject (</span>
<span id="cb1-113">  company_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-114">  subject_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-115">  description TEXT,</span>
<span id="cb1-116">  date_of_proposal <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-117">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_industry_partners_subject.subject_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (subject_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> subject(subject_id),</span>
<span id="cb1-118">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_industry_partners_subject.company_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (company_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> industry_partners(company_id)</span>
<span id="cb1-119">);</span>
<span id="cb1-120"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> staff_unit_assignments (</span>
<span id="cb1-121">  staff_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-122">  unit_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-123">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">role</span> ENUM(<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"unit coordinator"</span>, <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"lecturer"</span>,<span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">"assistant"</span>),</span>
<span id="cb1-124">  start_date <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-125">  end_date <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-126">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_staff_unit_assignments.unit_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (unit_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> unit(unit_id),</span>
<span id="cb1-127">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_staff_unit_assignments.staff_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (staff_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> academic_staff(staff_id)</span>
<span id="cb1-128">);</span>
<span id="cb1-129"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">TABLE</span> extra<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>curricular_events (</span>
<span id="cb1-130">  event_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">PRIMARY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GENERATED</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DEFAULT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> IDENTITY,</span>
<span id="cb1-131">,</span>
<span id="cb1-132">  session_id <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">INTEGER</span>,</span>
<span id="cb1-133">  <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">date</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">DATE</span>,</span>
<span id="cb1-134">  external_speaker <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">VARCHAR</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">255</span>),</span>
<span id="cb1-135">  <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CONSTRAINT</span> FK_extra<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>curricular_events.session_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FOREIGN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">KEY</span> (session_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REFERENCES</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">session</span>(session_id)</span>
<span id="cb1-136">);</span></code></pre></div>
</div>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>In summary, this project is a sophisticated and comprehensive approach to database design, incorporating various concepts for accuracy, flexibility, and efficiency. The use of ENUM constraints, foreign key relationships, and validation rules ensures consistent data across tables. Bridge tables resolve many-to-many relationships, enabling dynamic tracking, historical analysis, and scalability. Handling potential acyclic relationships, cascading actions, and periodic audits enhances data model integrity, creating a strong foundation for analytical insights. The project meets immediate requirements and establishes a groundwork for future adaptability, reflecting a nuanced understanding of Aqua Vista College’s operational intricacies. This solution ensures the database meets current needs and remains resilient to changing educational and analytical demands.</p>
<p><a href="https://joshuaolubori.onrender.com/posts/2024-01-20_Aqua-Vista/#task-introduction">Back to top</a></p>


</section>

 ]]></description>
  <category>SQL</category>
  <category>data engineering</category>
  <category>database design and management</category>
  <guid>https://joshuaolubori.onrender.com/posts/2024-01-20_Aqua-Vista/index.html</guid>
  <pubDate>Fri, 19 Jan 2024 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2024-01-20_Aqua-Vista/Boscombe Beach University (Logical) v2.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>The Causal-Behavioral Framework for Data Analysis</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2023-11-30_BDA-1/index.html</link>
  <description><![CDATA[ 




<section id="disclaimer" class="level2" style="color: #25D366;">
<h2 class="anchored" data-anchor-id="disclaimer">Disclaimer</h2>
</section>
<p>Please Note: The ideas presented in this article are not my own original thoughts. This material is merely a condensed version of my study notes based on Florent Buisson’s excellent book. Due to the need for brevity, certain nuances of these concepts have been omitted. For a more comprehensive understanding, please refer to the original source.</p>
<section id="causal-analytics-unraveling-the-mystery-behind-why-things-happen" class="level2" style="color: #25D366;">
<h2 class="anchored" data-anchor-id="causal-analytics-unraveling-the-mystery-behind-why-things-happen">Causal Analytics: 🕵️‍♂️Unraveling the Mystery Behind Why Things Happen</h2>
</section>
<p>Predictive analytics is like having a super cool fortune teller 🔮who can predict what’s going to happen next. But causal analytics is like being a detective 🕵️‍♀️🕵️‍♂️, trying to figure out why things happen in the first place 🤔. In predictive analytics, we just want to find a bunch of clues 🕵️‍♀️🕵️‍♂️ that can help us guess what’s going to happen next, even if those clues aren’t actually causing it to happen. But in causal analytics, we’re not just interested in guessing 🔮, we want to understand the real reasons behind things 🧠.</p>
<p>Imagine you want to know if eating more fruits and veggies 🍎🥦 will make you healthier 💪. Predictive analytics might tell you that people who eat more fruits and veggies tend to be healthier, but that doesn’t mean the fruits and veggies are actually causing the better health. It could be that healthier people just tend to make healthier choices overall 🏃‍♀️🚴🥗.</p>
<p>So, how do we really know if eating more fruits and veggies is making us healthier? That’s where causal analytics comes in 🕵️‍♀️🕵️‍♂️. We need to carefully choose the clues we use to solve the mystery, making sure they’re not just guessing 🔮but actually helping us understand the real reasons behind things 🧠.</p>
<section id="data" class="level2" style="color: #25D366;">
<h2 class="anchored" data-anchor-id="data">Data</h2>
</section>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-30_BDA-1/images/data_1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Sales information in chap1-stand_data.csv</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">df1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chap1-stand_data.csv"</span>)</span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(df1) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="lwzauszcsw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#lwzauszcsw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#lwzauszcsw thead, #lwzauszcsw tbody, #lwzauszcsw tfoot, #lwzauszcsw tr, #lwzauszcsw td, #lwzauszcsw th {
  border-style: none;
}

#lwzauszcsw p {
  margin: 0;
  padding: 0;
}

#lwzauszcsw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lwzauszcsw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#lwzauszcsw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lwzauszcsw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lwzauszcsw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lwzauszcsw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#lwzauszcsw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lwzauszcsw .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lwzauszcsw .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lwzauszcsw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lwzauszcsw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lwzauszcsw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lwzauszcsw .gt_spanner_row {
  border-bottom-style: hidden;
}

#lwzauszcsw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#lwzauszcsw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#lwzauszcsw .gt_from_md > :first-child {
  margin-top: 0;
}

#lwzauszcsw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lwzauszcsw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#lwzauszcsw .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#lwzauszcsw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lwzauszcsw .gt_row_group_first td {
  border-top-width: 2px;
}

#lwzauszcsw .gt_row_group_first th {
  border-top-width: 2px;
}

#lwzauszcsw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lwzauszcsw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#lwzauszcsw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lwzauszcsw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#lwzauszcsw .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lwzauszcsw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#lwzauszcsw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#lwzauszcsw .gt_striped {
  background-color: #EDF7FC;
}

#lwzauszcsw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#lwzauszcsw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lwzauszcsw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lwzauszcsw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lwzauszcsw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lwzauszcsw .gt_left {
  text-align: left;
}

#lwzauszcsw .gt_center {
  text-align: center;
}

#lwzauszcsw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lwzauszcsw .gt_font_normal {
  font-weight: normal;
}

#lwzauszcsw .gt_font_bold {
  font-weight: bold;
}

#lwzauszcsw .gt_font_italic {
  font-style: italic;
}

#lwzauszcsw .gt_super {
  font-size: 65%;
}

#lwzauszcsw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#lwzauszcsw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lwzauszcsw .gt_indent_1 {
  text-indent: 5px;
}

#lwzauszcsw .gt_indent_2 {
  text-indent: 10px;
}

#lwzauszcsw .gt_indent_3 {
  text-indent: 15px;
}

#lwzauszcsw .gt_indent_4 {
  text-indent: 20px;
}

#lwzauszcsw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="icecream_sales">icecream_sales</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="iced_coffee_sales">iced_coffee_sales</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="summer_months">summer_months</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="temps">temps</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="icecream_sales" class="gt_row gt_right">25649.78</td>
<td headers="iced_coffee_sales" class="gt_row gt_right">28592.18</td>
<td headers="summer_months" class="gt_row gt_right">0</td>
<td headers="temps" class="gt_row gt_right">28.59314</td></tr>
    <tr><td headers="icecream_sales" class="gt_row gt_right gt_striped">32694.93</td>
<td headers="iced_coffee_sales" class="gt_row gt_right gt_striped">37152.84</td>
<td headers="summer_months" class="gt_row gt_right gt_striped">0</td>
<td headers="temps" class="gt_row gt_right gt_striped">37.13064</td></tr>
    <tr><td headers="icecream_sales" class="gt_row gt_right">26467.80</td>
<td headers="iced_coffee_sales" class="gt_row gt_right">24074.19</td>
<td headers="summer_months" class="gt_row gt_right">0</td>
<td headers="temps" class="gt_row gt_right">24.11190</td></tr>
    <tr><td headers="icecream_sales" class="gt_row gt_right gt_striped">43438.79</td>
<td headers="iced_coffee_sales" class="gt_row gt_right gt_striped">49169.47</td>
<td headers="summer_months" class="gt_row gt_right gt_striped">0</td>
<td headers="temps" class="gt_row gt_right gt_striped">49.21807</td></tr>
    <tr><td headers="icecream_sales" class="gt_row gt_right">52452.63</td>
<td headers="iced_coffee_sales" class="gt_row gt_right">47249.40</td>
<td headers="summer_months" class="gt_row gt_right">0</td>
<td headers="temps" class="gt_row gt_right">47.25766</td></tr>
    <tr><td headers="icecream_sales" class="gt_row gt_right gt_striped">34130.66</td>
<td headers="iced_coffee_sales" class="gt_row gt_right gt_striped">34228.50</td>
<td headers="summer_months" class="gt_row gt_right gt_striped">0</td>
<td headers="temps" class="gt_row gt_right gt_striped">34.25746</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<section id="why-correlation-is-not-causation-a-confounder-in-action" class="level2" style="color: #25D366;">
<h2 class="anchored" data-anchor-id="why-correlation-is-not-causation-a-confounder-in-action">Why Correlation Is Not Causation: A Confounder in Action</h2>
</section>
<p>Imagine you’re an ice cream 🍦 seller and you want to know if hotter days ☀️mean more ice cream sales 🤑. You track the temperature and your sales for a while and find that for every degree the temperature rises, your sales go up by $1,171!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"icecream_sales ~ temps"</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span>df1))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = "icecream_sales ~ temps", data = df1)

Residuals:
   Min     1Q Median     3Q    Max 
-30272  -5197   -494   3787  37430 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -6169.844    531.506  -11.61   &lt;2e-16 ***
temps        1171.335      9.027  129.76   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 8730 on 2398 degrees of freedom
Multiple R-squared:  0.8753,    Adjusted R-squared:  0.8753 
F-statistic: 1.684e+04 on 1 and 2398 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>You’re excited and think you’ve found the perfect formula for success!🤑 But then something strange happens. October comes around and it’s a scorcher 🥵, but your sales actually drop! 😨 What gives?</p>
<p>After some sleuthing, you realize that the culprit is school 🏫. In the summer, kids are out of school and have more time to enjoy ice cream 🍦. But in October, they’re back in class and have less time for frozen treats.</p>
<p>So, even though the temperature was high, your sales dropped because of the school year. This is called a “confounder” 😵. <strong>A confounder is something that can make it look like something else is causing a (third) something when it’s actually not.</strong></p>
<p>In this case, the school year made it look like the temperature was causing sales to drop, when it was really the school year all along 🏫. So, next time you’re trying to figure out what’s causing something, be sure to watch out for confounders! 👀👀</p>
<section id="too-many-variables-can-spoil-the-broth" class="level2" style="color: #25D366;">
<h2 class="anchored" data-anchor-id="too-many-variables-can-spoil-the-broth">Too Many Variables Can Spoil the Broth</h2>
</section>
<p>Remember that time when we added a bunch of random ingredients to our recipe and ended up with a weird-tasting soup? It’s the same with causal modelling.</p>
<p>To be fair, if your goal is only to predict a variable, you have a model that is carefully designed to generalize adequately beyond your testing data, and you don’t care about why the predicted variable is taking a certain value, then that’s a perfectly valid stance.</p>
<p>Let’s demonstrate this with our example by adding a variable that we might be inclined to include but will bias our regression. The variable <code>IcedCoffeeSales</code> is correlated with <code>Temperature</code> but not with <code>SummerMonth</code>. Let’s look at what happens to our regression if we add this variable in addition to <code>Temperature</code> and <code>SummerMonth</code> (a binary 1/0 variable that indicates if the month was July or August (1) or any other month (0)):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(icecream_sales <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> iced_coffee_sales <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> temps <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> summer_months, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span>df1))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = icecream_sales ~ iced_coffee_sales + temps + summer_months, 
    data = df1)

Residuals:
     Min       1Q   Median       3Q      Max 
-25763.1  -3364.4     78.6   3317.5  27512.0 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)         -15.827    374.581  -0.042    0.966    
iced_coffee_sales    -1.701      2.083  -0.817    0.414    
temps              2702.788   2083.161   1.297    0.195    
summer_months     19548.168    361.572  54.064   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5859 on 2396 degrees of freedom
Multiple R-squared:  0.9439,    Adjusted R-squared:  0.9438 
F-statistic: 1.344e+04 on 3 and 2396 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>Only <code>summer_months</code> has a statistically significant influence on <code>icecream_sales</code> . The other variable are not good predictors of the target variable and only confound the model.</p>
<section id="another-example" class="level2" style="color: #25D366;">
<h2 class="anchored" data-anchor-id="another-example">Another example</h2>
</section>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-30_BDA-1/images/data_2.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Survey information in chap1-survey_data.csv</figcaption>
</figure>
</div>
<p>Imagine you’re running an ice cream stand 🍦🍨 and you want to know if people who like chocolate ice cream 🍫are more likely to buy from your shop than people who like vanilla ice. You ask a bunch of people how much they like chocolate and vanilla ice cream (on a scale of 1 to 10, of course), and whether they’ve ever bought from your shop. You find out that some people like one but not the other, some like both equally, and some like one more than the other.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-30_BDA-1/images/associations.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Left panel: tastes for vanilla and chocolate are uncorrelated in the overall population; middle panel: taste for vanilla is higher for people who shop at the ice cream stand than for people who don’t; right panel: same result for taste for chocolate</figcaption>
</figure>
</div>
<p>Checking the association between our variables we discover 2 things:</p>
<ul>
<li><p>taste for vanilla ice cream and taste for chocolate ice cream are entirely uncorrelated.</p></li>
<li><p>How much they like vanilla and chocolate affects whether they have bought from the shop</p></li>
</ul>
<p>All good so far! 👍 If we want to understand how both vanilla and chocolate ice cream preferences affect whether someone is a customer or not, then it makes sense to include both variables in our logistic regression model. 📈 But what if we want to know something different? What if we want to know how much the people who like vanilla ice cream also like chocolate ice cream? 🍦🍫 In other words, we’re interested in the relationship between how much someone likes vanilla ice cream and how much they like chocolate ice cream, but only for people who have <u>actually bought from the ice cream stand</u>. 🛍️ To do this, we can plot a graph of how much customers who have bought ice cream like chocolate ice cream, based on how much they like vanilla ice cream.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-30_BDA-1/images/vanilla-choco.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Taste for vanilla and chocolate among shoppers</figcaption>
</figure>
</div>
<p>Hmm, something’s not right! 🤨 When we looked at the relationship between how much vanilla ice cream customers like and how much chocolate ice cream they like, we found a weird pattern: people who like one flavor tend to dislike the other. 🤯 But don’t worry, vanilla lovers aren’t suddenly becoming chocolate haters, and vice versa! 👎 This strange correlation was actually caused by the way we looked at the data.</p>
<p>We only looked at people who had <u>bought ice cream from the stand</u>, and this left out a lot of people who might have liked both flavours but didn’t buy any ice cream. If someone has a weak taste for both vanilla and chocolate ice creams, they are most likely not shoppers. if someone has a strong taste for vanilla, they might shop at your stand even if they don’t have a strong taste for chocolate. However, since you excluded non-shoppers, you removed a bunch of data points that should exist in the lower left quadrant of the scatterplot. If they were included, a positive relationship would be observed.</p>
<p>So, next time you’re looking at data, be sure to consider all of the data points, not just the ones that fit your expectations.😉</p>
<p>Up next, chapter 2!</p>



 ]]></description>
  <category>causal regression modelling</category>
  <category>statistics</category>
  <guid>https://joshuaolubori.onrender.com/posts/2023-11-30_BDA-1/index.html</guid>
  <pubDate>Wed, 29 Nov 2023 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2023-11-30_BDA-1/images/framework.PNG" medium="image"/>
</item>
<item>
  <title>Pizza Runner</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-2/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Monitoring KPIs of a pizza delivery business</p>
</section>
<section id="entity-relationship-diagram" class="level2">
<h2 class="anchored" data-anchor-id="entity-relationship-diagram">Entity Relationship Diagram</h2>
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-2/images/pizza.jpg" class="img-fluid"></p>
</section>
<section id="database-connection" class="level2">
<h2 class="anchored" data-anchor-id="database-connection">Database Connection</h2>
<p>First, I’ll create a connection to my local <code>postgres</code> database thanks to the <strong><code>RPostgres</code></strong> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># | warning: false</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Creating a connection to my local postgres database</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(RPostgres)</span>
<span id="cb1-4">con <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbConnect</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Postgres</span>(),</span>
<span id="cb1-6">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dbname =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pizza_runner"</span>,</span>
<span id="cb1-7">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">user =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"postgres"</span>,</span>
<span id="cb1-8">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">password =</span> my_password)</span></code></pre></div>
</div>
</section>
<section id="queries" class="level2">
<h2 class="anchored" data-anchor-id="queries">Queries</h2>
<section id="a.-pizza-metrics" class="level3">
<h3 class="anchored" data-anchor-id="a.-pizza-metrics">A. Pizza Metrics</h3>
<section id="how-many-runners-signed-up-for-each-1-week-period-i.e.-week-starts-2021-01-01" class="level4">
<h4 class="anchored" data-anchor-id="how-many-runners-signed-up-for-each-1-week-period-i.e.-week-starts-2021-01-01">1. How many runners signed up for each 1 week period? (i.e.&nbsp;week starts 2021-01-01)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(pizza_id)</span>
<span id="cb2-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">14</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-unique-customer-orders-were-made" class="level4">
<h4 class="anchored" data-anchor-id="how-many-unique-customer-orders-were-made">2. How many unique customer orders were made?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"></span>
<span id="cb3-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">SELECT</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DISTINCT</span> order_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-successful-orders-were-delivered-by-each-runner" class="level4">
<h4 class="anchored" data-anchor-id="how-many-successful-orders-were-delivered-by-each-runner">3. How many successful orders were delivered by each runner?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"></span>
<span id="cb4-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> runner_id,</span>
<span id="cb4-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(order_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> count_of_successful_orders</span>
<span id="cb4-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders</span>
<span id="cb4-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">WHERE</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb4-6">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">IN</span> (</span>
<span id="cb4-7">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Restaurant Cancellation'</span>,</span>
<span id="cb4-8">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Customer Cancellation'</span></span>
<span id="cb4-9">    )</span>
<span id="cb4-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> runner_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">runner_id</th>
<th style="text-align: right;">count_of_successful_orders</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-of-each-type-of-pizza-was-delivered" class="level4">
<h4 class="anchored" data-anchor-id="how-many-of-each-type-of-pizza-was-delivered">4. How many of each type of pizza was delivered?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"></span>
<span id="cb5-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> pn.pizza_name <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> pizza,</span>
<span id="cb5-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(co.pizza_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> count_of_pizza_delivered</span>
<span id="cb5-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders co</span>
<span id="cb5-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">INNER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">JOIN</span> runner_orders ro <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> co.order_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ro.order_id</span>
<span id="cb5-6">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">INNER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">JOIN</span> pizza_names pn <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> pn.pizza_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> co.pizza_id</span>
<span id="cb5-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">WHERE</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb5-8">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">IN</span> (</span>
<span id="cb5-9">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Restaurant Cancellation'</span>,</span>
<span id="cb5-10">        <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Customer Cancellation'</span></span>
<span id="cb5-11">    )</span>
<span id="cb5-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> pn.pizza_name;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">pizza</th>
<th style="text-align: right;">count_of_pizza_delivered</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Meatlovers</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Vegetarian</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-vegetarian-and-meatlovers-were-ordered-by-each-customer" class="level4">
<h4 class="anchored" data-anchor-id="how-many-vegetarian-and-meatlovers-were-ordered-by-each-customer">5. How many Vegetarian and Meatlovers were ordered by each customer?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"></span>
<span id="cb6-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> co.customer_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> customers, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(co.pizza_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> count_of_pizza_ordered <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders co <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">INNER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">JOIN</span> pizza_names pn <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> pn.pizza_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> co.pizza_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">customers</th>
<th style="text-align: right;">count_of_pizza_ordered</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">101</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">103</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: right;">104</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">105</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">102</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-was-the-maximum-number-of-pizzas-delivered-in-a-single-order" class="level4">
<h4 class="anchored" data-anchor-id="what-was-the-maximum-number-of-pizzas-delivered-in-a-single-order">6. What was the maximum number of pizzas delivered in a single order?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"></span>
<span id="cb7-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> ro.order_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span>,</span>
<span id="cb7-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(co.pizza_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> number_of_pizzas</span>
<span id="cb7-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders ro</span>
<span id="cb7-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">INNER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">JOIN</span> customer_orders co <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> ro.order_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> co.order_id</span>
<span id="cb7-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb7-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ORDER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DESC</span></span>
<span id="cb7-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">LIMIT</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">order</th>
<th style="text-align: right;">number_of_pizzas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="for-each-customer-how-many-delivered-pizzas-had-at-least-1-change-and-how-many-and-no-changes" class="level4">
<h4 class="anchored" data-anchor-id="for-each-customer-how-many-delivered-pizzas-had-at-least-1-change-and-how-many-and-no-changes">7. For each customer, how many delivered pizzas had at least 1 change and how many? and no changes?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- PART 1</span></span>
<span id="cb8-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- delivered orders</span></span>
<span id="cb8-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb8-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb8-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders</span>
<span id="cb8-6">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb8-7">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb8-8">),</span>
<span id="cb8-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- orders with at least 1 changes</span></span>
<span id="cb8-10">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb8-11">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb8-12">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders</span>
<span id="cb8-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> exclusions <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span></span>
<span id="cb8-14">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> extras <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span></span>
<span id="cb8-15">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> (</span>
<span id="cb8-16">            exclusions <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>)</span>
<span id="cb8-17">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> extras <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">not</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>, <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span>)</span>
<span id="cb8-18">        )</span>
<span id="cb8-19">)</span>
<span id="cb8-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> cte2.customer_id,</span>
<span id="cb8-21">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(pizza_id) delivered_pizzas_with_changes</span>
<span id="cb8-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb8-23">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">inner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> cte1.order_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cte2.order_id</span>
<span id="cb8-24"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>4 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">customer_id</th>
<th style="text-align: right;">delivered_pizzas_with_changes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">102</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">105</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">104</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">103</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- PART 2: orders with no changes</span></span>
<span id="cb9-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb9-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb9-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders</span>
<span id="cb9-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb9-6">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb9-7">),</span>
<span id="cb9-8">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb9-9">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb9-10">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders</span>
<span id="cb9-11">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> exclusions <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span></span>
<span id="cb9-12">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> extras <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span></span>
<span id="cb9-13">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> (</span>
<span id="cb9-14">            exclusions <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>)</span>
<span id="cb9-15">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> extras <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>, <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span>)</span>
<span id="cb9-16">        )</span>
<span id="cb9-17">)</span>
<span id="cb9-18"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> cte2.customer_id,</span>
<span id="cb9-19">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(pizza_id) delivered_pizzas_with_no_changes</span>
<span id="cb9-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb9-21">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">inner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> cte1.order_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cte2.order_id</span>
<span id="cb9-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: right;">delivered_pizzas_with_no_changes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">101</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">102</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">103</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">104</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">105</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-pizzas-were-delivered-that-had-both-exclusions-and-extras" class="level4">
<h4 class="anchored" data-anchor-id="how-many-pizzas-were-delivered-that-had-both-exclusions-and-extras">8. How many pizzas were delivered that had both exclusions and extras?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"></span>
<span id="cb10-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- delivered orders</span></span>
<span id="cb10-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb10-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb10-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders</span>
<span id="cb10-6">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb10-7">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> (<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>)</span>
<span id="cb10-8">),</span>
<span id="cb10-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- orders with both exclusions and extras</span></span>
<span id="cb10-10">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb10-11">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb10-12">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders</span>
<span id="cb10-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> (</span>
<span id="cb10-14">            exclusions <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span></span>
<span id="cb10-15">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> extras <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span></span>
<span id="cb10-16">        )</span>
<span id="cb10-17">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> exclusions <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span></span>
<span id="cb10-18">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> extras <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&gt;</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span></span>
<span id="cb10-19">)</span>
<span id="cb10-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb10-21"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb10-22">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">inner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> cte1.order_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> cte2.order_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<colgroup>
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 14%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 4%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">order_id</th>
<th style="text-align: right;">runner_id</th>
<th style="text-align: left;">pickup_time</th>
<th style="text-align: left;">distance</th>
<th style="text-align: left;">duration</th>
<th style="text-align: left;">cancellation</th>
<th style="text-align: right;">order_id..7</th>
<th style="text-align: right;">customer_id</th>
<th style="text-align: right;">pizza_id</th>
<th style="text-align: left;">exclusions</th>
<th style="text-align: left;">extras</th>
<th style="text-align: left;">order_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">2020-01-11 18:50:20</td>
<td style="text-align: left;">10km</td>
<td style="text-align: left;">10minutes</td>
<td style="text-align: left;">null</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">104</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">2, 6</td>
<td style="text-align: left;">1, 4</td>
<td style="text-align: left;">2020-01-11 18:34:49</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-was-the-total-volume-of-pizzas-ordered-for-each-hour-of-the-day" class="level4">
<h4 class="anchored" data-anchor-id="what-was-the-total-volume-of-pizzas-ordered-for-each-hour-of-the-day">9. What was the total volume of pizzas ordered for each hour of the day?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb11-1"></span>
<span id="cb11-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">EXTRACT</span> (</span>
<span id="cb11-3">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">hour</span></span>
<span id="cb11-4">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> order_time</span>
<span id="cb11-5">    ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> hour_of_day,</span>
<span id="cb11-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(pizza_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> pizza_volume</span>
<span id="cb11-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders</span>
<span id="cb11-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>6 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">hour_of_day</th>
<th style="text-align: right;">pizza_volume</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">18</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">21</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: right;">23</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">13</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: right;">19</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">11</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-was-the-volume-of-orders-for-each-day-of-the-week" class="level4">
<h4 class="anchored" data-anchor-id="what-was-the-volume-of-orders-for-each-day-of-the-week">10. What was the volume of orders for each day of the week?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- select EXTRACT (</span></span>
<span id="cb12-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--        dow</span></span>
<span id="cb12-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--        from order_time</span></span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--    ) as day_of_week,</span></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--    count(pizza_id) as pizza_volume</span></span>
<span id="cb12-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- from customer_orders</span></span>
<span id="cb12-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- GROUP BY 1;</span></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- or</span></span>
<span id="cb12-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">to_char</span>(order_time, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Day'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> day_of_week,</span>
<span id="cb12-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(pizza_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> pizza_volume</span>
<span id="cb12-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders</span>
<span id="cb12-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>4 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">day_of_week</th>
<th style="text-align: right;">pizza_volume</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Saturday</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Thursday</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Friday</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wednesday</td>
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="b.-runner-and-customer-experience" class="level3">
<h3 class="anchored" data-anchor-id="b.-runner-and-customer-experience">B. Runner and Customer Experience</h3>
<section id="how-many-runners-signed-up-for-each-1-week-period-i.e.-week-starts-2021-01-01-1" class="level4">
<h4 class="anchored" data-anchor-id="how-many-runners-signed-up-for-each-1-week-period-i.e.-week-starts-2021-01-01-1">1. How many runners signed up for each 1 week period? (i.e.&nbsp;week starts 2021-01-01)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb13-1"></span>
<span id="cb13-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">EXTRACT</span>(</span>
<span id="cb13-3">        week</span>
<span id="cb13-4">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> registration_date</span>
<span id="cb13-5">    ),</span>
<span id="cb13-6">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(runner_id)</span>
<span id="cb13-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runners</span>
<span id="cb13-8"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">extract</th>
<th style="text-align: right;">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">53</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-was-the-average-time-in-minutes-it-took-for-each-runner-to-arrive-at-the-pizza-runner-hq-to-pickup-the-order" class="level4">
<h4 class="anchored" data-anchor-id="what-was-the-average-time-in-minutes-it-took-for-each-runner-to-arrive-at-the-pizza-runner-hq-to-pickup-the-order">2. What was the average time in minutes it took for each runner to arrive at the Pizza – Runner HQ to pickup the order?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb14-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb14-2">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> ro.pickup_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">then</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb14-3">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(</span>
<span id="cb14-4">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">EXTRACT</span>(</span>
<span id="cb14-5">                epoch</span>
<span id="cb14-6">                <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> (</span>
<span id="cb14-7">                        ro.pickup_time:<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:TIMESTAMP</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> co.order_time:<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:TIMESTAMP</span></span>
<span id="cb14-8">                    )</span>
<span id="cb14-9">            ) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>,</span>
<span id="cb14-10">            <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb14-11">        )</span>
<span id="cb14-12">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> duration_till_pickup,</span>
<span id="cb14-13">    ro.pickup_time,</span>
<span id="cb14-14">    co.order_time</span>
<span id="cb14-15"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders co</span>
<span id="cb14-16">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">INNER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">JOIN</span> runner_orders ro <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> co.order_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ro.order_id; </span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: right;">duration_till_pickup</th>
<th style="text-align: left;">pickup_time</th>
<th style="text-align: left;">order_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10.53</td>
<td style="text-align: left;">2020-01-01 18:15:34</td>
<td style="text-align: left;">2020-01-01 18:05:02</td>
</tr>
<tr class="even">
<td style="text-align: right;">10.03</td>
<td style="text-align: left;">2020-01-01 19:10:54</td>
<td style="text-align: left;">2020-01-01 19:00:52</td>
</tr>
<tr class="odd">
<td style="text-align: right;">21.23</td>
<td style="text-align: left;">2020-01-03 00:12:37</td>
<td style="text-align: left;">2020-01-02 23:51:23</td>
</tr>
<tr class="even">
<td style="text-align: right;">21.23</td>
<td style="text-align: left;">2020-01-03 00:12:37</td>
<td style="text-align: left;">2020-01-02 23:51:23</td>
</tr>
<tr class="odd">
<td style="text-align: right;">29.28</td>
<td style="text-align: left;">2020-01-04 13:53:03</td>
<td style="text-align: left;">2020-01-04 13:23:46</td>
</tr>
<tr class="even">
<td style="text-align: right;">29.28</td>
<td style="text-align: left;">2020-01-04 13:53:03</td>
<td style="text-align: left;">2020-01-04 13:23:46</td>
</tr>
<tr class="odd">
<td style="text-align: right;">29.28</td>
<td style="text-align: left;">2020-01-04 13:53:03</td>
<td style="text-align: left;">2020-01-04 13:23:46</td>
</tr>
<tr class="even">
<td style="text-align: right;">10.47</td>
<td style="text-align: left;">2020-01-08 21:10:57</td>
<td style="text-align: left;">2020-01-08 21:00:29</td>
</tr>
<tr class="odd">
<td style="text-align: right;">NA</td>
<td style="text-align: left;">null</td>
<td style="text-align: left;">2020-01-08 21:03:13</td>
</tr>
<tr class="even">
<td style="text-align: right;">10.27</td>
<td style="text-align: left;">2020-01-08 21:30:45</td>
<td style="text-align: left;">2020-01-08 21:20:29</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This query calculates the average time in minutes it took for each runner to arrive at the Pizza Runner HQ to pick up the order. It first joins the <code>customer_orders</code> and <code>runner_orders</code> tables to get the order information and the runner’s pickup time. Then, it checks if the <code>pickup_time</code> is null, and if so, it sets the corresponding <code>duration_till_pickup</code> to null. Otherwise, it calculates the time difference between the <code>pickup_time</code> and the <code>order_time</code> in seconds using the <code>EXTRACT()</code> and <code>TIMESTAMP()</code>functions. It then converts the time difference to minutes and rounds it to two decimal places. Finally, it selects the <code>duration_till_pickup</code>, <code>pickup_time</code>, and <code>order_time</code> for each order.</p>
</section>
<section id="what-was-the-average-time-in-minutes-it-took-for-each-runner-to-deliver-pizzas" class="level4">
<h4 class="anchored" data-anchor-id="what-was-the-average-time-in-minutes-it-took-for-each-runner-to-deliver-pizzas">3. What was the average time in minutes it took for each runner to deliver pizzas?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb15-1"></span>
<span id="cb15-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> runner_id,</span>
<span id="cb15-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(</span>
<span id="cb15-4">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">avg</span>(</span>
<span id="cb15-5">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb15-6">                <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">left</span>(duration, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) ~ <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'^\d+$'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">left</span>(duration, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">integer</span>)</span>
<span id="cb15-7">                <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb15-8">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span></span>
<span id="cb15-9">        ),</span>
<span id="cb15-10">        <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb15-11">    ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> extracted_minutes</span>
<span id="cb15-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders</span>
<span id="cb15-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> runner_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">runner_id</th>
<th style="text-align: right;">extracted_minutes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">15.00</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">26.67</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">22.25</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-was-the-difference-between-the-longest-and-shortest-delivery-times-for-all" class="level4">
<h4 class="anchored" data-anchor-id="what-was-the-difference-between-the-longest-and-shortest-delivery-times-for-all">5. What was the difference between the longest and shortest delivery times for all?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb16-1"></span>
<span id="cb16-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- If we define delivery times as the duration between ro.pickup_time - co.order_time + ro.duration</span></span>
<span id="cb16-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- then:</span></span>
<span id="cb16-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb16-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb16-6">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> ro.pickup_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">then</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb16-7">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(</span>
<span id="cb16-8">                <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">EXTRACT</span>(</span>
<span id="cb16-9">                    epoch</span>
<span id="cb16-10">                    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> (</span>
<span id="cb16-11">                            ro.pickup_time:<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:TIMESTAMP</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> co.order_time:<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:TIMESTAMP</span></span>
<span id="cb16-12">                        )</span>
<span id="cb16-13">                ) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span>,</span>
<span id="cb16-14">                <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb16-15">            )</span>
<span id="cb16-16">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> duration_till_pickup,</span>
<span id="cb16-17">        ro.pickup_time,</span>
<span id="cb16-18">        co.order_time,</span>
<span id="cb16-19">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(</span>
<span id="cb16-20">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb16-21">                <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">left</span>(ro.duration, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) ~ <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'^\d+$'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">left</span>(ro.duration, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">integer</span>)</span>
<span id="cb16-22">                <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb16-23">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span>,</span>
<span id="cb16-24">            <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb16-25">        ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> cleaned_duration_minutes</span>
<span id="cb16-26">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_orders co</span>
<span id="cb16-27">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">INNER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">JOIN</span> runner_orders ro <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> co.order_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ro.order_id</span>
<span id="cb16-28">)</span>
<span id="cb16-29"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(duration_till_pickup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> cleaned_duration_minutes) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> longest_delivery_time,</span>
<span id="cb16-30">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(duration_till_pickup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> cleaned_duration_minutes) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> shortest_delivery_time,</span>
<span id="cb16-31">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(duration_till_pickup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> cleaned_duration_minutes) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(duration_till_pickup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> cleaned_duration_minutes) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> difference</span>
<span id="cb16-32"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">longest_delivery_time</th>
<th style="text-align: right;">shortest_delivery_time</th>
<th style="text-align: right;">difference</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">69.28</td>
<td style="text-align: right;">25.47</td>
<td style="text-align: right;">43.81</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Now, this is a monstrous looking one 😅 .</p>
<p>A (CTE) named <code>cte1</code> is created, extracting relevant information such as <code>duration_till_pickup</code>, <code>pickup_time</code>, <code>order_time</code>, and <code>cleaned_duration_minutes</code> from the <code>customer_orders</code> (co) and <code>runner_orders</code> (ro) tables. The <code>duration_till_pickup</code> is calculated as the time between pickup and order in minutes. The <code>cleaned_duration_minutes</code> extracts the duration in minutes from the ro.<code>duration</code> field.</p>
<p>The main query then computes the maximum, minimum, and the difference between the sum of <code>duration_till_pickup</code> and <code>cleaned_duration_minutes</code>. These values represent the longest, shortest, and the time difference between delivery times for all orders.</p>
</section>
<section id="what-was-the-average-speed-for-each-runner-for-each-delivery-and-do-you-notice-any-trend-for-these-values" class="level4">
<h4 class="anchored" data-anchor-id="what-was-the-average-speed-for-each-runner-for-each-delivery-and-do-you-notice-any-trend-for-these-values">6. What was the average speed for each runner for each delivery and do you notice – any trend for these values?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb17-1"></span>
<span id="cb17-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb17-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> runner_id,</span>
<span id="cb17-4">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb17-5">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> distance ~ <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.*'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast</span>(substring(distance, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'[0-9\-+\.]+'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">float</span>)</span>
<span id="cb17-6">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb17-7">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> cleaned_distance_km,</span>
<span id="cb17-8">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb17-9">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> duration ~ <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'.*'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast</span>(substring(duration, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'[0-9\-+\.]+'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">float</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span></span>
<span id="cb17-10">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb17-11">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> cleaned_duration_hr</span>
<span id="cb17-12">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders</span>
<span id="cb17-13">)</span>
<span id="cb17-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> runner_id,</span>
<span id="cb17-15">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">avg</span>(cleaned_distance_km <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> cleaned_duration_hr) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> speed_km_hr</span>
<span id="cb17-16"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte</span>
<span id="cb17-17"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">runner_id</th>
<th style="text-align: right;">speed_km_hr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">40.00000</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">62.90000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">45.53611</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This psql query calculates the average speed for each runner for each delivery. It uses a CTE named <code>cte</code> to clean and extract relevant information such as <code>cleaned_distance_km</code> and <code>cleaned_duration_hr</code> from the <code>runner_orders</code> table. The main query then computes the average speed (<code>cleaned_distance_km</code> / <code>cleaned_duration_hr</code>) for each runner and presents the results grouped by runner_id. This allows you to observe trends in the average speed of each runner across their deliveries.</p>
</section>
<section id="what-is-the-successful-delivery-percentage-for-each-runner" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-successful-delivery-percentage-for-each-runner">7. What is the successful delivery percentage for each runner?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> part <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb18-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> cte.runner_id,</span>
<span id="cb18-3">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> part_cancel</span>
<span id="cb18-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> (</span>
<span id="cb18-5">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> runner_id,</span>
<span id="cb18-6">                <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nullif</span>(cancellation, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">||</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nullif</span>(cancellation, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">cancel</span></span>
<span id="cb18-7">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders</span>
<span id="cb18-8">        ) cte</span>
<span id="cb18-9">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">cancel</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb18-10">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> runner_id</span>
<span id="cb18-11">),</span>
<span id="cb18-12">whole <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb18-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> runner_id,</span>
<span id="cb18-14">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> whole_cancel</span>
<span id="cb18-15">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> (</span>
<span id="cb18-16">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> runner_id,</span>
<span id="cb18-17">                <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nullif</span>(cancellation, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">||</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nullif</span>(cancellation, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">cancel</span></span>
<span id="cb18-18">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders</span>
<span id="cb18-19">        ) cte</span>
<span id="cb18-20">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> runner_id</span>
<span id="cb18-21">)</span>
<span id="cb18-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> p.runner_id,</span>
<span id="cb18-23">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb18-24">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> w.whole_cancel <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">then</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb18-25">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(</span>
<span id="cb18-26">            (p.part_cancel:<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:numeric</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> w.whole_cancel) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>,</span>
<span id="cb18-27">            <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb18-28">        )</span>
<span id="cb18-29">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">percent</span></span>
<span id="cb18-30"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> part p</span>
<span id="cb18-31">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">inner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> whole w <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> p.runner_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> w.runner_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">runner_id</th>
<th style="text-align: right;">percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">50</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">75</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">100</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="c.-ingredient-optimisation" class="level3">
<h3 class="anchored" data-anchor-id="c.-ingredient-optimisation">C. Ingredient Optimisation</h3>
<section id="what-are-the-standard-ingredients-for-each-pizza" class="level4">
<h4 class="anchored" data-anchor-id="what-are-the-standard-ingredients-for-each-pizza">1. What are the standard ingredients for each pizza?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb19-1"></span>
<span id="cb19-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> pn.pizza_name, pt.topping_name</span>
<span id="cb19-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> pizza_names pn <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">inner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> new_pizza_recipes np</span>
<span id="cb19-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> pn.pizza_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.pizza_id</span>
<span id="cb19-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">inner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> pizza_toppings pt <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> pt.topping_id:<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:text</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ANY</span> (np.toppings)</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">pizza_name</th>
<th style="text-align: left;">topping_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Meatlovers</td>
<td style="text-align: left;">Bacon</td>
</tr>
<tr class="even">
<td style="text-align: left;">Meatlovers</td>
<td style="text-align: left;">BBQ Sauce</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Meatlovers</td>
<td style="text-align: left;">Beef</td>
</tr>
<tr class="even">
<td style="text-align: left;">Meatlovers</td>
<td style="text-align: left;">Cheese</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Meatlovers</td>
<td style="text-align: left;">Chicken</td>
</tr>
<tr class="even">
<td style="text-align: left;">Meatlovers</td>
<td style="text-align: left;">Mushrooms</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Meatlovers</td>
<td style="text-align: left;">Pepperoni</td>
</tr>
<tr class="even">
<td style="text-align: left;">Meatlovers</td>
<td style="text-align: left;">Salami</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Vegetarian</td>
<td style="text-align: left;">Cheese</td>
</tr>
<tr class="even">
<td style="text-align: left;">Vegetarian</td>
<td style="text-align: left;">Mushrooms</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="d.-pricing-and-ratings" class="level3">
<h3 class="anchored" data-anchor-id="d.-pricing-and-ratings">D. Pricing and Ratings</h3>
<section id="if-a-meat-lovers-pizza-costs-12-and-vegetarian-costs-10-and-there-were-no-charges-for-changes-how-much-money-has-pizza-runner-made-so-far-if-there-are-no-delivery-fees" class="level4">
<h4 class="anchored" data-anchor-id="if-a-meat-lovers-pizza-costs-12-and-vegetarian-costs-10-and-there-were-no-charges-for-changes-how-much-money-has-pizza-runner-made-so-far-if-there-are-no-delivery-fees">1. If a Meat Lovers pizza costs $12 and Vegetarian costs $10 and there were no charges for changes, how much money has Pizza Runner made so far if there are no delivery fees?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Creating a view of cleaned data</span></span>
<span id="cb20-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">CREATE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">OR</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">REPLACE</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">VIEW</span> clean_runner_orders <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span></span>
<span id="cb20-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> order_id,</span>
<span id="cb20-4">    runner_id,</span>
<span id="cb20-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASE</span></span>
<span id="cb20-6">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">WHEN</span> pickup_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb20-7">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">ELSE</span> pickup_time:<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:TIMESTAMP</span></span>
<span id="cb20-8">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">END</span>,</span>
<span id="cb20-9">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast</span>(substring(distance, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'[0-9\-+\.]+'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">float</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> distance,</span>
<span id="cb20-10">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cast</span>(substring(duration, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'[0-9\-+\.]+'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">float</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> duration,</span>
<span id="cb20-11">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nullif</span>(cancellation, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">||</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nullif</span>(cancellation, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'null'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> cancellation</span>
<span id="cb20-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> runner_orders;</span>
<span id="cb20-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">--</span></span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb21-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb21-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> co.pizza_id,</span>
<span id="cb21-3">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(co.pizza_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> quantity_sold</span>
<span id="cb21-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> clean_runner_orders ro</span>
<span id="cb21-5">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">inner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> customer_orders co <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> co.order_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ro.order_id</span>
<span id="cb21-6">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb21-7">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb21-8">)</span>
<span id="cb21-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> pizza_id,</span>
<span id="cb21-10">    quantity_sold <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> price <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> revenue</span>
<span id="cb21-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> (</span>
<span id="cb21-12">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb21-13">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASE</span></span>
<span id="cb21-14">                <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">WHEN</span> cte1.pizza_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span></span>
<span id="cb21-15">                <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">WHEN</span> cte1.pizza_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb21-16">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">END</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> price</span>
<span id="cb21-17">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb21-18">    ) sq</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">pizza_id</th>
<th style="text-align: right;">revenue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">108</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: right;">30</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Creating a random integer generator</span></span>
<span id="cb22-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">create</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">replace</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span> random_between(low <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span>, high <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span>) returns <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">int</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> $$ <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">begin</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">floor</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">random</span>() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> (high <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> low <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> low);</span>
<span id="cb22-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span>;</span>
<span id="cb22-4">$$ language <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'plpgsql'</span> STRICT;</span></code></pre></div>
</div>
</section>
<section id="if-a-meat-lovers-pizza-was-12-and-vegetarian-10-fixed-prices-with-no-cost-for-extras-and-each-runner-is-paid-0.30-per-kilometre-travelled-how-much-money-does-pizza-runner-have-left-over-after-these-deliveries" class="level4">
<h4 class="anchored" data-anchor-id="if-a-meat-lovers-pizza-was-12-and-vegetarian-10-fixed-prices-with-no-cost-for-extras-and-each-runner-is-paid-0.30-per-kilometre-travelled-how-much-money-does-pizza-runner-have-left-over-after-these-deliveries">2. If a Meat Lovers pizza was $12 and Vegetarian $10 fixed prices with no cost for extras and each runner is paid $0.30 per kilometre travelled, how much money does Pizza Runner have left over after these deliveries?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb23-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb23-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> co.pizza_id,</span>
<span id="cb23-3">        ro.distance <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> runner_cost,</span>
<span id="cb23-4">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASE</span></span>
<span id="cb23-5">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">WHEN</span> co.pizza_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span></span>
<span id="cb23-6">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">WHEN</span> co.pizza_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb23-7">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">END</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">AS</span> price</span>
<span id="cb23-8">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> clean_runner_orders ro</span>
<span id="cb23-9">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">inner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> customer_orders co <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> co.order_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ro.order_id</span>
<span id="cb23-10">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> cancellation <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">is</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">null</span></span>
<span id="cb23-11">)</span>
<span id="cb23-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(price) revenue,</span>
<span id="cb23-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(runner_cost):<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:numeric</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">cost</span>,</span>
<span id="cb23-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(price) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(runner_cost):<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:numeric</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) profit</span>
<span id="cb23-15"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">revenue</th>
<th style="text-align: right;">cost</th>
<th style="text-align: right;">profit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">138</td>
<td style="text-align: right;">64.62</td>
<td style="text-align: right;">73.38</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
</section>
<section id="closing-the-connection" class="level2">
<h2 class="anchored" data-anchor-id="closing-the-connection">Closing the connection</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbDisconnect</span>(con)</span></code></pre></div>
</div>


</section>

 ]]></description>
  <category>sql</category>
  <guid>https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-2/index.html</guid>
  <pubDate>Sat, 18 Nov 2023 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-2/image.PNG" medium="image"/>
</item>
<item>
  <title>Foodie Fi</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-3/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Using subscription style digital data to answer important business questions.</p>
</section>
<section id="entity-relationship-diagram" class="level2">
<h2 class="anchored" data-anchor-id="entity-relationship-diagram">Entity Relationship Diagram</h2>
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-3/images/foodie.jpg" class="img-fluid"></p>
</section>
<section id="database-connection" class="level2">
<h2 class="anchored" data-anchor-id="database-connection">Database Connection</h2>
<p>First, I’ll create a connection to my local <code>postgres</code> database thanks to the <strong><code>RPostgres</code></strong> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># | warning: false</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Creating a connection to my local postgres database</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(RPostgres)</span>
<span id="cb1-4">con <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbConnect</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Postgres</span>(),</span>
<span id="cb1-6">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dbname =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"foodie_fi"</span>,</span>
<span id="cb1-7">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">user =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"postgres"</span>,</span>
<span id="cb1-8">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">password =</span> my_password)</span></code></pre></div>
</div>
</section>
<section id="queries" class="level2">
<h2 class="anchored" data-anchor-id="queries">Queries</h2>
<section id="how-many-customers-has-foodie-fi-ever-had" class="level3">
<h3 class="anchored" data-anchor-id="how-many-customers-has-foodie-fi-ever-had">1. How many customers has Foodie-Fi ever had?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"></span>
<span id="cb2-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">SELECT</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DISTINCT</span> customer_id)</span>
<span id="cb2-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">FROM</span> subscriptions;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1000</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-is-the-monthly-distribution-of-trial-plan-start_date-values-for-our-dataset-use-the-start-of-the-month-as-the-group-by-value" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-monthly-distribution-of-trial-plan-start_date-values-for-our-dataset-use-the-start-of-the-month-as-the-group-by-value">3. What is the monthly distribution of trial plan <code>start_date</code> values for our dataset use the start of the month as the group by value?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">SELECT</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">upper</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">to_char</span>(start_date, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> start_month,</span>
<span id="cb3-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>) frequency</span>
<span id="cb3-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions</span>
<span id="cb3-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb3-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb3-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ORDER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">desc</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">start_month</th>
<th style="text-align: right;">frequency</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">MARCH</td>
<td style="text-align: right;">94</td>
</tr>
<tr class="even">
<td style="text-align: left;">JULY</td>
<td style="text-align: right;">89</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AUGUST</td>
<td style="text-align: right;">88</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAY</td>
<td style="text-align: right;">88</td>
</tr>
<tr class="odd">
<td style="text-align: left;">JANUARY</td>
<td style="text-align: right;">88</td>
</tr>
<tr class="even">
<td style="text-align: left;">SEPTEMBER</td>
<td style="text-align: right;">87</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DECEMBER</td>
<td style="text-align: right;">84</td>
</tr>
<tr class="even">
<td style="text-align: left;">APRIL</td>
<td style="text-align: right;">81</td>
</tr>
<tr class="odd">
<td style="text-align: left;">JUNE</td>
<td style="text-align: right;">79</td>
</tr>
<tr class="even">
<td style="text-align: left;">OCTOBER</td>
<td style="text-align: right;">79</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-plan-start_date-values-occur-after-the-year-2020-for-our-dataset-show-the-breakdown-by-count-of-events-for-each-plan_name" class="level3">
<h3 class="anchored" data-anchor-id="what-plan-start_date-values-occur-after-the-year-2020-for-our-dataset-show-the-breakdown-by-count-of-events-for-each-plan_name">3. What plan <code>start_date</code> values occur after the year 2020 for our dataset? Show the breakdown by count of events for each <code>plan_name</code> ?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"></span>
<span id="cb4-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">SELECT</span> p.plan_name,</span>
<span id="cb4-3">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> count_of_events_after_2020</span>
<span id="cb4-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions s</span>
<span id="cb4-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> plans p</span>
<span id="cb4-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">EXTRACT</span>(</span>
<span id="cb4-7">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">year</span></span>
<span id="cb4-8">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> start_date</span>
<span id="cb4-9">    ) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span></span>
<span id="cb4-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>4 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">plan_name</th>
<th style="text-align: right;">count_of_events_after_2020</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">pro annual</td>
<td style="text-align: right;">63</td>
</tr>
<tr class="even">
<td style="text-align: left;">churn</td>
<td style="text-align: right;">71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pro monthly</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="even">
<td style="text-align: left;">basic monthly</td>
<td style="text-align: right;">8</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-is-the-customer-count-and-percentage-of-customers-who-have-churned-rounded-to-1-decimal-place" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-customer-count-and-percentage-of-customers-who-have-churned-rounded-to-1-decimal-place">4. What is the customer count and percentage of customers who have churned rounded to 1 decimal place?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb5-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">id</span>,</span>
<span id="cb5-3">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(customer_id):<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:numeric</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> whole</span>
<span id="cb5-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions</span>
<span id="cb5-5">),</span>
<span id="cb5-6">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb5-7">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">id</span>,</span>
<span id="cb5-8">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(customer_id):<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:numeric</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> part</span>
<span id="cb5-9">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions</span>
<span id="cb5-10">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span></span>
<span id="cb5-11">)</span>
<span id="cb5-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">SELECT</span> cte1.whole <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> total_customers,</span>
<span id="cb5-13">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(cte2.part <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> cte1.whole, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> pct_churned</span>
<span id="cb5-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb5-15">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> cte2;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">total_customers</th>
<th style="text-align: right;">pct_churned</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2650</td>
<td style="text-align: right;">12</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-customers-have-churned-straight-after-their-initial-free-trial-what-percentage-is-this-rounded-to-the-nearest-whole-number" class="level3">
<h3 class="anchored" data-anchor-id="how-many-customers-have-churned-straight-after-their-initial-free-trial-what-percentage-is-this-rounded-to-the-nearest-whole-number">5. How many customers have churned straight after their initial free trial? what percentage is this rounded to the nearest whole number?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb6-2">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- using the lead window function to find the</span></span>
<span id="cb6-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- preceding row to a particular row</span></span>
<span id="cb6-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb6-5">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lead</span>(plan_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> lead_plan_id</span>
<span id="cb6-6">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions</span>
<span id="cb6-7">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id,</span>
<span id="cb6-8">        plan_id</span>
<span id="cb6-9">),</span>
<span id="cb6-10">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb6-11">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- getting rows whose values satisfy the condition in the question</span></span>
<span id="cb6-12">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb6-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte</span>
<span id="cb6-14">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb6-15">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> lead_plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span></span>
<span id="cb6-16">) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- solution</span></span>
<span id="cb6-17"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> count_of_customers_who_churned_after_free_trial</span>
<span id="cb6-18"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte2 </span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">count_of_customers_who_churned_after_free_trial</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">92</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-is-the-number-and-percentage-of-customer-plans-after-their-initial-free-trial" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-number-and-percentage-of-customer-plans-after-their-initial-free-trial">6. What is the number and percentage of customer plans after their initial free trial?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"></span>
<span id="cb7-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb7-3">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">id</span>,</span>
<span id="cb7-4">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(customer_id):<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:numeric</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> whole</span>
<span id="cb7-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions</span>
<span id="cb7-6">),</span>
<span id="cb7-7">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb7-8">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">id</span>,</span>
<span id="cb7-9">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(customer_id):<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:numeric</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> part</span>
<span id="cb7-10">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions</span>
<span id="cb7-11">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb7-12">)</span>
<span id="cb7-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">SELECT</span> cte2.part <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> customer_count_after_trial_plan,</span>
<span id="cb7-14">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(cte2.part <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> cte1.whole, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> pct_ccatp</span>
<span id="cb7-15"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb7-16">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> cte2;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">customer_count_after_trial_plan</th>
<th style="text-align: right;">pct_ccatp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1650</td>
<td style="text-align: right;">62</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-customers-have-upgraded-to-an-annual-plan-in-2020" class="level3">
<h3 class="anchored" data-anchor-id="how-many-customers-have-upgraded-to-an-annual-plan-in-2020">7. How many customers have upgraded to an annual plan in 2020?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb8-1"></span>
<span id="cb8-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb8-3">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- using the lead window function to find the</span></span>
<span id="cb8-4">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- preceding row to a particular row</span></span>
<span id="cb8-5">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb8-6">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lead</span>(plan_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> lead_plan_id</span>
<span id="cb8-7">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions</span>
<span id="cb8-8">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id,</span>
<span id="cb8-9">        plan_id</span>
<span id="cb8-10">),</span>
<span id="cb8-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- filtering to only annual plans</span></span>
<span id="cb8-12">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb8-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb8-14">        lead_plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> plan_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> diff</span>
<span id="cb8-15">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb8-16">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> lead_plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb8-17">) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- excluding churned customers and unupgraded plans</span></span>
<span id="cb8-18"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DISTINCT</span> customer_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> upgraded_customers_2020_count</span>
<span id="cb8-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte2</span>
<span id="cb8-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> (diff <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb8-21">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> (lead_plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb8-22">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">EXTRACT</span>(</span>
<span id="cb8-23">        <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">year</span></span>
<span id="cb8-24">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> start_date</span>
<span id="cb8-25">    ) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">upgraded_customers_2020_count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">253</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-days-on-average-does-it-take-for-a-customer-to-upgrade-to-an-annual-plan-from-the-day-they-join-foodie-fi" class="level3">
<h3 class="anchored" data-anchor-id="how-many-days-on-average-does-it-take-for-a-customer-to-upgrade-to-an-annual-plan-from-the-day-they-join-foodie-fi">8. How many days on average does it take for a customer to upgrade to an annual plan from the – day they join Foodie-Fi?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb9-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb9-3">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(plan_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span> (<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> highest_plan_suscribed,</span>
<span id="cb9-4">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(start_date) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span> (<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> date_of_hps,</span>
<span id="cb9-5">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">min</span>(start_date) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span> (<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> date_of_lps,</span>
<span id="cb9-6">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>() <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span> (<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> sn</span>
<span id="cb9-7">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions</span>
<span id="cb9-8">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id,</span>
<span id="cb9-9">        start_date,</span>
<span id="cb9-10">        plan_id</span>
<span id="cb9-11">),</span>
<span id="cb9-12">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span>(</span>
<span id="cb9-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb9-14">        date_of_hps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> date_of_lps <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> diff_in_days</span>
<span id="cb9-15">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb9-16">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> highest_plan_suscribed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb9-17">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> sn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb9-18">)</span>
<span id="cb9-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">avg</span>(diff_in_days):<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:numeric</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> avg_days_to_upgrade_to_annual</span>
<span id="cb9-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte2</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">avg_days_to_upgrade_to_annual</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">105.95</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-customers-downgraded-from-a-pro-monthly-to-a-basic-monthly-plan-in-2020" class="level3">
<h3 class="anchored" data-anchor-id="how-many-customers-downgraded-from-a-pro-monthly-to-a-basic-monthly-plan-in-2020">9. How many customers downgraded from a pro monthly to a basic monthly plan in 2020?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span>(</span>
<span id="cb10-2">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb10-3">            <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lead</span>(plan_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> lead_plan_id</span>
<span id="cb10-4">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> subscriptions</span>
<span id="cb10-5">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id,</span>
<span id="cb10-6">            start_date,</span>
<span id="cb10-7">            plan_id</span>
<span id="cb10-8">    ),</span>
<span id="cb10-9">    cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb10-10">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb10-11">            plan_id,</span>
<span id="cb10-12">            lead_plan_id,</span>
<span id="cb10-13">            start_date</span>
<span id="cb10-14">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb10-15">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb10-16">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> lead_plan_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb10-17">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">EXTRACT</span>(</span>
<span id="cb10-18">                <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">year</span></span>
<span id="cb10-19">                <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> start_date</span>
<span id="cb10-20">            ) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2020</span></span>
<span id="cb10-21">    )</span>
<span id="cb10-22"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> number_of_customers_downgrade_from_prom_basm</span>
<span id="cb10-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte2</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">number_of_customers_downgrade_from_prom_basm</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="closing-the-connection" class="level2">
<h2 class="anchored" data-anchor-id="closing-the-connection">Closing the connection</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbDisconnect</span>(con)</span></code></pre></div>
</div>


</section>

 ]]></description>
  <category>sql</category>
  <guid>https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-3/index.html</guid>
  <pubDate>Sat, 18 Nov 2023 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-3/image.PNG" medium="image"/>
</item>
<item>
  <title>Data Bank</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-4/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2" style="color: #25D366;">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
</section>
<p>Data Bank runs just like any other digital bank - but with a distributed data storage platform. Customers are allocated cloud data storage limits which are directly linked to how much money they have in their accounts. The management team at Data Bank want to increase their total customer base - but also need some help tracking just how much data storage their customers will need. This case study is all about calculating metrics, growth and helping the business analyse their data in a smart way to better forecast and plan for their future developments!</p>
<section id="entity-relationship-diagram" class="level2" style="color: #25D366;">
<h2 class="anchored" data-anchor-id="entity-relationship-diagram">Entity Relationship Diagram</h2>
</section>
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-4/images/databank.jpg" class="img-fluid"></p>
<section id="database-connection" class="level2" style="color: #25D366;">
<h2 class="anchored" data-anchor-id="database-connection">Database Connection</h2>
</section>
<p>First, I’ll create a connection to my local <code>postgres</code> database thanks to the <strong><code>RPostgres</code></strong> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># | warning: false</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Creating a connection to my local postgres database</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(RPostgres)</span>
<span id="cb1-4">con <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbConnect</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Postgres</span>(),</span>
<span id="cb1-6">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dbname =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data_bank"</span>,</span>
<span id="cb1-7">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">user =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"postgres"</span>,</span>
<span id="cb1-8">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">password =</span> my_password)</span></code></pre></div>
</div>
<section id="queries" class="level2" style="color: #25D366">
<h2 class="anchored" data-anchor-id="queries">Queries</h2>
</section>
<section id="a.-customer-nodes-exploration" class="level3">
<h3 class="anchored" data-anchor-id="a.-customer-nodes-exploration">A. Customer Nodes Exploration</h3>
<section id="how-many-unique-nodes-are-there-on-the-data-bank-system" class="level4">
<h4 class="anchored" data-anchor-id="how-many-unique-nodes-are-there-on-the-data-bank-system">1. How many unique nodes are there on the Data Bank system?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DISTINCT</span> node_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> unique_nodes</span>
<span id="cb2-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_nodes;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">unique_nodes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-is-the-number-of-nodes-per-region" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-number-of-nodes-per-region">2. What is the number of nodes per region?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> region_id,</span>
<span id="cb3-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">DISTINCT</span> node_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> nodes_per_region</span>
<span id="cb3-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_nodes</span>
<span id="cb3-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> region_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">region_id</th>
<th style="text-align: right;">nodes_per_region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-customers-are-allocated-to-each-region" class="level4">
<h4 class="anchored" data-anchor-id="how-many-customers-are-allocated-to-each-region">3. How many customers are allocated to each region?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> r.region_name,</span>
<span id="cb4-2">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">distinct</span> cn.customer_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> customers_per_region</span>
<span id="cb4-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_nodes cn</span>
<span id="cb4-4">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">JOIN</span> regions r</span>
<span id="cb4-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> region_name;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">region_name</th>
<th style="text-align: right;">customers_per_region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Africa</td>
<td style="text-align: right;">102</td>
</tr>
<tr class="even">
<td style="text-align: left;">America</td>
<td style="text-align: right;">105</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Asia</td>
<td style="text-align: right;">95</td>
</tr>
<tr class="even">
<td style="text-align: left;">Australia</td>
<td style="text-align: right;">110</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Europe</td>
<td style="text-align: right;">88</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-days-on-average-are-customers-reallocated-to-a-different-node" class="level4">
<h4 class="anchored" data-anchor-id="how-many-days-on-average-are-customers-reallocated-to-a-different-node">4. How many days on average are customers reallocated to a different node?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span>(</span>
<span id="cb5-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb5-3">        node_id,</span>
<span id="cb5-4">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lead</span>(node_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span>(</span>
<span id="cb5-5">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id</span>
<span id="cb5-6">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> start_date</span>
<span id="cb5-7">        ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> lead_node,</span>
<span id="cb5-8">        start_date,</span>
<span id="cb5-9">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lead</span>(start_date) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span>(</span>
<span id="cb5-10">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id</span>
<span id="cb5-11">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> start_date</span>
<span id="cb5-12">        ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> lead_date</span>
<span id="cb5-13">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_nodes</span>
<span id="cb5-14">),</span>
<span id="cb5-15">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb5-16">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> lead_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> start_date <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> days_btw_next_node</span>
<span id="cb5-17">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb5-18">)</span>
<span id="cb5-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">avg</span>(days_btw_next_node):<span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">:numeric</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> average_reallocation_period</span>
<span id="cb5-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte2;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">average_reallocation_period</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">15.63</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-is-the-median-80th-and-95th-percentile-for-this-same-reallocation-days-metric-for-each-region" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-median-80th-and-95th-percentile-for-this-same-reallocation-days-metric-for-each-region">5. What is the median, 80th and 95th percentile for this same reallocation days metric for each region?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span>(</span>
<span id="cb6-2">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb6-3">        region_id,</span>
<span id="cb6-4">        node_id,</span>
<span id="cb6-5">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lead</span>(node_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span>(</span>
<span id="cb6-6">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id</span>
<span id="cb6-7">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> start_date</span>
<span id="cb6-8">        ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> lead_node,</span>
<span id="cb6-9">        start_date,</span>
<span id="cb6-10">        <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lead</span>(start_date) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span>(</span>
<span id="cb6-11">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id</span>
<span id="cb6-12">            <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> start_date</span>
<span id="cb6-13">        ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> lead_date</span>
<span id="cb6-14">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_nodes</span>
<span id="cb6-15">),</span>
<span id="cb6-16">cte2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span>(</span>
<span id="cb6-17">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb6-18">        lead_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> start_date <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> days_btw_next_node</span>
<span id="cb6-19">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte1</span>
<span id="cb6-20">)</span>
<span id="cb6-21"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> region_id,</span>
<span id="cb6-22">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">percentile_disc</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.5</span>) within <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> (</span>
<span id="cb6-23">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> days_btw_next_node</span>
<span id="cb6-24">    ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> median_realloc_metric,</span>
<span id="cb6-25">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">percentile_disc</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) within <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> (</span>
<span id="cb6-26">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> days_btw_next_node</span>
<span id="cb6-27">    ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> pctile_80_realloc_metric,</span>
<span id="cb6-28">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">percentile_disc</span> (<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>) within <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> (</span>
<span id="cb6-29">        <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> days_btw_next_node</span>
<span id="cb6-30">    ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> pctile_95_realloc_metric</span>
<span id="cb6-31"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte2</span>
<span id="cb6-32"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">GROUP</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>5 records</caption>
<colgroup>
<col style="width: 12%">
<col style="width: 26%">
<col style="width: 30%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">region_id</th>
<th style="text-align: right;">median_realloc_metric</th>
<th style="text-align: right;">pctile_80_realloc_metric</th>
<th style="text-align: right;">pctile_95_realloc_metric</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">29</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="b.-customer-transactions" class="level3">
<h3 class="anchored" data-anchor-id="b.-customer-transactions">B. Customer Transactions</h3>
<section id="what-is-the-unique-count-and-total-amount-for-each-transaction-type" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-unique-count-and-total-amount-for-each-transaction-type">1. What is the unique count and total amount for each transaction type?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> txn_type <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> transaction_type, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">distinct</span> (customer_id, txn_date, txn_amount, txn_amount)) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> txn_dcount, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(txn_amount) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> txn_amount_sum</span>
<span id="cb7-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_transactions</span>
<span id="cb7-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">transaction_type</th>
<th style="text-align: right;">txn_dcount</th>
<th style="text-align: right;">txn_amount_sum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">deposit</td>
<td style="text-align: right;">2671</td>
<td style="text-align: right;">1359168</td>
</tr>
<tr class="even">
<td style="text-align: left;">purchase</td>
<td style="text-align: right;">1617</td>
<td style="text-align: right;">806537</td>
</tr>
<tr class="odd">
<td style="text-align: left;">withdrawal</td>
<td style="text-align: right;">1580</td>
<td style="text-align: right;">793003</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="what-is-the-average-total-historical-deposit-counts-and-amounts-for-all-customers" class="level4">
<h4 class="anchored" data-anchor-id="what-is-the-average-total-historical-deposit-counts-and-amounts-for-all-customers">2. What is the average total historical deposit counts and amounts for all customers?</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">avg</span>(txn_amount) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> avg_historical_deposit_counts ,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(txn_type) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> deposit_counts</span>
<span id="cb8-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> customer_transactions</span>
<span id="cb8-3"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> txn_type <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'deposit'</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>1 records</caption>
<thead>
<tr class="header">
<th style="text-align: right;">avg_historical_deposit_counts</th>
<th style="text-align: right;">deposit_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">508.8611</td>
<td style="text-align: right;">2671</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="closing-the-connection" class="level3">
<h3 class="anchored" data-anchor-id="closing-the-connection">Closing the connection</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbDisconnect</span>(con)</span></code></pre></div>
</div>


</section>

 ]]></description>
  <category>sql</category>
  <guid>https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-4/index.html</guid>
  <pubDate>Sat, 18 Nov 2023 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2023-11-19_8weeks-sql-challenge-4/image.PNG" medium="image"/>
</item>
<item>
  <title>Danny’s Diner</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2023-11-18_8weeks-sql-challenge-1/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>A restaurant, Danny’s Diner, sells 3 foods: sushi, curry and ramen. Danny’s Diner is in need of your assistance to help the restaurant stay afloat - the restaurant has captured some very basic data from their few months of operation but have no idea how to use their data to help them run the business.</p>
<p>You have 3 key datasets for this case study:</p>
<ul>
<li><p><strong>sales</strong></p></li>
<li><p><strong>menu</strong></p></li>
<li><p><strong>members</strong></p></li>
</ul>
</section>
<section id="entity-relationship-diagram" class="level2">
<h2 class="anchored" data-anchor-id="entity-relationship-diagram">Entity Relationship Diagram</h2>
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_8weeks-sql-challenge-1/images/danny_diners_schema.jpg" class="img-fluid"></p>
<section id="sales" class="level3">
<h3 class="anchored" data-anchor-id="sales">Sales</h3>
<p>The sales table captures all customer_id level purchases with an corresponding order_date and product_id information for when and what menu items were ordered.</p>
</section>
<section id="menu" class="level3">
<h3 class="anchored" data-anchor-id="menu">Menu</h3>
<p>The final members table captures the join_date when a customer_id joined the beta version of the Danny’s Diner loyalty program.</p>
</section>
<section id="members" class="level3">
<h3 class="anchored" data-anchor-id="members">Members</h3>
<p>The final members table captures the join_date when a customer_id joined the beta version of the Danny’s Diner loyalty program.</p>
<p><strong>key concepts</strong>: CTEs, window functions</p>
</section>
</section>
<section id="database-connection" class="level2">
<h2 class="anchored" data-anchor-id="database-connection">Database Connection</h2>
<p>First, I’ll create a connection to my local postgres database thanks to the <strong>RPostgres</strong> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># | warning: false</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Creating a connection to my local postgres database</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(RPostgres)</span>
<span id="cb1-4">con <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb1-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbConnect</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Postgres</span>(),</span>
<span id="cb1-6">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dbname =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"danny_diners"</span>,</span>
<span id="cb1-7">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">user =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"postgres"</span>,</span>
<span id="cb1-8">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">password =</span> my_password)</span></code></pre></div>
</div>
</section>
<section id="queries" class="level2">
<h2 class="anchored" data-anchor-id="queries">Queries</h2>
<p>Now let’s convert business questions into SQL queries!</p>
<section id="what-is-the-total-amount-each-customer-spent-at-the-restaurant" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-total-amount-each-customer-spent-at-the-restaurant">1. What is the total amount each customer spent at the restaurant?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"></span>
<span id="cb2-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> s.customer_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> customer,</span>
<span id="cb2-3">   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(m.price) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> total_amount</span>
<span id="cb2-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> sales s</span>
<span id="cb2-5">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">inner</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> menu m <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> s.product_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> m.product_id</span>
<span id="cb2-6"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer</th>
<th style="text-align: right;">total_amount</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">B</td>
<td style="text-align: right;">74</td>
</tr>
<tr class="even">
<td style="text-align: left;">C</td>
<td style="text-align: right;">36</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">76</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-many-days-has-each-customer-visited-the-restaurant" class="level3">
<h3 class="anchored" data-anchor-id="how-many-days-has-each-customer-visited-the-restaurant">2. How many days has each customer visited the restaurant?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"></span>
<span id="cb3-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb3-3">   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(</span>
<span id="cb3-4">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">distinct</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">extract</span>(</span>
<span id="cb3-5">         <span class="dt" style="color: #AD0000;
background-color: null;
font-style: inherit;">day</span></span>
<span id="cb3-6">         <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> order_date</span>
<span id="cb3-7">      )</span>
<span id="cb3-8">   ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> no_of_days_visited</span>
<span id="cb3-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> sales</span>
<span id="cb3-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id</span>
<span id="cb3-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: right;">no_of_days_visited</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This SQL query calculates the number of days each customer has visited a restaurant by grouping the sales transactions by customer ID, extracting the day from the order date, counting the distinct days, and ordering the results by customer ID.</p>
</section>
<section id="what-was-the-first-item-from-the-menu-purchased-by-each-customer" class="level3">
<h3 class="anchored" data-anchor-id="what-was-the-first-item-from-the-menu-purchased-by-each-customer">3. What was the first item from the menu purchased by each customer?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"></span>
<span id="cb4-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb4-3">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb4-4">      order_date,</span>
<span id="cb4-5">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>() <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span> (</span>
<span id="cb4-6">         <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id</span>
<span id="cb4-7">         <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> order_date</span>
<span id="cb4-8">      ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> order_rank,</span>
<span id="cb4-9">      product_id</span>
<span id="cb4-10">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> sales</span>
<span id="cb4-11">)</span>
<span id="cb4-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> c.customer_id,</span>
<span id="cb4-13">   c.order_date,</span>
<span id="cb4-14">   c.order_rank,</span>
<span id="cb4-15">   m.product_name</span>
<span id="cb4-16"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte c</span>
<span id="cb4-17">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> menu m</span>
<span id="cb4-18"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> order_rank <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: left;">order_date</th>
<th style="text-align: right;">order_rank</th>
<th style="text-align: left;">product_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">2021-01-01</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">sushi</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">2021-01-01</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">curry</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">2021-01-01</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">ramen</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Within the CTE, the <code>row_number()</code> function is employed to assign a ranking to each order for each customer based on the <code>order_date</code>. The ranking starts from 1, indicating the first order for each customer. The main query then selects the customer ID, order date, order rank, and product name from the CTE, joining the <code>menu</code> table to retrieve the product name corresponding to the product ID. Finally, it filters the results to include only records with an order rank of 1, effectively selecting the first item purchased for each customer.</p>
</section>
<section id="what-is-the-most-purchased-item-on-the-menu-and-how-many-times-was-it-purchased-by-all-customers" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-most-purchased-item-on-the-menu-and-how-many-times-was-it-purchased-by-all-customers">4. What is the most purchased item on the menu and how many times was it purchased by all customers?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"></span>
<span id="cb5-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span>(</span>
<span id="cb5-3">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> product_id,</span>
<span id="cb5-4">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(product_id)</span>
<span id="cb5-5">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> sales</span>
<span id="cb5-6">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> product_id</span>
<span id="cb5-7">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(product_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">desc</span></span>
<span id="cb5-8">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">limit</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb5-9">) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-- Most purchased item on the menu is the product with the id 3 which is ramen, according to cte</span></span>
<span id="cb5-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb5-11">   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(product_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> count_of_most_purchased_product</span>
<span id="cb5-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> sales</span>
<span id="cb5-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> product_id <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> (</span>
<span id="cb5-14">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> product_id</span>
<span id="cb5-15">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte</span>
<span id="cb5-16">   )</span>
<span id="cb5-17"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: right;">count_of_most_purchased_product</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The query utilizes a common table expression (CTE) named <code>cte</code> to generate a temporary result set. Within the CTE, the <code>count()</code> function is employed to count the number of times each product ID appears in the <code>sales</code> table. The results are then sorted in descending order based on the product count. The <code>limit 1</code> clause restricts the output to the top row, effectively identifying the product ID with the highest count.</p>
<p>The main query then selects the customer ID and the count of the most purchased product for each customer. It filters the <code>sales</code> table to include only records where the <code>product_id</code> matches the one identified in the CTE, effectively focusing on the most purchased item. Finally, it groups the results by <code>customer_id</code> to determine how many times each customer purchased the most popular item.</p>
</section>
<section id="which-item-was-the-most-popular-for-each-customer" class="level3">
<h3 class="anchored" data-anchor-id="which-item-was-the-most-popular-for-each-customer">5. Which item was the most popular for each customer?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"></span>
<span id="cb6-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte_1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb6-3">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb6-4">      product_id,</span>
<span id="cb6-5">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(product_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> count_of_item</span>
<span id="cb6-6">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> sales</span>
<span id="cb6-7">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id,</span>
<span id="cb6-8">      product_id</span>
<span id="cb6-9">),</span>
<span id="cb6-10">cte_2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb6-11">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb6-12">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>() <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span> (</span>
<span id="cb6-13">         <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id</span>
<span id="cb6-14">         <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> count_of_item <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">desc</span></span>
<span id="cb6-15">      ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> order_rank</span>
<span id="cb6-16">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte_1</span>
<span id="cb6-17">)</span>
<span id="cb6-18"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> c.customer_id,</span>
<span id="cb6-19">   m.product_name,</span>
<span id="cb6-20">   c.count_of_item</span>
<span id="cb6-21"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte_2 c</span>
<span id="cb6-22">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> menu m</span>
<span id="cb6-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> order_rank <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>3 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: left;">product_name</th>
<th style="text-align: right;">count_of_item</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">ramen</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">ramen</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">ramen</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This query aims to identify the most popular item for each customer. The query utilizes two common table expressions to process the data and generate the desired output. The first CTE, named <code>cte_1</code>, calculates the count of each product purchased by each customer. It groups the rows in the sales table by <code>customer_id</code> and <code>product_id</code>, and then counts the occurrences of each product ID for each customer. This step determines the frequency of each product purchase for each customer.</p>
<p>The second CTE, named <code>cte_2</code>, assigns a ranking to each product for each customer based on the purchase frequency calculated in <code>cte_1</code>. It uses the <code>row_number()</code> function and partitions the data by <code>customer_id</code>, sorting within each partition by the <code>count_of_item</code> in descending order. This step effectively identifies the product with the highest purchase frequency (i.e., the most popular item) for each customer.</p>
<p>The main query then selects the customer ID, product name, and purchase count for each customer’s most popular item. It joins the menu table to obtain the corresponding product names and filters the results to include only records with an <code>order_rank</code> of 1, ensuring that only the most popular item for each customer is selected.</p>
</section>
<section id="which-item-was-purchased-first-by-the-customer-after-they-became-a-member" class="level3">
<h3 class="anchored" data-anchor-id="which-item-was-purchased-first-by-the-customer-after-they-became-a-member">6. Which item was purchased first by the customer after they became a member?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"></span>
<span id="cb7-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte_1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb7-3">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb7-4">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> members</span>
<span id="cb7-5">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> sales</span>
<span id="cb7-6">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> order_date</span>
<span id="cb7-7">),</span>
<span id="cb7-8">cte_2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb7-9">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb7-10">      product_id,</span>
<span id="cb7-11">      order_date,</span>
<span id="cb7-12">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>() <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span>(</span>
<span id="cb7-13">         <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id</span>
<span id="cb7-14">         <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> order_date</span>
<span id="cb7-15">      ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> order_rank</span>
<span id="cb7-16">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte_1</span>
<span id="cb7-17">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> order_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> join_date</span>
<span id="cb7-18">)</span>
<span id="cb7-19"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> c.customer_id,</span>
<span id="cb7-20">   m.product_name,</span>
<span id="cb7-21">   c.order_date,</span>
<span id="cb7-22">   c.order_rank</span>
<span id="cb7-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte_2 c</span>
<span id="cb7-24">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> menu m</span>
<span id="cb7-25"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> order_rank <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: left;">product_name</th>
<th style="text-align: left;">order_date</th>
<th style="text-align: right;">order_rank</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">ramen</td>
<td style="text-align: left;">2021-01-10</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">sushi</td>
<td style="text-align: left;">2021-01-11</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The first CTE, named <code>cte_1</code>, combines the <code>members</code> and <code>sales</code> tables, and sorts the combined data by <code>order_date</code>, ensuring a chronological order of transactions. The second CTE, named <code>cte_2</code>, focuses on purchases made after each customer’s membership start date. It filters the <code>cte_1</code> data to include only records where the <code>order_date</code> is later than the <code>join_date</code> (membership start date).</p>
<p>Additionally, it assigns an <code>order_rank</code> to each purchase for each customer using the <code>row_number()</code> function. The ranking is partitioned by <code>customer_id</code> and sorted within each partition by <code>order_date</code>. This identifies the first purchase (<code>order_rank</code> = 1) made by each customer after becoming a member. The main query then selects the customer ID, product name, order date, and order rank for each customer’s first purchase after becoming a member. It joins the <code>menu</code> table to retrieve the corresponding product names and filters the results to include only records with an <code>order_rank</code> of 1, ensuring that only the first purchase is selected.</p>
</section>
<section id="which-item-was-purchased-just-before-the-customer-became-a-member" class="level3">
<h3 class="anchored" data-anchor-id="which-item-was-purchased-just-before-the-customer-became-a-member">7. Which item was purchased just before the customer became a member?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb8-1"></span>
<span id="cb8-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte_1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb8-3">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb8-4">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> members</span>
<span id="cb8-5">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> sales</span>
<span id="cb8-6">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> order_date</span>
<span id="cb8-7">),</span>
<span id="cb8-8">cte_2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb8-9">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb8-10">      product_id,</span>
<span id="cb8-11">      join_date,</span>
<span id="cb8-12">      order_date,</span>
<span id="cb8-13">      <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row_number</span>() <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">over</span>(</span>
<span id="cb8-14">         <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">partition</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id</span>
<span id="cb8-15">         <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> order_date <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">desc</span></span>
<span id="cb8-16">      ) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> order_rank</span>
<span id="cb8-17">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte_1</span>
<span id="cb8-18">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> order_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> join_date</span>
<span id="cb8-19">)</span>
<span id="cb8-20"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> c.customer_id,</span>
<span id="cb8-21">   m.product_name,</span>
<span id="cb8-22">   c.order_date,</span>
<span id="cb8-23">   c.order_rank</span>
<span id="cb8-24"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte_2 c</span>
<span id="cb8-25">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> menu m</span>
<span id="cb8-26"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> order_rank <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: left;">product_name</th>
<th style="text-align: left;">order_date</th>
<th style="text-align: right;">order_rank</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">sushi</td>
<td style="text-align: left;">2021-01-01</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">sushi</td>
<td style="text-align: left;">2021-01-04</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The first CTE, named <code>cte_1</code>, combines the members and sales tables, and sorts the combined data by <code>order_date</code> in ascending order, ensuring a chronological sequence of transactions.</p>
<p>The second CTE, <code>cte_2</code>, focuses on purchases made before each customer’s membership start date. It filters the <code>cte_1</code> data to include only records where the <code>order_date</code> is earlier than the <code>join_date</code> (membership start date).</p>
<p>It assigns an order_rank to each purchase for each customer using the <code>row_number()</code> function. The ranking is partitioned by <code>customer_id</code> and sorted within each partition by <code>order_date</code> in descending order. This identifies the last purchase (<code>order_rank</code> = 1) made by each customer before becoming a member.</p>
<p>The main query then selects the customer ID, product name, order date, and order rank for each customer’s last purchase before becoming a member. It joins the <code>menu</code> table to retrieve the corresponding product names and filters the results to include only records with an <code>order_rank</code> of 1, ensuring that only the last purchase is selected.</p>
</section>
<section id="what-is-the-total-items-and-amount-spent-for-each-member-before-they-became-a-member" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-total-items-and-amount-spent-for-each-member-before-they-became-a-member">8. What is the total items and amount spent for each member before they became a member?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"></span>
<span id="cb9-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte_1 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb9-3">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span></span>
<span id="cb9-4">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> members</span>
<span id="cb9-5">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> sales</span>
<span id="cb9-6">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> menu</span>
<span id="cb9-7">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">order</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> order_date</span>
<span id="cb9-8">)</span>
<span id="cb9-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb9-10">   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">distinct</span> product_id) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> count_of_products,</span>
<span id="cb9-11">   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(price) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> total_amount_spent</span>
<span id="cb9-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte_1</span>
<span id="cb9-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">where</span> order_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> join_date</span>
<span id="cb9-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: right;">count_of_products</th>
<th style="text-align: right;">total_amount_spent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">40</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The query utilizes a CTE named <code>cte_1</code> to prepare the data and simplifies the aggregation in the main query.</p>
<p>The main query then aggregates the data for each customer based on their membership status. It filters the <code>cte_1</code> data to include only records where the <code>order_date</code> is earlier than the <code>join_date</code> (membership start date). For each customer, it counts the distinct <code>product_id</code> values to determine the total number of unique items purchased and calculates the sum of price values to determine the total amount spent. The results are grouped by <code>customer_id</code> to provide individual summaries for each member.</p>
</section>
<section id="if-each-1-spent-equates-to-10-points-and-sushi-has-a-2x-points-multiplier---how-many-points-would-each-customer-have" class="level3">
<h3 class="anchored" data-anchor-id="if-each-1-spent-equates-to-10-points-and-sushi-has-a-2x-points-multiplier---how-many-points-would-each-customer-have">9. If each $1 spent equates to 10 points and sushi has a 2x points multiplier - how many points would each customer have?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"></span>
<span id="cb10-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb10-3">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb10-4">      <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb10-5">         <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> product_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sushi'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">then</span> price <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb10-6">         <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> price <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb10-7">      <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> points</span>
<span id="cb10-8">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> members</span>
<span id="cb10-9">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> sales</span>
<span id="cb10-10">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> menu</span>
<span id="cb10-11">)</span>
<span id="cb10-12"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb10-13">   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(points) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> total_points</span>
<span id="cb10-14"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte</span>
<span id="cb10-15"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: right;">total_points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">860</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: right;">940</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The CTE combines the <code>members</code>, <code>sales</code>, and <code>menu</code> tables, providing a comprehensive view of customer memberships, their purchases, and the corresponding product names.</p>
<p>The main query then summarizes the points earned for each customer. It groups the data from the CTE by <code>customer_id</code> and calculates the sum of points values for each group, effectively determining the total points earned by each customer.</p>
</section>
<section id="in-the-first-week-after-a-customer-joins-the-program-including-their-join-date-they-earn-2x-points-on-all-items-not-just-sushi---how-many-points-do-customer-a-and-b-have-at-the-end-of-january" class="level3">
<h3 class="anchored" data-anchor-id="in-the-first-week-after-a-customer-joins-the-program-including-their-join-date-they-earn-2x-points-on-all-items-not-just-sushi---how-many-points-do-customer-a-and-b-have-at-the-end-of-january">10. In the first week after a customer joins the program (including their join date) they earn 2x points on all items, – not just sushi - how many points do customer A and B have at the end of January?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb11-1"></span>
<span id="cb11-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> cte <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb11-3">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb11-4">      <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb11-5">         <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> product_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'sushi'</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">then</span> price <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb11-6">         <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> price <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb11-7">      <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> points,</span>
<span id="cb11-8">      <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">case</span></span>
<span id="cb11-9">         <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">when</span> order_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> join_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">then</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb11-10">         <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb11-11">      <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">end</span> multiplier</span>
<span id="cb11-12">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> members</span>
<span id="cb11-13">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> sales</span>
<span id="cb11-14">      <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">natural</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">join</span> menu</span>
<span id="cb11-15">),</span>
<span id="cb11-16">cte_2 <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> (</span>
<span id="cb11-17">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>,</span>
<span id="cb11-18">      points <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> multiplier <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> total_points</span>
<span id="cb11-19">   <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte</span>
<span id="cb11-20">)</span>
<span id="cb11-21"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> customer_id,</span>
<span id="cb11-22">   <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sum</span>(total_points) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">as</span> total_points</span>
<span id="cb11-23"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> cte_2</span>
<span id="cb11-24"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">group</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">by</span> customer_id;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>2 records</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: right;">total_points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">1720</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: right;">1760</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The first CTE, named <code>cte</code>, joins the <code>members</code>, <code>sales</code>, and <code>menu</code> tables, and calculates the points earned for each purchase using a conditional CASE expression, similar to the previous query.</p>
<p>Additionally, it assigns a multiplier to each purchase based on whether it falls within the first week after the customer’s join date. For purchases within the first week, the multiplier is 2 (double points); for purchases outside the first week, the multiplier is 1 (standard points).</p>
<p>The second CTE, named <code>cte_2</code>, simplifies the calculation by multiplying the points and multiplier columns for each purchase, effectively determining the total points earned per transaction. The main query then summarizes the points earned for each customer, including the double points accrued during the first week. It groups the data from <code>cte_2</code> by customer_id and calculates the sum of <code>total_points</code> values for each group, providing the total points earned by customer A and customer B at the end of January</p>
</section>
<section id="recreate-the-following-table-output-using-the-available-data" class="level3">
<h3 class="anchored" data-anchor-id="recreate-the-following-table-output-using-the-available-data">11. Recreate the following table output using the available data:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb12-1"></span>
<span id="cb12-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">select</span> s.customer_id,</span>
<span id="cb12-3">    s.order_date,</span>
<span id="cb12-4">    men.product_name,</span>
<span id="cb12-5">    men.price,</span>
<span id="cb12-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">CASE</span></span>
<span id="cb12-7">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">WHEN</span> s.order_date <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> m.join_date <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">THEN</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Y'</span></span>
<span id="cb12-8">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">ELSE</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'N'</span></span>
<span id="cb12-9">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">END</span></span>
<span id="cb12-10"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">from</span> sales s</span>
<span id="cb12-11">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">LEFT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">JOIN</span> menu men <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ON</span> s.product_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> men.product_id</span>
<span id="cb12-12">    <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">LEFT</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">JOIN</span> members m <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">on</span> m.customer_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> s.customer_id</span>
<span id="cb12-13"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">ORDER</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">BY</span> s.customer_id,</span>
<span id="cb12-14">    s.order_date;</span></code></pre></div>
<div class="knitsql-table">
<table class="table table-sm table-striped small">
<caption>Displaying records 1 - 10</caption>
<thead>
<tr class="header">
<th style="text-align: left;">customer_id</th>
<th style="text-align: left;">order_date</th>
<th style="text-align: left;">product_name</th>
<th style="text-align: right;">price</th>
<th style="text-align: left;">case</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">2021-01-01</td>
<td style="text-align: left;">sushi</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">N</td>
</tr>
<tr class="even">
<td style="text-align: left;">A</td>
<td style="text-align: left;">2021-01-01</td>
<td style="text-align: left;">curry</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">N</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">2021-01-07</td>
<td style="text-align: left;">curry</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">Y</td>
</tr>
<tr class="even">
<td style="text-align: left;">A</td>
<td style="text-align: left;">2021-01-10</td>
<td style="text-align: left;">ramen</td>
<td style="text-align: right;">12</td>
<td style="text-align: left;">Y</td>
</tr>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: left;">2021-01-11</td>
<td style="text-align: left;">ramen</td>
<td style="text-align: right;">12</td>
<td style="text-align: left;">Y</td>
</tr>
<tr class="even">
<td style="text-align: left;">A</td>
<td style="text-align: left;">2021-01-11</td>
<td style="text-align: left;">ramen</td>
<td style="text-align: right;">12</td>
<td style="text-align: left;">Y</td>
</tr>
<tr class="odd">
<td style="text-align: left;">B</td>
<td style="text-align: left;">2021-01-01</td>
<td style="text-align: left;">curry</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">N</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">2021-01-02</td>
<td style="text-align: left;">curry</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">N</td>
</tr>
<tr class="odd">
<td style="text-align: left;">B</td>
<td style="text-align: left;">2021-01-04</td>
<td style="text-align: left;">sushi</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">N</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: left;">2021-01-11</td>
<td style="text-align: left;">sushi</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">Y</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="closing-the-connection" class="level2">
<h2 class="anchored" data-anchor-id="closing-the-connection">Closing the connection</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dbDisconnect</span>(con)</span></code></pre></div>
</div>


</section>

 ]]></description>
  <category>sql</category>
  <guid>https://joshuaolubori.onrender.com/posts/2023-11-18_8weeks-sql-challenge-1/index.html</guid>
  <pubDate>Fri, 17 Nov 2023 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2023-11-18_8weeks-sql-challenge-1/image.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Exploring Relationships of Variables in Sleep Data</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level1">
<h1>Introduction</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/images/image.jpg" class="img-fluid figure-img" alt="cover image"></p>
</figure>
</div>
<p>The goal is to build a casual model using linear regression that explains quality of sleep, and logistic regression to explain sleep disorders</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># descriptives</span></span>
<span id="cb1-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(datawizard)</span>
<span id="cb1-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(kableExtra)</span>
<span id="cb1-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(skimr)</span>
<span id="cb1-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(qqplotr)</span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(gt)</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># os</span></span>
<span id="cb1-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(here)</span></code></pre></div>
</div>
</section>
<section id="data" class="level1">
<h1>Data</h1>
<p>We will be using data from a fictitious…</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-2_2f2038fa22488b1e9b73ca7b8f8a5fb9">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">sleep <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">here</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"data/sleep.csv"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">show_col_types =</span> F) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> janitor<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">clean_names</span>()</span></code></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-3_e62d637ea84c4ae94d07a9d33413d7fc">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking the data</span></span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(sleep) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="szuutvoxti" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#szuutvoxti table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#szuutvoxti thead, #szuutvoxti tbody, #szuutvoxti tfoot, #szuutvoxti tr, #szuutvoxti td, #szuutvoxti th {
  border-style: none;
}

#szuutvoxti p {
  margin: 0;
  padding: 0;
}

#szuutvoxti .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#szuutvoxti .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#szuutvoxti .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#szuutvoxti .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#szuutvoxti .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#szuutvoxti .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#szuutvoxti .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#szuutvoxti .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#szuutvoxti .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#szuutvoxti .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#szuutvoxti .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#szuutvoxti .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#szuutvoxti .gt_spanner_row {
  border-bottom-style: hidden;
}

#szuutvoxti .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#szuutvoxti .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#szuutvoxti .gt_from_md > :first-child {
  margin-top: 0;
}

#szuutvoxti .gt_from_md > :last-child {
  margin-bottom: 0;
}

#szuutvoxti .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#szuutvoxti .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#szuutvoxti .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#szuutvoxti .gt_row_group_first td {
  border-top-width: 2px;
}

#szuutvoxti .gt_row_group_first th {
  border-top-width: 2px;
}

#szuutvoxti .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#szuutvoxti .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#szuutvoxti .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#szuutvoxti .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#szuutvoxti .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#szuutvoxti .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#szuutvoxti .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#szuutvoxti .gt_striped {
  background-color: #EDF7FC;
}

#szuutvoxti .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#szuutvoxti .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#szuutvoxti .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#szuutvoxti .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#szuutvoxti .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#szuutvoxti .gt_left {
  text-align: left;
}

#szuutvoxti .gt_center {
  text-align: center;
}

#szuutvoxti .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#szuutvoxti .gt_font_normal {
  font-weight: normal;
}

#szuutvoxti .gt_font_bold {
  font-weight: bold;
}

#szuutvoxti .gt_font_italic {
  font-style: italic;
}

#szuutvoxti .gt_super {
  font-size: 65%;
}

#szuutvoxti .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#szuutvoxti .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#szuutvoxti .gt_indent_1 {
  text-indent: 5px;
}

#szuutvoxti .gt_indent_2 {
  text-indent: 10px;
}

#szuutvoxti .gt_indent_3 {
  text-indent: 15px;
}

#szuutvoxti .gt_indent_4 {
  text-indent: 20px;
}

#szuutvoxti .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="person_id">person_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="gender">gender</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="age">age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="occupation">occupation</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="sleep_duration">sleep_duration</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="quality_of_sleep">quality_of_sleep</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="physical_activity_level">physical_activity_level</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="stress_level">stress_level</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="bmi_category">bmi_category</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="blood_pressure">blood_pressure</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="heart_rate">heart_rate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="daily_steps">daily_steps</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="sleep_disorder">sleep_disorder</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="person_id" class="gt_row gt_right">1</td>
<td headers="gender" class="gt_row gt_left">Male</td>
<td headers="age" class="gt_row gt_right">27</td>
<td headers="occupation" class="gt_row gt_left">Software Engineer</td>
<td headers="sleep_duration" class="gt_row gt_right">6.1</td>
<td headers="quality_of_sleep" class="gt_row gt_right">6</td>
<td headers="physical_activity_level" class="gt_row gt_right">42</td>
<td headers="stress_level" class="gt_row gt_right">6</td>
<td headers="bmi_category" class="gt_row gt_left">Overweight</td>
<td headers="blood_pressure" class="gt_row gt_right">126/83</td>
<td headers="heart_rate" class="gt_row gt_right">77</td>
<td headers="daily_steps" class="gt_row gt_right">4200</td>
<td headers="sleep_disorder" class="gt_row gt_left">None</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right gt_striped">2</td>
<td headers="gender" class="gt_row gt_left gt_striped">Male</td>
<td headers="age" class="gt_row gt_right gt_striped">28</td>
<td headers="occupation" class="gt_row gt_left gt_striped">Doctor</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">6.2</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">6</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">60</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">8</td>
<td headers="bmi_category" class="gt_row gt_left gt_striped">Normal</td>
<td headers="blood_pressure" class="gt_row gt_right gt_striped">125/80</td>
<td headers="heart_rate" class="gt_row gt_right gt_striped">75</td>
<td headers="daily_steps" class="gt_row gt_right gt_striped">10000</td>
<td headers="sleep_disorder" class="gt_row gt_left gt_striped">None</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right">3</td>
<td headers="gender" class="gt_row gt_left">Male</td>
<td headers="age" class="gt_row gt_right">28</td>
<td headers="occupation" class="gt_row gt_left">Doctor</td>
<td headers="sleep_duration" class="gt_row gt_right">6.2</td>
<td headers="quality_of_sleep" class="gt_row gt_right">6</td>
<td headers="physical_activity_level" class="gt_row gt_right">60</td>
<td headers="stress_level" class="gt_row gt_right">8</td>
<td headers="bmi_category" class="gt_row gt_left">Normal</td>
<td headers="blood_pressure" class="gt_row gt_right">125/80</td>
<td headers="heart_rate" class="gt_row gt_right">75</td>
<td headers="daily_steps" class="gt_row gt_right">10000</td>
<td headers="sleep_disorder" class="gt_row gt_left">None</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right gt_striped">4</td>
<td headers="gender" class="gt_row gt_left gt_striped">Male</td>
<td headers="age" class="gt_row gt_right gt_striped">28</td>
<td headers="occupation" class="gt_row gt_left gt_striped">Sales Representative</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">5.9</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">4</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">30</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">8</td>
<td headers="bmi_category" class="gt_row gt_left gt_striped">Obese</td>
<td headers="blood_pressure" class="gt_row gt_right gt_striped">140/90</td>
<td headers="heart_rate" class="gt_row gt_right gt_striped">85</td>
<td headers="daily_steps" class="gt_row gt_right gt_striped">3000</td>
<td headers="sleep_disorder" class="gt_row gt_left gt_striped">Sleep Apnea</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right">5</td>
<td headers="gender" class="gt_row gt_left">Male</td>
<td headers="age" class="gt_row gt_right">28</td>
<td headers="occupation" class="gt_row gt_left">Sales Representative</td>
<td headers="sleep_duration" class="gt_row gt_right">5.9</td>
<td headers="quality_of_sleep" class="gt_row gt_right">4</td>
<td headers="physical_activity_level" class="gt_row gt_right">30</td>
<td headers="stress_level" class="gt_row gt_right">8</td>
<td headers="bmi_category" class="gt_row gt_left">Obese</td>
<td headers="blood_pressure" class="gt_row gt_right">140/90</td>
<td headers="heart_rate" class="gt_row gt_right">85</td>
<td headers="daily_steps" class="gt_row gt_right">3000</td>
<td headers="sleep_disorder" class="gt_row gt_left">Sleep Apnea</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right gt_striped">6</td>
<td headers="gender" class="gt_row gt_left gt_striped">Male</td>
<td headers="age" class="gt_row gt_right gt_striped">28</td>
<td headers="occupation" class="gt_row gt_left gt_striped">Software Engineer</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">5.9</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">4</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">30</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">8</td>
<td headers="bmi_category" class="gt_row gt_left gt_striped">Obese</td>
<td headers="blood_pressure" class="gt_row gt_right gt_striped">140/90</td>
<td headers="heart_rate" class="gt_row gt_right gt_striped">85</td>
<td headers="daily_steps" class="gt_row gt_right gt_striped">3000</td>
<td headers="sleep_disorder" class="gt_row gt_left gt_striped">Insomnia</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-4_d84bfa7e85e8cb6429aa1f0044f4a35c">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># shape of data</span></span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">nrow</span>(sleep)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 374</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ncol</span>(sleep)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(sleep)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "person_id"               "gender"                 
 [3] "age"                     "occupation"             
 [5] "sleep_duration"          "quality_of_sleep"       
 [7] "physical_activity_level" "stress_level"           
 [9] "bmi_category"            "blood_pressure"         
[11] "heart_rate"              "daily_steps"            
[13] "sleep_disorder"         </code></pre>
</div>
</div>
<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data cleaning</h2>
<p>I observed the following issues in the data</p>
<ul>
<li><p>Occupation variable having levels with very few counts. Those with few counts can be consolidated with similar categories.</p></li>
<li><p>The BMI category variable has both “Normal” and “Normal Weight” as levels. This is most likely as data entry error.</p></li>
<li><p>The heart rate variable is not in a suitable format to work with. I’ll extract the systolic blood pressure from the variable as an integer. I would not need the diastolic blood pressure as I observed strong multicollinearity between both diastolic and systolic blood pressure.</p></li>
</ul>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-5_076a1729568d4904ceaf4e39877d102c">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># observe occupations with low frequency counts</span></span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sleep, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(occupation))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#25d366"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-6_f9f701193555eebc6625e70d7e692c08">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># observe data entry error in bmi_category variable</span></span>
<span id="cb11-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sleep, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(bmi_category))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#25d366"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-7_5347d836a0639ffd51769749b9ff0b2d">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># regrouping occupation variable so that occupations with lower counts are consolidated with other similar occupations. Simultaneously correcting data entry error in bmi_category variable</span></span>
<span id="cb12-2">sleep <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>( </span>
<span id="cb12-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">occupation=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(sleep<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>occupation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Software Engineer"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Scientist"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Engineer"</span>),<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Technical"</span>, </span>
<span id="cb12-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(sleep<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>occupation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Salesperson"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales Representative"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Manager"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sales"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(sleep<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>occupation <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Doctor"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Nurse"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Medical"</span>,</span>
<span id="cb12-5">                                                          <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(occupation)))),</span>
<span id="cb12-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bmi_category =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ifelse</span>(sleep<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bmi_category <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Normal"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Normal Weight"</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Normal"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(sleep<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>bmi_category)))</span></code></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-8_5fa2bffe433758766e94ebfd7f085652">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># extracting systolic blood pressure from the blood_pressure variable as it such a numeric variable is easier to work with. Subsequently dropping hear_rate variable</span></span>
<span id="cb13-2"></span>
<span id="cb13-3">sleep <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb13-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bp_sys=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">parse_number</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_sub</span>(sleep<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>blood_pressure, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)),</span>
<span id="cb13-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">person_id =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(person_id)</span>
<span id="cb13-6">) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span>heart_rate)</span></code></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-9_e5da2f02b4cfcac80c0193c404a7efa9">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># confirming changes</span></span>
<span id="cb14-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(sleep)  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="ibbybnbloh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ibbybnbloh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ibbybnbloh thead, #ibbybnbloh tbody, #ibbybnbloh tfoot, #ibbybnbloh tr, #ibbybnbloh td, #ibbybnbloh th {
  border-style: none;
}

#ibbybnbloh p {
  margin: 0;
  padding: 0;
}

#ibbybnbloh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ibbybnbloh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ibbybnbloh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ibbybnbloh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ibbybnbloh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ibbybnbloh .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ibbybnbloh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ibbybnbloh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ibbybnbloh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ibbybnbloh .gt_spanner_row {
  border-bottom-style: hidden;
}

#ibbybnbloh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ibbybnbloh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#ibbybnbloh .gt_from_md > :first-child {
  margin-top: 0;
}

#ibbybnbloh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ibbybnbloh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#ibbybnbloh .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ibbybnbloh .gt_row_group_first td {
  border-top-width: 2px;
}

#ibbybnbloh .gt_row_group_first th {
  border-top-width: 2px;
}

#ibbybnbloh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ibbybnbloh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_striped {
  background-color: #EDF7FC;
}

#ibbybnbloh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_left {
  text-align: left;
}

#ibbybnbloh .gt_center {
  text-align: center;
}

#ibbybnbloh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ibbybnbloh .gt_font_normal {
  font-weight: normal;
}

#ibbybnbloh .gt_font_bold {
  font-weight: bold;
}

#ibbybnbloh .gt_font_italic {
  font-style: italic;
}

#ibbybnbloh .gt_super {
  font-size: 65%;
}

#ibbybnbloh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ibbybnbloh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ibbybnbloh .gt_indent_1 {
  text-indent: 5px;
}

#ibbybnbloh .gt_indent_2 {
  text-indent: 10px;
}

#ibbybnbloh .gt_indent_3 {
  text-indent: 15px;
}

#ibbybnbloh .gt_indent_4 {
  text-indent: 20px;
}

#ibbybnbloh .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="person_id">person_id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="gender">gender</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="age">age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="occupation">occupation</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="sleep_duration">sleep_duration</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="quality_of_sleep">quality_of_sleep</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="physical_activity_level">physical_activity_level</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="stress_level">stress_level</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="bmi_category">bmi_category</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="blood_pressure">blood_pressure</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="daily_steps">daily_steps</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="sleep_disorder">sleep_disorder</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="bp_sys">bp_sys</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="person_id" class="gt_row gt_right">1</td>
<td headers="gender" class="gt_row gt_left">Male</td>
<td headers="age" class="gt_row gt_right">27</td>
<td headers="occupation" class="gt_row gt_left">Technical</td>
<td headers="sleep_duration" class="gt_row gt_right">6.1</td>
<td headers="quality_of_sleep" class="gt_row gt_right">6</td>
<td headers="physical_activity_level" class="gt_row gt_right">42</td>
<td headers="stress_level" class="gt_row gt_right">6</td>
<td headers="bmi_category" class="gt_row gt_left">Overweight</td>
<td headers="blood_pressure" class="gt_row gt_right">126/83</td>
<td headers="daily_steps" class="gt_row gt_right">4200</td>
<td headers="sleep_disorder" class="gt_row gt_left">None</td>
<td headers="bp_sys" class="gt_row gt_right">126</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right gt_striped">2</td>
<td headers="gender" class="gt_row gt_left gt_striped">Male</td>
<td headers="age" class="gt_row gt_right gt_striped">28</td>
<td headers="occupation" class="gt_row gt_left gt_striped">Medical</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">6.2</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">6</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">60</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">8</td>
<td headers="bmi_category" class="gt_row gt_left gt_striped">Normal</td>
<td headers="blood_pressure" class="gt_row gt_right gt_striped">125/80</td>
<td headers="daily_steps" class="gt_row gt_right gt_striped">10000</td>
<td headers="sleep_disorder" class="gt_row gt_left gt_striped">None</td>
<td headers="bp_sys" class="gt_row gt_right gt_striped">125</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right">3</td>
<td headers="gender" class="gt_row gt_left">Male</td>
<td headers="age" class="gt_row gt_right">28</td>
<td headers="occupation" class="gt_row gt_left">Medical</td>
<td headers="sleep_duration" class="gt_row gt_right">6.2</td>
<td headers="quality_of_sleep" class="gt_row gt_right">6</td>
<td headers="physical_activity_level" class="gt_row gt_right">60</td>
<td headers="stress_level" class="gt_row gt_right">8</td>
<td headers="bmi_category" class="gt_row gt_left">Normal</td>
<td headers="blood_pressure" class="gt_row gt_right">125/80</td>
<td headers="daily_steps" class="gt_row gt_right">10000</td>
<td headers="sleep_disorder" class="gt_row gt_left">None</td>
<td headers="bp_sys" class="gt_row gt_right">125</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right gt_striped">4</td>
<td headers="gender" class="gt_row gt_left gt_striped">Male</td>
<td headers="age" class="gt_row gt_right gt_striped">28</td>
<td headers="occupation" class="gt_row gt_left gt_striped">Sales</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">5.9</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">4</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">30</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">8</td>
<td headers="bmi_category" class="gt_row gt_left gt_striped">Obese</td>
<td headers="blood_pressure" class="gt_row gt_right gt_striped">140/90</td>
<td headers="daily_steps" class="gt_row gt_right gt_striped">3000</td>
<td headers="sleep_disorder" class="gt_row gt_left gt_striped">Sleep Apnea</td>
<td headers="bp_sys" class="gt_row gt_right gt_striped">140</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right">5</td>
<td headers="gender" class="gt_row gt_left">Male</td>
<td headers="age" class="gt_row gt_right">28</td>
<td headers="occupation" class="gt_row gt_left">Sales</td>
<td headers="sleep_duration" class="gt_row gt_right">5.9</td>
<td headers="quality_of_sleep" class="gt_row gt_right">4</td>
<td headers="physical_activity_level" class="gt_row gt_right">30</td>
<td headers="stress_level" class="gt_row gt_right">8</td>
<td headers="bmi_category" class="gt_row gt_left">Obese</td>
<td headers="blood_pressure" class="gt_row gt_right">140/90</td>
<td headers="daily_steps" class="gt_row gt_right">3000</td>
<td headers="sleep_disorder" class="gt_row gt_left">Sleep Apnea</td>
<td headers="bp_sys" class="gt_row gt_right">140</td></tr>
    <tr><td headers="person_id" class="gt_row gt_right gt_striped">6</td>
<td headers="gender" class="gt_row gt_left gt_striped">Male</td>
<td headers="age" class="gt_row gt_right gt_striped">28</td>
<td headers="occupation" class="gt_row gt_left gt_striped">Technical</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">5.9</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">4</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">30</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">8</td>
<td headers="bmi_category" class="gt_row gt_left gt_striped">Obese</td>
<td headers="blood_pressure" class="gt_row gt_right gt_striped">140/90</td>
<td headers="daily_steps" class="gt_row gt_right gt_striped">3000</td>
<td headers="sleep_disorder" class="gt_row gt_left gt_striped">Insomnia</td>
<td headers="bp_sys" class="gt_row gt_right gt_striped">140</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-10_376c28a9c689410839baaf893a128220">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># confirming changes to BMI category variable</span></span>
<span id="cb15-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sleep, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(bmi_category))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#25d366"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-11_07b0aa3c5c2916047e36155aed410513">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># confirming changes to occupation variable</span></span>
<span id="cb16-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sleep, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(occupation))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_bar</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#25d366"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">coord_flip</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="summary-statistics" class="level1">
<h1>Summary statistics</h1>
<p>We are going to explore summary statistics particularly for our variables of interest</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-12_dcf9939710230d8fd470fc3b3ee3274e">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># General statistics</span></span>
<span id="cb17-2">sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">skim</span>()  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb17-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="nbwvgmprej" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nbwvgmprej table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nbwvgmprej thead, #nbwvgmprej tbody, #nbwvgmprej tfoot, #nbwvgmprej tr, #nbwvgmprej td, #nbwvgmprej th {
  border-style: none;
}

#nbwvgmprej p {
  margin: 0;
  padding: 0;
}

#nbwvgmprej .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nbwvgmprej .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nbwvgmprej .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nbwvgmprej .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nbwvgmprej .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_col_heading {
  color: #FFFFFF;
  background-color: #5F5F5F;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nbwvgmprej .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #5F5F5F;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nbwvgmprej .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nbwvgmprej .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nbwvgmprej .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nbwvgmprej .gt_spanner_row {
  border-bottom-style: hidden;
}

#nbwvgmprej .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nbwvgmprej .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#nbwvgmprej .gt_from_md > :first-child {
  margin-top: 0;
}

#nbwvgmprej .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nbwvgmprej .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#nbwvgmprej .gt_stub {
  color: #333333;
  background-color: #D5D5D5;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nbwvgmprej .gt_row_group_first td {
  border-top-width: 2px;
}

#nbwvgmprej .gt_row_group_first th {
  border-top-width: 2px;
}

#nbwvgmprej .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#nbwvgmprej .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nbwvgmprej .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#nbwvgmprej .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_striped {
  background-color: #F4F4F4;
}

#nbwvgmprej .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_left {
  text-align: left;
}

#nbwvgmprej .gt_center {
  text-align: center;
}

#nbwvgmprej .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nbwvgmprej .gt_font_normal {
  font-weight: normal;
}

#nbwvgmprej .gt_font_bold {
  font-weight: bold;
}

#nbwvgmprej .gt_font_italic {
  font-style: italic;
}

#nbwvgmprej .gt_super {
  font-size: 65%;
}

#nbwvgmprej .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nbwvgmprej .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nbwvgmprej .gt_indent_1 {
  text-indent: 5px;
}

#nbwvgmprej .gt_indent_2 {
  text-indent: 10px;
}

#nbwvgmprej .gt_indent_3 {
  text-indent: 15px;
}

#nbwvgmprej .gt_indent_4 {
  text-indent: 20px;
}

#nbwvgmprej .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="skim_type">skim_type</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="skim_variable">skim_variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="n_missing">n_missing</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="complete_rate">complete_rate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="character.min">character.min</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="character.max">character.max</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="character.empty">character.empty</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="character.n_unique">character.n_unique</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="character.whitespace">character.whitespace</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="numeric.mean">numeric.mean</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="numeric.sd">numeric.sd</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="numeric.p0">numeric.p0</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="numeric.p25">numeric.p25</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="numeric.p50">numeric.p50</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="numeric.p75">numeric.p75</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="numeric.p100">numeric.p100</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="numeric.hist">numeric.hist</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="skim_type" class="gt_row gt_left">character</td>
<td headers="skim_variable" class="gt_row gt_left">person_id</td>
<td headers="n_missing" class="gt_row gt_right">0.00</td>
<td headers="complete_rate" class="gt_row gt_right">1.00</td>
<td headers="character.min" class="gt_row gt_right">1.00</td>
<td headers="character.max" class="gt_row gt_right">3.00</td>
<td headers="character.empty" class="gt_row gt_right">0.00</td>
<td headers="character.n_unique" class="gt_row gt_right">374.00</td>
<td headers="character.whitespace" class="gt_row gt_right">0.00</td>
<td headers="numeric.mean" class="gt_row gt_right">NA</td>
<td headers="numeric.sd" class="gt_row gt_right">NA</td>
<td headers="numeric.p0" class="gt_row gt_right">NA</td>
<td headers="numeric.p25" class="gt_row gt_right">NA</td>
<td headers="numeric.p50" class="gt_row gt_right">NA</td>
<td headers="numeric.p75" class="gt_row gt_right">NA</td>
<td headers="numeric.p100" class="gt_row gt_right">NA</td>
<td headers="numeric.hist" class="gt_row gt_left">NA</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left gt_striped">character</td>
<td headers="skim_variable" class="gt_row gt_left gt_striped">gender</td>
<td headers="n_missing" class="gt_row gt_right gt_striped">0.00</td>
<td headers="complete_rate" class="gt_row gt_right gt_striped">1.00</td>
<td headers="character.min" class="gt_row gt_right gt_striped">4.00</td>
<td headers="character.max" class="gt_row gt_right gt_striped">6.00</td>
<td headers="character.empty" class="gt_row gt_right gt_striped">0.00</td>
<td headers="character.n_unique" class="gt_row gt_right gt_striped">2.00</td>
<td headers="character.whitespace" class="gt_row gt_right gt_striped">0.00</td>
<td headers="numeric.mean" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.sd" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p0" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p25" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p50" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p75" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p100" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.hist" class="gt_row gt_left gt_striped">NA</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left">character</td>
<td headers="skim_variable" class="gt_row gt_left">occupation</td>
<td headers="n_missing" class="gt_row gt_right">0.00</td>
<td headers="complete_rate" class="gt_row gt_right">1.00</td>
<td headers="character.min" class="gt_row gt_right">5.00</td>
<td headers="character.max" class="gt_row gt_right">10.00</td>
<td headers="character.empty" class="gt_row gt_right">0.00</td>
<td headers="character.n_unique" class="gt_row gt_right">6.00</td>
<td headers="character.whitespace" class="gt_row gt_right">0.00</td>
<td headers="numeric.mean" class="gt_row gt_right">NA</td>
<td headers="numeric.sd" class="gt_row gt_right">NA</td>
<td headers="numeric.p0" class="gt_row gt_right">NA</td>
<td headers="numeric.p25" class="gt_row gt_right">NA</td>
<td headers="numeric.p50" class="gt_row gt_right">NA</td>
<td headers="numeric.p75" class="gt_row gt_right">NA</td>
<td headers="numeric.p100" class="gt_row gt_right">NA</td>
<td headers="numeric.hist" class="gt_row gt_left">NA</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left gt_striped">character</td>
<td headers="skim_variable" class="gt_row gt_left gt_striped">bmi_category</td>
<td headers="n_missing" class="gt_row gt_right gt_striped">0.00</td>
<td headers="complete_rate" class="gt_row gt_right gt_striped">1.00</td>
<td headers="character.min" class="gt_row gt_right gt_striped">5.00</td>
<td headers="character.max" class="gt_row gt_right gt_striped">10.00</td>
<td headers="character.empty" class="gt_row gt_right gt_striped">0.00</td>
<td headers="character.n_unique" class="gt_row gt_right gt_striped">3.00</td>
<td headers="character.whitespace" class="gt_row gt_right gt_striped">0.00</td>
<td headers="numeric.mean" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.sd" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p0" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p25" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p50" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p75" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p100" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.hist" class="gt_row gt_left gt_striped">NA</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left">character</td>
<td headers="skim_variable" class="gt_row gt_left">blood_pressure</td>
<td headers="n_missing" class="gt_row gt_right">0.00</td>
<td headers="complete_rate" class="gt_row gt_right">1.00</td>
<td headers="character.min" class="gt_row gt_right">6.00</td>
<td headers="character.max" class="gt_row gt_right">6.00</td>
<td headers="character.empty" class="gt_row gt_right">0.00</td>
<td headers="character.n_unique" class="gt_row gt_right">25.00</td>
<td headers="character.whitespace" class="gt_row gt_right">0.00</td>
<td headers="numeric.mean" class="gt_row gt_right">NA</td>
<td headers="numeric.sd" class="gt_row gt_right">NA</td>
<td headers="numeric.p0" class="gt_row gt_right">NA</td>
<td headers="numeric.p25" class="gt_row gt_right">NA</td>
<td headers="numeric.p50" class="gt_row gt_right">NA</td>
<td headers="numeric.p75" class="gt_row gt_right">NA</td>
<td headers="numeric.p100" class="gt_row gt_right">NA</td>
<td headers="numeric.hist" class="gt_row gt_left">NA</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left gt_striped">character</td>
<td headers="skim_variable" class="gt_row gt_left gt_striped">sleep_disorder</td>
<td headers="n_missing" class="gt_row gt_right gt_striped">0.00</td>
<td headers="complete_rate" class="gt_row gt_right gt_striped">1.00</td>
<td headers="character.min" class="gt_row gt_right gt_striped">4.00</td>
<td headers="character.max" class="gt_row gt_right gt_striped">11.00</td>
<td headers="character.empty" class="gt_row gt_right gt_striped">0.00</td>
<td headers="character.n_unique" class="gt_row gt_right gt_striped">3.00</td>
<td headers="character.whitespace" class="gt_row gt_right gt_striped">0.00</td>
<td headers="numeric.mean" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.sd" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p0" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p25" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p50" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p75" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.p100" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.hist" class="gt_row gt_left gt_striped">NA</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left">numeric</td>
<td headers="skim_variable" class="gt_row gt_left">age</td>
<td headers="n_missing" class="gt_row gt_right">0.00</td>
<td headers="complete_rate" class="gt_row gt_right">1.00</td>
<td headers="character.min" class="gt_row gt_right">NA</td>
<td headers="character.max" class="gt_row gt_right">NA</td>
<td headers="character.empty" class="gt_row gt_right">NA</td>
<td headers="character.n_unique" class="gt_row gt_right">NA</td>
<td headers="character.whitespace" class="gt_row gt_right">NA</td>
<td headers="numeric.mean" class="gt_row gt_right">42.18</td>
<td headers="numeric.sd" class="gt_row gt_right">8.67</td>
<td headers="numeric.p0" class="gt_row gt_right">27.00</td>
<td headers="numeric.p25" class="gt_row gt_right">35.25</td>
<td headers="numeric.p50" class="gt_row gt_right">43.00</td>
<td headers="numeric.p75" class="gt_row gt_right">50.00</td>
<td headers="numeric.p100" class="gt_row gt_right">59.00</td>
<td headers="numeric.hist" class="gt_row gt_left">▆▆▇▃▅</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left gt_striped">numeric</td>
<td headers="skim_variable" class="gt_row gt_left gt_striped">sleep_duration</td>
<td headers="n_missing" class="gt_row gt_right gt_striped">0.00</td>
<td headers="complete_rate" class="gt_row gt_right gt_striped">1.00</td>
<td headers="character.min" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.max" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.empty" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.n_unique" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.whitespace" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.mean" class="gt_row gt_right gt_striped">7.13</td>
<td headers="numeric.sd" class="gt_row gt_right gt_striped">0.80</td>
<td headers="numeric.p0" class="gt_row gt_right gt_striped">5.80</td>
<td headers="numeric.p25" class="gt_row gt_right gt_striped">6.40</td>
<td headers="numeric.p50" class="gt_row gt_right gt_striped">7.20</td>
<td headers="numeric.p75" class="gt_row gt_right gt_striped">7.80</td>
<td headers="numeric.p100" class="gt_row gt_right gt_striped">8.50</td>
<td headers="numeric.hist" class="gt_row gt_left gt_striped">▇▆▇▇▆</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left">numeric</td>
<td headers="skim_variable" class="gt_row gt_left">quality_of_sleep</td>
<td headers="n_missing" class="gt_row gt_right">0.00</td>
<td headers="complete_rate" class="gt_row gt_right">1.00</td>
<td headers="character.min" class="gt_row gt_right">NA</td>
<td headers="character.max" class="gt_row gt_right">NA</td>
<td headers="character.empty" class="gt_row gt_right">NA</td>
<td headers="character.n_unique" class="gt_row gt_right">NA</td>
<td headers="character.whitespace" class="gt_row gt_right">NA</td>
<td headers="numeric.mean" class="gt_row gt_right">7.31</td>
<td headers="numeric.sd" class="gt_row gt_right">1.20</td>
<td headers="numeric.p0" class="gt_row gt_right">4.00</td>
<td headers="numeric.p25" class="gt_row gt_right">6.00</td>
<td headers="numeric.p50" class="gt_row gt_right">7.00</td>
<td headers="numeric.p75" class="gt_row gt_right">8.00</td>
<td headers="numeric.p100" class="gt_row gt_right">9.00</td>
<td headers="numeric.hist" class="gt_row gt_left">▁▇▆▇▅</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left gt_striped">numeric</td>
<td headers="skim_variable" class="gt_row gt_left gt_striped">physical_activity_level</td>
<td headers="n_missing" class="gt_row gt_right gt_striped">0.00</td>
<td headers="complete_rate" class="gt_row gt_right gt_striped">1.00</td>
<td headers="character.min" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.max" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.empty" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.n_unique" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.whitespace" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.mean" class="gt_row gt_right gt_striped">59.17</td>
<td headers="numeric.sd" class="gt_row gt_right gt_striped">20.83</td>
<td headers="numeric.p0" class="gt_row gt_right gt_striped">30.00</td>
<td headers="numeric.p25" class="gt_row gt_right gt_striped">45.00</td>
<td headers="numeric.p50" class="gt_row gt_right gt_striped">60.00</td>
<td headers="numeric.p75" class="gt_row gt_right gt_striped">75.00</td>
<td headers="numeric.p100" class="gt_row gt_right gt_striped">90.00</td>
<td headers="numeric.hist" class="gt_row gt_left gt_striped">▇▇▇▇▇</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left">numeric</td>
<td headers="skim_variable" class="gt_row gt_left">stress_level</td>
<td headers="n_missing" class="gt_row gt_right">0.00</td>
<td headers="complete_rate" class="gt_row gt_right">1.00</td>
<td headers="character.min" class="gt_row gt_right">NA</td>
<td headers="character.max" class="gt_row gt_right">NA</td>
<td headers="character.empty" class="gt_row gt_right">NA</td>
<td headers="character.n_unique" class="gt_row gt_right">NA</td>
<td headers="character.whitespace" class="gt_row gt_right">NA</td>
<td headers="numeric.mean" class="gt_row gt_right">5.39</td>
<td headers="numeric.sd" class="gt_row gt_right">1.77</td>
<td headers="numeric.p0" class="gt_row gt_right">3.00</td>
<td headers="numeric.p25" class="gt_row gt_right">4.00</td>
<td headers="numeric.p50" class="gt_row gt_right">5.00</td>
<td headers="numeric.p75" class="gt_row gt_right">7.00</td>
<td headers="numeric.p100" class="gt_row gt_right">8.00</td>
<td headers="numeric.hist" class="gt_row gt_left">▇▃▂▃▃</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left gt_striped">numeric</td>
<td headers="skim_variable" class="gt_row gt_left gt_striped">daily_steps</td>
<td headers="n_missing" class="gt_row gt_right gt_striped">0.00</td>
<td headers="complete_rate" class="gt_row gt_right gt_striped">1.00</td>
<td headers="character.min" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.max" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.empty" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.n_unique" class="gt_row gt_right gt_striped">NA</td>
<td headers="character.whitespace" class="gt_row gt_right gt_striped">NA</td>
<td headers="numeric.mean" class="gt_row gt_right gt_striped">6,816.84</td>
<td headers="numeric.sd" class="gt_row gt_right gt_striped">1,617.92</td>
<td headers="numeric.p0" class="gt_row gt_right gt_striped">3,000.00</td>
<td headers="numeric.p25" class="gt_row gt_right gt_striped">5,600.00</td>
<td headers="numeric.p50" class="gt_row gt_right gt_striped">7,000.00</td>
<td headers="numeric.p75" class="gt_row gt_right gt_striped">8,000.00</td>
<td headers="numeric.p100" class="gt_row gt_right gt_striped">10,000.00</td>
<td headers="numeric.hist" class="gt_row gt_left gt_striped">▁▅▇▆▂</td></tr>
    <tr><td headers="skim_type" class="gt_row gt_left">numeric</td>
<td headers="skim_variable" class="gt_row gt_left">bp_sys</td>
<td headers="n_missing" class="gt_row gt_right">0.00</td>
<td headers="complete_rate" class="gt_row gt_right">1.00</td>
<td headers="character.min" class="gt_row gt_right">NA</td>
<td headers="character.max" class="gt_row gt_right">NA</td>
<td headers="character.empty" class="gt_row gt_right">NA</td>
<td headers="character.n_unique" class="gt_row gt_right">NA</td>
<td headers="character.whitespace" class="gt_row gt_right">NA</td>
<td headers="numeric.mean" class="gt_row gt_right">128.55</td>
<td headers="numeric.sd" class="gt_row gt_right">7.75</td>
<td headers="numeric.p0" class="gt_row gt_right">115.00</td>
<td headers="numeric.p25" class="gt_row gt_right">125.00</td>
<td headers="numeric.p50" class="gt_row gt_right">130.00</td>
<td headers="numeric.p75" class="gt_row gt_right">135.00</td>
<td headers="numeric.p100" class="gt_row gt_right">142.00</td>
<td headers="numeric.hist" class="gt_row gt_left">▆▅▇▂▅</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-13_9a5c5cee9f659edf6f75af4d8f835e61">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Measures of spread</span></span>
<span id="cb18-2">sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">describe_distribution</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_tibble</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(Variable, Skewness, SD, Kurtosis)  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb18-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="qmurcckbbw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qmurcckbbw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qmurcckbbw thead, #qmurcckbbw tbody, #qmurcckbbw tfoot, #qmurcckbbw tr, #qmurcckbbw td, #qmurcckbbw th {
  border-style: none;
}

#qmurcckbbw p {
  margin: 0;
  padding: 0;
}

#qmurcckbbw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qmurcckbbw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qmurcckbbw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qmurcckbbw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qmurcckbbw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qmurcckbbw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#qmurcckbbw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qmurcckbbw .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qmurcckbbw .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qmurcckbbw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qmurcckbbw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qmurcckbbw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qmurcckbbw .gt_spanner_row {
  border-bottom-style: hidden;
}

#qmurcckbbw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qmurcckbbw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#qmurcckbbw .gt_from_md > :first-child {
  margin-top: 0;
}

#qmurcckbbw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qmurcckbbw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#qmurcckbbw .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qmurcckbbw .gt_row_group_first td {
  border-top-width: 2px;
}

#qmurcckbbw .gt_row_group_first th {
  border-top-width: 2px;
}

#qmurcckbbw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#qmurcckbbw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qmurcckbbw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#qmurcckbbw .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#qmurcckbbw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#qmurcckbbw .gt_striped {
  background-color: #EDF7FC;
}

#qmurcckbbw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#qmurcckbbw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qmurcckbbw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qmurcckbbw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_left {
  text-align: left;
}

#qmurcckbbw .gt_center {
  text-align: center;
}

#qmurcckbbw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qmurcckbbw .gt_font_normal {
  font-weight: normal;
}

#qmurcckbbw .gt_font_bold {
  font-weight: bold;
}

#qmurcckbbw .gt_font_italic {
  font-style: italic;
}

#qmurcckbbw .gt_super {
  font-size: 65%;
}

#qmurcckbbw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qmurcckbbw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qmurcckbbw .gt_indent_1 {
  text-indent: 5px;
}

#qmurcckbbw .gt_indent_2 {
  text-indent: 10px;
}

#qmurcckbbw .gt_indent_3 {
  text-indent: 15px;
}

#qmurcckbbw .gt_indent_4 {
  text-indent: 20px;
}

#qmurcckbbw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Variable">Variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Skewness">Skewness</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="SD">SD</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Kurtosis">Kurtosis</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Variable" class="gt_row gt_left">age</td>
<td headers="Skewness" class="gt_row gt_right">0.26</td>
<td headers="SD" class="gt_row gt_right">8.67</td>
<td headers="Kurtosis" class="gt_row gt_right">−0.91</td></tr>
    <tr><td headers="Variable" class="gt_row gt_left gt_striped">sleep_duration</td>
<td headers="Skewness" class="gt_row gt_right gt_striped">0.04</td>
<td headers="SD" class="gt_row gt_right gt_striped">0.80</td>
<td headers="Kurtosis" class="gt_row gt_right gt_striped">−1.29</td></tr>
    <tr><td headers="Variable" class="gt_row gt_left">quality_of_sleep</td>
<td headers="Skewness" class="gt_row gt_right">−0.21</td>
<td headers="SD" class="gt_row gt_right">1.20</td>
<td headers="Kurtosis" class="gt_row gt_right">−0.75</td></tr>
    <tr><td headers="Variable" class="gt_row gt_left gt_striped">physical_activity_level</td>
<td headers="Skewness" class="gt_row gt_right gt_striped">0.07</td>
<td headers="SD" class="gt_row gt_right gt_striped">20.83</td>
<td headers="Kurtosis" class="gt_row gt_right gt_striped">−1.27</td></tr>
    <tr><td headers="Variable" class="gt_row gt_left">stress_level</td>
<td headers="Skewness" class="gt_row gt_right">0.15</td>
<td headers="SD" class="gt_row gt_right">1.77</td>
<td headers="Kurtosis" class="gt_row gt_right">−1.33</td></tr>
    <tr><td headers="Variable" class="gt_row gt_left gt_striped">daily_steps</td>
<td headers="Skewness" class="gt_row gt_right gt_striped">0.18</td>
<td headers="SD" class="gt_row gt_right gt_striped">1,617.92</td>
<td headers="Kurtosis" class="gt_row gt_right gt_striped">−0.39</td></tr>
    <tr><td headers="Variable" class="gt_row gt_left">bp_sys</td>
<td headers="Skewness" class="gt_row gt_right">−0.04</td>
<td headers="SD" class="gt_row gt_right">7.75</td>
<td headers="Kurtosis" class="gt_row gt_right">−0.89</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
<section id="main-analyses" class="level1">
<h1>Main Analyses</h1>
<section id="associations" class="level2">
<h2 class="anchored" data-anchor-id="associations">Associations</h2>
<section id="research-question-what-strong-associations-exists-between-quality_of_sleep-and-other-variables-in-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="research-question-what-strong-associations-exists-between-quality_of_sleep-and-other-variables-in-the-dataset">Research Question: “What strong associations exists between quality_of_sleep and other variables in the dataset?</h3>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-14_9c9c0350730f5e0d50c2b4fdaa432a8b">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># | warning: false</span></span>
<span id="cb19-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># | message: false</span></span>
<span id="cb19-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># packages required for associations</span></span>
<span id="cb19-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(correlation)</span>
<span id="cb19-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(GGally)</span></code></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-15_f662feae9fedb161128754fcbd1ca0c4">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plotting the grid plot of scatterplots of numeric variables</span></span>
<span id="cb20-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggscatmat</span>(sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select_if</span>(is.numeric)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_light</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-16_41da937e0d9b7c061a6f83e21604a9c8">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># showing relationships with strong correlations (greater than |+-0.4|)</span></span>
<span id="cb21-2">correlates_tib <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb21-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">where</span>(is.numeric)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb21-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">correlation</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.tibble</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(CI<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>df_error,Method,n_Obs)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(r) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.4</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(r) </span>
<span id="cb21-5">correlates_tib <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb21-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="ibbybnbloh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ibbybnbloh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ibbybnbloh thead, #ibbybnbloh tbody, #ibbybnbloh tfoot, #ibbybnbloh tr, #ibbybnbloh td, #ibbybnbloh th {
  border-style: none;
}

#ibbybnbloh p {
  margin: 0;
  padding: 0;
}

#ibbybnbloh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ibbybnbloh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ibbybnbloh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ibbybnbloh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ibbybnbloh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ibbybnbloh .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ibbybnbloh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ibbybnbloh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ibbybnbloh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ibbybnbloh .gt_spanner_row {
  border-bottom-style: hidden;
}

#ibbybnbloh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ibbybnbloh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#ibbybnbloh .gt_from_md > :first-child {
  margin-top: 0;
}

#ibbybnbloh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ibbybnbloh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#ibbybnbloh .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ibbybnbloh .gt_row_group_first td {
  border-top-width: 2px;
}

#ibbybnbloh .gt_row_group_first th {
  border-top-width: 2px;
}

#ibbybnbloh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ibbybnbloh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_striped {
  background-color: #EDF7FC;
}

#ibbybnbloh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_left {
  text-align: left;
}

#ibbybnbloh .gt_center {
  text-align: center;
}

#ibbybnbloh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ibbybnbloh .gt_font_normal {
  font-weight: normal;
}

#ibbybnbloh .gt_font_bold {
  font-weight: bold;
}

#ibbybnbloh .gt_font_italic {
  font-style: italic;
}

#ibbybnbloh .gt_super {
  font-size: 65%;
}

#ibbybnbloh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ibbybnbloh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ibbybnbloh .gt_indent_1 {
  text-indent: 5px;
}

#ibbybnbloh .gt_indent_2 {
  text-indent: 10px;
}

#ibbybnbloh .gt_indent_3 {
  text-indent: 15px;
}

#ibbybnbloh .gt_indent_4 {
  text-indent: 20px;
}

#ibbybnbloh .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Parameter1">Parameter1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Parameter2">Parameter2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="r">r</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p">p</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Parameter1" class="gt_row gt_left">quality_of_sleep</td>
<td headers="Parameter2" class="gt_row gt_left">stress_level</td>
<td headers="r" class="gt_row gt_right">−0.899</td>
<td headers="p" class="gt_row gt_right">0.000</td></tr>
    <tr><td headers="Parameter1" class="gt_row gt_left gt_striped">sleep_duration</td>
<td headers="Parameter2" class="gt_row gt_left gt_striped">stress_level</td>
<td headers="r" class="gt_row gt_right gt_striped">−0.811</td>
<td headers="p" class="gt_row gt_right gt_striped">0.000</td></tr>
    <tr><td headers="Parameter1" class="gt_row gt_left">age</td>
<td headers="Parameter2" class="gt_row gt_left">stress_level</td>
<td headers="r" class="gt_row gt_right">−0.422</td>
<td headers="p" class="gt_row gt_right">0.000</td></tr>
    <tr><td headers="Parameter1" class="gt_row gt_left gt_striped">age</td>
<td headers="Parameter2" class="gt_row gt_left gt_striped">quality_of_sleep</td>
<td headers="r" class="gt_row gt_right gt_striped">0.474</td>
<td headers="p" class="gt_row gt_right gt_striped">0.000</td></tr>
    <tr><td headers="Parameter1" class="gt_row gt_left">age</td>
<td headers="Parameter2" class="gt_row gt_left">bp_sys</td>
<td headers="r" class="gt_row gt_right">0.606</td>
<td headers="p" class="gt_row gt_right">0.000</td></tr>
    <tr><td headers="Parameter1" class="gt_row gt_left gt_striped">physical_activity_level</td>
<td headers="Parameter2" class="gt_row gt_left gt_striped">daily_steps</td>
<td headers="r" class="gt_row gt_right gt_striped">0.773</td>
<td headers="p" class="gt_row gt_right gt_striped">0.000</td></tr>
    <tr><td headers="Parameter1" class="gt_row gt_left">sleep_duration</td>
<td headers="Parameter2" class="gt_row gt_left">quality_of_sleep</td>
<td headers="r" class="gt_row gt_right">0.883</td>
<td headers="p" class="gt_row gt_right">0.000</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-17_9faa03c0a8f869bf4c4126a2f511334a">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># robust correlation analysis since the data are skewed. Results is filtered to include only relationships involving quality_of_sleep. Sorted ascendingly by p-value</span></span>
<span id="cb22-2">correlates_tib <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">where</span>(is.numeric)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb22-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">correlation</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"percentage"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.tibble</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(CI<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>df_error,Method,n_Obs))  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(p)  <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>( Parameter1 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"quality_of_sleep"</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|</span> Parameter2 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"quality_of_sleep"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(p) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(p <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.05</span>)</span>
<span id="cb22-5">correlates_tib <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb22-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="nbwvgmprej" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nbwvgmprej table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nbwvgmprej thead, #nbwvgmprej tbody, #nbwvgmprej tfoot, #nbwvgmprej tr, #nbwvgmprej td, #nbwvgmprej th {
  border-style: none;
}

#nbwvgmprej p {
  margin: 0;
  padding: 0;
}

#nbwvgmprej .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nbwvgmprej .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nbwvgmprej .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nbwvgmprej .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nbwvgmprej .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nbwvgmprej .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nbwvgmprej .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nbwvgmprej .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nbwvgmprej .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nbwvgmprej .gt_spanner_row {
  border-bottom-style: hidden;
}

#nbwvgmprej .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nbwvgmprej .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#nbwvgmprej .gt_from_md > :first-child {
  margin-top: 0;
}

#nbwvgmprej .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nbwvgmprej .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#nbwvgmprej .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nbwvgmprej .gt_row_group_first td {
  border-top-width: 2px;
}

#nbwvgmprej .gt_row_group_first th {
  border-top-width: 2px;
}

#nbwvgmprej .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#nbwvgmprej .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nbwvgmprej .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#nbwvgmprej .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_striped {
  background-color: #EDF7FC;
}

#nbwvgmprej .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_left {
  text-align: left;
}

#nbwvgmprej .gt_center {
  text-align: center;
}

#nbwvgmprej .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nbwvgmprej .gt_font_normal {
  font-weight: normal;
}

#nbwvgmprej .gt_font_bold {
  font-weight: bold;
}

#nbwvgmprej .gt_font_italic {
  font-style: italic;
}

#nbwvgmprej .gt_super {
  font-size: 65%;
}

#nbwvgmprej .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nbwvgmprej .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nbwvgmprej .gt_indent_1 {
  text-indent: 5px;
}

#nbwvgmprej .gt_indent_2 {
  text-indent: 10px;
}

#nbwvgmprej .gt_indent_3 {
  text-indent: 15px;
}

#nbwvgmprej .gt_indent_4 {
  text-indent: 20px;
}

#nbwvgmprej .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Parameter1">Parameter1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Parameter2">Parameter2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="r">r</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p">p</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Parameter1" class="gt_row gt_left">quality_of_sleep</td>
<td headers="Parameter2" class="gt_row gt_left">stress_level</td>
<td headers="r" class="gt_row gt_right">−0.910</td>
<td headers="p" class="gt_row gt_right">0.000</td></tr>
    <tr><td headers="Parameter1" class="gt_row gt_left gt_striped">sleep_duration</td>
<td headers="Parameter2" class="gt_row gt_left gt_striped">quality_of_sleep</td>
<td headers="r" class="gt_row gt_right gt_striped">0.892</td>
<td headers="p" class="gt_row gt_right gt_striped">0.000</td></tr>
    <tr><td headers="Parameter1" class="gt_row gt_left">age</td>
<td headers="Parameter2" class="gt_row gt_left">quality_of_sleep</td>
<td headers="r" class="gt_row gt_right">0.432</td>
<td headers="p" class="gt_row gt_right">0.000</td></tr>
    <tr><td headers="Parameter1" class="gt_row gt_left gt_striped">quality_of_sleep</td>
<td headers="Parameter2" class="gt_row gt_left gt_striped">physical_activity_level</td>
<td headers="r" class="gt_row gt_right gt_striped">0.178</td>
<td headers="p" class="gt_row gt_right gt_striped">0.005</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<section id="results" class="level4">
<h4 class="anchored" data-anchor-id="results">Results</h4>
<p>The most significant relationships (at alpha = .05) are the relationships between:</p>
<ol type="1">
<li>quality of sleep and stress level, <em>r</em>(372) =-0.91, <em>p</em> &lt; 0.0001</li>
<li>quality of sleep and sleep duration, <em>r</em>(372) = 0.89, <em>p</em> &lt; 0.0001</li>
<li>quality of sleep and age, <em>r</em>(372) =0.43, <em>p</em> &lt; 0.0001</li>
<li>quality of sleep and physical activity level, <em>r</em>(372) =0.18, <em>p</em> = 0.0054</li>
</ol>
<p>These are the variables we would fit to our linear regression model.</p>
</section>
</section>
</section>
</section>
<section id="fitting-a-glm" class="level1">
<h1>Fitting a GLM</h1>
<section id="research-question-which-glm-model-best-explains-quality-of-sleep" class="level3">
<h3 class="anchored" data-anchor-id="research-question-which-glm-model-best-explains-quality-of-sleep">Research Question: “Which GLM model best explains quality of sleep”</h3>
<div class="cell" data-hash="index_cache/html/importing glm packages_17510370c1bfc68b991fe300b13557d5">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># importing needed packages</span></span>
<span id="cb23-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(BayesFactor)</span>
<span id="cb23-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggfortify)</span>
<span id="cb23-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(parameters)</span>
<span id="cb23-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(robust)</span>
<span id="cb23-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(broom)</span></code></pre></div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/images/glm_process.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">GLM Workflow</figcaption>
</figure>
</div>
</section>
<section id="initial-checks-linearity" class="level3">
<h3 class="anchored" data-anchor-id="initial-checks-linearity">Initial Checks (Linearity)</h3>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-19_3622da97857983a1eb8461b3277f01ee">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggscatmat</span>(sleep, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">columns=</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"stress_level"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sleep_duration"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"age"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"physical_activity_level"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"quality_of_sleep"</span>))</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="interpretation" class="level4">
<h4 class="anchored" data-anchor-id="interpretation"><strong>Interpretation</strong></h4>
<p>Looking at the bottom row of the plots, we see the scatterplot of all the variables against quality_of_sleep on the y_axis.</p>
<p>The four predictors have reasonably linear relationships with the sleep quality and there are no obvious outliers (except maybe in the bottom left of the scatterplot with band image). Across the diagonal, we see the distributions of scores. None of the variables have a normal distribution, exhibiting various degrees of modality.</p>
<p>If we look only at the predictors, then the highest correlation is between sleep duration and stress level which is significant at the 0.0001 level (<em>r</em>&nbsp;= -0.81). Focussing on the outcome variable, of all of the predictors, stress level and sleep duration correlate best with the outcome (<em>r</em>s = -0.9 and 0.88 respectively).</p>
</section>
</section>
<section id="one-predictor-model" class="level3">
<h3 class="anchored" data-anchor-id="one-predictor-model">One predictor model</h3>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-20_da7d946ff4d66a7cf8c39fbd6c654820">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1">qs_lm_01 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span>sleep, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">formula =</span> quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stress_level)</span>
<span id="cb25-2"></span>
<span id="cb25-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking model fit</span></span>
<span id="cb25-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(qs_lm_01) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb25-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="ibbybnbloh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ibbybnbloh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ibbybnbloh thead, #ibbybnbloh tbody, #ibbybnbloh tfoot, #ibbybnbloh tr, #ibbybnbloh td, #ibbybnbloh th {
  border-style: none;
}

#ibbybnbloh p {
  margin: 0;
  padding: 0;
}

#ibbybnbloh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ibbybnbloh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ibbybnbloh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ibbybnbloh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ibbybnbloh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ibbybnbloh .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ibbybnbloh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ibbybnbloh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ibbybnbloh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ibbybnbloh .gt_spanner_row {
  border-bottom-style: hidden;
}

#ibbybnbloh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ibbybnbloh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#ibbybnbloh .gt_from_md > :first-child {
  margin-top: 0;
}

#ibbybnbloh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ibbybnbloh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#ibbybnbloh .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ibbybnbloh .gt_row_group_first td {
  border-top-width: 2px;
}

#ibbybnbloh .gt_row_group_first th {
  border-top-width: 2px;
}

#ibbybnbloh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ibbybnbloh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_striped {
  background-color: #EDF7FC;
}

#ibbybnbloh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_left {
  text-align: left;
}

#ibbybnbloh .gt_center {
  text-align: center;
}

#ibbybnbloh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ibbybnbloh .gt_font_normal {
  font-weight: normal;
}

#ibbybnbloh .gt_font_bold {
  font-weight: bold;
}

#ibbybnbloh .gt_font_italic {
  font-style: italic;
}

#ibbybnbloh .gt_super {
  font-size: 65%;
}

#ibbybnbloh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ibbybnbloh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ibbybnbloh .gt_indent_1 {
  text-indent: 5px;
}

#ibbybnbloh .gt_indent_2 {
  text-indent: 10px;
}

#ibbybnbloh .gt_indent_3 {
  text-indent: 15px;
}

#ibbybnbloh .gt_indent_4 {
  text-indent: 20px;
}

#ibbybnbloh .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="r.squared">r.squared</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="adj.r.squared">adj.r.squared</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="sigma">sigma</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="df">df</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="logLik">logLik</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="AIC">AIC</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="BIC">BIC</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="deviance">deviance</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="df.residual">df.residual</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="nobs">nobs</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="r.squared" class="gt_row gt_right">0.808</td>
<td headers="adj.r.squared" class="gt_row gt_right">0.807</td>
<td headers="sigma" class="gt_row gt_right">0.526</td>
<td headers="statistic" class="gt_row gt_right">1,563.033</td>
<td headers="p.value" class="gt_row gt_right">0.000</td>
<td headers="df" class="gt_row gt_right">1.000</td>
<td headers="logLik" class="gt_row gt_right">−289.060</td>
<td headers="AIC" class="gt_row gt_right">584.121</td>
<td headers="BIC" class="gt_row gt_right">595.893</td>
<td headers="deviance" class="gt_row gt_right">102.735</td>
<td headers="df.residual" class="gt_row gt_right">372.000</td>
<td headers="nobs" class="gt_row gt_right">374.000</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>Stress level accounts for 80.8% of the variation in quality of sleep.</p>
<p>Therefore, we can say that adding the predictor of&nbsp;<strong>stress_level</strong> significantly improved the fit of the model to the data compared to having no predictors in the model,&nbsp;<em>F</em>(1, 372) = 1563.03,&nbsp;<em>p</em>&nbsp;&lt; .001</p>
<section id="model-parameters" class="level4">
<h4 class="anchored" data-anchor-id="model-parameters">Model parameters</h4>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-21_c95bf69db677b3d7d1e5255ccbb56c37">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(qs_lm_01, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">conf.int =</span> T) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb26-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="nbwvgmprej" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nbwvgmprej table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nbwvgmprej thead, #nbwvgmprej tbody, #nbwvgmprej tfoot, #nbwvgmprej tr, #nbwvgmprej td, #nbwvgmprej th {
  border-style: none;
}

#nbwvgmprej p {
  margin: 0;
  padding: 0;
}

#nbwvgmprej .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nbwvgmprej .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nbwvgmprej .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nbwvgmprej .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nbwvgmprej .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nbwvgmprej .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nbwvgmprej .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nbwvgmprej .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nbwvgmprej .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nbwvgmprej .gt_spanner_row {
  border-bottom-style: hidden;
}

#nbwvgmprej .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nbwvgmprej .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#nbwvgmprej .gt_from_md > :first-child {
  margin-top: 0;
}

#nbwvgmprej .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nbwvgmprej .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#nbwvgmprej .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nbwvgmprej .gt_row_group_first td {
  border-top-width: 2px;
}

#nbwvgmprej .gt_row_group_first th {
  border-top-width: 2px;
}

#nbwvgmprej .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#nbwvgmprej .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nbwvgmprej .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#nbwvgmprej .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_striped {
  background-color: #EDF7FC;
}

#nbwvgmprej .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_left {
  text-align: left;
}

#nbwvgmprej .gt_center {
  text-align: center;
}

#nbwvgmprej .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nbwvgmprej .gt_font_normal {
  font-weight: normal;
}

#nbwvgmprej .gt_font_bold {
  font-weight: bold;
}

#nbwvgmprej .gt_font_italic {
  font-style: italic;
}

#nbwvgmprej .gt_super {
  font-size: 65%;
}

#nbwvgmprej .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nbwvgmprej .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nbwvgmprej .gt_indent_1 {
  text-indent: 5px;
}

#nbwvgmprej .gt_indent_2 {
  text-indent: 10px;
}

#nbwvgmprej .gt_indent_3 {
  text-indent: 15px;
}

#nbwvgmprej .gt_indent_4 {
  text-indent: 20px;
}

#nbwvgmprej .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="term">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="estimate">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="std.error">std.error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="conf.low">conf.low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="conf.high">conf.high</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="term" class="gt_row gt_left">(Intercept)</td>
<td headers="estimate" class="gt_row gt_right">10.577</td>
<td headers="std.error" class="gt_row gt_right">0.087</td>
<td headers="statistic" class="gt_row gt_right">121.678</td>
<td headers="p.value" class="gt_row gt_right">0.000</td>
<td headers="conf.low" class="gt_row gt_right">10.406</td>
<td headers="conf.high" class="gt_row gt_right">10.748</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">stress_level</td>
<td headers="estimate" class="gt_row gt_right gt_striped">−0.606</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.015</td>
<td headers="statistic" class="gt_row gt_right gt_striped">−39.535</td>
<td headers="p.value" class="gt_row gt_right gt_striped">0.000</td>
<td headers="conf.low" class="gt_row gt_right gt_striped">−0.636</td>
<td headers="conf.high" class="gt_row gt_right gt_striped">−0.576</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>If stress level increases by 1 point, quality_of_sleep reduces by more than half a point. This estimate is significant (p &lt; 0.0000001). With the chance of being wrong 5% of the time, our estimate is going to be somewhere in the range [-0.636, -0.576]. This confidence interval does not cross zero, so we can be sure that a real effect exists.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-22_b09e343c22195172663de1adbc8308b9">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># summary of the model parameters and fit</span></span>
<span id="cb27-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(qs_lm_01)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = quality_of_sleep ~ stress_level, data = sleep)

Residuals:
    Min      1Q  Median      3Q     Max 
-1.7276 -0.1525  0.2413  0.2724  1.0600 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  10.57739    0.08693  121.68   &lt;2e-16 ***
stress_level -0.60623    0.01533  -39.53   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5255 on 372 degrees of freedom
Multiple R-squared:  0.8078,    Adjusted R-squared:  0.8072 
F-statistic:  1563 on 1 and 372 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
</section>
<section id="multiple-predictors" class="level3">
<h3 class="anchored" data-anchor-id="multiple-predictors">Multiple predictors</h3>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-23_9814a719587c970439306672617e3693">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1">qs_lm_02 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stress_level<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>sleep_duration<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>age<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>physical_activity_level, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span>sleep)</span>
<span id="cb29-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># fit statistics</span></span>
<span id="cb29-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glance</span>(qs_lm_02) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb29-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="ibbybnbloh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ibbybnbloh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ibbybnbloh thead, #ibbybnbloh tbody, #ibbybnbloh tfoot, #ibbybnbloh tr, #ibbybnbloh td, #ibbybnbloh th {
  border-style: none;
}

#ibbybnbloh p {
  margin: 0;
  padding: 0;
}

#ibbybnbloh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ibbybnbloh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ibbybnbloh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ibbybnbloh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ibbybnbloh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ibbybnbloh .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ibbybnbloh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ibbybnbloh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ibbybnbloh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ibbybnbloh .gt_spanner_row {
  border-bottom-style: hidden;
}

#ibbybnbloh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ibbybnbloh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#ibbybnbloh .gt_from_md > :first-child {
  margin-top: 0;
}

#ibbybnbloh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ibbybnbloh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#ibbybnbloh .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ibbybnbloh .gt_row_group_first td {
  border-top-width: 2px;
}

#ibbybnbloh .gt_row_group_first th {
  border-top-width: 2px;
}

#ibbybnbloh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ibbybnbloh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_striped {
  background-color: #EDF7FC;
}

#ibbybnbloh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_left {
  text-align: left;
}

#ibbybnbloh .gt_center {
  text-align: center;
}

#ibbybnbloh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ibbybnbloh .gt_font_normal {
  font-weight: normal;
}

#ibbybnbloh .gt_font_bold {
  font-weight: bold;
}

#ibbybnbloh .gt_font_italic {
  font-style: italic;
}

#ibbybnbloh .gt_super {
  font-size: 65%;
}

#ibbybnbloh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ibbybnbloh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ibbybnbloh .gt_indent_1 {
  text-indent: 5px;
}

#ibbybnbloh .gt_indent_2 {
  text-indent: 10px;
}

#ibbybnbloh .gt_indent_3 {
  text-indent: 15px;
}

#ibbybnbloh .gt_indent_4 {
  text-indent: 20px;
}

#ibbybnbloh .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="r.squared">r.squared</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="adj.r.squared">adj.r.squared</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="sigma">sigma</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="df">df</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="logLik">logLik</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="AIC">AIC</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="BIC">BIC</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="deviance">deviance</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="df.residual">df.residual</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="nobs">nobs</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="r.squared" class="gt_row gt_right">0.892</td>
<td headers="adj.r.squared" class="gt_row gt_right">0.891</td>
<td headers="sigma" class="gt_row gt_right">0.395</td>
<td headers="statistic" class="gt_row gt_right">762.735</td>
<td headers="p.value" class="gt_row gt_right">0.000</td>
<td headers="df" class="gt_row gt_right">4.000</td>
<td headers="logLik" class="gt_row gt_right">−181.050</td>
<td headers="AIC" class="gt_row gt_right">374.100</td>
<td headers="BIC" class="gt_row gt_right">397.645</td>
<td headers="deviance" class="gt_row gt_right">57.660</td>
<td headers="df.residual" class="gt_row gt_right">369.000</td>
<td headers="nobs" class="gt_row gt_right">374.000</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The % of variance explained by the predictors increased to 89% from our previous value of 81%.</p>
<p>In other words, sleep duration, age and physical activity level account for an additional 89% - 80.8% = 8.2% of the variance in quality of sleep. The difference between the <img src="https://latex.codecogs.com/png.latex?R%5E2"> and the adjusted <img src="https://latex.codecogs.com/png.latex?R%5E2"> is 0.8921-0.8909= 0.0012. Which means if the model were derived from the population rather than a sample we’d conclude that it accounted for approximately 0.12% less variance in the outcome.</p>
<section id="model-parameter-estimates" class="level4">
<h4 class="anchored" data-anchor-id="model-parameter-estimates">Model parameter estimates</h4>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-24_021a39c7f641528265d628294e988b10">
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(qs_lm_02, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">conf.int=</span>T) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb30-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="nbwvgmprej" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nbwvgmprej table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nbwvgmprej thead, #nbwvgmprej tbody, #nbwvgmprej tfoot, #nbwvgmprej tr, #nbwvgmprej td, #nbwvgmprej th {
  border-style: none;
}

#nbwvgmprej p {
  margin: 0;
  padding: 0;
}

#nbwvgmprej .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nbwvgmprej .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nbwvgmprej .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nbwvgmprej .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nbwvgmprej .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nbwvgmprej .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nbwvgmprej .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nbwvgmprej .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nbwvgmprej .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nbwvgmprej .gt_spanner_row {
  border-bottom-style: hidden;
}

#nbwvgmprej .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nbwvgmprej .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#nbwvgmprej .gt_from_md > :first-child {
  margin-top: 0;
}

#nbwvgmprej .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nbwvgmprej .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#nbwvgmprej .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nbwvgmprej .gt_row_group_first td {
  border-top-width: 2px;
}

#nbwvgmprej .gt_row_group_first th {
  border-top-width: 2px;
}

#nbwvgmprej .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#nbwvgmprej .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nbwvgmprej .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#nbwvgmprej .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_striped {
  background-color: #EDF7FC;
}

#nbwvgmprej .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#nbwvgmprej .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nbwvgmprej .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nbwvgmprej .gt_left {
  text-align: left;
}

#nbwvgmprej .gt_center {
  text-align: center;
}

#nbwvgmprej .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nbwvgmprej .gt_font_normal {
  font-weight: normal;
}

#nbwvgmprej .gt_font_bold {
  font-weight: bold;
}

#nbwvgmprej .gt_font_italic {
  font-style: italic;
}

#nbwvgmprej .gt_super {
  font-size: 65%;
}

#nbwvgmprej .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nbwvgmprej .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nbwvgmprej .gt_indent_1 {
  text-indent: 5px;
}

#nbwvgmprej .gt_indent_2 {
  text-indent: 10px;
}

#nbwvgmprej .gt_indent_3 {
  text-indent: 15px;
}

#nbwvgmprej .gt_indent_4 {
  text-indent: 20px;
}

#nbwvgmprej .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="term">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="estimate">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="std.error">std.error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="conf.low">conf.low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="conf.high">conf.high</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="term" class="gt_row gt_left">(Intercept)</td>
<td headers="estimate" class="gt_row gt_right">3.957</td>
<td headers="std.error" class="gt_row gt_right">0.439</td>
<td headers="statistic" class="gt_row gt_right">9.023</td>
<td headers="p.value" class="gt_row gt_right">0.000</td>
<td headers="conf.low" class="gt_row gt_right">3.095</td>
<td headers="conf.high" class="gt_row gt_right">4.819</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">stress_level</td>
<td headers="estimate" class="gt_row gt_right gt_striped">−0.351</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.021</td>
<td headers="statistic" class="gt_row gt_right gt_striped">−16.466</td>
<td headers="p.value" class="gt_row gt_right gt_striped">0.000</td>
<td headers="conf.low" class="gt_row gt_right gt_striped">−0.392</td>
<td headers="conf.high" class="gt_row gt_right gt_striped">−0.309</td></tr>
    <tr><td headers="term" class="gt_row gt_left">sleep_duration</td>
<td headers="estimate" class="gt_row gt_right">0.621</td>
<td headers="std.error" class="gt_row gt_right">0.046</td>
<td headers="statistic" class="gt_row gt_right">13.372</td>
<td headers="p.value" class="gt_row gt_right">0.000</td>
<td headers="conf.low" class="gt_row gt_right">0.529</td>
<td headers="conf.high" class="gt_row gt_right">0.712</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">age</td>
<td headers="estimate" class="gt_row gt_right gt_striped">0.014</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.003</td>
<td headers="statistic" class="gt_row gt_right gt_striped">5.180</td>
<td headers="p.value" class="gt_row gt_right gt_striped">0.000</td>
<td headers="conf.low" class="gt_row gt_right gt_striped">0.009</td>
<td headers="conf.high" class="gt_row gt_right gt_striped">0.019</td></tr>
    <tr><td headers="term" class="gt_row gt_left">physical_activity_level</td>
<td headers="estimate" class="gt_row gt_right">0.004</td>
<td headers="std.error" class="gt_row gt_right">0.001</td>
<td headers="statistic" class="gt_row gt_right">3.796</td>
<td headers="p.value" class="gt_row gt_right">0.000</td>
<td headers="conf.low" class="gt_row gt_right">0.002</td>
<td headers="conf.high" class="gt_row gt_right">0.006</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Stress level : For every unit increase in stress level, quality of sleep reduces by 0.35 points. This interpretation is true only if the other variables are held constant.</p></li>
<li><p>Sleep duration: For every unit increase in sleep duration, quality of sleep increases by 0.62 points. This interpretation is true only if the other variables are held constant.</p></li>
<li><p>Age: For one year difference in the age of respondents, quality of sleep increases by 0.01 points. This interpretation is true only if the other variables are held constant.</p></li>
<li><p>Physical activity level: For every unit increase in sleep duration, quality of sleep increases by 0.004 points. This interpretation is true only if the other variables are held constant.</p></li>
</ul>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-25_22ab6df5c0448c86912c2d3e25dff659">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># standardized betas</span></span>
<span id="cb31-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">model_parameters</span>(qs_lm_02, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">standardize=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"refit"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb31-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="qmurcckbbw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qmurcckbbw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qmurcckbbw thead, #qmurcckbbw tbody, #qmurcckbbw tfoot, #qmurcckbbw tr, #qmurcckbbw td, #qmurcckbbw th {
  border-style: none;
}

#qmurcckbbw p {
  margin: 0;
  padding: 0;
}

#qmurcckbbw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qmurcckbbw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qmurcckbbw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qmurcckbbw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qmurcckbbw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qmurcckbbw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#qmurcckbbw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qmurcckbbw .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qmurcckbbw .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qmurcckbbw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qmurcckbbw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qmurcckbbw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qmurcckbbw .gt_spanner_row {
  border-bottom-style: hidden;
}

#qmurcckbbw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qmurcckbbw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#qmurcckbbw .gt_from_md > :first-child {
  margin-top: 0;
}

#qmurcckbbw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qmurcckbbw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#qmurcckbbw .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qmurcckbbw .gt_row_group_first td {
  border-top-width: 2px;
}

#qmurcckbbw .gt_row_group_first th {
  border-top-width: 2px;
}

#qmurcckbbw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#qmurcckbbw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qmurcckbbw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#qmurcckbbw .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#qmurcckbbw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#qmurcckbbw .gt_striped {
  background-color: #EDF7FC;
}

#qmurcckbbw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#qmurcckbbw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qmurcckbbw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qmurcckbbw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qmurcckbbw .gt_left {
  text-align: left;
}

#qmurcckbbw .gt_center {
  text-align: center;
}

#qmurcckbbw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qmurcckbbw .gt_font_normal {
  font-weight: normal;
}

#qmurcckbbw .gt_font_bold {
  font-weight: bold;
}

#qmurcckbbw .gt_font_italic {
  font-style: italic;
}

#qmurcckbbw .gt_super {
  font-size: 65%;
}

#qmurcckbbw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qmurcckbbw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qmurcckbbw .gt_indent_1 {
  text-indent: 5px;
}

#qmurcckbbw .gt_indent_2 {
  text-indent: 10px;
}

#qmurcckbbw .gt_indent_3 {
  text-indent: 15px;
}

#qmurcckbbw .gt_indent_4 {
  text-indent: 20px;
}

#qmurcckbbw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="Parameter">Parameter</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Coefficient">Coefficient</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="SE">SE</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="CI">CI</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="CI_low">CI_low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="CI_high">CI_high</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="t">t</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="df_error">df_error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p">p</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Parameter" class="gt_row gt_left">(Intercept)</td>
<td headers="Coefficient" class="gt_row gt_right">0.000</td>
<td headers="SE" class="gt_row gt_right">0.017</td>
<td headers="CI" class="gt_row gt_right">0.950</td>
<td headers="CI_low" class="gt_row gt_right">−0.034</td>
<td headers="CI_high" class="gt_row gt_right">0.034</td>
<td headers="t" class="gt_row gt_right">0.000</td>
<td headers="df_error" class="gt_row gt_right">369.000</td>
<td headers="p" class="gt_row gt_right">1.000</td></tr>
    <tr><td headers="Parameter" class="gt_row gt_left gt_striped">stress_level</td>
<td headers="Coefficient" class="gt_row gt_right gt_striped">−0.520</td>
<td headers="SE" class="gt_row gt_right gt_striped">0.032</td>
<td headers="CI" class="gt_row gt_right gt_striped">0.950</td>
<td headers="CI_low" class="gt_row gt_right gt_striped">−0.582</td>
<td headers="CI_high" class="gt_row gt_right gt_striped">−0.458</td>
<td headers="t" class="gt_row gt_right gt_striped">−16.466</td>
<td headers="df_error" class="gt_row gt_right gt_striped">369.000</td>
<td headers="p" class="gt_row gt_right gt_striped">0.000</td></tr>
    <tr><td headers="Parameter" class="gt_row gt_left">sleep_duration</td>
<td headers="Coefficient" class="gt_row gt_right">0.413</td>
<td headers="SE" class="gt_row gt_right">0.031</td>
<td headers="CI" class="gt_row gt_right">0.950</td>
<td headers="CI_low" class="gt_row gt_right">0.352</td>
<td headers="CI_high" class="gt_row gt_right">0.473</td>
<td headers="t" class="gt_row gt_right">13.372</td>
<td headers="df_error" class="gt_row gt_right">369.000</td>
<td headers="p" class="gt_row gt_right">0.000</td></tr>
    <tr><td headers="Parameter" class="gt_row gt_left gt_striped">age</td>
<td headers="Coefficient" class="gt_row gt_right gt_striped">0.100</td>
<td headers="SE" class="gt_row gt_right gt_striped">0.019</td>
<td headers="CI" class="gt_row gt_right gt_striped">0.950</td>
<td headers="CI_low" class="gt_row gt_right gt_striped">0.062</td>
<td headers="CI_high" class="gt_row gt_right gt_striped">0.137</td>
<td headers="t" class="gt_row gt_right gt_striped">5.180</td>
<td headers="df_error" class="gt_row gt_right gt_striped">369.000</td>
<td headers="p" class="gt_row gt_right gt_striped">0.000</td></tr>
    <tr><td headers="Parameter" class="gt_row gt_left">physical_activity_level</td>
<td headers="Coefficient" class="gt_row gt_right">0.070</td>
<td headers="SE" class="gt_row gt_right">0.018</td>
<td headers="CI" class="gt_row gt_right">0.950</td>
<td headers="CI_low" class="gt_row gt_right">0.034</td>
<td headers="CI_high" class="gt_row gt_right">0.106</td>
<td headers="t" class="gt_row gt_right">3.796</td>
<td headers="df_error" class="gt_row gt_right">369.000</td>
<td headers="p" class="gt_row gt_right">0.000</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-26_a115f5db9a5eed12235fe58f3b024f03">
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># generating standard deviations to interpret standardised betas</span></span>
<span id="cb32-2">sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(stress_level, age, sleep_duration, physical_activity_level, quality_of_sleep) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">skim</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_tibble</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(skim_variable, numeric.sd) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb32-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="iwmnjupakm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#iwmnjupakm table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#iwmnjupakm thead, #iwmnjupakm tbody, #iwmnjupakm tfoot, #iwmnjupakm tr, #iwmnjupakm td, #iwmnjupakm th {
  border-style: none;
}

#iwmnjupakm p {
  margin: 0;
  padding: 0;
}

#iwmnjupakm .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#iwmnjupakm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#iwmnjupakm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#iwmnjupakm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#iwmnjupakm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iwmnjupakm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#iwmnjupakm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iwmnjupakm .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#iwmnjupakm .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#iwmnjupakm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#iwmnjupakm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#iwmnjupakm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#iwmnjupakm .gt_spanner_row {
  border-bottom-style: hidden;
}

#iwmnjupakm .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#iwmnjupakm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#iwmnjupakm .gt_from_md > :first-child {
  margin-top: 0;
}

#iwmnjupakm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#iwmnjupakm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#iwmnjupakm .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#iwmnjupakm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#iwmnjupakm .gt_row_group_first td {
  border-top-width: 2px;
}

#iwmnjupakm .gt_row_group_first th {
  border-top-width: 2px;
}

#iwmnjupakm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iwmnjupakm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#iwmnjupakm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#iwmnjupakm .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#iwmnjupakm .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iwmnjupakm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#iwmnjupakm .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#iwmnjupakm .gt_striped {
  background-color: #EDF7FC;
}

#iwmnjupakm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#iwmnjupakm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iwmnjupakm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#iwmnjupakm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iwmnjupakm .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#iwmnjupakm .gt_left {
  text-align: left;
}

#iwmnjupakm .gt_center {
  text-align: center;
}

#iwmnjupakm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#iwmnjupakm .gt_font_normal {
  font-weight: normal;
}

#iwmnjupakm .gt_font_bold {
  font-weight: bold;
}

#iwmnjupakm .gt_font_italic {
  font-style: italic;
}

#iwmnjupakm .gt_super {
  font-size: 65%;
}

#iwmnjupakm .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#iwmnjupakm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#iwmnjupakm .gt_indent_1 {
  text-indent: 5px;
}

#iwmnjupakm .gt_indent_2 {
  text-indent: 10px;
}

#iwmnjupakm .gt_indent_3 {
  text-indent: 15px;
}

#iwmnjupakm .gt_indent_4 {
  text-indent: 20px;
}

#iwmnjupakm .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="skim_variable">skim_variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="numeric.sd">numeric.sd</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="skim_variable" class="gt_row gt_left">stress_level</td>
<td headers="numeric.sd" class="gt_row gt_right">1.775</td></tr>
    <tr><td headers="skim_variable" class="gt_row gt_left gt_striped">age</td>
<td headers="numeric.sd" class="gt_row gt_right gt_striped">8.673</td></tr>
    <tr><td headers="skim_variable" class="gt_row gt_left">sleep_duration</td>
<td headers="numeric.sd" class="gt_row gt_right">0.796</td></tr>
    <tr><td headers="skim_variable" class="gt_row gt_left gt_striped">physical_activity_level</td>
<td headers="numeric.sd" class="gt_row gt_right gt_striped">20.831</td></tr>
    <tr><td headers="skim_variable" class="gt_row gt_left">quality_of_sleep</td>
<td headers="numeric.sd" class="gt_row gt_right">1.197</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>Stress level : As the stress level increases by 1 standard deviation (1.77 points), quality of sleep reduces by 0.52 standard deviations (0.52 × 1.197) = 0.622 points. This estimate is significant at alpha = .001 level. This interpretation is true only if the effects of airplay and advertising are held constant.</p></li>
<li><p>Sleep duration: As the sleep duration increases by 1 standard deviation (0.8 points), quality of sleep increases by 0.41 standard deviations (0.41 × 1.197) = 0.491 points. This estimate is significant at alpha = .001 level. This interpretation is true only if the effects of airplay and advertising are held constant.</p></li>
<li><p>Age: As age increases by 1 standard deviation (8.67 years), quality of sleep increases by 0.10 standard deviations (0.10 × 1.197) = 0.12 points. This estimate is significant at alpha = .001 level. This interpretation is true only if the effects of airplay and advertising are held constant.</p></li>
<li><p>Physical activity level: As the physical activity level increases by 1 standard deviation (20.83 points), quality of sleep increases by 0.07 standard deviations (0.07 × 1.197) = 0.08 points. This estimate is significant at alpha = .001 level. This interpretation is true only if the effects of airplay and advertising are held constant.</p></li>
</ul>
</div>
</div>
</section>
</section>
<section id="comparing-models" class="level3">
<h3 class="anchored" data-anchor-id="comparing-models">Comparing models</h3>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-27_7d1460b74b1a9ee8be007fbb66b23f5f">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">anova</span>(qs_lm_01, qs_lm_02) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb33-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="euhxyrjnwn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#euhxyrjnwn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#euhxyrjnwn thead, #euhxyrjnwn tbody, #euhxyrjnwn tfoot, #euhxyrjnwn tr, #euhxyrjnwn td, #euhxyrjnwn th {
  border-style: none;
}

#euhxyrjnwn p {
  margin: 0;
  padding: 0;
}

#euhxyrjnwn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#euhxyrjnwn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#euhxyrjnwn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#euhxyrjnwn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#euhxyrjnwn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#euhxyrjnwn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#euhxyrjnwn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#euhxyrjnwn .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#euhxyrjnwn .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#euhxyrjnwn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#euhxyrjnwn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#euhxyrjnwn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#euhxyrjnwn .gt_spanner_row {
  border-bottom-style: hidden;
}

#euhxyrjnwn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#euhxyrjnwn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#euhxyrjnwn .gt_from_md > :first-child {
  margin-top: 0;
}

#euhxyrjnwn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#euhxyrjnwn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#euhxyrjnwn .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#euhxyrjnwn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#euhxyrjnwn .gt_row_group_first td {
  border-top-width: 2px;
}

#euhxyrjnwn .gt_row_group_first th {
  border-top-width: 2px;
}

#euhxyrjnwn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#euhxyrjnwn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#euhxyrjnwn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#euhxyrjnwn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#euhxyrjnwn .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#euhxyrjnwn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#euhxyrjnwn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#euhxyrjnwn .gt_striped {
  background-color: #EDF7FC;
}

#euhxyrjnwn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#euhxyrjnwn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#euhxyrjnwn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#euhxyrjnwn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#euhxyrjnwn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#euhxyrjnwn .gt_left {
  text-align: left;
}

#euhxyrjnwn .gt_center {
  text-align: center;
}

#euhxyrjnwn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#euhxyrjnwn .gt_font_normal {
  font-weight: normal;
}

#euhxyrjnwn .gt_font_bold {
  font-weight: bold;
}

#euhxyrjnwn .gt_font_italic {
  font-style: italic;
}

#euhxyrjnwn .gt_super {
  font-size: 65%;
}

#euhxyrjnwn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#euhxyrjnwn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#euhxyrjnwn .gt_indent_1 {
  text-indent: 5px;
}

#euhxyrjnwn .gt_indent_2 {
  text-indent: 10px;
}

#euhxyrjnwn .gt_indent_3 {
  text-indent: 15px;
}

#euhxyrjnwn .gt_indent_4 {
  text-indent: 20px;
}

#euhxyrjnwn .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="term">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="df.residual">df.residual</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="rss">rss</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="df">df</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="sumsq">sumsq</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="term" class="gt_row gt_left">quality_of_sleep ~ stress_level</td>
<td headers="df.residual" class="gt_row gt_right">372.000</td>
<td headers="rss" class="gt_row gt_right">102.735</td>
<td headers="df" class="gt_row gt_right">NA</td>
<td headers="sumsq" class="gt_row gt_right">NA</td>
<td headers="statistic" class="gt_row gt_right">NA</td>
<td headers="p.value" class="gt_row gt_right">NA</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">quality_of_sleep ~ stress_level + sleep_duration + age + physical_activity_level</td>
<td headers="df.residual" class="gt_row gt_right gt_striped">369.000</td>
<td headers="rss" class="gt_row gt_right gt_striped">57.660</td>
<td headers="df" class="gt_row gt_right gt_striped">3.000</td>
<td headers="sumsq" class="gt_row gt_right gt_striped">45.076</td>
<td headers="statistic" class="gt_row gt_right gt_striped">96.155</td>
<td headers="p.value" class="gt_row gt_right gt_striped">0.000</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can say that <strong><em>qs_lm_02</em></strong> significantly improved the fit of the model to the data compared to <strong><em>qs_lm_01</em></strong>, <em>F</em>(3, 369) = 96.16, <em>p</em> &lt; .001.</p>
</div>
</div>
</section>
<section id="model-diagnostics" class="level3">
<h3 class="anchored" data-anchor-id="model-diagnostics">Model diagnostics</h3>
<section id="linearity-and-homoscedasticity" class="level4">
<h4 class="anchored" data-anchor-id="linearity-and-homoscedasticity">Linearity and homoscedasticity</h4>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-28_73e35e3bc4cc80dd0cb665109eedfd76">
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(qs_lm_02, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">which =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>),</span>
<span id="cb34-2">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#25d366"</span>,</span>
<span id="cb34-3">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">smooth.colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ef4836"</span>,</span>
<span id="cb34-4">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Linearity assumption is violated</p>
</section>
<section id="normality-assumption" class="level4">
<h4 class="anchored" data-anchor-id="normality-assumption">Normality assumption</h4>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-29_9bc9fb4f9a2d0b787283d71afb903e9c">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(qs_lm_02,</span>
<span id="cb35-2">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">which =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,</span>
<span id="cb35-3">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#25d366"</span>,</span>
<span id="cb35-4">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">smooth.colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ef4836"</span>,</span>
<span id="cb35-5">      </span>
<span id="cb35-6">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb35-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Normality assumption is violated</p>
</section>
<section id="outliers-and-influential-cases" class="level4">
<h4 class="anchored" data-anchor-id="outliers-and-influential-cases">Outliers and Influential cases</h4>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-30_8ae35ab9fad32197ea3833751eb489e7">
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># outlier cases</span></span>
<span id="cb36-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">autoplot</span>(qs_lm_02, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">which =</span>  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#25d366"</span>,</span>
<span id="cb36-3">                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">smooth.colour =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ef4836"</span>)</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>There seems to be outliers in the data. Let’s identify them in our dataset</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-31_3357356c2863296ac5acc68279a0e475">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1">qs_outliers <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> qs_lm_02 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb37-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">augment</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb37-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowid_to_column</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"case_no"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb37-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">case_no =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(case_no)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb37-5"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(.std.resid) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb37-6"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(.std.resid)</span>
<span id="cb37-7">qs_outliers <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb37-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="ibbybnbloh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ibbybnbloh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ibbybnbloh thead, #ibbybnbloh tbody, #ibbybnbloh tfoot, #ibbybnbloh tr, #ibbybnbloh td, #ibbybnbloh th {
  border-style: none;
}

#ibbybnbloh p {
  margin: 0;
  padding: 0;
}

#ibbybnbloh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ibbybnbloh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ibbybnbloh .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ibbybnbloh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ibbybnbloh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ibbybnbloh .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ibbybnbloh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ibbybnbloh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ibbybnbloh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ibbybnbloh .gt_spanner_row {
  border-bottom-style: hidden;
}

#ibbybnbloh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ibbybnbloh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#ibbybnbloh .gt_from_md > :first-child {
  margin-top: 0;
}

#ibbybnbloh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ibbybnbloh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#ibbybnbloh .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ibbybnbloh .gt_row_group_first td {
  border-top-width: 2px;
}

#ibbybnbloh .gt_row_group_first th {
  border-top-width: 2px;
}

#ibbybnbloh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ibbybnbloh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#ibbybnbloh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_striped {
  background-color: #EDF7FC;
}

#ibbybnbloh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#ibbybnbloh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ibbybnbloh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ibbybnbloh .gt_left {
  text-align: left;
}

#ibbybnbloh .gt_center {
  text-align: center;
}

#ibbybnbloh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ibbybnbloh .gt_font_normal {
  font-weight: normal;
}

#ibbybnbloh .gt_font_bold {
  font-weight: bold;
}

#ibbybnbloh .gt_font_italic {
  font-style: italic;
}

#ibbybnbloh .gt_super {
  font-size: 65%;
}

#ibbybnbloh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ibbybnbloh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ibbybnbloh .gt_indent_1 {
  text-indent: 5px;
}

#ibbybnbloh .gt_indent_2 {
  text-indent: 10px;
}

#ibbybnbloh .gt_indent_3 {
  text-indent: 15px;
}

#ibbybnbloh .gt_indent_4 {
  text-indent: 20px;
}

#ibbybnbloh .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="case_no">case_no</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="quality_of_sleep">quality_of_sleep</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="stress_level">stress_level</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="sleep_duration">sleep_duration</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="age">age</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="physical_activity_level">physical_activity_level</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id=".fitted">.fitted</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id=".resid">.resid</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id=".hat">.hat</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id=".sigma">.sigma</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id=".cooksd">.cooksd</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id=".std.resid">.std.resid</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="case_no" class="gt_row gt_right">81</td>
<td headers="quality_of_sleep" class="gt_row gt_right">4.000</td>
<td headers="stress_level" class="gt_row gt_right">8.000</td>
<td headers="sleep_duration" class="gt_row gt_right">5.800</td>
<td headers="age" class="gt_row gt_right">34.000</td>
<td headers="physical_activity_level" class="gt_row gt_right">32.000</td>
<td headers=".fitted" class="gt_row gt_right">5.348</td>
<td headers=".resid" class="gt_row gt_right">−1.348</td>
<td headers=".hat" class="gt_row gt_right">0.013</td>
<td headers=".sigma" class="gt_row gt_right">0.389</td>
<td headers=".cooksd" class="gt_row gt_right">0.032</td>
<td headers=".std.resid" class="gt_row gt_right">−3.433</td></tr>
    <tr><td headers="case_no" class="gt_row gt_right gt_striped">82</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">4.000</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">8.000</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">5.800</td>
<td headers="age" class="gt_row gt_right gt_striped">34.000</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">32.000</td>
<td headers=".fitted" class="gt_row gt_right gt_striped">5.348</td>
<td headers=".resid" class="gt_row gt_right gt_striped">−1.348</td>
<td headers=".hat" class="gt_row gt_right gt_striped">0.013</td>
<td headers=".sigma" class="gt_row gt_right gt_striped">0.389</td>
<td headers=".cooksd" class="gt_row gt_right gt_striped">0.032</td>
<td headers=".std.resid" class="gt_row gt_right gt_striped">−3.433</td></tr>
    <tr><td headers="case_no" class="gt_row gt_right">4</td>
<td headers="quality_of_sleep" class="gt_row gt_right">4.000</td>
<td headers="stress_level" class="gt_row gt_right">8.000</td>
<td headers="sleep_duration" class="gt_row gt_right">5.900</td>
<td headers="age" class="gt_row gt_right">28.000</td>
<td headers="physical_activity_level" class="gt_row gt_right">30.000</td>
<td headers=".fitted" class="gt_row gt_right">5.320</td>
<td headers=".resid" class="gt_row gt_right">−1.320</td>
<td headers=".hat" class="gt_row gt_right">0.016</td>
<td headers=".sigma" class="gt_row gt_right">0.390</td>
<td headers=".cooksd" class="gt_row gt_right">0.036</td>
<td headers=".std.resid" class="gt_row gt_right">−3.365</td></tr>
    <tr><td headers="case_no" class="gt_row gt_right gt_striped">5</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">4.000</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">8.000</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">5.900</td>
<td headers="age" class="gt_row gt_right gt_striped">28.000</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">30.000</td>
<td headers=".fitted" class="gt_row gt_right gt_striped">5.320</td>
<td headers=".resid" class="gt_row gt_right gt_striped">−1.320</td>
<td headers=".hat" class="gt_row gt_right gt_striped">0.016</td>
<td headers=".sigma" class="gt_row gt_right gt_striped">0.390</td>
<td headers=".cooksd" class="gt_row gt_right gt_striped">0.036</td>
<td headers=".std.resid" class="gt_row gt_right gt_striped">−3.365</td></tr>
    <tr><td headers="case_no" class="gt_row gt_right">6</td>
<td headers="quality_of_sleep" class="gt_row gt_right">4.000</td>
<td headers="stress_level" class="gt_row gt_right">8.000</td>
<td headers="sleep_duration" class="gt_row gt_right">5.900</td>
<td headers="age" class="gt_row gt_right">28.000</td>
<td headers="physical_activity_level" class="gt_row gt_right">30.000</td>
<td headers=".fitted" class="gt_row gt_right">5.320</td>
<td headers=".resid" class="gt_row gt_right">−1.320</td>
<td headers=".hat" class="gt_row gt_right">0.016</td>
<td headers=".sigma" class="gt_row gt_right">0.390</td>
<td headers=".cooksd" class="gt_row gt_right">0.036</td>
<td headers=".std.resid" class="gt_row gt_right">−3.365</td></tr>
    <tr><td headers="case_no" class="gt_row gt_right gt_striped">104</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">5.000</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">7.000</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">6.600</td>
<td headers="age" class="gt_row gt_right gt_striped">36.000</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">35.000</td>
<td headers=".fitted" class="gt_row gt_right gt_striped">6.235</td>
<td headers=".resid" class="gt_row gt_right gt_striped">−1.235</td>
<td headers=".hat" class="gt_row gt_right gt_striped">0.009</td>
<td headers=".sigma" class="gt_row gt_right gt_striped">0.391</td>
<td headers=".cooksd" class="gt_row gt_right gt_striped">0.018</td>
<td headers=".std.resid" class="gt_row gt_right gt_striped">−3.138</td></tr>
    <tr><td headers="case_no" class="gt_row gt_right">106</td>
<td headers="quality_of_sleep" class="gt_row gt_right">5.000</td>
<td headers="stress_level" class="gt_row gt_right">7.000</td>
<td headers="sleep_duration" class="gt_row gt_right">6.600</td>
<td headers="age" class="gt_row gt_right">36.000</td>
<td headers="physical_activity_level" class="gt_row gt_right">35.000</td>
<td headers=".fitted" class="gt_row gt_right">6.235</td>
<td headers=".resid" class="gt_row gt_right">−1.235</td>
<td headers=".hat" class="gt_row gt_right">0.009</td>
<td headers=".sigma" class="gt_row gt_right">0.391</td>
<td headers=".cooksd" class="gt_row gt_right">0.018</td>
<td headers=".std.resid" class="gt_row gt_right">−3.138</td></tr>
    <tr><td headers="case_no" class="gt_row gt_right gt_striped">148</td>
<td headers="quality_of_sleep" class="gt_row gt_right gt_striped">5.000</td>
<td headers="stress_level" class="gt_row gt_right gt_striped">7.000</td>
<td headers="sleep_duration" class="gt_row gt_right gt_striped">6.500</td>
<td headers="age" class="gt_row gt_right gt_striped">39.000</td>
<td headers="physical_activity_level" class="gt_row gt_right gt_striped">40.000</td>
<td headers=".fitted" class="gt_row gt_right gt_striped">6.234</td>
<td headers=".resid" class="gt_row gt_right gt_striped">−1.234</td>
<td headers=".hat" class="gt_row gt_right gt_striped">0.007</td>
<td headers=".sigma" class="gt_row gt_right gt_striped">0.391</td>
<td headers=".cooksd" class="gt_row gt_right gt_striped">0.014</td>
<td headers=".std.resid" class="gt_row gt_right gt_striped">−3.133</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-32_52e150f198982877d15d5e4fc34e56c8">
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># outlier cases</span></span>
<span id="cb38-2">qs_outliers <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inner_join</span>(sleep, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">join_by</span>(case_no <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> person_id)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 19
  case_no .fitted .resid    .hat .sigma .cooksd .std.resid gender age.y
  &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
1 81         5.35  -1.35 0.0133   0.389  0.0318      -3.43 Female    34
2 82         5.35  -1.35 0.0133   0.389  0.0318      -3.43 Female    34
3 4          5.32  -1.32 0.0156   0.390  0.0360      -3.36 Male      28
4 5          5.32  -1.32 0.0156   0.390  0.0360      -3.36 Male      28
5 6          5.32  -1.32 0.0156   0.390  0.0360      -3.36 Male      28
6 104        6.23  -1.23 0.00904  0.391  0.0180      -3.14 Male      36
7 106        6.23  -1.23 0.00904  0.391  0.0180      -3.14 Male      36
8 148        6.23  -1.23 0.00722  0.391  0.0143      -3.13 Male      39
# ℹ 10 more variables: occupation &lt;chr&gt;, sleep_duration.y &lt;dbl&gt;,
#   quality_of_sleep.y &lt;dbl&gt;, physical_activity_level.y &lt;dbl&gt;,
#   stress_level.y &lt;dbl&gt;, bmi_category &lt;chr&gt;, blood_pressure &lt;chr&gt;,
#   daily_steps &lt;dbl&gt;, sleep_disorder &lt;chr&gt;, bp_sys &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-33_ce7d580db7c6741066ef88bcf138a6a0">
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># influential cases</span></span>
<span id="cb40-2">qs_outliers <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> qs_lm_02 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb40-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">augment</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb40-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowid_to_column</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"case_no"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb40-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">case_no =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.character</span>(case_no)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb40-6"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(.cooksd) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">|&gt;</span> </span>
<span id="cb40-7"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(.std.resid)</span>
<span id="cb40-8">qs_outliers</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 12
# ℹ 12 variables: case_no &lt;chr&gt;, quality_of_sleep &lt;dbl&gt;, stress_level &lt;dbl&gt;,
#   sleep_duration &lt;dbl&gt;, age &lt;dbl&gt;, physical_activity_level &lt;dbl&gt;,
#   .fitted &lt;dbl&gt;, .resid &lt;dbl&gt;, .hat &lt;dbl&gt;, .sigma &lt;dbl&gt;, .cooksd &lt;dbl&gt;,
#   .std.resid &lt;dbl&gt;</code></pre>
</div>
</div>
<p>There are no influential cases</p>
</section>
<section id="assumption-of-independence" class="level4">
<h4 class="anchored" data-anchor-id="assumption-of-independence">Assumption of Independence</h4>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-34_c022383161709fd0fe6363e001294d86">
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1">car<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">durbinWatsonTest</span>(qs_lm_02)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> lag Autocorrelation D-W Statistic p-value
   1       0.4577484      1.083912       0
 Alternative hypothesis: rho != 0</code></pre>
</div>
</div>
<p>Since the D-W statistic is not less than 1 or greater than 3, we can be fairly confident that this assumption is met.</p>
</section>
<section id="assumptions-of-multicollinearity" class="level4">
<h4 class="anchored" data-anchor-id="assumptions-of-multicollinearity">Assumptions of Multicollinearity</h4>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-35_01015cbc5385ec1970d26d6e3de731c9">
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1">car<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vif</span>(qs_lm_02)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           stress_level          sleep_duration                     age 
               3.406796                3.256354                1.262757 
physical_activity_level 
               1.153822 </code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-36_0e1f29e2f9660fbd091272210d1764bd">
<div class="sourceCode cell-code" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(car<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vif</span>(qs_lm_02))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.269932</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-37_d55dd45a08914100b4d466c9edeb230a">
<div class="sourceCode cell-code" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tolerance</span></span>
<span id="cb48-2"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>car<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vif</span>(qs_lm_02)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           stress_level          sleep_duration                     age 
              0.2935310               0.3070919               0.7919178 
physical_activity_level 
              0.8666849 </code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>If the largest VIF is greater than 10 then there is cause for concern (Bowerman &amp; O’Connell, 1990; Myers, 1990). If the average VIF is substantially greater than 1 then the regression may be biased (Bowerman &amp; O’Connell, 1990). Tolerance below 0.1 indicates a serious problem. Tolerance below 0.2 indicates a potential problem (Menard, 1995).</p>
</div>
</div>
<p>Since our average VIF is greater than 1, our model may be biased</p>
</section>
</section>
<section id="robust-linear-methods" class="level3">
<h3 class="anchored" data-anchor-id="robust-linear-methods">Robust linear methods</h3>
<p>Our model appears to be accurate for the sample and but not necessarily generalizable to the population because of some GLM assumption violations. Time to use robust methods!</p>
<section id="robust-parameter-estimates" class="level4">
<h4 class="anchored" data-anchor-id="robust-parameter-estimates">Robust parameter estimates</h4>
<p>Now we check for the significance of the test of bias and we compare their corresponding coefficients.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-38_25a18ddd368ec4625a880dbfe54545d1">
<div class="sourceCode cell-code" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1">qs_lm_rob <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmRob</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stress_level<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>sleep_duration<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>age<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>physical_activity_level, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> sleep, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.action =</span> na.exclude)</span>
<span id="cb50-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(qs_lm_rob)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lmRob(formula = quality_of_sleep ~ stress_level + sleep_duration + 
    age + physical_activity_level, data = sleep, na.action = na.exclude)

Residuals:
      Min        1Q    Median        3Q       Max 
-1.105750 -0.034463  0.004544  0.572389  1.344101 

Coefficients:
                          Estimate Std. Error  t value Pr(&gt;|t|)    
(Intercept)              8.5862994  0.1278987   67.134  &lt; 2e-16 ***
stress_level            -0.5876346  0.0057227 -102.686  &lt; 2e-16 ***
sleep_duration           0.0989499  0.0137276    7.208 3.23e-12 ***
age                      0.0060295  0.0006261    9.630  &lt; 2e-16 ***
physical_activity_level  0.0138005  0.0003576   38.589  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1386 on 369 degrees of freedom
Multiple R-Squared: 0.4484 

Test for Bias:
            statistic p-value
M-estimate      13.08 0.02267
LS-estimate     10.10 0.07233</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-39_14ff231ab139e9f375ad50dc35ceaf34">
<div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1">qs_lm_rob <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lmRob</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stress_level<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>sleep_duration<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>age<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>physical_activity_level, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> sleep, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.action =</span> na.exclude)</span>
<span id="cb52-2">qs_lm_rob <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">conf.int=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 5
  term                    estimate std.error statistic   p.value
  &lt;chr&gt;                      &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)              8.59     0.128        67.1  6.38e-209
2 stress_level            -0.588    0.00572    -103.   1.73e-273
3 sleep_duration           0.0989   0.0137        7.21 3.23e- 12
4 age                      0.00603  0.000626      9.63 9.92e- 20
5 physical_activity_level  0.0138   0.000358     38.6  1.38e-131</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-40_86d3573a051d17a97bb2b7ffb8536725">
<div class="sourceCode cell-code" id="cb54" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(qs_lm_02)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = quality_of_sleep ~ stress_level + sleep_duration + 
    age + physical_activity_level, data = sleep)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.34804 -0.26046  0.01664  0.24112  1.03722 

Coefficients:
                         Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)              3.957065   0.438560   9.023  &lt; 2e-16 ***
stress_level            -0.350549   0.021289 -16.466  &lt; 2e-16 ***
sleep_duration           0.620714   0.046420  13.372  &lt; 2e-16 ***
age                      0.013736   0.002652   5.180 3.66e-07 ***
physical_activity_level  0.004006   0.001055   3.796 0.000172 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.3953 on 369 degrees of freedom
Multiple R-squared:  0.8921,    Adjusted R-squared:  0.8909 
F-statistic: 762.7 on 4 and 369 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
<p>There is reason to believe that our original model, qs_lm_02, is biased. First, the M-estimate is significant</p>
</section>
</section>
<section id="bayesian-approaches" class="level3">
<h3 class="anchored" data-anchor-id="bayesian-approaches">Bayesian approaches</h3>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-41_51a8338601947439576394e67221b2e8">
<div class="sourceCode cell-code" id="cb56" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1">qs_bf <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> BayesFactor<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">regressionBF</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stress_level <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> sleep_duration <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> age <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> physical_activity_level, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">rscaleCont =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"medium"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> sleep)</span>
<span id="cb56-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summary</span>(qs_bf)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Bayes factor analysis
--------------
[1] stress_level                                                   : 1.238909e+131 ±0.01%
[2] sleep_duration                                                 : 1.8428e+120   ±0.01%
[3] age                                                            : 1.375858e+19  ±0%
[4] physical_activity_level                                        : 104.9573      ±0.01%
[5] stress_level + sleep_duration                                  : 4.33176e+165  ±0%
[6] stress_level + age                                             : 1.669112e+134 ±0%
[7] stress_level + physical_activity_level                         : 2.590168e+141 ±0%
[8] sleep_duration + age                                           : 4.273726e+131 ±0%
[9] sleep_duration + physical_activity_level                       : 6.433615e+118 ±0%
[10] age + physical_activity_level                                 : 2.418886e+19  ±0%
[11] stress_level + sleep_duration + age                           : 2.151821e+171 ±0%
[12] stress_level + sleep_duration + physical_activity_level       : 6.037683e+168 ±0%
[13] stress_level + age + physical_activity_level                  : 6.086042e+142 ±0%
[14] sleep_duration + age + physical_activity_level                : 2.12722e+130  ±0%
[15] stress_level + sleep_duration + age + physical_activity_level : 8.470484e+172 ±0%

Against denominator:
  Intercept only 
---
Bayes factor type: BFlinearModel, JZS</code></pre>
</div>
</div>
<p>The best model is model 15 since it has largest Bayes Factor of 8.47 ^42</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Results
</div>
</div>
<div class="callout-body-container callout-body">
<p>The model that included stress level, sleep duration, age and physical activity level performed better than the model that only included stress level. The final model explained 44.8% of the variance in sleep quality. Stress level significantly predicted sleep quality = -0.59, t(369) = 67.1, p &lt; 0.001, as did sleep duration = 0.1, t(369) = 38.6, p &lt; 0.001.</p>
</div>
</div>
</section>
</section>
<section id="moderation-and-mediation-analysis" class="level1">
<h1>Moderation and mediation analysis</h1>
<section id="research-questions" class="level2">
<h2 class="anchored" data-anchor-id="research-questions">Research questions:</h2>
<ol type="1">
<li><p><em>Is the relationship between sleep duration and quality of sleep moderated by sleep disorder?</em></p></li>
<li><p><em>Is the relationship between stress level and quality of sleep moderated by occupation?</em></p></li>
<li><p><em>Is the relationship between physical activity and quality of sleep mediated by daily steps?</em></p></li>
</ol>
<section id="is-the-relationship-between-sleep-duration-and-quality-of-sleep-moderated-by-sleep-disorder" class="level3">
<h3 class="anchored" data-anchor-id="is-the-relationship-between-sleep-duration-and-quality-of-sleep-moderated-by-sleep-disorder">Is the relationship between sleep duration and quality of sleep moderated by sleep disorder?</h3>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-42_408692bc93339edc87c03a5c4d8ade8d">
<div class="sourceCode cell-code" id="cb58" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Visualizing the relationship of the three variables</span></span>
<span id="cb58-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sleep, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> sleep_duration, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> quality_of_sleep, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> sleep_disorder)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb58-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_jitter</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">alpha=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb58-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sleep duration"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Quality of sleep"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sleep disorder"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb58-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_smooth</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">method =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lm"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">se =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">linewidth=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.9</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_bw</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The plot shows that there might be some moderation effects.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-43_b496387d3bb7eac984539d44936a545c">
<div class="sourceCode cell-code" id="cb59" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># making sleep_disorder a factor variable and setting the base level to "None"</span></span>
<span id="cb59-2">sleep <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(</span>
<span id="cb59-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sleep_disorder =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_factor</span>(sleep_disorder) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fct_relevel</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"None"</span>)</span>
<span id="cb59-4">)</span></code></pre></div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-44_2206665e5c174ea8f9ec54794f74907e">
<div class="sourceCode cell-code" id="cb60" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1">qs_lm_03 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> sleep_duration <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> sleep_disorder, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span>sleep)</span>
<span id="cb60-2">qs_lm_03 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb60-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="skhbhcpygc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#skhbhcpygc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#skhbhcpygc thead, #skhbhcpygc tbody, #skhbhcpygc tfoot, #skhbhcpygc tr, #skhbhcpygc td, #skhbhcpygc th {
  border-style: none;
}

#skhbhcpygc p {
  margin: 0;
  padding: 0;
}

#skhbhcpygc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#skhbhcpygc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#skhbhcpygc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#skhbhcpygc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#skhbhcpygc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#skhbhcpygc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#skhbhcpygc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#skhbhcpygc .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#skhbhcpygc .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#skhbhcpygc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#skhbhcpygc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#skhbhcpygc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#skhbhcpygc .gt_spanner_row {
  border-bottom-style: hidden;
}

#skhbhcpygc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#skhbhcpygc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#skhbhcpygc .gt_from_md > :first-child {
  margin-top: 0;
}

#skhbhcpygc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#skhbhcpygc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#skhbhcpygc .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#skhbhcpygc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#skhbhcpygc .gt_row_group_first td {
  border-top-width: 2px;
}

#skhbhcpygc .gt_row_group_first th {
  border-top-width: 2px;
}

#skhbhcpygc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#skhbhcpygc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#skhbhcpygc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#skhbhcpygc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#skhbhcpygc .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#skhbhcpygc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#skhbhcpygc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#skhbhcpygc .gt_striped {
  background-color: #EDF7FC;
}

#skhbhcpygc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#skhbhcpygc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#skhbhcpygc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#skhbhcpygc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#skhbhcpygc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#skhbhcpygc .gt_left {
  text-align: left;
}

#skhbhcpygc .gt_center {
  text-align: center;
}

#skhbhcpygc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#skhbhcpygc .gt_font_normal {
  font-weight: normal;
}

#skhbhcpygc .gt_font_bold {
  font-weight: bold;
}

#skhbhcpygc .gt_font_italic {
  font-style: italic;
}

#skhbhcpygc .gt_super {
  font-size: 65%;
}

#skhbhcpygc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#skhbhcpygc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#skhbhcpygc .gt_indent_1 {
  text-indent: 5px;
}

#skhbhcpygc .gt_indent_2 {
  text-indent: 10px;
}

#skhbhcpygc .gt_indent_3 {
  text-indent: 15px;
}

#skhbhcpygc .gt_indent_4 {
  text-indent: 20px;
}

#skhbhcpygc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="term">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="estimate">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="std.error">std.error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="term" class="gt_row gt_left">(Intercept)</td>
<td headers="estimate" class="gt_row gt_right">-0.5750673</td>
<td headers="std.error" class="gt_row gt_right">0.36703899</td>
<td headers="statistic" class="gt_row gt_right">-1.566774</td>
<td headers="p.value" class="gt_row gt_right">1.180269e-01</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">sleep_duration</td>
<td headers="estimate" class="gt_row gt_right gt_striped">1.1144522</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.04963586</td>
<td headers="statistic" class="gt_row gt_right gt_striped">22.452560</td>
<td headers="p.value" class="gt_row gt_right gt_striped">6.124844e-71</td></tr>
    <tr><td headers="term" class="gt_row gt_left">sleep_disorderSleep Apnea</td>
<td headers="estimate" class="gt_row gt_right">-3.4341228</td>
<td headers="std.error" class="gt_row gt_right">0.57712441</td>
<td headers="statistic" class="gt_row gt_right">-5.950403</td>
<td headers="p.value" class="gt_row gt_right">6.233752e-09</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">sleep_disorderInsomnia</td>
<td headers="estimate" class="gt_row gt_right gt_striped">-3.2040380</td>
<td headers="std.error" class="gt_row gt_right gt_striped">1.11193745</td>
<td headers="statistic" class="gt_row gt_right gt_striped">-2.881491</td>
<td headers="p.value" class="gt_row gt_right gt_striped">4.190005e-03</td></tr>
    <tr><td headers="term" class="gt_row gt_left">sleep_duration:sleep_disorderSleep Apnea</td>
<td headers="estimate" class="gt_row gt_right">0.4802913</td>
<td headers="std.error" class="gt_row gt_right">0.08000178</td>
<td headers="statistic" class="gt_row gt_right">6.003508</td>
<td headers="p.value" class="gt_row gt_right">4.632039e-09</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">sleep_duration:sleep_disorderInsomnia</td>
<td headers="estimate" class="gt_row gt_right gt_striped">0.4503706</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.16657925</td>
<td headers="statistic" class="gt_row gt_right gt_striped">2.703642</td>
<td headers="p.value" class="gt_row gt_right gt_striped">7.176641e-03</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<section id="interpretation-1" class="level4">
<h4 class="anchored" data-anchor-id="interpretation-1">Interpretation</h4>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>The effect of increasing sleep duration in someone with no sleep disorder on sleep quality is 1.11</p>
<p>The effect of sleep apnea on sleep quality compared to someone with no disorders is -3.43</p>
<p>The effect of Insomnia on sleep quality compared to someone with no disorders is -3.20</p>
<p>The effect of increasing sleep duration in someone with sleep anea on sleep quality compared to someone with no disorders is 0.48</p>
<p>The effect of increasing sleep duration in someone with insomnia on sleep quality compared to someone with no disorders is 0.45</p>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-45_02665970dcd815bfdf593e6d3ba94038">
<div class="sourceCode cell-code" id="cb61" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1">interactions<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sim_slopes</span>(</span>
<span id="cb61-2">  qs_lm_03,</span>
<span id="cb61-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pred =</span> sleep_duration,</span>
<span id="cb61-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">modx =</span> sleep_disorder,</span>
<span id="cb61-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">jnplot =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb61-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">robust =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb61-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">confint =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb61-8">  )</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>SIMPLE SLOPES ANALYSIS 

Slope of sleep_duration when sleep_disorder = Insomnia: 

  Est.   S.E.   2.5%   97.5%   t val.      p
------ ------ ------ ------- -------- ------
  1.56   0.15   1.26    1.86    10.26   0.00

Slope of sleep_duration when sleep_disorder = Sleep Apnea: 

  Est.   S.E.   2.5%   97.5%   t val.      p
------ ------ ------ ------- -------- ------
  1.59   0.06   1.48    1.71    27.35   0.00

Slope of sleep_duration when sleep_disorder = None: 

  Est.   S.E.   2.5%   97.5%   t val.      p
------ ------ ------ ------- -------- ------
  1.11   0.03   1.05    1.17    36.50   0.00</code></pre>
</div>
</div>
<p>The slopes for the three regressions are not significantly different</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-46_a8f717c148f5d347348c71738366aef8">
<div class="sourceCode cell-code" id="cb63" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1">interactions<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">interact_plot</span>(</span>
<span id="cb63-2">  qs_lm_03,</span>
<span id="cb63-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pred =</span> sleep_duration,</span>
<span id="cb63-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">modx =</span> sleep_disorder,</span>
<span id="cb63-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">interval =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb63-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">robust =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb63-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Sleep disorder"</span></span>
<span id="cb63-8">  )</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Looking at the slope, we can that the moderation effect is not significant.</p>
</section>
<section id="conclusion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion">Conclusion</h4>
<p>Sleep disorder is not a moderator of the relationship between sleep duration and quality of sleep</p>
</section>
</section>
<section id="is-the-relationship-between-stress-level-and-quality-of-sleep-moderated-by-occupation" class="level3">
<h3 class="anchored" data-anchor-id="is-the-relationship-between-stress-level-and-quality-of-sleep-moderated-by-occupation">Is the relationship between stress level and quality of sleep moderated by occupation?</h3>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-47_032b880c16444e5edca19584d50fc61e">
<div class="sourceCode cell-code" id="cb64" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1">qs_lm_04 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> stress_level <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> occupation, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span>sleep)</span>
<span id="cb64-2">qs_lm_04 <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb64-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="malmqxkmsc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#malmqxkmsc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#malmqxkmsc thead, #malmqxkmsc tbody, #malmqxkmsc tfoot, #malmqxkmsc tr, #malmqxkmsc td, #malmqxkmsc th {
  border-style: none;
}

#malmqxkmsc p {
  margin: 0;
  padding: 0;
}

#malmqxkmsc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#malmqxkmsc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#malmqxkmsc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#malmqxkmsc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#malmqxkmsc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#malmqxkmsc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#malmqxkmsc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#malmqxkmsc .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#malmqxkmsc .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#malmqxkmsc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#malmqxkmsc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#malmqxkmsc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#malmqxkmsc .gt_spanner_row {
  border-bottom-style: hidden;
}

#malmqxkmsc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#malmqxkmsc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#malmqxkmsc .gt_from_md > :first-child {
  margin-top: 0;
}

#malmqxkmsc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#malmqxkmsc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#malmqxkmsc .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#malmqxkmsc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#malmqxkmsc .gt_row_group_first td {
  border-top-width: 2px;
}

#malmqxkmsc .gt_row_group_first th {
  border-top-width: 2px;
}

#malmqxkmsc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#malmqxkmsc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#malmqxkmsc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#malmqxkmsc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#malmqxkmsc .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#malmqxkmsc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#malmqxkmsc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#malmqxkmsc .gt_striped {
  background-color: #EDF7FC;
}

#malmqxkmsc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#malmqxkmsc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#malmqxkmsc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#malmqxkmsc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#malmqxkmsc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#malmqxkmsc .gt_left {
  text-align: left;
}

#malmqxkmsc .gt_center {
  text-align: center;
}

#malmqxkmsc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#malmqxkmsc .gt_font_normal {
  font-weight: normal;
}

#malmqxkmsc .gt_font_bold {
  font-weight: bold;
}

#malmqxkmsc .gt_font_italic {
  font-style: italic;
}

#malmqxkmsc .gt_super {
  font-size: 65%;
}

#malmqxkmsc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#malmqxkmsc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#malmqxkmsc .gt_indent_1 {
  text-indent: 5px;
}

#malmqxkmsc .gt_indent_2 {
  text-indent: 10px;
}

#malmqxkmsc .gt_indent_3 {
  text-indent: 15px;
}

#malmqxkmsc .gt_indent_4 {
  text-indent: 20px;
}

#malmqxkmsc .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="term">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="estimate">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="std.error">std.error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="term" class="gt_row gt_left">(Intercept)</td>
<td headers="estimate" class="gt_row gt_right">9.3661417</td>
<td headers="std.error" class="gt_row gt_right">0.22464236</td>
<td headers="statistic" class="gt_row gt_right">41.6935685</td>
<td headers="p.value" class="gt_row gt_right">2.847324e-140</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">stress_level</td>
<td headers="estimate" class="gt_row gt_right gt_striped">-0.3208661</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.04725953</td>
<td headers="statistic" class="gt_row gt_right gt_striped">-6.7894487</td>
<td headers="p.value" class="gt_row gt_right gt_striped">4.624546e-11</td></tr>
    <tr><td headers="term" class="gt_row gt_left">occupationLawyer</td>
<td headers="estimate" class="gt_row gt_right">3.3611310</td>
<td headers="std.error" class="gt_row gt_right">1.08304354</td>
<td headers="statistic" class="gt_row gt_right">3.1034126</td>
<td headers="p.value" class="gt_row gt_right">2.063488e-03</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">occupationMedical</td>
<td headers="estimate" class="gt_row gt_right gt_striped">1.3637168</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.24305144</td>
<td headers="statistic" class="gt_row gt_right gt_striped">5.6108156</td>
<td headers="p.value" class="gt_row gt_right gt_striped">4.008125e-08</td></tr>
    <tr><td headers="term" class="gt_row gt_left">occupationSales</td>
<td headers="estimate" class="gt_row gt_right">3.5481440</td>
<td headers="std.error" class="gt_row gt_right">1.02746628</td>
<td headers="statistic" class="gt_row gt_right">3.4532948</td>
<td headers="p.value" class="gt_row gt_right">6.193572e-04</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">occupationTeacher</td>
<td headers="estimate" class="gt_row gt_right gt_striped">-0.2842770</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.33263086</td>
<td headers="statistic" class="gt_row gt_right gt_striped">-0.8546322</td>
<td headers="p.value" class="gt_row gt_right gt_striped">3.933200e-01</td></tr>
    <tr><td headers="term" class="gt_row gt_left">occupationTechnical</td>
<td headers="estimate" class="gt_row gt_right">2.0623438</td>
<td headers="std.error" class="gt_row gt_right">0.25972133</td>
<td headers="statistic" class="gt_row gt_right">7.9406026</td>
<td headers="p.value" class="gt_row gt_right">2.559029e-14</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">stress_level:occupationLawyer</td>
<td headers="estimate" class="gt_row gt_right gt_striped">-0.6336793</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.21426067</td>
<td headers="statistic" class="gt_row gt_right gt_striped">-2.9575158</td>
<td headers="p.value" class="gt_row gt_right gt_striped">3.304916e-03</td></tr>
    <tr><td headers="term" class="gt_row gt_left">stress_level:occupationMedical</td>
<td headers="estimate" class="gt_row gt_right">-0.2851357</td>
<td headers="std.error" class="gt_row gt_right">0.04939422</td>
<td headers="statistic" class="gt_row gt_right">-5.7726532</td>
<td headers="p.value" class="gt_row gt_right">1.679151e-08</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">stress_level:occupationSales</td>
<td headers="estimate" class="gt_row gt_right gt_striped">-0.6791339</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.15058782</td>
<td headers="statistic" class="gt_row gt_right gt_striped">-4.5098857</td>
<td headers="p.value" class="gt_row gt_right gt_striped">8.775327e-06</td></tr>
    <tr><td headers="term" class="gt_row gt_left">stress_level:occupationTeacher</td>
<td headers="estimate" class="gt_row gt_right">-0.1447393</td>
<td headers="std.error" class="gt_row gt_right">0.07087144</td>
<td headers="statistic" class="gt_row gt_right">-2.0422799</td>
<td headers="p.value" class="gt_row gt_right">4.184795e-02</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">stress_level:occupationTechnical</td>
<td headers="estimate" class="gt_row gt_right gt_striped">-0.4718021</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.05572917</td>
<td headers="statistic" class="gt_row gt_right gt_striped">-8.4659819</td>
<td headers="p.value" class="gt_row gt_right gt_striped">6.415721e-16</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-48_be436a4059f52d235f45649984734189">
<div class="sourceCode cell-code" id="cb65" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1">interactions<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sim_slopes</span>(</span>
<span id="cb65-2">  qs_lm_04,</span>
<span id="cb65-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pred =</span> stress_level,</span>
<span id="cb65-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">modx =</span> occupation,</span>
<span id="cb65-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">jnplot =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb65-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">robust =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb65-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">confint =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb65-8">  )</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>SIMPLE SLOPES ANALYSIS 

Slope of stress_level when occupation = Lawyer: 

   Est.   S.E.    2.5%   97.5%   t val.      p
------- ------ ------- ------- -------- ------
  -0.95   0.03   -1.02   -0.89   -29.71   0.00

Slope of stress_level when occupation = Accountant: 

   Est.   S.E.    2.5%   97.5%   t val.      p
------- ------ ------- ------- -------- ------
  -0.32   0.04   -0.40   -0.24    -7.92   0.00

Slope of stress_level when occupation = Teacher: 

   Est.   S.E.    2.5%   97.5%   t val.      p
------- ------ ------- ------- -------- ------
  -0.47   0.09   -0.65   -0.28    -5.01   0.00

Slope of stress_level when occupation = Sales: 

   Est.   S.E.    2.5%   97.5%   t val.      p
------- ------ ------- ------- -------- ------
  -1.00   1.04   -3.04    1.04    -0.97   0.33

Slope of stress_level when occupation = Medical: 

   Est.   S.E.    2.5%   97.5%   t val.      p
------- ------ ------- ------- -------- ------
  -0.61   0.01   -0.62   -0.59   -81.54   0.00

Slope of stress_level when occupation = Technical: 

   Est.   S.E.    2.5%   97.5%   t val.      p
------- ------ ------- ------- -------- ------
  -0.79   0.07   -0.93   -0.65   -10.97   0.00</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-49_d91f7b1f9815bd526f7d748cb551cb2f">
<div class="sourceCode cell-code" id="cb67" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1">interactions<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">interact_plot</span>(</span>
<span id="cb67-2">  qs_lm_04,</span>
<span id="cb67-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pred =</span> stress_level,</span>
<span id="cb67-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">modx =</span> occupation,</span>
<span id="cb67-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">interval =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb67-6">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">robust =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb67-7">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">legend.main =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Occupation"</span></span>
<span id="cb67-8">  )</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Again, we do not observe a significant moderation effect of occupation on the relationship between stress level and quality of sleep</p>
</section>
<section id="is-the-relationship-between-physical-activity-and-quality-of-sleep-mediated-by-daily-steps" class="level3">
<h3 class="anchored" data-anchor-id="is-the-relationship-between-physical-activity-and-quality-of-sleep-mediated-by-daily-steps">Is the relationship between physical activity and quality of sleep mediated by daily steps?</h3>
<p>To test this, we are going to run 3 regressions:</p>
<ul>
<li><p>The <strong>total effect</strong> of <em><code>physical_activity_level</code></em> on <em><code>quality_of_sleep</code>.</em></p></li>
<li><p>The effect of <em><code>physical_activity_level</code></em> on <em><code>quality_of_sleep</code></em> that is mediated by <em><code>daily_steps</code></em>, a.k.a. the <strong>indirect effect</strong></p></li>
<li><p>The effect of <em><code>physical_activity_level</code></em> on <em><code>quality_of_sleep</code></em> that is not mediated by <em><code>daily_steps</code></em>, a.k.a. the <strong>direct effect</strong></p></li>
</ul>
<section id="total-effect" class="level4">
<h4 class="anchored" data-anchor-id="total-effect">Total effect</h4>
<p>We first determine the total effect by running a regression of <em>physical_activity_level</em> on <em>quality_of_sleep</em> (without including <em>daily_steps</em>):</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-50_3573a0a52ddaaf48e0fe0dea610f5ccb">
<div class="sourceCode cell-code" id="cb68" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> physical_activity_level, sleep) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb68-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="jrmxhkvgrz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#jrmxhkvgrz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#jrmxhkvgrz thead, #jrmxhkvgrz tbody, #jrmxhkvgrz tfoot, #jrmxhkvgrz tr, #jrmxhkvgrz td, #jrmxhkvgrz th {
  border-style: none;
}

#jrmxhkvgrz p {
  margin: 0;
  padding: 0;
}

#jrmxhkvgrz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#jrmxhkvgrz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#jrmxhkvgrz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#jrmxhkvgrz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#jrmxhkvgrz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jrmxhkvgrz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#jrmxhkvgrz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#jrmxhkvgrz .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#jrmxhkvgrz .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#jrmxhkvgrz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#jrmxhkvgrz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#jrmxhkvgrz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#jrmxhkvgrz .gt_spanner_row {
  border-bottom-style: hidden;
}

#jrmxhkvgrz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#jrmxhkvgrz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#jrmxhkvgrz .gt_from_md > :first-child {
  margin-top: 0;
}

#jrmxhkvgrz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#jrmxhkvgrz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#jrmxhkvgrz .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#jrmxhkvgrz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#jrmxhkvgrz .gt_row_group_first td {
  border-top-width: 2px;
}

#jrmxhkvgrz .gt_row_group_first th {
  border-top-width: 2px;
}

#jrmxhkvgrz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jrmxhkvgrz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#jrmxhkvgrz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#jrmxhkvgrz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#jrmxhkvgrz .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#jrmxhkvgrz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#jrmxhkvgrz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#jrmxhkvgrz .gt_striped {
  background-color: #EDF7FC;
}

#jrmxhkvgrz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#jrmxhkvgrz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jrmxhkvgrz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jrmxhkvgrz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#jrmxhkvgrz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#jrmxhkvgrz .gt_left {
  text-align: left;
}

#jrmxhkvgrz .gt_center {
  text-align: center;
}

#jrmxhkvgrz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#jrmxhkvgrz .gt_font_normal {
  font-weight: normal;
}

#jrmxhkvgrz .gt_font_bold {
  font-weight: bold;
}

#jrmxhkvgrz .gt_font_italic {
  font-style: italic;
}

#jrmxhkvgrz .gt_super {
  font-size: 65%;
}

#jrmxhkvgrz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#jrmxhkvgrz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#jrmxhkvgrz .gt_indent_1 {
  text-indent: 5px;
}

#jrmxhkvgrz .gt_indent_2 {
  text-indent: 10px;
}

#jrmxhkvgrz .gt_indent_3 {
  text-indent: 15px;
}

#jrmxhkvgrz .gt_indent_4 {
  text-indent: 20px;
}

#jrmxhkvgrz .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="term">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="estimate">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="std.error">std.error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="term" class="gt_row gt_left">(Intercept)</td>
<td headers="estimate" class="gt_row gt_right">6.657</td>
<td headers="std.error" class="gt_row gt_right">0.183</td>
<td headers="statistic" class="gt_row gt_right">36.307</td>
<td headers="p.value" class="gt_row gt_right">0.000</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">physical_activity_level</td>
<td headers="estimate" class="gt_row gt_right gt_striped">0.011</td>
<td headers="std.error" class="gt_row gt_right gt_striped">0.003</td>
<td headers="statistic" class="gt_row gt_right gt_striped">3.792</td>
<td headers="p.value" class="gt_row gt_right gt_striped">0.000</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>The total effect is approximately 0.011, meaning that an increase of one unit in physical activity increases sleep quality by 0.001 units on average, not holding daily steps constant.</p>
</section>
<section id="mediatedindirect-effect" class="level4">
<h4 class="anchored" data-anchor-id="mediatedindirect-effect">Mediated/Indirect Effect</h4>
<p>The effect of <em><code>physical_activity_level</code></em> on <em><code>quality_of_sleep</code></em> mediated by <em><code>daily_steps</code></em> can be obtained by multiplying together the effect of <em><code>physical_activity_level</code></em> on <em><code>daily_steps</code></em> and the effect of <em><code>daily_steps</code></em> on <em><code>quality_of_sleep</code></em>.</p>
<section id="physical_activity_level-on-daily_steps-a" class="level5">
<h5 class="anchored" data-anchor-id="physical_activity_level-on-daily_steps-a"><em>1. physical_activity_level</em> on <em>daily_steps (a)</em></h5>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-51_ab0d72acf3be13de7a049c38f496ab70">
<div class="sourceCode cell-code" id="cb69" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(daily_steps <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> physical_activity_level, sleep) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb69-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="gmiubqurtu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gmiubqurtu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gmiubqurtu thead, #gmiubqurtu tbody, #gmiubqurtu tfoot, #gmiubqurtu tr, #gmiubqurtu td, #gmiubqurtu th {
  border-style: none;
}

#gmiubqurtu p {
  margin: 0;
  padding: 0;
}

#gmiubqurtu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gmiubqurtu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gmiubqurtu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gmiubqurtu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gmiubqurtu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gmiubqurtu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#gmiubqurtu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gmiubqurtu .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gmiubqurtu .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gmiubqurtu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gmiubqurtu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gmiubqurtu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gmiubqurtu .gt_spanner_row {
  border-bottom-style: hidden;
}

#gmiubqurtu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gmiubqurtu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#gmiubqurtu .gt_from_md > :first-child {
  margin-top: 0;
}

#gmiubqurtu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gmiubqurtu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#gmiubqurtu .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#gmiubqurtu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gmiubqurtu .gt_row_group_first td {
  border-top-width: 2px;
}

#gmiubqurtu .gt_row_group_first th {
  border-top-width: 2px;
}

#gmiubqurtu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gmiubqurtu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#gmiubqurtu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gmiubqurtu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#gmiubqurtu .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gmiubqurtu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#gmiubqurtu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#gmiubqurtu .gt_striped {
  background-color: #EDF7FC;
}

#gmiubqurtu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#gmiubqurtu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gmiubqurtu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gmiubqurtu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gmiubqurtu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gmiubqurtu .gt_left {
  text-align: left;
}

#gmiubqurtu .gt_center {
  text-align: center;
}

#gmiubqurtu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gmiubqurtu .gt_font_normal {
  font-weight: normal;
}

#gmiubqurtu .gt_font_bold {
  font-weight: bold;
}

#gmiubqurtu .gt_font_italic {
  font-style: italic;
}

#gmiubqurtu .gt_super {
  font-size: 65%;
}

#gmiubqurtu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gmiubqurtu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gmiubqurtu .gt_indent_1 {
  text-indent: 5px;
}

#gmiubqurtu .gt_indent_2 {
  text-indent: 10px;
}

#gmiubqurtu .gt_indent_3 {
  text-indent: 15px;
}

#gmiubqurtu .gt_indent_4 {
  text-indent: 20px;
}

#gmiubqurtu .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="term">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="estimate">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="std.error">std.error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="term" class="gt_row gt_left">(Intercept)</td>
<td headers="estimate" class="gt_row gt_right">3265.57619</td>
<td headers="std.error" class="gt_row gt_right">160.321889</td>
<td headers="statistic" class="gt_row gt_right">20.36887</td>
<td headers="p.value" class="gt_row gt_right">1.718735e-62</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">physical_activity_level</td>
<td headers="estimate" class="gt_row gt_right gt_striped">60.01692</td>
<td headers="std.error" class="gt_row gt_right gt_striped">2.556092</td>
<td headers="statistic" class="gt_row gt_right gt_striped">23.47995</td>
<td headers="p.value" class="gt_row gt_right gt_striped">1.968256e-75</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>One unit increase in <em>physical_activity_level</em> increases <em>daily_steps</em> by an average of 60 steps</p>
</section>
<section id="daily_steps-on-quality_of_sleep" class="level5">
<h5 class="anchored" data-anchor-id="daily_steps-on-quality_of_sleep"><em>2. daily_steps</em> on <em>quality_of_sleep</em></h5>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-52_89b0772b0b365ee6b77f228af0901525">
<div class="sourceCode cell-code" id="cb70" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">lm</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> daily_steps <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> physical_activity_level, sleep) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tidy</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb70-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="iihfnzqqos" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#iihfnzqqos table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#iihfnzqqos thead, #iihfnzqqos tbody, #iihfnzqqos tfoot, #iihfnzqqos tr, #iihfnzqqos td, #iihfnzqqos th {
  border-style: none;
}

#iihfnzqqos p {
  margin: 0;
  padding: 0;
}

#iihfnzqqos .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#iihfnzqqos .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#iihfnzqqos .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#iihfnzqqos .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#iihfnzqqos .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iihfnzqqos .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#iihfnzqqos .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#iihfnzqqos .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#iihfnzqqos .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#iihfnzqqos .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#iihfnzqqos .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#iihfnzqqos .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#iihfnzqqos .gt_spanner_row {
  border-bottom-style: hidden;
}

#iihfnzqqos .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#iihfnzqqos .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#iihfnzqqos .gt_from_md > :first-child {
  margin-top: 0;
}

#iihfnzqqos .gt_from_md > :last-child {
  margin-bottom: 0;
}

#iihfnzqqos .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#iihfnzqqos .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#iihfnzqqos .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#iihfnzqqos .gt_row_group_first td {
  border-top-width: 2px;
}

#iihfnzqqos .gt_row_group_first th {
  border-top-width: 2px;
}

#iihfnzqqos .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iihfnzqqos .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#iihfnzqqos .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#iihfnzqqos .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#iihfnzqqos .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#iihfnzqqos .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#iihfnzqqos .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#iihfnzqqos .gt_striped {
  background-color: #EDF7FC;
}

#iihfnzqqos .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#iihfnzqqos .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iihfnzqqos .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#iihfnzqqos .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#iihfnzqqos .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#iihfnzqqos .gt_left {
  text-align: left;
}

#iihfnzqqos .gt_center {
  text-align: center;
}

#iihfnzqqos .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#iihfnzqqos .gt_font_normal {
  font-weight: normal;
}

#iihfnzqqos .gt_font_bold {
  font-weight: bold;
}

#iihfnzqqos .gt_font_italic {
  font-style: italic;
}

#iihfnzqqos .gt_super {
  font-size: 65%;
}

#iihfnzqqos .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#iihfnzqqos .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#iihfnzqqos .gt_indent_1 {
  text-indent: 5px;
}

#iihfnzqqos .gt_indent_2 {
  text-indent: 10px;
}

#iihfnzqqos .gt_indent_3 {
  text-indent: 15px;
}

#iihfnzqqos .gt_indent_4 {
  text-indent: 20px;
}

#iihfnzqqos .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="term">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="estimate">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="std.error">std.error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="statistic">statistic</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="p.value">p.value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="term" class="gt_row gt_left">(Intercept)</td>
<td headers="estimate" class="gt_row gt_right">7.4500815511</td>
<td headers="std.error" class="gt_row gt_right">2.609352e-01</td>
<td headers="statistic" class="gt_row gt_right">28.551459</td>
<td headers="p.value" class="gt_row gt_right">1.151887e-95</td></tr>
    <tr><td headers="term" class="gt_row gt_left gt_striped">daily_steps</td>
<td headers="estimate" class="gt_row gt_right gt_striped">-0.0002428667</td>
<td headers="std.error" class="gt_row gt_right gt_striped">5.802065e-05</td>
<td headers="statistic" class="gt_row gt_right gt_striped">-4.185867</td>
<td headers="p.value" class="gt_row gt_right gt_striped">3.551189e-05</td></tr>
    <tr><td headers="term" class="gt_row gt_left">physical_activity_level</td>
<td headers="estimate" class="gt_row gt_right">0.0256601109</td>
<td headers="std.error" class="gt_row gt_right">4.506428e-03</td>
<td headers="statistic" class="gt_row gt_right">5.694113</td>
<td headers="p.value" class="gt_row gt_right">2.524969e-08</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>(a * b) = 60.07 * -0.00024 = -0.0144</p>
</section>
</section>
<section id="direct-effect" class="level4">
<h4 class="anchored" data-anchor-id="direct-effect">Direct Effect</h4>
<p>This is simply the coefficient of physical_activity_level in the above regression = 0.0257</p>
<p>According to Zhao <em>et al.,</em> what we have here isCompetitive Mediation (Regularly Partial Mediation)</p>
<p>In the competitive partial mediation hypothesis, it is assumed that the intermediate variable (<em>daily_steps</em>) could sometimes increase and at times decrease the relationship between the independent and dependent variables. i.e an “inconsistent” model.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/images/Zhao et al.PNG" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Decision tree for determining mediation</figcaption>
</figure>
</div>
</section>
</section>
</section>
</section>
<section id="difference-in-means" class="level1">
<h1>Difference in means</h1>
<section id="research-question-are-significant-differences-in-the-mean-sleep-quality-of-both-male-and-female-participants" class="level2">
<h2 class="anchored" data-anchor-id="research-question-are-significant-differences-in-the-mean-sleep-quality-of-both-male-and-female-participants">Research question: are significant differences in the mean sleep quality of both male and female participants</h2>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-53_90cecc37b08277d85e3a9980a1d0f932">
<div class="sourceCode cell-code" id="cb71" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># summary statistics of quality_of_sleep by gender</span></span>
<span id="cb71-2"></span>
<span id="cb71-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">by</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data=</span>sleep<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>quality_of_sleep), sleep<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>gender, psych<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span>describe)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>INDICES: Female
     vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
data    1 185 7.66 1.28      8    7.76 1.48   4   9     5 -0.49    -0.83 0.09
------------------------------------------------------------ 
INDICES: Male
     vars   n mean sd median trimmed  mad min max range  skew kurtosis   se
data    1 189 6.97  1      7    7.01 1.48   4   9     5 -0.35    -0.59 0.07</code></pre>
</div>
</div>
<p>The mean of female participants is one point higher than males. But is this difference significant?</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-54_d755d28614abe5dfa9a597d84fb10d5e">
<div class="sourceCode cell-code" id="cb73" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plotting a violin-errorbar plot to visualise the relationship</span></span>
<span id="cb73-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(sleep, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(gender,quality_of_sleep))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb73-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_violin</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb73-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">stat_summary</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fun.data=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mean_cl_normal"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb73-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>()</span></code></pre></div>
<div class="cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Since the errorbars do not overlap, we can be fairly confident that the difference is significant. Lets confirm this hunch with a Welsh’s t-test.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-55_9e041110f283bc9e7fb43592e9ec1e6e">
<div class="sourceCode cell-code" id="cb74" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t.test</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> gender,</span>
<span id="cb74-2">                    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> sleep,</span>
<span id="cb74-3">                    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">paired =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb74-4">                    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var.equal =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>,</span>
<span id="cb74-5">                    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">conf.level =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.95</span>,</span>
<span id="cb74-6">                    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.action =</span> na.exclude)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Welch Two Sample t-test

data:  quality_of_sleep by gender
t = 5.8593, df = 347.96, p-value = 1.078e-08
alternative hypothesis: true difference in means between group Female and group Male is not equal to 0
95 percent confidence interval:
 0.4627786 0.9304432
sample estimates:
mean in group Female   mean in group Male 
            7.664865             6.968254 </code></pre>
</div>
</div>
<p>Because the <em>p</em>-value = 1.078e-08 is less than our alpha of .05, we can conclude that the difference between both genders is significant. Also, since the confidence interval expressing the true difference in means does not cross zero, we can be confident that there exists a true difference, with a chance of us being wrong 5% of the time.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-56_f601b86ff3241b84ea14576de150fc76">
<div class="sourceCode cell-code" id="cb76" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1">effectsize<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cohens_d</span>(quality_of_sleep <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> gender, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">data =</span> sleep) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gt</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb76-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">opt_stylize</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">style=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"blue"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fmt_number</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decimals=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output-display">

<div id="qtvblorpqy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qtvblorpqy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qtvblorpqy thead, #qtvblorpqy tbody, #qtvblorpqy tfoot, #qtvblorpqy tr, #qtvblorpqy td, #qtvblorpqy th {
  border-style: none;
}

#qtvblorpqy p {
  margin: 0;
  padding: 0;
}

#qtvblorpqy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qtvblorpqy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qtvblorpqy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qtvblorpqy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qtvblorpqy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qtvblorpqy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#qtvblorpqy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qtvblorpqy .gt_col_heading {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qtvblorpqy .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #0076BA;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qtvblorpqy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qtvblorpqy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qtvblorpqy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qtvblorpqy .gt_spanner_row {
  border-bottom-style: hidden;
}

#qtvblorpqy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qtvblorpqy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
  vertical-align: middle;
}

#qtvblorpqy .gt_from_md > :first-child {
  margin-top: 0;
}

#qtvblorpqy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qtvblorpqy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: none;
  border-top-width: 1px;
  border-top-color: #D5D5D5;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D5D5D5;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D5D5D5;
  vertical-align: middle;
  overflow-x: hidden;
}

#qtvblorpqy .gt_stub {
  color: #333333;
  background-color: #89D3FE;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D5D5D5;
  padding-left: 5px;
  padding-right: 5px;
}

#qtvblorpqy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qtvblorpqy .gt_row_group_first td {
  border-top-width: 2px;
}

#qtvblorpqy .gt_row_group_first th {
  border-top-width: 2px;
}

#qtvblorpqy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qtvblorpqy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #5F5F5F;
}

#qtvblorpqy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qtvblorpqy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#qtvblorpqy .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qtvblorpqy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #5F5F5F;
}

#qtvblorpqy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #5F5F5F;
}

#qtvblorpqy .gt_striped {
  background-color: #EDF7FC;
}

#qtvblorpqy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #5F5F5F;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #5F5F5F;
}

#qtvblorpqy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qtvblorpqy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qtvblorpqy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qtvblorpqy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qtvblorpqy .gt_left {
  text-align: left;
}

#qtvblorpqy .gt_center {
  text-align: center;
}

#qtvblorpqy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qtvblorpqy .gt_font_normal {
  font-weight: normal;
}

#qtvblorpqy .gt_font_bold {
  font-weight: bold;
}

#qtvblorpqy .gt_font_italic {
  font-style: italic;
}

#qtvblorpqy .gt_super {
  font-size: 65%;
}

#qtvblorpqy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qtvblorpqy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qtvblorpqy .gt_indent_1 {
  text-indent: 5px;
}

#qtvblorpqy .gt_indent_2 {
  text-indent: 10px;
}

#qtvblorpqy .gt_indent_3 {
  text-indent: 15px;
}

#qtvblorpqy .gt_indent_4 {
  text-indent: 20px;
}

#qtvblorpqy .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Cohens_d">Cohens_d</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="CI">CI</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="CI_low">CI_low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="CI_high">CI_high</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="Cohens_d" class="gt_row gt_right">0.608</td>
<td headers="CI" class="gt_row gt_right">0.950</td>
<td headers="CI_low" class="gt_row gt_right">0.400</td>
<td headers="CI_high" class="gt_row gt_right">0.815</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>On average, female participants have better sleep quality (<em>M</em>&nbsp;= 7.66,&nbsp;<em>SE</em>&nbsp;= 0.09), than those not given a cloak (<em>M</em>&nbsp;= 6.97,&nbsp;<em>SE</em>&nbsp;= 0.07). Sleep quality is significantly different for both genders: the mean difference,&nbsp;<em>M</em>&nbsp;= 0.69, 95% CI [0.46, 0.93], was significantly different from 0,&nbsp;<em>t</em>(347.96) = 5.85,&nbsp;<em>p</em>&nbsp;= 01.078e-08. This effect was quite large, d= 0.61[0.4, 0.82]</p>
</div>
</div>
</section>
<section id="conclusion-1" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-1">Conclusion</h2>
<p>I created this post as a way of solidifying my understanding of these concepts. I find that documenting the material helps it to stick iwth me better. I hope that you find this helpful. My deepest gratitude goes to Andy Field for his exceptional book on statistical analysis with R.</p>


</section>
</section>

 ]]></description>
  <category>stats</category>
  <category>causal regression modelling</category>
  <guid>https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/index.html</guid>
  <pubDate>Fri, 17 Nov 2023 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2023-11-18_sleep-disorders/image.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Leads Acquisition Analysis</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2023_03_23_toptal-analytics/index.html</link>
  <description><![CDATA[ 




<section id="about-the-project" class="level2">
<h2 class="anchored" data-anchor-id="about-the-project">About The Project 🍪</h2>
<p>Live Demo: <a href="https://public.tableau.com/views/toptal-analytics/Dashboard?:language=en-GB&amp;:display_count=n&amp;:origin=viz_share_link">here</a></p>
<div>
<div id="viz1704585184473" class="tableauPlaceholder" style="position: relative">
<noscript>
<img src="https://joshuaolubori.onrender.com/posts/2023_03_23_toptal-analytics/https:/public.tableau.com/static/images/to/toptal-analytics/Dashboard/1_rss.png" alt="Dashboard " style="border: none">
</noscript>

<object class="tableauViz" style="display:none;">
<p><param name="host_url" value="https%3A%2F%2Fpublic.tableau.com%2F"> <param name="embed_code_version" value="3"> <param name="site_root" value=""><param name="name" value="toptal-analytics/Dashboard"><param name="tabs" value="no"><param name="toolbar" value="yes"><param name="static_image" value="https://public.tableau.com/static/images/to/toptal-analytics/Dashboard/1.png"> <param name="animate_transition" value="yes"><param name="display_static_image" value="yes"><param name="display_spinner" value="yes"><param name="display_overlay" value="yes"><param name="display_count" value="yes"><param name="language" value="en-GB"></p>
</object>
</div>
</div>

<script type="text/javascript">                    var divElement = document.getElementById('viz1704585184473');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1000px';vizElement.style.height='1227px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1000px';vizElement.style.height='1227px';} else { vizElement.style.width='100%';vizElement.style.height='2077px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
<section id="overview" class="level3">
<h3 class="anchored" data-anchor-id="overview">Overview</h3>
<p>Assume that you are partnering with Toptal’s Growth team; a highly analytical, experimental team that is responsible for growing Toptal’s revenue by scaling and optimizing client acquisition channels. The growth team wants your help in measuring and reporting on their business performance.</p>
<p>For this exercise, 2 datasets are provided. GrowthOperations.csv consists of all the leads that Toptal’s Growth Team has obtained over the past 48 weeks. GrowthSpend.csv shows how much the Growth Team has spent each week on each client acquisition channel over the past 48 weeks.</p>
</section>
<section id="tasks" class="level3">
<h3 class="anchored" data-anchor-id="tasks">Tasks</h3>
<ol type="1">
<li><p>Choose appropriate KPIs you recommend the Growth team use to measure their performance.</p></li>
<li><p>Design a dashboard that the Growth team can use to regularly monitor performance You can choose to use SQL, Microsoft Excel, Google Sheets, or any data manipulation tool to analyze the data. But you need to use Tableau to build the dashboard. ○ The purpose of the exercise is to choose and define meaningful KPIs and insights, to be presented in an effective design, using Tableau as a tool. ○ Feel free to include any additional documents or sheets you create to analyze the data, in addition to the Tableau file.</p></li>
<li><p>Prepare slide for a presentation on the following: ● An Executive Summary on the Growth team performance ○ Include specific recommendations for improving performance. Why did you make these recommendations?</p></li>
</ol>
<p>● A more detailed dive into Growth’s team performance over the past 48 weeks: ○ Identify and discuss the most problematic channel. Why is it the most problematic? ○ Are there major shifts in performance over time? ○ In what ways does lead priority predict the way in which leads will move through the funnel? ● Definitions of the KPIs you have chosen and explain why you chose them ● Screenshots of your dashboard design showing overall layout and functionality ● A list of any assumptions you made and the justification of why you think they are reasonable</p>
</section>
<section id="definitions" class="level3">
<h3 class="anchored" data-anchor-id="definitions">Definitions</h3>
<p>● Lead: A company that has signed up on Toptal.com and is interested in learning more about Toptal. ● Verified: A company that has provided us their billing information after having a call with a sales representative. Treat this as a strong indicator that they are going to convert into a paying client. This is the primary metric that the Growth Team is responsible for on a weekly basis. ● Lead Priority: A priority assigned to each lead according to a machine learning algorithm that indicates how likely the lead is to become a Verified, based on Toptal’s historical data. Leads are treated differently by the sales team according to which priority they are assigned. ● Time Until Verification: The time from when a company signs up as a Lead until it turns into a Verified. ● Channel: The client acquisition channel through which this company found out about Toptal (i.e.&nbsp;How they ended up on Toptal.com). ● Display: Leads coming in from display advertising. For example, the Google Display Network. ● AdWords: Leads coming in from Google AdWords, a paid search channel. ● Organic: Leads coming in from Google organic (unpaid) search results. Since this is not an advertising channel, the weekly spend here is always $0. ● LinkedIn: Leads coming in from the LinkedIn advertising platform.</p>
<p>The visual can be viewed and interacted with at <a href="https://public.tableau.com/views/toptal-analytics/Dashboard?:language=en-GB&amp;:display_count=n&amp;:origin=viz_share_link">link</a></p>
<p>The link to the slides can be found <a href="https://docs.google.com/presentation/d/1TiRQhkx97wa-Aj8XFFGiejtjXH2UQKiZ/edit?usp=drive_link&amp;ouid=114194024907032392859&amp;rtpof=true&amp;sd=true">here</a></p>
</section>
</section>
<section id="contact" class="level2">
<h2 class="anchored" data-anchor-id="contact">Contact</h2>
<p>Edun Joshua Olubori - <a href="https://www.linkedin.com/in/joshua-edun">connect on linkedin</a> - joshuaolubori@gmail.com</p>


</section>

 ]]></description>
  <category>Tableau</category>
  <category>data visualisation</category>
  <guid>https://joshuaolubori.onrender.com/posts/2023_03_23_toptal-analytics/index.html</guid>
  <pubDate>Wed, 22 Mar 2023 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2023_03_23_toptal-analytics/dashboard.png" medium="image" type="image/png" height="173" width="144"/>
</item>
<item>
  <title>Visualising call centre data trends</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2023_03_16_pwc-call-centre-trends/index.html</link>
  <description><![CDATA[ 




<section id="about-the-project" class="level2">
<h2 class="anchored" data-anchor-id="about-the-project">About The Project 🍪</h2>
<p>Live Demo: <a href="https://public.tableau.com/app/profile/joshua1294/viz/pwc-call-centre-trends/Dashboard">here</a></p>
<div>
<div id="viz1704583120576" class="tableauPlaceholder" style="position: relative">
<noscript>
<img src="https://joshuaolubori.onrender.com/posts/2023_03_16_pwc-call-centre-trends/https:/public.tableau.com/static/images/pw/pwc-call-centre-trends/Dashboard/1_rss.png" alt="Good Morning, Manager! " style="border: none">
</noscript>

<object class="tableauViz" style="display:none;">
<p><param name="host_url" value="https%3A%2F%2Fpublic.tableau.com%2F"> <param name="embed_code_version" value="3"> <param name="site_root" value=""><param name="name" value="pwc-call-centre-trends/Dashboard"><param name="tabs" value="no"><param name="toolbar" value="yes"><param name="static_image" value="https://public.tableau.com/static/images/pw/pwc-call-centre-trends/Dashboard/1.png"> <param name="animate_transition" value="yes"><param name="display_static_image" value="yes"><param name="display_spinner" value="yes"><param name="display_overlay" value="yes"><param name="display_count" value="yes"><param name="language" value="en-GB"></p>
</object>
</div>
</div>

<script type="text/javascript">                    var divElement = document.getElementById('viz1704583120576');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1300px';vizElement.style.height='827px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1300px';vizElement.style.height='827px';} else { vizElement.style.width='100%';vizElement.style.height='1727px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
<p>I designed this dashboard as part of a PwC Switzerland Virtual Internship Program.</p>
<p>My design considerations included 5 KPIs I came up with from the dataset: Number of calls answered, Number of calls abandoned, Average speed taken to answer calls, Average cal duration and Average satisfaction rating. After defining the KPIs, I translated them to Tableau code and implemented them.</p>
<p>I designed 3 filter element that allowed easy filtering by date, call topic and call agent.</p>
<p>One KPI of note is the Agent performance. The agent performance quadrant allows performance to be measured across two dimensions, average calls answered by the agent and the average call duration of their calls.</p>
<p>The visual can be viewed and interacted with at <a href="https://public.tableau.com/views/pwc-call-centre-trends/Dashboard?:language=en-GB&amp;:display_count=n&amp;:origin=viz_share_link">link</a></p>
</section>
<section id="contact" class="level2">
<h2 class="anchored" data-anchor-id="contact">Contact</h2>
<p>Edun Joshua Olubori - <a href="https://www.linkedin.com/in/joshua-edun">connect on linkedin</a> - joshuaolubori@gmail.com</p>


</section>

 ]]></description>
  <category>Tableau</category>
  <category>data visualisation</category>
  <guid>https://joshuaolubori.onrender.com/posts/2023_03_16_pwc-call-centre-trends/index.html</guid>
  <pubDate>Wed, 15 Mar 2023 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2023_03_16_pwc-call-centre-trends/dashboard.png" medium="image" type="image/png" height="89" width="144"/>
</item>
<item>
  <title>Project: Analyzing Trends in Gun Sales Data across the U.S.</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The data comes from the FBI’s National Instant Criminal Background Check System. The NICS is used by to determine whether a prospective buyer is eligible to buy firearms or explosives. Gun shops call into this system to ensure that each customer does not have a criminal record or isn’t otherwise ineligible to make a purchase. The data has been supplemented with state level data from census.gov.</p>
<blockquote class="blockquote">
<p>Mandated by the Brady Handgun Violence Prevention Act of 1993 and launched by the FBI on November 30, 1998, NICS is used by Federal Firearms Licensees (FFLs) to instantly determine whether a prospective buyer is eligible to buy firearms or explosives. Before ringing up the sale, cashiers call in a check to the FBI or to other designated agencies to ensure that each customer does not have a criminal record or isn’t otherwise ineligible to make a purchase. More than 100 million such checks have been made in the last decade, leading to more than 700,000 denials.</p>
</blockquote>
<p>These statistics represent the number of firearm background checks initiated through the NICS. They do not represent the number of firearms sold. According to The Trace, 2015: The FBI’s background check numbers come with caveats: As seen in the late February-early March 2014 bubble, many checks are for concealed carry permits, not actual gun sales. Kentucky runs a new check on each concealed carry license holder each month. And of course, the FBI’s numbers don’t include private gun sales, many of which do not require a background check. Despite those vagaries, the FBI’s NICS numbers are widely accepted as <strong>the best proxy for total gun sales</strong> in a given time period.</p>
<p>In 2015, New York Times ran a similar analysis with the data and estimated sales from background checks with a method suggested by a researcher.</p>
<p>According to them:</p>
<blockquote class="blockquote">
<p>To convert background checks into estimated sales, we relied on a method suggested in the Small Arms Survey by Jurgen Brauer, a professor at Georgia Regents University. Each long gun and handgun check was counted as 1.1 sales. Each multiple-gun check was counted as two sales. Permit checks and other types of checks were omitted. The multiplier is an estimate based on Mr.&nbsp;Brauer’s interviews with gun shop owners.</p>
</blockquote>
<p>This is the method I applied in this analysis.</p>
<p>The NICS is in a wide format and contains a total of 23 variables, out of which I deem only 5 is relevant to this analysis:</p>
<ul>
<li><p>month (monthly data from November 1998 to September 2017)</p></li>
<li><p>state (55 U.S. states and offshore territories)</p></li>
<li><p>handgun (number of check calls)</p></li>
<li><p>long-gun (number of check calls)</p></li>
<li><p>multiple (number of check calls)</p></li>
</ul>
<p>The census data is a wide-table format data with 66 variables measuring quantities for 50 U.S. states. I have selected only 18 variables that I deem relevant to this analysis. The starred variables are just a few of the variables that are present in the raw data that I will not include in this analysis.</p>
<table class="table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>s/n</th>
<th>Variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
</tr>
<tr class="even">
<td>2</td>
<td>Persons under 18 years, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="odd">
<td>3</td>
<td>Persons 65 years and over, percent, July 1, 2016,(V2016)</td>
</tr>
<tr class="even">
<td>4</td>
<td>Female persons, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="odd">
<td>5</td>
<td>White alone, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="even">
<td>6</td>
<td>Black or African American alone, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="odd">
<td>7</td>
<td>Asian alone, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="even">
<td>8</td>
<td>Median value of owner-occupied housing units, 2011-2015</td>
</tr>
<tr class="odd">
<td>9</td>
<td>Median gross rent, 2011-2015</td>
</tr>
<tr class="even">
<td>10</td>
<td>Persons per household, 2011-2015</td>
</tr>
<tr class="odd">
<td>11</td>
<td>High school graduate or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="even">
<td>12</td>
<td>Bachelor’s degree or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="odd">
<td>13</td>
<td>Persons without health insurance, under age 65 years, percent</td>
</tr>
<tr class="even">
<td>14</td>
<td>Median household income (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="odd">
<td>15</td>
<td>Per capita income in past 12 months (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="even">
<td>16</td>
<td>Persons in poverty, percent</td>
</tr>
<tr class="odd">
<td>17</td>
<td>All firms, 2012</td>
</tr>
<tr class="even">
<td>*</td>
<td>Persons under 5 years, percent, July 1, 2016, (V2016)</td>
</tr>
<tr class="odd">
<td>*</td>
<td>Minority-owned firms, 2012</td>
</tr>
<tr class="even">
<td>*</td>
<td>Population per square mile, 2010</td>
</tr>
<tr class="odd">
<td>*</td>
<td>Total employer establishments, 2015</td>
</tr>
<tr class="even">
<td>*</td>
<td>Total employment, 2015</td>
</tr>
<tr class="odd">
<td>*</td>
<td>Total annual payroll, 2015 ($1,000)</td>
</tr>
<tr class="even">
<td>*</td>
<td>Total employment, percent change, 2014-2015</td>
</tr>
<tr class="odd">
<td>*</td>
<td>Total nonemployer establishments, 2015</td>
</tr>
</tbody>
</table>
<p>The 18th variable is state but in the raw data, it would have to be created by transposing the dataframe. The starred variables are just some of the ones I deem irrelevant.</p>
</section>
<section id="research-questions" class="level2">
<h2 class="anchored" data-anchor-id="research-questions">Research Questions</h2>
<p><em>In this analysis, I will answer the following research questions</em>:</p>
<blockquote class="blockquote">
<ul>
<li><em>How many guns were sold in the U.S. in selected years?</em></li>
<li><em>What kind of gun was bought the most in those years?</em></li>
<li><em>What are the overall monthly trends of gun purchases in those years?</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><p><em>What are the top 5 states in terms of gun purchases in the U.S. in those years?</em></p></li>
<li><p><em>What are the most bought gun types in those states?</em></p></li>
<li><p><em>What kind of gun was bought the most in one of those states?</em></p></li>
<li><p><em>What are the overall monthly trends of gun purchases in those states?</em></p></li>
<li><p><em>Which states had the highest growth in gun sales over the span of a decade?</em></p></li>
</ul>
</blockquote>
</section>
<section id="data-wrangling-a" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling-a">Data Wrangling (a)</h2>
<section id="general-properties" class="level3">
<h3 class="anchored" data-anchor-id="general-properties">General Properties</h3>
<p><em>Loading and inspecting the census data</em></p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Importing packages.</span></span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd, numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt, seaborn <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sns</span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#% matplotlib inline</span></span>
<span id="cb1-5"></span>
<span id="cb1-6">df_census_raw <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/US_Census_Data.csv'</span>)</span>
<span id="cb1-7">df_census_raw.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Fact</th>
<th data-quarto-table-cell-role="th">Fact Note</th>
<th data-quarto-table-cell-role="th">Alabama</th>
<th data-quarto-table-cell-role="th">Alaska</th>
<th data-quarto-table-cell-role="th">Arizona</th>
<th data-quarto-table-cell-role="th">Arkansas</th>
<th data-quarto-table-cell-role="th">California</th>
<th data-quarto-table-cell-role="th">Colorado</th>
<th data-quarto-table-cell-role="th">Connecticut</th>
<th data-quarto-table-cell-role="th">Delaware</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">South Dakota</th>
<th data-quarto-table-cell-role="th">Tennessee</th>
<th data-quarto-table-cell-role="th">Texas</th>
<th data-quarto-table-cell-role="th">Utah</th>
<th data-quarto-table-cell-role="th">Vermont</th>
<th data-quarto-table-cell-role="th">Virginia</th>
<th data-quarto-table-cell-role="th">Washington</th>
<th data-quarto-table-cell-role="th">West Virginia</th>
<th data-quarto-table-cell-role="th">Wisconsin</th>
<th data-quarto-table-cell-role="th">Wyoming</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>NaN</td>
<td>4,863,300</td>
<td>741,894</td>
<td>6,931,071</td>
<td>2,988,248</td>
<td>39,250,017</td>
<td>5,540,545</td>
<td>3,576,452</td>
<td>952,065</td>
<td>...</td>
<td>865454</td>
<td>6651194</td>
<td>27,862,596</td>
<td>3,051,217</td>
<td>624,594</td>
<td>8,411,808</td>
<td>7,288,000</td>
<td>1,831,102</td>
<td>5,778,708</td>
<td>585,501</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>NaN</td>
<td>4,780,131</td>
<td>710,249</td>
<td>6,392,301</td>
<td>2,916,025</td>
<td>37,254,522</td>
<td>5,029,324</td>
<td>3,574,114</td>
<td>897,936</td>
<td>...</td>
<td>814195</td>
<td>6346298</td>
<td>25,146,100</td>
<td>2,763,888</td>
<td>625,741</td>
<td>8,001,041</td>
<td>6,724,545</td>
<td>1,853,011</td>
<td>5,687,289</td>
<td>563,767</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>NaN</td>
<td>1.70%</td>
<td>4.50%</td>
<td>8.40%</td>
<td>2.50%</td>
<td>5.40%</td>
<td>10.20%</td>
<td>0.10%</td>
<td>6.00%</td>
<td>...</td>
<td>0.063</td>
<td>0.048</td>
<td>10.80%</td>
<td>10.40%</td>
<td>-0.20%</td>
<td>5.10%</td>
<td>8.40%</td>
<td>-1.20%</td>
<td>1.60%</td>
<td>3.90%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Population, Census, April 1, 2010</td>
<td>NaN</td>
<td>4,779,736</td>
<td>710,231</td>
<td>6,392,017</td>
<td>2,915,918</td>
<td>37,253,956</td>
<td>5,029,196</td>
<td>3,574,097</td>
<td>897,934</td>
<td>...</td>
<td>814180</td>
<td>6346105</td>
<td>25,145,561</td>
<td>2,763,885</td>
<td>625,741</td>
<td>8,001,024</td>
<td>6,724,540</td>
<td>1,852,994</td>
<td>5,686,986</td>
<td>563,626</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>NaN</td>
<td>6.00%</td>
<td>7.30%</td>
<td>6.30%</td>
<td>6.40%</td>
<td>6.30%</td>
<td>6.10%</td>
<td>5.20%</td>
<td>5.80%</td>
<td>...</td>
<td>0.071</td>
<td>0.061</td>
<td>7.20%</td>
<td>8.30%</td>
<td>4.90%</td>
<td>6.10%</td>
<td>6.20%</td>
<td>5.50%</td>
<td>5.80%</td>
<td>6.50%</td>
</tr>
</tbody>
</table>

<p>5 rows × 52 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># shape of the dataframe</span></span>
<span id="cb2-2">df_census_raw.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>(85, 52)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># viewing all columns in the dataframe</span></span>
<span id="cb4-2">df_census_raw.columns</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>Index(['Fact', 'Fact Note', 'Alabama', 'Alaska', 'Arizona', 'Arkansas',
       'California', 'Colorado', 'Connecticut', 'Delaware', 'Florida',
       'Georgia', 'Hawaii', 'Idaho', 'Illinois', 'Indiana', 'Iowa', 'Kansas',
       'Kentucky', 'Louisiana', 'Maine', 'Maryland', 'Massachusetts',
       'Michigan', 'Minnesota', 'Mississippi', 'Missouri', 'Montana',
       'Nebraska', 'Nevada', 'New Hampshire', 'New Jersey', 'New Mexico',
       'New York', 'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma',
       'Oregon', 'Pennsylvania', 'Rhode Island', 'South Carolina',
       'South Dakota', 'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia',
       'Washington', 'West Virginia', 'Wisconsin', 'Wyoming'],
      dtype='object')</code></pre>
</div>
</div>
<section id="dropping-irrelevant-columns" class="level4">
<h4 class="anchored" data-anchor-id="dropping-irrelevant-columns">Dropping Irrelevant Columns</h4>
<p>In this section, I will drop all irrelevant columns from the census dataset, reshape the dataframe and then rename columns for clarity</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dropping the 'Fact Note' column</span></span>
<span id="cb6-2">df_census_raw.drop(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Fact Note'</span>, axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb6-3">df_census_raw.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Fact</th>
<th data-quarto-table-cell-role="th">Alabama</th>
<th data-quarto-table-cell-role="th">Alaska</th>
<th data-quarto-table-cell-role="th">Arizona</th>
<th data-quarto-table-cell-role="th">Arkansas</th>
<th data-quarto-table-cell-role="th">California</th>
<th data-quarto-table-cell-role="th">Colorado</th>
<th data-quarto-table-cell-role="th">Connecticut</th>
<th data-quarto-table-cell-role="th">Delaware</th>
<th data-quarto-table-cell-role="th">Florida</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">South Dakota</th>
<th data-quarto-table-cell-role="th">Tennessee</th>
<th data-quarto-table-cell-role="th">Texas</th>
<th data-quarto-table-cell-role="th">Utah</th>
<th data-quarto-table-cell-role="th">Vermont</th>
<th data-quarto-table-cell-role="th">Virginia</th>
<th data-quarto-table-cell-role="th">Washington</th>
<th data-quarto-table-cell-role="th">West Virginia</th>
<th data-quarto-table-cell-role="th">Wisconsin</th>
<th data-quarto-table-cell-role="th">Wyoming</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>4,863,300</td>
<td>741,894</td>
<td>6,931,071</td>
<td>2,988,248</td>
<td>39,250,017</td>
<td>5,540,545</td>
<td>3,576,452</td>
<td>952,065</td>
<td>20,612,439</td>
<td>...</td>
<td>865454</td>
<td>6651194</td>
<td>27,862,596</td>
<td>3,051,217</td>
<td>624,594</td>
<td>8,411,808</td>
<td>7,288,000</td>
<td>1,831,102</td>
<td>5,778,708</td>
<td>585,501</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>4,780,131</td>
<td>710,249</td>
<td>6,392,301</td>
<td>2,916,025</td>
<td>37,254,522</td>
<td>5,029,324</td>
<td>3,574,114</td>
<td>897,936</td>
<td>18,804,592</td>
<td>...</td>
<td>814195</td>
<td>6346298</td>
<td>25,146,100</td>
<td>2,763,888</td>
<td>625,741</td>
<td>8,001,041</td>
<td>6,724,545</td>
<td>1,853,011</td>
<td>5,687,289</td>
<td>563,767</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>1.70%</td>
<td>4.50%</td>
<td>8.40%</td>
<td>2.50%</td>
<td>5.40%</td>
<td>10.20%</td>
<td>0.10%</td>
<td>6.00%</td>
<td>9.60%</td>
<td>...</td>
<td>0.063</td>
<td>0.048</td>
<td>10.80%</td>
<td>10.40%</td>
<td>-0.20%</td>
<td>5.10%</td>
<td>8.40%</td>
<td>-1.20%</td>
<td>1.60%</td>
<td>3.90%</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Population, Census, April 1, 2010</td>
<td>4,779,736</td>
<td>710,231</td>
<td>6,392,017</td>
<td>2,915,918</td>
<td>37,253,956</td>
<td>5,029,196</td>
<td>3,574,097</td>
<td>897,934</td>
<td>18,801,310</td>
<td>...</td>
<td>814180</td>
<td>6346105</td>
<td>25,145,561</td>
<td>2,763,885</td>
<td>625,741</td>
<td>8,001,024</td>
<td>6,724,540</td>
<td>1,852,994</td>
<td>5,686,986</td>
<td>563,626</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>6.00%</td>
<td>7.30%</td>
<td>6.30%</td>
<td>6.40%</td>
<td>6.30%</td>
<td>6.10%</td>
<td>5.20%</td>
<td>5.80%</td>
<td>5.50%</td>
<td>...</td>
<td>0.071</td>
<td>0.061</td>
<td>7.20%</td>
<td>8.30%</td>
<td>4.90%</td>
<td>6.10%</td>
<td>6.20%</td>
<td>5.50%</td>
<td>5.80%</td>
<td>6.50%</td>
</tr>
</tbody>
</table>

<p>5 rows × 51 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reshaping the dataframe</span></span>
<span id="cb7-2">df_T <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_census_raw.transpose(copy<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># observing the result</span></span>
<span id="cb8-2">df_T.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
<th data-quarto-table-cell-role="th">2</th>
<th data-quarto-table-cell-role="th">3</th>
<th data-quarto-table-cell-role="th">4</th>
<th data-quarto-table-cell-role="th">5</th>
<th data-quarto-table-cell-role="th">6</th>
<th data-quarto-table-cell-role="th">7</th>
<th data-quarto-table-cell-role="th">8</th>
<th data-quarto-table-cell-role="th">9</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">75</th>
<th data-quarto-table-cell-role="th">76</th>
<th data-quarto-table-cell-role="th">77</th>
<th data-quarto-table-cell-role="th">78</th>
<th data-quarto-table-cell-role="th">79</th>
<th data-quarto-table-cell-role="th">80</th>
<th data-quarto-table-cell-role="th">81</th>
<th data-quarto-table-cell-role="th">82</th>
<th data-quarto-table-cell-role="th">83</th>
<th data-quarto-table-cell-role="th">84</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Fact</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>Population, Census, April 1, 2010</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>Persons under 5 years, percent, April 1, 2010</td>
<td>Persons under 18 years, percent, July 1, 2016,...</td>
<td>Persons under 18 years, percent, April 1, 2010</td>
<td>Persons 65 years and over, percent, July 1, 2...</td>
<td>Persons 65 years and over, percent, April 1, 2010</td>
<td>...</td>
<td>NaN</td>
<td>Value Flags</td>
<td>-</td>
<td>D</td>
<td>F</td>
<td>FN</td>
<td>NaN</td>
<td>S</td>
<td>X</td>
<td>Z</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>5 rows × 85 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking out the new shape</span></span>
<span id="cb9-2">df_T.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>(51, 85)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># selecting the columns of interest</span></span>
<span id="cb11-2">df_T <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_T.iloc[:, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">65</span>]</span>
<span id="cb11-3">df_T.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
<th data-quarto-table-cell-role="th">2</th>
<th data-quarto-table-cell-role="th">3</th>
<th data-quarto-table-cell-role="th">4</th>
<th data-quarto-table-cell-role="th">5</th>
<th data-quarto-table-cell-role="th">6</th>
<th data-quarto-table-cell-role="th">7</th>
<th data-quarto-table-cell-role="th">8</th>
<th data-quarto-table-cell-role="th">9</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">55</th>
<th data-quarto-table-cell-role="th">56</th>
<th data-quarto-table-cell-role="th">57</th>
<th data-quarto-table-cell-role="th">58</th>
<th data-quarto-table-cell-role="th">59</th>
<th data-quarto-table-cell-role="th">60</th>
<th data-quarto-table-cell-role="th">61</th>
<th data-quarto-table-cell-role="th">62</th>
<th data-quarto-table-cell-role="th">63</th>
<th data-quarto-table-cell-role="th">64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Fact</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>Population, Census, April 1, 2010</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>Persons under 5 years, percent, April 1, 2010</td>
<td>Persons under 18 years, percent, July 1, 2016,...</td>
<td>Persons under 18 years, percent, April 1, 2010</td>
<td>Persons 65 years and over, percent, July 1, 2...</td>
<td>Persons 65 years and over, percent, April 1, 2010</td>
<td>...</td>
<td>All firms, 2012</td>
<td>Men-owned firms, 2012</td>
<td>Women-owned firms, 2012</td>
<td>Minority-owned firms, 2012</td>
<td>Nonminority-owned firms, 2012</td>
<td>Veteran-owned firms, 2012</td>
<td>Nonveteran-owned firms, 2012</td>
<td>Population per square mile, 2010</td>
<td>Land area in square miles, 2010</td>
<td>FIPS Code</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>374,153</td>
<td>203,604</td>
<td>137,630</td>
<td>92,219</td>
<td>272,651</td>
<td>41,943</td>
<td>316,984</td>
<td>94.4</td>
<td>50,645.33</td>
<td>"01"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>68,032</td>
<td>35,402</td>
<td>22,141</td>
<td>13,688</td>
<td>51,147</td>
<td>7,953</td>
<td>56,091</td>
<td>1.2</td>
<td>570,640.95</td>
<td>"02"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>499,926</td>
<td>245,243</td>
<td>182,425</td>
<td>135,313</td>
<td>344,981</td>
<td>46,780</td>
<td>427,582</td>
<td>56.3</td>
<td>113,594.08</td>
<td>"04"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>231,959</td>
<td>123,158</td>
<td>75,962</td>
<td>35,982</td>
<td>189,029</td>
<td>25,915</td>
<td>192,988</td>
<td>56</td>
<td>52,035.48</td>
<td>"05"</td>
</tr>
</tbody>
</table>

<p>5 rows × 65 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1">columns <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_T.iloc[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, :]</span>
<span id="cb12-2">df_T.rename(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>columns, inplace <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb12-3">df_T.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population estimates, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population estimates base, April 1, 2010, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, percent change - April 1, 2010 (estimates base) to July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, Census, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">All firms, 2012</th>
<th data-quarto-table-cell-role="th">Men-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Women-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Minority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonminority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Veteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonveteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Population per square mile, 2010</th>
<th data-quarto-table-cell-role="th">Land area in square miles, 2010</th>
<th data-quarto-table-cell-role="th">FIPS Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Fact</td>
<td>Population estimates, July 1, 2016, (V2016)</td>
<td>Population estimates base, April 1, 2010, (V2...</td>
<td>Population, percent change - April 1, 2010 (es...</td>
<td>Population, Census, April 1, 2010</td>
<td>Persons under 5 years, percent, July 1, 2016, ...</td>
<td>Persons under 5 years, percent, April 1, 2010</td>
<td>Persons under 18 years, percent, July 1, 2016,...</td>
<td>Persons under 18 years, percent, April 1, 2010</td>
<td>Persons 65 years and over, percent, July 1, 2...</td>
<td>Persons 65 years and over, percent, April 1, 2010</td>
<td>...</td>
<td>All firms, 2012</td>
<td>Men-owned firms, 2012</td>
<td>Women-owned firms, 2012</td>
<td>Minority-owned firms, 2012</td>
<td>Nonminority-owned firms, 2012</td>
<td>Veteran-owned firms, 2012</td>
<td>Nonveteran-owned firms, 2012</td>
<td>Population per square mile, 2010</td>
<td>Land area in square miles, 2010</td>
<td>FIPS Code</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>374,153</td>
<td>203,604</td>
<td>137,630</td>
<td>92,219</td>
<td>272,651</td>
<td>41,943</td>
<td>316,984</td>
<td>94.4</td>
<td>50,645.33</td>
<td>"01"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>68,032</td>
<td>35,402</td>
<td>22,141</td>
<td>13,688</td>
<td>51,147</td>
<td>7,953</td>
<td>56,091</td>
<td>1.2</td>
<td>570,640.95</td>
<td>"02"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>499,926</td>
<td>245,243</td>
<td>182,425</td>
<td>135,313</td>
<td>344,981</td>
<td>46,780</td>
<td>427,582</td>
<td>56.3</td>
<td>113,594.08</td>
<td>"04"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>231,959</td>
<td>123,158</td>
<td>75,962</td>
<td>35,982</td>
<td>189,029</td>
<td>25,915</td>
<td>192,988</td>
<td>56</td>
<td>52,035.48</td>
<td>"05"</td>
</tr>
</tbody>
</table>

<p>5 rows × 65 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dropping redundant column index</span></span>
<span id="cb13-2">df_T.drop(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Fact'</span>, axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb13-3">df_T.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population estimates, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population estimates base, April 1, 2010, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, percent change - April 1, 2010 (estimates base) to July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, Census, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">All firms, 2012</th>
<th data-quarto-table-cell-role="th">Men-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Women-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Minority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonminority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Veteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonveteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Population per square mile, 2010</th>
<th data-quarto-table-cell-role="th">Land area in square miles, 2010</th>
<th data-quarto-table-cell-role="th">FIPS Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>374,153</td>
<td>203,604</td>
<td>137,630</td>
<td>92,219</td>
<td>272,651</td>
<td>41,943</td>
<td>316,984</td>
<td>94.4</td>
<td>50,645.33</td>
<td>"01"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>68,032</td>
<td>35,402</td>
<td>22,141</td>
<td>13,688</td>
<td>51,147</td>
<td>7,953</td>
<td>56,091</td>
<td>1.2</td>
<td>570,640.95</td>
<td>"02"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>499,926</td>
<td>245,243</td>
<td>182,425</td>
<td>135,313</td>
<td>344,981</td>
<td>46,780</td>
<td>427,582</td>
<td>56.3</td>
<td>113,594.08</td>
<td>"04"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>231,959</td>
<td>123,158</td>
<td>75,962</td>
<td>35,982</td>
<td>189,029</td>
<td>25,915</td>
<td>192,988</td>
<td>56</td>
<td>52,035.48</td>
<td>"05"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>39,250,017</td>
<td>37,254,522</td>
<td>5.40%</td>
<td>37,253,956</td>
<td>6.30%</td>
<td>6.80%</td>
<td>23.20%</td>
<td>25.00%</td>
<td>13.60%</td>
<td>11.40%</td>
<td>...</td>
<td>3,548,449</td>
<td>1,852,580</td>
<td>1,320,085</td>
<td>1,619,857</td>
<td>1,819,107</td>
<td>252,377</td>
<td>3,176,341</td>
<td>239.1</td>
<td>155,779.22</td>
<td>"06"</td>
</tr>
</tbody>
</table>

<p>5 rows × 65 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># inspecting the shape of the reshaped dataframe</span></span>
<span id="cb14-2">df_T.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>(50, 65)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># inspecting all states present in the census data</span></span>
<span id="cb16-2">state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_T.index</span>
<span id="cb16-3">state</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>Index(['Alabama', 'Alaska', 'Arizona', 'Arkansas', 'California', 'Colorado',
       'Connecticut', 'Delaware', 'Florida', 'Georgia', 'Hawaii', 'Idaho',
       'Illinois', 'Indiana', 'Iowa', 'Kansas', 'Kentucky', 'Louisiana',
       'Maine', 'Maryland', 'Massachusetts', 'Michigan', 'Minnesota',
       'Mississippi', 'Missouri', 'Montana', 'Nebraska', 'Nevada',
       'New Hampshire', 'New Jersey', 'New Mexico', 'New York',
       'North Carolina', 'North Dakota', 'Ohio', 'Oklahoma', 'Oregon',
       'Pennsylvania', 'Rhode Island', 'South Carolina', 'South Dakota',
       'Tennessee', 'Texas', 'Utah', 'Vermont', 'Virginia', 'Washington',
       'West Virginia', 'Wisconsin', 'Wyoming'],
      dtype='object')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dropping irrelevant columns</span></span>
<span id="cb18-2"></span>
<span id="cb18-3">df_T.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total employer establishments, 2015'</span>,</span>
<span id="cb18-4"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total employment, 2015'</span>,</span>
<span id="cb18-5"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total annual payroll, 2015 ($1,000)'</span>,</span>
<span id="cb18-6"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total employment, percent change, 2014-2015'</span>,</span>
<span id="cb18-7"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total nonemployer establishments, 2015'</span>], inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb18-8"></span>
<span id="cb18-9">df_T.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population estimates, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population estimates base, April 1, 2010, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, percent change - April 1, 2010 (estimates base) to July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Population, Census, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, April 1, 2010</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">All firms, 2012</th>
<th data-quarto-table-cell-role="th">Men-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Women-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Minority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonminority-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Veteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Nonveteran-owned firms, 2012</th>
<th data-quarto-table-cell-role="th">Population per square mile, 2010</th>
<th data-quarto-table-cell-role="th">Land area in square miles, 2010</th>
<th data-quarto-table-cell-role="th">FIPS Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>4,780,131</td>
<td>1.70%</td>
<td>4,779,736</td>
<td>6.00%</td>
<td>6.40%</td>
<td>22.60%</td>
<td>23.70%</td>
<td>16.10%</td>
<td>13.80%</td>
<td>...</td>
<td>374,153</td>
<td>203,604</td>
<td>137,630</td>
<td>92,219</td>
<td>272,651</td>
<td>41,943</td>
<td>316,984</td>
<td>94.4</td>
<td>50,645.33</td>
<td>"01"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>710,249</td>
<td>4.50%</td>
<td>710,231</td>
<td>7.30%</td>
<td>7.60%</td>
<td>25.20%</td>
<td>26.40%</td>
<td>10.40%</td>
<td>7.70%</td>
<td>...</td>
<td>68,032</td>
<td>35,402</td>
<td>22,141</td>
<td>13,688</td>
<td>51,147</td>
<td>7,953</td>
<td>56,091</td>
<td>1.2</td>
<td>570,640.95</td>
<td>"02"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6,392,301</td>
<td>8.40%</td>
<td>6,392,017</td>
<td>6.30%</td>
<td>7.10%</td>
<td>23.50%</td>
<td>25.50%</td>
<td>16.90%</td>
<td>13.80%</td>
<td>...</td>
<td>499,926</td>
<td>245,243</td>
<td>182,425</td>
<td>135,313</td>
<td>344,981</td>
<td>46,780</td>
<td>427,582</td>
<td>56.3</td>
<td>113,594.08</td>
<td>"04"</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>2,916,025</td>
<td>2.50%</td>
<td>2,915,918</td>
<td>6.40%</td>
<td>6.80%</td>
<td>23.60%</td>
<td>24.40%</td>
<td>16.30%</td>
<td>14.40%</td>
<td>...</td>
<td>231,959</td>
<td>123,158</td>
<td>75,962</td>
<td>35,982</td>
<td>189,029</td>
<td>25,915</td>
<td>192,988</td>
<td>56</td>
<td>52,035.48</td>
<td>"05"</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>39,250,017</td>
<td>37,254,522</td>
<td>5.40%</td>
<td>37,253,956</td>
<td>6.30%</td>
<td>6.80%</td>
<td>23.20%</td>
<td>25.00%</td>
<td>13.60%</td>
<td>11.40%</td>
<td>...</td>
<td>3,548,449</td>
<td>1,852,580</td>
<td>1,320,085</td>
<td>1,619,857</td>
<td>1,819,107</td>
<td>252,377</td>
<td>3,176,341</td>
<td>239.1</td>
<td>155,779.22</td>
<td>"06"</td>
</tr>
</tbody>
</table>

<p>5 rows × 60 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dropping more irrelevant columns</span></span>
<span id="cb19-2"></span>
<span id="cb19-3">df_T.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Men-owned firms, 2012'</span>,</span>
<span id="cb19-4"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Women-owned firms, 2012'</span>,</span>
<span id="cb19-5"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Minority-owned firms, 2012'</span>,</span>
<span id="cb19-6"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Nonminority-owned firms, 2012'</span>,</span>
<span id="cb19-7"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Veteran-owned firms, 2012'</span>,</span>
<span id="cb19-8"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Nonveteran-owned firms, 2012'</span>,</span>
<span id="cb19-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population per square mile, 2010'</span>,</span>
<span id="cb19-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Land area in square miles, 2010'</span>,</span>
<span id="cb19-11"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'FIPS Code'</span>,</span>
<span id="cb19-12"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'In civilian labor force, total, percent of population age 16 years+, 2011-2015'</span>,</span>
<span id="cb19-13"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'In civilian labor force, female, percent of population age 16 years+, 2011-2015'</span>,</span>
<span id="cb19-14"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total accommodation and food services sales, 2012 ($1,000)'</span>,</span>
<span id="cb19-15"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total health care and social assistance receipts/revenue, 2012 ($1,000)'</span>,</span>
<span id="cb19-16"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total manufacturers shipments, 2012 ($1,000)'</span>,</span>
<span id="cb19-17"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total merchant wholesaler sales, 2012 ($1,000)'</span>,</span>
<span id="cb19-18"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total retail sales, 2012 ($1,000)'</span>,</span>
<span id="cb19-19"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Total retail sales per capita, 2012'</span>,</span>
<span id="cb19-20"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Mean travel time to work (minutes), workers age 16 years+, 2011-2015'</span>,</span>
<span id="cb19-21"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'With a disability, under age 65 years, percent, 2011-2015'</span>,</span>
<span id="cb19-22"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Living in same house 1 year ago, percent of persons age 1 year+, 2011-2015'</span>,</span>
<span id="cb19-23"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Language other than English spoken at home, percent of persons age 5 years+, 2011-2015'</span>,</span>
<span id="cb19-24"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Building permits, 2016'</span>,</span>
<span id="cb19-25"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Households, 2011-2015'</span>,</span>
<span id="cb19-26"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Median selected monthly owner costs -with a mortgage, 2011-2015'</span>,</span>
<span id="cb19-27"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Median selected monthly owner costs -without a mortgage, 2011-2015'</span>,</span>
<span id="cb19-28"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Native Hawaiian and Other Pacific Islander alone, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-29"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Two or More Races, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-30"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Hispanic or Latino, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-31"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'White alone, not Hispanic or Latino, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-32"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Veterans, 2011-2015'</span>,</span>
<span id="cb19-33"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Foreign born persons, percent, 2011-2015'</span>,</span>
<span id="cb19-34"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Housing units,  July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-35"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Housing units, April 1, 2010'</span>,</span>
<span id="cb19-36"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Owner-occupied housing unit rate, 2011-2015'</span>,</span>
<span id="cb19-37"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'American Indian and Alaska Native alone, percent, July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-38"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Persons 65 years and over, percent, April 1, 2010'</span>,</span>
<span id="cb19-39"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Female persons, percent, April 1, 2010'</span>,</span>
<span id="cb19-40"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Persons under 18 years, percent, April 1, 2010'</span>,</span>
<span id="cb19-41"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Persons under 5 years, percent, April 1, 2010'</span>,</span>
<span id="cb19-42"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population estimates base, April 1, 2010,  (V2016)'</span>,</span>
<span id="cb19-43"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population, percent change - April 1, 2010 (estimates base) to July 1, 2016,  (V2016)'</span>,</span>
<span id="cb19-44"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population, Census, April 1, 2010'</span>], inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb19-45"></span>
<span id="cb19-46">df_T.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Population estimates, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 5 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons under 18 years, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Persons 65 years and over, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Female persons, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">White alone, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Black or African American alone, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Asian alone, percent, July 1, 2016, (V2016)</th>
<th data-quarto-table-cell-role="th">Median value of owner-occupied housing units, 2011-2015</th>
<th data-quarto-table-cell-role="th">Median gross rent, 2011-2015</th>
<th data-quarto-table-cell-role="th">Persons per household, 2011-2015</th>
<th data-quarto-table-cell-role="th">High school graduate or higher, percent of persons age 25 years+, 2011-2015</th>
<th data-quarto-table-cell-role="th">Bachelor's degree or higher, percent of persons age 25 years+, 2011-2015</th>
<th data-quarto-table-cell-role="th">Persons without health insurance, under age 65 years, percent</th>
<th data-quarto-table-cell-role="th">Median household income (in 2015 dollars), 2011-2015</th>
<th data-quarto-table-cell-role="th">Per capita income in past 12 months (in 2015 dollars), 2011-2015</th>
<th data-quarto-table-cell-role="th">Persons in poverty, percent</th>
<th data-quarto-table-cell-role="th">All firms, 2012</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>6.00%</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>7.30%</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6.30%</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking dataframe</span></span>
<span id="cb20-2">df_T.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>(50, 18)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking columns</span></span>
<span id="cb22-2">df_T.columns</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>Index(['Population estimates, July 1, 2016,  (V2016)',
       'Persons under 5 years, percent, July 1, 2016,  (V2016)',
       'Persons under 18 years, percent, July 1, 2016,  (V2016)',
       'Persons 65 years and over, percent,  July 1, 2016,  (V2016)',
       'Female persons, percent,  July 1, 2016,  (V2016)',
       'White alone, percent, July 1, 2016,  (V2016)',
       'Black or African American alone, percent, July 1, 2016,  (V2016)',
       'Asian alone, percent, July 1, 2016,  (V2016)',
       'Median value of owner-occupied housing units, 2011-2015',
       'Median gross rent, 2011-2015', 'Persons per household, 2011-2015',
       'High school graduate or higher, percent of persons age 25 years+, 2011-2015',
       'Bachelor's degree or higher, percent of persons age 25 years+, 2011-2015',
       'Persons  without health insurance, under age 65 years, percent',
       'Median household income (in 2015 dollars), 2011-2015',
       'Per capita income in past 12 months (in 2015 dollars), 2011-2015',
       'Persons in poverty, percent', 'All firms, 2012'],
      dtype='object')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># renaming the columns for clarity</span></span>
<span id="cb24-2"></span>
<span id="cb24-3">df_T.rename(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Population estimates, July 1, 2016,  (V2016)'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pop_2016'</span>,</span>
<span id="cb24-4"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Persons under 5 years, percent, July 1, 2016,  (V2016)'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'under_5'</span>,</span>
<span id="cb24-5"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Persons under 18 years, percent, July 1, 2016,  (V2016)'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'under_18'</span>,</span>
<span id="cb24-6"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Persons 65 years and over, percent,  July 1, 2016,  (V2016)'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'65_above'</span>,</span>
<span id="cb24-7"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Female persons, percent,  July 1, 2016,  (V2016)'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'female_pct'</span>,</span>
<span id="cb24-8"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'White alone, percent, July 1, 2016,  (V2016)'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white_pct'</span>,</span>
<span id="cb24-9"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Black or African American alone, percent, July 1, 2016,  (V2016)'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black_pct'</span>,</span>
<span id="cb24-10"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Asian alone, percent, July 1, 2016,  (V2016)'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'asian_pct'</span>,</span>
<span id="cb24-11"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Median value of owner-occupied housing units, 2011-2015'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hu'</span>,</span>
<span id="cb24-12"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Median gross rent, 2011-2015'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_gross_rent'</span>,</span>
<span id="cb24-13"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Persons per household, 2011-2015'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pe_hh'</span>,</span>
<span id="cb24-14"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'High school graduate or higher, percent of persons age 25 years+, 2011-2015'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'high_school_grad_higher'</span>,</span>
<span id="cb24-15"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Bachelor</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\'</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">s degree or higher, percent of persons age 25 years+, 2011-2015'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bsc_higher'</span>,</span>
<span id="cb24-16"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Persons  without health insurance, under age 65 years, percent'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pe_whi'</span>,</span>
<span id="cb24-17"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Median household income (in 2015 dollars), 2011-2015'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hh_income'</span>,</span>
<span id="cb24-18"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Per capita income in past 12 months (in 2015 dollars), 2011-2015'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'per_cap_inc'</span>,</span>
<span id="cb24-19"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Persons in poverty, percent'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'poverty_pct'</span>,</span>
<span id="cb24-20"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'All firms, 2012'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'firms'</span></span>
<span id="cb24-21">}, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb24-22"></span>
<span id="cb24-23">df_T.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_5</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>6.00%</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>7.30%</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>6.30%</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>6.40%</td>
<td>23.60%</td>
<td>16.30%</td>
<td>50.90%</td>
<td>79.40%</td>
<td>15.70%</td>
<td>1.60%</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.80%</td>
<td>21.10%</td>
<td>9.30%</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.20%</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>39,250,017</td>
<td>6.30%</td>
<td>23.20%</td>
<td>13.60%</td>
<td>50.30%</td>
<td>72.70%</td>
<td>6.50%</td>
<td>14.80%</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.80%</td>
<td>31.40%</td>
<td>8.30%</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.30%</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># I subsequently decided to drop 'under_5' as it relates little to the problem statement</span></span>
<span id="cb25-2"></span>
<span id="cb25-3">df_T.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'under_5'</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span></code></pre></div>
</div>
</section>
</section>
<section id="in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data" class="level3">
<h3 class="anchored" data-anchor-id="in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data">In this section I will assess the data to spot irregularities and then clean the data</h3>
<p>Using pandas to explore&nbsp;<code>df_T</code>&nbsp;to answer the following questions about the characteristics of the datasets:</p>
<ul>
<li><p><em>number of states in each dataset</em></p></li>
<li><p><em>number of columns in each datase</em>t</p></li>
<li><p><em>duplicate rows in each dataset</em></p></li>
<li><p><em>datatypes of columns</em></p></li>
<li><p><em>features with missing values</em></p></li>
<li><p><em>number of non-null unique values for features in each dataset</em></p></li>
<li><p><em>what those unique values are and counts for each</em></p></li>
<li><p><em>Number of rows with missing values in each dataset</em></p></li>
<li><p><em>Types of fuels present in each dataset</em></p></li>
</ul>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking out the head of the dataframe</span></span>
<span id="cb26-2">df_T.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>4,863,300</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>741,894</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>6,931,071</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>2,988,248</td>
<td>23.60%</td>
<td>16.30%</td>
<td>50.90%</td>
<td>79.40%</td>
<td>15.70%</td>
<td>1.60%</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.80%</td>
<td>21.10%</td>
<td>9.30%</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.20%</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>39,250,017</td>
<td>23.20%</td>
<td>13.60%</td>
<td>50.30%</td>
<td>72.70%</td>
<td>6.50%</td>
<td>14.80%</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.80%</td>
<td>31.40%</td>
<td>8.30%</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.30%</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of states</span></span>
<span id="cb27-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'There are </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>df_T<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>shape[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> rows (representing each state in the contiguous U.S. and Alaska) in this dataset'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 50 rows (representing each state in the contiguous U.S. and Alaska) in this dataset</code></pre>
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb29" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of columns</span></span>
<span id="cb29-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'There are </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>df_T<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>shape[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> columns'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 17 columns</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb31" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of duplicate rows</span></span>
<span id="cb31-2">df_T.duplicated().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb33" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># datatypes of each column</span></span>
<span id="cb33-2">df_T.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 50 entries, Alabama to Wyoming
Data columns (total 17 columns):
 #   Column                   Non-Null Count  Dtype 
---  ------                   --------------  ----- 
 0   pop_2016                 50 non-null     object
 1   under_18                 50 non-null     object
 2   65_above                 50 non-null     object
 3   female_pct               50 non-null     object
 4   white_pct                50 non-null     object
 5   black_pct                50 non-null     object
 6   asian_pct                50 non-null     object
 7   median_hu                50 non-null     object
 8   median_gross_rent        50 non-null     object
 9   pe_hh                    50 non-null     object
 10  high_school_grad_higher  50 non-null     object
 11  bsc_higher               50 non-null     object
 12  pe_whi                   50 non-null     object
 13  median_hh_income         50 non-null     object
 14  per_cap_inc              50 non-null     object
 15  poverty_pct              50 non-null     object
 16  firms                    50 non-null     object
dtypes: object(17)
memory usage: 7.0+ KB</code></pre>
</div>
</div>
<p>The datatypes are oddly all in object type. This was because of the transpose function I used earlier in the script to convert the data from wide to long According to the pandas documentation, when <em>transpose()</em> is called upon a dataframe with heterogeneous datatypes, all the columns are converted to the object datatype.</p>
<p>I will fix this later.</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb35" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># features with missing values</span></span>
<span id="cb35-2">df_T.isnull().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>pop_2016                   0
under_18                   0
65_above                   0
female_pct                 0
white_pct                  0
black_pct                  0
asian_pct                  0
median_hu                  0
median_gross_rent          0
pe_hh                      0
high_school_grad_higher    0
bsc_higher                 0
pe_whi                     0
median_hh_income           0
per_cap_inc                0
poverty_pct                0
firms                      0
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb37" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of rows with missing values</span></span>
<span id="cb37-2">df_T.isnull().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">any</span>(axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>).<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb39" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># saving for later</span></span>
<span id="cb39-2">df_T.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_T_01.csv'</span>)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reading in the data</span></span>
<span id="cb40-2">df_U <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_T_01.csv'</span>)</span>
<span id="cb40-3">df_U.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Unnamed: 0</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4,863,300</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741,894</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6,931,071</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2,988,248</td>
<td>23.60%</td>
<td>16.30%</td>
<td>50.90%</td>
<td>79.40%</td>
<td>15.70%</td>
<td>1.60%</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.80%</td>
<td>21.10%</td>
<td>9.30%</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.20%</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39,250,017</td>
<td>23.20%</td>
<td>13.60%</td>
<td>50.30%</td>
<td>72.70%</td>
<td>6.50%</td>
<td>14.80%</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.80%</td>
<td>31.40%</td>
<td>8.30%</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.30%</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb41" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dropping renaming column</span></span>
<span id="cb41-2">df_U.rename(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Unnamed: 0'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>}, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb41-3">df_U.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4,863,300</td>
<td>22.60%</td>
<td>16.10%</td>
<td>51.60%</td>
<td>69.30%</td>
<td>26.80%</td>
<td>1.40%</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.30%</td>
<td>23.50%</td>
<td>10.70%</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.10%</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741,894</td>
<td>25.20%</td>
<td>10.40%</td>
<td>47.70%</td>
<td>66.10%</td>
<td>3.80%</td>
<td>6.30%</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.10%</td>
<td>28.00%</td>
<td>15.50%</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.90%</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6,931,071</td>
<td>23.50%</td>
<td>16.90%</td>
<td>50.30%</td>
<td>83.30%</td>
<td>4.90%</td>
<td>3.40%</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.00%</td>
<td>27.50%</td>
<td>11.90%</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.40%</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2,988,248</td>
<td>23.60%</td>
<td>16.30%</td>
<td>50.90%</td>
<td>79.40%</td>
<td>15.70%</td>
<td>1.60%</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.80%</td>
<td>21.10%</td>
<td>9.30%</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.20%</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39,250,017</td>
<td>23.20%</td>
<td>13.60%</td>
<td>50.30%</td>
<td>72.70%</td>
<td>6.50%</td>
<td>14.80%</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.80%</td>
<td>31.40%</td>
<td>8.30%</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.30%</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>One of the reasons the data is stored as the object type is because of the ‘%’, ‘,’, and ‘$’ symbols. In the following cells, I remove these offending characters</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># extracting digits from the following columns using regex</span></span>
<span id="cb42-2"></span>
<span id="cb42-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> re</span>
<span id="cb42-4"></span>
<span id="cb42-5">cols_extract <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'under_18'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'65_above'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'female_pct'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white_pct'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black_pct'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'asian_pct'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'high_school_grad_higher'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bsc_higher'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pe_whi'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'poverty_pct'</span>]</span>
<span id="cb42-6"></span>
<span id="cb42-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> col <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> cols_extract:</span>
<span id="cb42-8">    df_U[col]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_U[col].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>.extract(<span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">r'(\d*\.?\d+)'</span>).astype(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>)</span>
<span id="cb42-9"></span>
<span id="cb42-10">df_U.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4,863,300</td>
<td>22.6</td>
<td>16.1</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>$125,500</td>
<td>$717</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>$43,623</td>
<td>$24,091</td>
<td>17.1</td>
<td>374,153</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741,894</td>
<td>25.2</td>
<td>10.4</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>$250,000</td>
<td>$1,146</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>$72,515</td>
<td>$33,413</td>
<td>9.9</td>
<td>68,032</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6,931,071</td>
<td>23.5</td>
<td>16.9</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>$167,500</td>
<td>$913</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>$50,255</td>
<td>$25,848</td>
<td>16.4</td>
<td>499,926</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2,988,248</td>
<td>23.6</td>
<td>16.3</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>$111,400</td>
<td>$677</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>$41,371</td>
<td>$22,798</td>
<td>17.2</td>
<td>231,959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39,250,017</td>
<td>23.2</td>
<td>13.6</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>$385,500</td>
<td>$1,255</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>$61,818</td>
<td>$30,318</td>
<td>14.3</td>
<td>3,548,449</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb43" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># removing the dollar sign symbol using a lambda function and converting to the float datatype</span></span>
<span id="cb43-2">cols_extract <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pop_2016'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hu'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_gross_rent'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hh_income'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'per_cap_inc'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'firms'</span>]</span>
<span id="cb43-3"></span>
<span id="cb43-4"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> col <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> cols_extract:</span>
<span id="cb43-5">    df_U[col]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_U[col].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">apply</span>(<span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">lambda</span> x: x.replace(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'$'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>).replace(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">','</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">isinstance</span>(x, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>) <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> x).astype(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">float</span>)</span>
<span id="cb43-6">df_U.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>22.6</td>
<td>16.1</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>125500.0</td>
<td>717.0</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>43623.0</td>
<td>24091.0</td>
<td>17.1</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>25.2</td>
<td>10.4</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>250000.0</td>
<td>1146.0</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>72515.0</td>
<td>33413.0</td>
<td>9.9</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>23.5</td>
<td>16.9</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>167500.0</td>
<td>913.0</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>50255.0</td>
<td>25848.0</td>
<td>16.4</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>23.6</td>
<td>16.3</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>111400.0</td>
<td>677.0</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>41371.0</td>
<td>22798.0</td>
<td>17.2</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>23.2</td>
<td>13.6</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>385500.0</td>
<td>1255.0</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>14.3</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking the transformed datatypes</span></span>
<span id="cb44-2">df_U.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 50 entries, 0 to 49
Data columns (total 18 columns):
 #   Column                   Non-Null Count  Dtype  
---  ------                   --------------  -----  
 0   state                    50 non-null     object 
 1   pop_2016                 50 non-null     float64
 2   under_18                 50 non-null     float64
 3   65_above                 50 non-null     float64
 4   female_pct               50 non-null     float64
 5   white_pct                50 non-null     float64
 6   black_pct                50 non-null     float64
 7   asian_pct                50 non-null     float64
 8   median_hu                50 non-null     float64
 9   median_gross_rent        50 non-null     float64
 10  pe_hh                    50 non-null     float64
 11  high_school_grad_higher  50 non-null     float64
 12  bsc_higher               50 non-null     float64
 13  pe_whi                   50 non-null     float64
 14  median_hh_income         50 non-null     float64
 15  per_cap_inc              50 non-null     float64
 16  poverty_pct              50 non-null     float64
 17  firms                    50 non-null     float64
dtypes: float64(17), object(1)
memory usage: 7.2+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb46" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># shape of the new dataframe</span></span>
<span id="cb46-2">df_U.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>(50, 18)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb48" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tail of the new dataframe</span></span>
<span id="cb48-2">df_U.tail()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">45</td>
<td>Virginia</td>
<td>8411808.0</td>
<td>22.2</td>
<td>14.6</td>
<td>50.8</td>
<td>70.0</td>
<td>19.8</td>
<td>6.6</td>
<td>245000.0</td>
<td>1116.0</td>
<td>2.62</td>
<td>88.3</td>
<td>36.3</td>
<td>10.1</td>
<td>65015.0</td>
<td>34152.0</td>
<td>11.0</td>
<td>653193.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">46</td>
<td>Washington</td>
<td>7288000.0</td>
<td>22.4</td>
<td>14.8</td>
<td>50.0</td>
<td>80.0</td>
<td>4.1</td>
<td>8.6</td>
<td>259500.0</td>
<td>1014.0</td>
<td>2.56</td>
<td>90.4</td>
<td>32.9</td>
<td>6.9</td>
<td>61062.0</td>
<td>31762.0</td>
<td>11.3</td>
<td>541522.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">47</td>
<td>West Virginia</td>
<td>1831102.0</td>
<td>20.5</td>
<td>18.8</td>
<td>50.5</td>
<td>93.6</td>
<td>3.6</td>
<td>0.8</td>
<td>103800.0</td>
<td>643.0</td>
<td>2.43</td>
<td>85.0</td>
<td>19.2</td>
<td>6.5</td>
<td>41751.0</td>
<td>23450.0</td>
<td>17.9</td>
<td>114435.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">48</td>
<td>Wisconsin</td>
<td>5778708.0</td>
<td>22.3</td>
<td>16.1</td>
<td>50.3</td>
<td>87.5</td>
<td>6.6</td>
<td>2.8</td>
<td>165800.0</td>
<td>776.0</td>
<td>2.43</td>
<td>91.0</td>
<td>27.8</td>
<td>6.2</td>
<td>53357.0</td>
<td>28340.0</td>
<td>11.8</td>
<td>432980.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>Wyoming</td>
<td>585501.0</td>
<td>23.7</td>
<td>15.0</td>
<td>48.9</td>
<td>92.8</td>
<td>1.3</td>
<td>1.0</td>
<td>194800.0</td>
<td>789.0</td>
<td>2.49</td>
<td>92.3</td>
<td>25.7</td>
<td>13.4</td>
<td>58840.0</td>
<td>29803.0</td>
<td>11.3</td>
<td>62427.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb49" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># summary statistics</span></span>
<span id="cb49-2">df_U.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>5.000000e+01</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>5.000000e+01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>6.448927e+06</td>
<td>17.425780</td>
<td>11.81044</td>
<td>38.511740</td>
<td>60.397020</td>
<td>8.360900</td>
<td>3.63118</td>
<td>192026.000000</td>
<td>879.880000</td>
<td>2.582000</td>
<td>67.424100</td>
<td>22.363160</td>
<td>7.078540</td>
<td>54311.860000</td>
<td>28491.780000</td>
<td>10.05498</td>
<td>5.548918e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>7.271769e+06</td>
<td>9.936137</td>
<td>6.84738</td>
<td>21.584467</td>
<td>35.861896</td>
<td>9.917937</td>
<td>5.79106</td>
<td>79742.431821</td>
<td>181.106761</td>
<td>0.164105</td>
<td>37.882927</td>
<td>13.383697</td>
<td>5.044314</td>
<td>8949.529115</td>
<td>4103.284534</td>
<td>6.26358</td>
<td>6.645229e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>5.855010e+05</td>
<td>0.197000</td>
<td>0.14500</td>
<td>0.487000</td>
<td>0.685000</td>
<td>0.020000</td>
<td>0.01500</td>
<td>103100.000000</td>
<td>643.000000</td>
<td>2.320000</td>
<td>0.842000</td>
<td>0.241000</td>
<td>0.051000</td>
<td>39665.000000</td>
<td>21057.000000</td>
<td>0.10700</td>
<td>6.242700e+04</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>1.850106e+06</td>
<td>19.025000</td>
<td>10.42500</td>
<td>48.000000</td>
<td>34.175000</td>
<td>0.650000</td>
<td>0.80000</td>
<td>136600.000000</td>
<td>743.500000</td>
<td>2.482500</td>
<td>81.825000</td>
<td>19.575000</td>
<td>3.225000</td>
<td>47526.000000</td>
<td>25443.750000</td>
<td>7.80000</td>
<td>1.478222e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>4.559320e+06</td>
<td>22.250000</td>
<td>15.00000</td>
<td>50.300000</td>
<td>77.400000</td>
<td>4.700000</td>
<td>2.35000</td>
<td>165900.000000</td>
<td>818.500000</td>
<td>2.550000</td>
<td>87.850000</td>
<td>27.200000</td>
<td>7.050000</td>
<td>52601.000000</td>
<td>27669.500000</td>
<td>11.35000</td>
<td>3.535155e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>7.198768e+06</td>
<td>23.450000</td>
<td>16.10000</td>
<td>50.900000</td>
<td>87.275000</td>
<td>12.400000</td>
<td>4.55000</td>
<td>237300.000000</td>
<td>1001.500000</td>
<td>2.637500</td>
<td>90.625000</td>
<td>31.075000</td>
<td>10.100000</td>
<td>60599.000000</td>
<td>30977.000000</td>
<td>14.25000</td>
<td>5.933612e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>3.925002e+07</td>
<td>30.200000</td>
<td>19.90000</td>
<td>51.600000</td>
<td>94.800000</td>
<td>37.700000</td>
<td>37.70000</td>
<td>515300.000000</td>
<td>1438.000000</td>
<td>3.150000</td>
<td>92.800000</td>
<td>40.500000</td>
<td>18.600000</td>
<td>74551.000000</td>
<td>38803.000000</td>
<td>20.80000</td>
<td>3.548449e+06</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb50" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># saving for later</span></span>
<span id="cb50-2">df_U.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_census_cleaned.csv'</span>)</span></code></pre></div>
</div>
<p>Now, on to wrangle the second dataset in this project – NCIS gun data</p>
</section>
</section>
<section id="data-wrangling-b" class="level2">
<h2 class="anchored" data-anchor-id="data-wrangling-b">Data Wrangling (b)</h2>
<section id="general-properties-1" class="level3">
<h3 class="anchored" data-anchor-id="general-properties-1">General Properties</h3>
<p><em>Loading and inspecting the census data</em></p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb51" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reading the data in</span></span>
<span id="cb51-2">df_gun <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_excel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/gun_data.xlsx'</span>)</span>
<span id="cb51-3">df_gun.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">permit</th>
<th data-quarto-table-cell-role="th">permit_recheck</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">other</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">admin</th>
<th data-quarto-table-cell-role="th">prepawn_handgun</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">returned_other</th>
<th data-quarto-table-cell-role="th">rentals_handgun</th>
<th data-quarto-table-cell-role="th">rentals_long_gun</th>
<th data-quarto-table-cell-role="th">private_sale_handgun</th>
<th data-quarto-table-cell-role="th">private_sale_long_gun</th>
<th data-quarto-table-cell-role="th">private_sale_other</th>
<th data-quarto-table-cell-role="th">return_to_seller_handgun</th>
<th data-quarto-table-cell-role="th">return_to_seller_long_gun</th>
<th data-quarto-table-cell-role="th">return_to_seller_other</th>
<th data-quarto-table-cell-role="th">totals</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2017-09</td>
<td>Alabama</td>
<td>16717.0</td>
<td>0.0</td>
<td>5734.0</td>
<td>6320.0</td>
<td>221.0</td>
<td>317</td>
<td>0.0</td>
<td>15.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>9.0</td>
<td>16.0</td>
<td>3.0</td>
<td>0.0</td>
<td>0.0</td>
<td>3.0</td>
<td>32019</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2017-09</td>
<td>Alaska</td>
<td>209.0</td>
<td>2.0</td>
<td>2320.0</td>
<td>2930.0</td>
<td>219.0</td>
<td>160</td>
<td>0.0</td>
<td>5.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>17.0</td>
<td>24.0</td>
<td>1.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>6303</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2017-09</td>
<td>Arizona</td>
<td>5069.0</td>
<td>382.0</td>
<td>11063.0</td>
<td>7946.0</td>
<td>920.0</td>
<td>631</td>
<td>0.0</td>
<td>13.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>38.0</td>
<td>12.0</td>
<td>2.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>28394</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2017-09</td>
<td>Arkansas</td>
<td>2935.0</td>
<td>632.0</td>
<td>4347.0</td>
<td>6063.0</td>
<td>165.0</td>
<td>366</td>
<td>51.0</td>
<td>12.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>13.0</td>
<td>23.0</td>
<td>0.0</td>
<td>0.0</td>
<td>2.0</td>
<td>1.0</td>
<td>17747</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2017-09</td>
<td>California</td>
<td>57839.0</td>
<td>0.0</td>
<td>37165.0</td>
<td>24581.0</td>
<td>2984.0</td>
<td>0</td>
<td>0.0</td>
<td>0.0</td>
<td>...</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>123506</td>
</tr>
</tbody>
</table>

<p>5 rows × 27 columns</p>
</div>
</div>
</div>
</section>
<section id="in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data-1" class="level3">
<h3 class="anchored" data-anchor-id="in-this-section-i-will-assess-the-data-to-spot-irregularities-and-then-clean-the-data-1">In this section I will assess the data to spot irregularities and then clean the data</h3>
<p>Using pandas to explore <code>df_T</code> to answer the following questions about the characteristics of the datasets:</p>
<ul>
<li><p><em>number of states in each dataset</em></p></li>
<li><p><em>number of columns in each datase</em>t</p></li>
<li><p><em>duplicate rows in each dataset</em></p></li>
<li><p><em>datatypes of columns</em></p></li>
<li><p><em>features with missing values</em></p></li>
<li><p><em>number of non-null unique values for features in each dataset</em></p></li>
<li><p><em>what those unique values are and counts for each</em></p></li>
<li><p><em>Number of rows with missing values in each dataset</em></p></li>
<li><p><em>Types of fuels present in each dataset</em></p></li>
</ul>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb52" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># selecting relevant columns</span></span>
<span id="cb52-2">col_gun <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]</span>
<span id="cb52-3">df_gun_raw <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>  df_gun[col_gun]</span>
<span id="cb52-4">df_gun_raw.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>2017-09</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2017-09</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>2017-09</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2017-09</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>2017-09</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb53" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of rows</span></span>
<span id="cb53-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'Rows: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>df_gun_raw<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>shape[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)</span>
<span id="cb53-3"></span>
<span id="cb53-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of columns</span></span>
<span id="cb53-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f'Columns: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>df_gun_raw<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>shape[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">'</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 12485
Columns: 5</code></pre>
</div>
</div>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb55" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># duplicate rows </span></span>
<span id="cb55-2">df_gun_raw.duplicated().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb57" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># datatypes of columns</span></span>
<span id="cb57-2">df_gun_raw.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 5 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   month     12485 non-null  object 
 2   handgun   12465 non-null  float64
 3   long_gun  12466 non-null  float64
 4   multiple  12485 non-null  int64  
dtypes: float64(2), int64(1), object(2)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb59" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of non-null unique values for features</span></span>
<span id="cb59-2">df_gun_raw[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>].nunique()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>55</code></pre>
</div>
</div>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb61" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># what those unique values are and counts for each</span></span>
<span id="cb61-2">df_gun_raw.state.value_counts()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>state
Alabama                 227
Puerto Rico             227
Nevada                  227
New Hampshire           227
New Jersey              227
New Mexico              227
New York                227
North Carolina          227
North Dakota            227
Ohio                    227
Oklahoma                227
Oregon                  227
Pennsylvania            227
Rhode Island            227
Montana                 227
South Carolina          227
South Dakota            227
Tennessee               227
Texas                   227
Utah                    227
Vermont                 227
Virgin Islands          227
Virginia                227
Washington              227
West Virginia           227
Wisconsin               227
Nebraska                227
Missouri                227
Alaska                  227
Idaho                   227
Arizona                 227
Arkansas                227
California              227
Colorado                227
Connecticut             227
Delaware                227
District of Columbia    227
Florida                 227
Georgia                 227
Guam                    227
Hawaii                  227
Illinois                227
Mississippi             227
Indiana                 227
Iowa                    227
Kansas                  227
Kentucky                227
Louisiana               227
Maine                   227
Mariana Islands         227
Maryland                227
Massachusetts           227
Michigan                227
Minnesota               227
Wyoming                 227
Name: count, dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb63" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># observing the result</span></span>
<span id="cb63-2">df_gun_raw.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 5 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   month     12485 non-null  object 
 2   handgun   12465 non-null  float64
 3   long_gun  12466 non-null  float64
 4   multiple  12485 non-null  int64  
dtypes: float64(2), int64(1), object(2)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb65" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># renaming the column appropriately</span></span>
<span id="cb65-2">df_gun_raw.rename(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>{<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>:<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>}, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb65-3">df_gun_raw.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 5 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   date      12485 non-null  object 
 2   handgun   12465 non-null  float64
 3   long_gun  12466 non-null  float64
 4   multiple  12485 non-null  int64  
dtypes: float64(2), int64(1), object(2)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb67" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># converting to datetime</span></span>
<span id="cb67-2">df_gun_raw[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.to_datetime(df_gun_raw[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>], <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'%Y-%m'</span>)</span>
<span id="cb67-3">df_gun_raw[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>].head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>0   2017-09-01
1   2017-09-01
2   2017-09-01
3   2017-09-01
4   2017-09-01
Name: date, dtype: datetime64[ns]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb69" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1">df_gun_raw.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 5 columns):
 #   Column    Non-Null Count  Dtype         
---  ------    --------------  -----         
 0   state     12485 non-null  object        
 1   date      12485 non-null  datetime64[ns]
 2   handgun   12465 non-null  float64       
 3   long_gun  12466 non-null  float64       
 4   multiple  12485 non-null  int64         
dtypes: datetime64[ns](1), float64(2), int64(1), object(1)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb71" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1">df_gun_raw.date.dt.year</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>0        2017
1        2017
2        2017
3        2017
4        2017
         ... 
12480    1998
12481    1998
12482    1998
12483    1998
12484    1998
Name: date, Length: 12485, dtype: int32</code></pre>
</div>
</div>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb73" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># extracting year and month data from the date column</span></span>
<span id="cb73-2">df_gun_raw[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_gun_raw[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>].dt.year</span>
<span id="cb73-3">df_gun_raw[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df_gun_raw[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>].dt.month</span>
<span id="cb73-4">df_gun_raw.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">date</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>2017-09-01</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb74" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dropping the redundant date column</span></span>
<span id="cb74-2">df_gun_raw.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'date'</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb74-3">df_gun_raw.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb75" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># observing the tail of the data</span></span>
<span id="cb75-2">df_gun_raw.tail()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">12480</td>
<td>Virginia</td>
<td>14.0</td>
<td>2.0</td>
<td>8</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12481</td>
<td>Washington</td>
<td>65.0</td>
<td>286.0</td>
<td>8</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12482</td>
<td>West Virginia</td>
<td>149.0</td>
<td>251.0</td>
<td>5</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12483</td>
<td>Wisconsin</td>
<td>25.0</td>
<td>214.0</td>
<td>2</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12484</td>
<td>Wyoming</td>
<td>45.0</td>
<td>49.0</td>
<td>5</td>
<td>1998</td>
<td>11</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb76" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking out metadata of dataframe</span></span>
<span id="cb76-2">df_gun_raw.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 12485 entries, 0 to 12484
Data columns (total 6 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   handgun   12465 non-null  float64
 2   long_gun  12466 non-null  float64
 3   multiple  12485 non-null  int64  
 4   year      12485 non-null  int32  
 5   month     12485 non-null  int32  
dtypes: float64(2), int32(2), int64(1), object(1)
memory usage: 487.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb78" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># saving data for later</span></span>
<span id="cb78-2">df_gun_raw.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_gun_cleaned.csv'</span>)</span></code></pre></div>
</div>
<hr>
</section>
</section>
<section id="further-wrangling" class="level2">
<h2 class="anchored" data-anchor-id="further-wrangling">Further Wrangling</h2>
<section id="in-this-section-i-will-further-wrangle-the-dataframes-and-derive-calculated-columns" class="level3">
<h3 class="anchored" data-anchor-id="in-this-section-i-will-further-wrangle-the-dataframes-and-derive-calculated-columns"><em>In this section, I will further wrangle the dataframes and derive calculated columns</em></h3>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb79" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reading in the census data</span></span>
<span id="cb79-2">df1<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_census_cleaned.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb79-3">df1.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>22.6</td>
<td>16.1</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>125500.0</td>
<td>717.0</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>43623.0</td>
<td>24091.0</td>
<td>17.1</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>25.2</td>
<td>10.4</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>250000.0</td>
<td>1146.0</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>72515.0</td>
<td>33413.0</td>
<td>9.9</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>23.5</td>
<td>16.9</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>167500.0</td>
<td>913.0</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>50255.0</td>
<td>25848.0</td>
<td>16.4</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>23.6</td>
<td>16.3</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>111400.0</td>
<td>677.0</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>41371.0</td>
<td>22798.0</td>
<td>17.2</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>23.2</td>
<td>13.6</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>385500.0</td>
<td>1255.0</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>14.3</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb80" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reading in the gun sales data</span></span>
<span id="cb80-2">df2<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_gun_cleaned.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb80-3">df2.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb81" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking out the shape of the census dataframe</span></span>
<span id="cb81-2">df1.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<pre><code>(50, 18)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb83" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking out the shape of the gun dataframe</span></span>
<span id="cb83-2">df2.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>(12485, 6)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb85" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># I want to have a calculated column for the % of adult population (between 18 &amp; 65),</span></span>
<span id="cb85-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># as I think this would be more relevant to the analysis than the data on children and elderly population</span></span>
<span id="cb85-3"></span>
<span id="cb85-4">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'adults_below_65'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> (df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'under_18'</span>]  <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>  df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'65_above'</span>])</span>
<span id="cb85-5">df1.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">under_18</th>
<th data-quarto-table-cell-role="th">65_above</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>22.6</td>
<td>16.1</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>125500.0</td>
<td>717.0</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>43623.0</td>
<td>24091.0</td>
<td>17.1</td>
<td>374153.0</td>
<td>61.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>25.2</td>
<td>10.4</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>250000.0</td>
<td>1146.0</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>72515.0</td>
<td>33413.0</td>
<td>9.9</td>
<td>68032.0</td>
<td>64.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>23.5</td>
<td>16.9</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>167500.0</td>
<td>913.0</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>50255.0</td>
<td>25848.0</td>
<td>16.4</td>
<td>499926.0</td>
<td>59.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>23.6</td>
<td>16.3</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>111400.0</td>
<td>677.0</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>41371.0</td>
<td>22798.0</td>
<td>17.2</td>
<td>231959.0</td>
<td>60.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>23.2</td>
<td>13.6</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>385500.0</td>
<td>1255.0</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>14.3</td>
<td>3548449.0</td>
<td>63.2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb86" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dropping the afore-used columns</span></span>
<span id="cb86-2">df1.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'under_18'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'65_above'</span>], inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb86-3">df1.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">firms</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>125500.0</td>
<td>717.0</td>
<td>2.55</td>
<td>84.3</td>
<td>23.5</td>
<td>10.7</td>
<td>43623.0</td>
<td>24091.0</td>
<td>17.1</td>
<td>374153.0</td>
<td>61.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>250000.0</td>
<td>1146.0</td>
<td>2.81</td>
<td>92.1</td>
<td>28.0</td>
<td>15.5</td>
<td>72515.0</td>
<td>33413.0</td>
<td>9.9</td>
<td>68032.0</td>
<td>64.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>167500.0</td>
<td>913.0</td>
<td>2.69</td>
<td>86.0</td>
<td>27.5</td>
<td>11.9</td>
<td>50255.0</td>
<td>25848.0</td>
<td>16.4</td>
<td>499926.0</td>
<td>59.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>111400.0</td>
<td>677.0</td>
<td>2.53</td>
<td>84.8</td>
<td>21.1</td>
<td>9.3</td>
<td>41371.0</td>
<td>22798.0</td>
<td>17.2</td>
<td>231959.0</td>
<td>60.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>385500.0</td>
<td>1255.0</td>
<td>2.96</td>
<td>81.8</td>
<td>31.4</td>
<td>8.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>14.3</td>
<td>3548449.0</td>
<td>63.2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb87" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># grouping the columns in similar group</span></span>
<span id="cb87-2"></span>
<span id="cb87-3">demographic <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb87-4">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>,</span>
<span id="cb87-5">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pop_2016"</span>,</span>
<span id="cb87-6">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"female_pct"</span>,</span>
<span id="cb87-7">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white_pct"</span>,</span>
<span id="cb87-8">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black_pct"</span>,</span>
<span id="cb87-9">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"asian_pct"</span>,</span>
<span id="cb87-10">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pe_hh"</span>,</span>
<span id="cb87-11">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pe_whi"</span>,</span>
<span id="cb87-12">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"adults_below_65"</span></span>
<span id="cb87-13">]</span>
<span id="cb87-14"></span>
<span id="cb87-15">education <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb87-16">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"high_school_grad_higher"</span>,</span>
<span id="cb87-17">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bsc_higher"</span></span>
<span id="cb87-18">]</span>
<span id="cb87-19"></span>
<span id="cb87-20">finances <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb87-21">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"median_hu"</span>,</span>
<span id="cb87-22">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"median_gross_rent"</span>,</span>
<span id="cb87-23">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"poverty_pct"</span>,</span>
<span id="cb87-24">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"median_hh_income"</span>,</span>
<span id="cb87-25">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"per_cap_inc"</span>,</span>
<span id="cb87-26">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"firms"</span></span>
<span id="cb87-27">]</span></code></pre></div>
</div>
<div class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb88" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># new column ordering</span></span>
<span id="cb88-2">new_col_order <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (demographic <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> education <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> finances)</span>
<span id="cb88-3"></span>
<span id="cb88-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking if the number of items in new_col_order is the same as in the original column</span></span>
<span id="cb88-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(df1.columns) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(new_col_order)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>True</code></pre>
</div>
</div>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb90" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># proceeding to reorder</span></span>
<span id="cb90-2">df1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[new_col_order]</span>
<span id="cb90-3">df1.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>2.55</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>2.81</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>2.69</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>2.53</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>2.96</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb91" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># saving for later</span></span>
<span id="cb91-2">df1.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_census_cleaned_1.csv'</span>)</span></code></pre></div>
</div>
<hr>
</section>
</section>
<section id="exploratory-data-analysis-1" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis-1">Exploratory Data Analysis 1</h2>
<section id="census-data" class="level3">
<h3 class="anchored" data-anchor-id="census-data">(Census Data)</h3>
<div class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb92" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Reading in the dataset, and viewing heads, tails and  and random sample of the rows </span></span>
<span id="cb92-2">df1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_census_cleaned_1.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb92-3">df1.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>2.55</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>2.81</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>2.69</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>2.53</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>2.96</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb93" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># viewing tail of data</span></span>
<span id="cb93-2">df1.tail()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">45</td>
<td>Virginia</td>
<td>8411808.0</td>
<td>50.8</td>
<td>70.0</td>
<td>19.8</td>
<td>6.6</td>
<td>2.62</td>
<td>10.1</td>
<td>63.2</td>
<td>88.3</td>
<td>36.3</td>
<td>245000.0</td>
<td>1116.0</td>
<td>11.0</td>
<td>65015.0</td>
<td>34152.0</td>
<td>653193.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">46</td>
<td>Washington</td>
<td>7288000.0</td>
<td>50.0</td>
<td>80.0</td>
<td>4.1</td>
<td>8.6</td>
<td>2.56</td>
<td>6.9</td>
<td>62.8</td>
<td>90.4</td>
<td>32.9</td>
<td>259500.0</td>
<td>1014.0</td>
<td>11.3</td>
<td>61062.0</td>
<td>31762.0</td>
<td>541522.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">47</td>
<td>West Virginia</td>
<td>1831102.0</td>
<td>50.5</td>
<td>93.6</td>
<td>3.6</td>
<td>0.8</td>
<td>2.43</td>
<td>6.5</td>
<td>60.7</td>
<td>85.0</td>
<td>19.2</td>
<td>103800.0</td>
<td>643.0</td>
<td>17.9</td>
<td>41751.0</td>
<td>23450.0</td>
<td>114435.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">48</td>
<td>Wisconsin</td>
<td>5778708.0</td>
<td>50.3</td>
<td>87.5</td>
<td>6.6</td>
<td>2.8</td>
<td>2.43</td>
<td>6.2</td>
<td>61.6</td>
<td>91.0</td>
<td>27.8</td>
<td>165800.0</td>
<td>776.0</td>
<td>11.8</td>
<td>53357.0</td>
<td>28340.0</td>
<td>432980.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>Wyoming</td>
<td>585501.0</td>
<td>48.9</td>
<td>92.8</td>
<td>1.3</td>
<td>1.0</td>
<td>2.49</td>
<td>13.4</td>
<td>61.3</td>
<td>92.3</td>
<td>25.7</td>
<td>194800.0</td>
<td>789.0</td>
<td>11.3</td>
<td>58840.0</td>
<td>29803.0</td>
<td>62427.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb94" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># viewing random sample</span></span>
<span id="cb94-2">df1.sample(n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">48</td>
<td>Wisconsin</td>
<td>5778708.0</td>
<td>50.300</td>
<td>87.500</td>
<td>6.600</td>
<td>2.800</td>
<td>2.43</td>
<td>6.200</td>
<td>61.600</td>
<td>91.000</td>
<td>27.800</td>
<td>165800.0</td>
<td>776.0</td>
<td>11.800</td>
<td>53357.0</td>
<td>28340.0</td>
<td>432980.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>Iowa</td>
<td>3134693.0</td>
<td>50.300</td>
<td>91.400</td>
<td>3.700</td>
<td>2.500</td>
<td>2.42</td>
<td>5.000</td>
<td>60.300</td>
<td>91.500</td>
<td>26.700</td>
<td>129200.0</td>
<td>697.0</td>
<td>11.800</td>
<td>53183.0</td>
<td>27950.0</td>
<td>259121.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">41</td>
<td>Tennessee</td>
<td>6651194.0</td>
<td>0.512</td>
<td>0.787</td>
<td>0.171</td>
<td>0.018</td>
<td>2.53</td>
<td>0.106</td>
<td>99.617</td>
<td>0.855</td>
<td>0.249</td>
<td>142100.0</td>
<td>764.0</td>
<td>0.158</td>
<td>45219.0</td>
<td>25227.0</td>
<td>550453.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>Illinois</td>
<td>12801539.0</td>
<td>50.900</td>
<td>77.200</td>
<td>14.700</td>
<td>5.500</td>
<td>2.63</td>
<td>7.400</td>
<td>62.500</td>
<td>87.900</td>
<td>32.300</td>
<td>173800.0</td>
<td>907.0</td>
<td>13.000</td>
<td>57574.0</td>
<td>30494.0</td>
<td>1135017.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.700</td>
<td>66.100</td>
<td>3.800</td>
<td>6.300</td>
<td>2.81</td>
<td>15.500</td>
<td>64.400</td>
<td>92.100</td>
<td>28.000</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.900</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb95" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Getting the dimensions of the DataFrame with the .shape attribute:</span></span>
<span id="cb95-2">df1.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>(50, 17)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb97" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#  List the data type of each column, the number of non-missing values, and memory usage with the .info method:</span></span>
<span id="cb97-2">df1.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 50 entries, 0 to 49
Data columns (total 17 columns):
 #   Column                   Non-Null Count  Dtype  
---  ------                   --------------  -----  
 0   state                    50 non-null     object 
 1   pop_2016                 50 non-null     float64
 2   female_pct               50 non-null     float64
 3   white_pct                50 non-null     float64
 4   black_pct                50 non-null     float64
 5   asian_pct                50 non-null     float64
 6   pe_hh                    50 non-null     float64
 7   pe_whi                   50 non-null     float64
 8   adults_below_65          50 non-null     float64
 9   high_school_grad_higher  50 non-null     float64
 10  bsc_higher               50 non-null     float64
 11  median_hu                50 non-null     float64
 12  median_gross_rent        50 non-null     float64
 13  poverty_pct              50 non-null     float64
 14  median_hh_income         50 non-null     float64
 15  per_cap_inc              50 non-null     float64
 16  firms                    50 non-null     float64
dtypes: float64(16), object(1)
memory usage: 7.0+ KB</code></pre>
</div>
</div>
<p>There are 50 rows in this dataset representing each state of the U.S measured by 16 features of interest The data is clean: there are no null values, and the datatypes are appropriate</p>
</section>
</section>
<section id="data-dictionary" class="level2">
<h2 class="anchored" data-anchor-id="data-dictionary">Data Dictionary</h2>
<table class="table">
<colgroup>
<col style="width: 26%">
<col style="width: 26%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>s/n</strong></th>
<th style="text-align: left;"><strong>Variable</strong></th>
<th style="text-align: left;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">state</td>
<td style="text-align: left;">Each of the 50 states of the contiguous U.S.</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">pop_2016</td>
<td style="text-align: left;">Population estimates by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">female_pct</td>
<td style="text-align: left;">Female persons, percent, by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">white_pct</td>
<td style="text-align: left;">White alone, percent, by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">black_pct</td>
<td style="text-align: left;">Black or African American alone, percent by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">asian_pct</td>
<td style="text-align: left;">Asian alone, percent, July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">6</td>
<td style="text-align: left;">pe_hh</td>
<td style="text-align: left;">Persons per household, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">7</td>
<td style="text-align: left;">pe_whi</td>
<td style="text-align: left;">Persons without health insurance, under age 65 years, percent</td>
</tr>
<tr class="odd">
<td style="text-align: left;">8</td>
<td style="text-align: left;">adults_below_65</td>
<td style="text-align: left;">adults older than 18, younger than 65, percent, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">9</td>
<td style="text-align: left;">high_school_grad_higher</td>
<td style="text-align: left;">High school graduate or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10</td>
<td style="text-align: left;">bsc_higher</td>
<td style="text-align: left;">Bachelor\’s degree or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">11</td>
<td style="text-align: left;">median_hu</td>
<td style="text-align: left;">Median value of owner-occupied housing units, 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12</td>
<td style="text-align: left;">median_gross_rent</td>
<td style="text-align: left;">Median gross rent, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">13</td>
<td style="text-align: left;">poverty_pct</td>
<td style="text-align: left;">Persons in poverty, percent</td>
</tr>
<tr class="odd">
<td style="text-align: left;">14</td>
<td style="text-align: left;">median_hh_income</td>
<td style="text-align: left;">Median household income (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">15</td>
<td style="text-align: left;">per_cap_inc</td>
<td style="text-align: left;">Per capita income in past 12 months (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">16</td>
<td style="text-align: left;">firms</td>
<td style="text-align: left;">All firms, 2012</td>
</tr>
</tbody>
</table>
<div class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb99" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># displaying summary statistics</span></span>
<span id="cb99-2">df1.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>5.000000e+01</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>5.000000e+01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>6.448927e+06</td>
<td>38.511740</td>
<td>60.397020</td>
<td>8.360900</td>
<td>3.63118</td>
<td>2.582000</td>
<td>7.078540</td>
<td>70.76378</td>
<td>67.424100</td>
<td>22.363160</td>
<td>192026.000000</td>
<td>879.880000</td>
<td>10.05498</td>
<td>54311.860000</td>
<td>28491.780000</td>
<td>5.548918e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>7.271769e+06</td>
<td>21.584467</td>
<td>35.861896</td>
<td>9.917937</td>
<td>5.79106</td>
<td>0.164105</td>
<td>5.044314</td>
<td>16.41933</td>
<td>37.882927</td>
<td>13.383697</td>
<td>79742.431821</td>
<td>181.106761</td>
<td>6.26358</td>
<td>8949.529115</td>
<td>4103.284534</td>
<td>6.645229e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>5.855010e+05</td>
<td>0.487000</td>
<td>0.685000</td>
<td>0.020000</td>
<td>0.01500</td>
<td>2.320000</td>
<td>0.051000</td>
<td>58.90000</td>
<td>0.842000</td>
<td>0.241000</td>
<td>103100.000000</td>
<td>643.000000</td>
<td>0.10700</td>
<td>39665.000000</td>
<td>21057.000000</td>
<td>6.242700e+04</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>1.850106e+06</td>
<td>48.000000</td>
<td>34.175000</td>
<td>0.650000</td>
<td>0.80000</td>
<td>2.482500</td>
<td>3.225000</td>
<td>61.15000</td>
<td>81.825000</td>
<td>19.575000</td>
<td>136600.000000</td>
<td>743.500000</td>
<td>7.80000</td>
<td>47526.000000</td>
<td>25443.750000</td>
<td>1.478222e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>4.559320e+06</td>
<td>50.300000</td>
<td>77.400000</td>
<td>4.700000</td>
<td>2.35000</td>
<td>2.550000</td>
<td>7.050000</td>
<td>62.25000</td>
<td>87.850000</td>
<td>27.200000</td>
<td>165900.000000</td>
<td>818.500000</td>
<td>11.35000</td>
<td>52601.000000</td>
<td>27669.500000</td>
<td>3.535155e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>7.198768e+06</td>
<td>50.900000</td>
<td>87.275000</td>
<td>12.400000</td>
<td>4.55000</td>
<td>2.637500</td>
<td>10.100000</td>
<td>64.30000</td>
<td>90.625000</td>
<td>31.075000</td>
<td>237300.000000</td>
<td>1001.500000</td>
<td>14.25000</td>
<td>60599.000000</td>
<td>30977.000000</td>
<td>5.933612e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>3.925002e+07</td>
<td>51.600000</td>
<td>94.800000</td>
<td>37.700000</td>
<td>37.70000</td>
<td>3.150000</td>
<td>18.600000</td>
<td>99.63800</td>
<td>92.800000</td>
<td>40.500000</td>
<td>515300.000000</td>
<td>1438.000000</td>
<td>20.80000</td>
<td>74551.000000</td>
<td>38803.000000</td>
<td>3.548449e+06</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb100" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plotting the kde of some variables to have a sense of the data distribution</span></span>
<span id="cb100-2">sns.set_style(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'darkgrid'</span>)</span>
<span id="cb100-3">fig, (ax1, ax2, ax3, ax4, ax5) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb100-4"></span>
<span id="cb100-5">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pop_2016"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1)</span>
<span id="cb100-6">ax1.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for pop_2016'</span>)</span>
<span id="cb100-7"></span>
<span id="cb100-8">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"female_pct"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2)</span>
<span id="cb100-9">ax2.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for female_pct'</span>)</span>
<span id="cb100-10"></span>
<span id="cb100-11">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white_pct"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3)</span>
<span id="cb100-12">ax3.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for white_pct'</span>)</span>
<span id="cb100-13"></span>
<span id="cb100-14">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pe_hh"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4)</span>
<span id="cb100-15">ax4.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for pe_hh'</span>)</span>
<span id="cb100-16"></span>
<span id="cb100-17">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"median_hu"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax5)</span>
<span id="cb100-18">ax5.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for median_hu'</span>)</span>
<span id="cb100-19"></span>
<span id="cb100-20">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-70-output-1.png" width="1541" height="372"></p>
</div>
</div>
<p>Upon viewing the kde plot, there seems to be some unusually low values for the percentages columns. This was a result of some of the percentage columns being formatted as decimals After inspection, I identified the offending rows as rows[30:42]. To correct these rows, I simply target rows having values less than a benchmark below which the values cannot possibly be valid and multiply by 100</p>
<div class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb101" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># correcting `female_pct` column</span></span>
<span id="cb101-2">mask1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'female_pct'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb101-3">col1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'female_pct'</span>]</span>
<span id="cb101-4">df1.loc[mask1, col1] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1.loc[mask1, col1] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb102" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking that values are reasonable</span></span>
<span id="cb102-2">df1.female_pct.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="71">
<pre><code>count    50.000000
mean     50.564000
std       0.801213
min      47.700000
25%      50.200000
50%      50.650000
75%      51.175000
max      51.600000
Name: female_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb104" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking offending rows</span></span>
<span id="cb104-2">df1.white_pct[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">42</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>30    0.826
31    0.699
32    0.710
33    0.879
34    0.825
35    0.746
36    0.874
37    0.824
38    0.844
39    0.685
40    0.852
41    0.787
Name: white_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb106" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># standardizing</span></span>
<span id="cb106-2">mask3 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white_pct'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb106-3">col3 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white_pct'</span>]</span>
<span id="cb106-4">df1.loc[mask3, col3] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1.loc[mask3, col3] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb107" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking result</span></span>
<span id="cb107-2">df1.white_pct[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">42</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>30    82.6
31    69.9
32    71.0
33    87.9
34    82.5
35    74.6
36    87.4
37    82.4
38    84.4
39    68.5
40    85.2
41    78.7
Name: white_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb109" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># fishing rows</span></span>
<span id="cb109-2">df1.black_pct.sort_values()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>40     0.020
36     0.021
30     0.025
33     0.029
35     0.078
38     0.081
37     0.118
34     0.128
41     0.171
31     0.177
32     0.222
39     0.275
25     0.600
11     0.800
49     1.300
44     1.300
43     1.400
28     1.500
18     1.500
10     2.200
47     3.600
14     3.700
1      3.800
46     4.100
5      4.500
2      4.900
26     5.000
22     6.200
15     6.200
4      6.500
48     6.600
16     8.300
20     8.600
27     9.600
13     9.700
24    11.800
6     11.800
42    12.600
21    14.200
12    14.700
29    15.000
3     15.700
8     16.800
45    19.800
7     22.600
0     26.800
19    30.700
9     32.000
17    32.600
23    37.700
Name: black_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb111" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking for a particular row to see if indeed the value is valid, which it is</span></span>
<span id="cb111-2">df1.loc[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<pre><code>state                        Montana
pop_2016                   1042520.0
female_pct                      49.7
white_pct                       89.2
black_pct                        0.6
asian_pct                        0.8
pe_hh                           2.41
pe_whi                           9.8
adults_below_65                 60.5
high_school_grad_higher         92.8
bsc_higher                      29.5
median_hu                   193500.0
median_gross_rent              711.0
poverty_pct                     13.3
median_hh_income             47169.0
per_cap_inc                  26381.0
firms                       112419.0
Name: 25, dtype: object</code></pre>
</div>
</div>
<div class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb113" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># correcting 'black_pct</span></span>
<span id="cb113-2">mask2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black_pct'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span></span>
<span id="cb113-3">col2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black_pct'</span>]</span>
<span id="cb113-4">df1.loc[mask2, col2] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1.loc[mask2, col2] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb114" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking result</span></span>
<span id="cb114-2">df1.black_pct.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="78">
<pre><code>count    50.000000
mean     11.024000
std       9.631868
min       0.600000
25%       3.625000
50%       8.200000
75%      15.525000
max      37.700000
Name: black_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb116" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># fishing out offending rows</span></span>
<span id="cb116-2">df1.asian_pct.sort_values()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<pre><code>40     0.015
33     0.015
39     0.016
30     0.017
41     0.018
35     0.022
34     0.022
32     0.029
37     0.035
38     0.036
36     0.045
31     0.089
47     0.800
25     0.800
49     1.000
23     1.100
18     1.200
0      1.400
16     1.500
11     1.500
3      1.600
44     1.800
17     1.800
24     2.000
13     2.200
14     2.500
26     2.500
43     2.500
28     2.700
48     2.800
8      2.900
15     3.000
21     3.100
5      3.300
2      3.400
7      4.000
9      4.100
6      4.700
42     4.800
22     4.900
12     5.500
1      6.300
19     6.600
45     6.600
20     6.700
46     8.600
27     8.700
29     9.800
4     14.800
10    37.700
Name: asian_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb118" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1">mask4 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'asian_pct'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.3</span></span>
<span id="cb118-2">col4 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'asian_pct'</span>]</span>
<span id="cb118-3">df1.loc[mask4, col4] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1.loc[mask4, col4] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb119" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking results</span></span>
<span id="cb119-2">df1.asian_pct.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="81">
<pre><code>count    50.000000
mean      4.342000
std       5.561973
min       0.800000
25%       1.725000
50%       2.850000
75%       4.775000
max      37.700000
Name: asian_pct, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb121" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># correcting 'high_school_grad_higher'</span></span>
<span id="cb121-2">mask5 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'high_school_grad_higher'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb121-3">col5 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'high_school_grad_higher'</span>]</span>
<span id="cb121-4">df1.loc[mask5, col5] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1.loc[mask5, col5] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb122" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking result</span></span>
<span id="cb122-2">df1.bsc_higher.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="83">
<pre><code>count    50.000000
mean     22.363160
std      13.383697
min       0.241000
25%      19.575000
50%      27.200000
75%      31.075000
max      40.500000
Name: bsc_higher, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb124" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb124-1">df1.bsc_higher.sort_values()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<pre><code>35     0.241
41     0.249
39     0.258
34     0.261
30     0.263
40     0.270
33     0.277
32     0.284
37     0.286
36     0.308
38     0.319
31     0.342
47    19.200
23    20.700
3     21.100
16    22.300
17    22.500
27    23.000
0     23.500
13    24.100
49    25.700
11    25.900
14    26.700
21    26.900
24    27.100
8     27.300
2     27.500
42    27.600
48    27.800
1     28.000
9     28.800
18    29.000
26    29.300
25    29.500
7     30.000
10    30.800
15    31.000
43    31.100
4     31.400
12    32.300
46    32.900
22    33.700
28    34.900
44    36.000
45    36.300
29    36.800
6     37.600
19    37.900
5     38.100
20    40.500
Name: bsc_higher, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb126" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb126-2">mask6 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bsc_higher'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span></span>
<span id="cb126-3">col6 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bsc_higher'</span>]</span>
<span id="cb126-4">df1.loc[mask6, col6] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1.loc[mask6, col6] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb127" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1">df1.bsc_higher.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<pre><code>count    50.00000
mean     29.01200
std       4.93404
min      19.20000
25%      25.95000
50%      28.20000
75%      31.77500
max      40.50000
Name: bsc_higher, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb129" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#</span></span>
<span id="cb129-2">mask7 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pe_whi'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb129-3">col7 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pe_whi'</span>]</span>
<span id="cb129-4">df1.loc[mask7, col7] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1.loc[mask7, col7] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb130" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb130-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># correcting the last % column</span></span>
<span id="cb130-2">mask8 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'poverty_pct'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb130-3">col8 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'poverty_pct'</span>]</span>
<span id="cb130-4">df1.loc[mask8, col8] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1.loc[mask8, col8] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb131" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb131-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking the summary statistics again</span></span>
<span id="cb131-2">df1.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="89">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>5.000000e+01</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.00000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>50.000000</td>
<td>5.000000e+01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>6.448927e+06</td>
<td>50.564000</td>
<td>79.308000</td>
<td>11.024000</td>
<td>4.342000</td>
<td>2.582000</td>
<td>9.310000</td>
<td>70.76378</td>
<td>88.224000</td>
<td>29.01200</td>
<td>192026.000000</td>
<td>879.880000</td>
<td>13.518000</td>
<td>54311.860000</td>
<td>28491.780000</td>
<td>5.548918e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>7.271769e+06</td>
<td>0.801213</td>
<td>12.335908</td>
<td>9.631868</td>
<td>5.561973</td>
<td>0.164105</td>
<td>3.456095</td>
<td>16.41933</td>
<td>3.089585</td>
<td>4.93404</td>
<td>79742.431821</td>
<td>181.106761</td>
<td>3.019778</td>
<td>8949.529115</td>
<td>4103.284534</td>
<td>6.645229e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>5.855010e+05</td>
<td>47.700000</td>
<td>25.800000</td>
<td>0.600000</td>
<td>0.800000</td>
<td>2.320000</td>
<td>2.900000</td>
<td>58.90000</td>
<td>81.800000</td>
<td>19.20000</td>
<td>103100.000000</td>
<td>643.000000</td>
<td>7.300000</td>
<td>39665.000000</td>
<td>21057.000000</td>
<td>6.242700e+04</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>1.850106e+06</td>
<td>50.200000</td>
<td>72.475000</td>
<td>3.625000</td>
<td>1.725000</td>
<td>2.482500</td>
<td>6.625000</td>
<td>61.15000</td>
<td>85.600000</td>
<td>25.95000</td>
<td>136600.000000</td>
<td>743.500000</td>
<td>11.300000</td>
<td>47526.000000</td>
<td>25443.750000</td>
<td>1.478222e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>4.559320e+06</td>
<td>50.650000</td>
<td>82.100000</td>
<td>8.200000</td>
<td>2.850000</td>
<td>2.550000</td>
<td>9.350000</td>
<td>62.25000</td>
<td>88.850000</td>
<td>28.20000</td>
<td>165900.000000</td>
<td>818.500000</td>
<td>13.300000</td>
<td>52601.000000</td>
<td>27669.500000</td>
<td>3.535155e+05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>7.198768e+06</td>
<td>51.175000</td>
<td>87.500000</td>
<td>15.525000</td>
<td>4.775000</td>
<td>2.637500</td>
<td>11.550000</td>
<td>64.30000</td>
<td>90.850000</td>
<td>31.77500</td>
<td>237300.000000</td>
<td>1001.500000</td>
<td>15.375000</td>
<td>60599.000000</td>
<td>30977.000000</td>
<td>5.933612e+05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>3.925002e+07</td>
<td>51.600000</td>
<td>94.800000</td>
<td>37.700000</td>
<td>37.700000</td>
<td>3.150000</td>
<td>18.600000</td>
<td>99.63800</td>
<td>92.800000</td>
<td>40.50000</td>
<td>515300.000000</td>
<td>1438.000000</td>
<td>20.800000</td>
<td>74551.000000</td>
<td>38803.000000</td>
<td>3.548449e+06</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb132" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking distribution again</span></span>
<span id="cb132-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plotting the kde of some variables to have a sense of the data distribution</span></span>
<span id="cb132-3"></span>
<span id="cb132-4">fig, (ax1, ax2, ax3, ax4, ax5) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb132-5"></span>
<span id="cb132-6">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pop_2016"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1)</span>
<span id="cb132-7">ax1.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for pop_2016'</span>)</span>
<span id="cb132-8"></span>
<span id="cb132-9">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"female_pct"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2)</span>
<span id="cb132-10">ax2.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for female_pct'</span>)</span>
<span id="cb132-11"></span>
<span id="cb132-12">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"white_pct"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3)</span>
<span id="cb132-13">ax3.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for white_pct'</span>)</span>
<span id="cb132-14"></span>
<span id="cb132-15">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pe_hh"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4)</span>
<span id="cb132-16">ax4.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for pe_hh'</span>)</span>
<span id="cb132-17"></span>
<span id="cb132-18">df1[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"median_hu"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax5)</span>
<span id="cb132-19">ax5.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for median_hu'</span>)</span>
<span id="cb132-20"></span>
<span id="cb132-21">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-91-output-1.png" width="1541" height="372"></p>
</div>
</div>
<p>Now, the min values have no unusual numbers<br>
Proceeding to EDA…</p>
</section>
<section id="preliminary-exploration-on-the-census-data" class="level2">
<h2 class="anchored" data-anchor-id="preliminary-exploration-on-the-census-data">Preliminary Exploration on the Census Data</h2>
<p>Since the census dataset isn’t the focus of this analysis, I will just do some brief exploration of the dataframe</p>
<ul>
<li><p><em>What are the most populated and least states?</em></p></li>
<li><p><em>Which states have highest and least black population?</em></p></li>
<li><p><em>Which states have highest and lowest median household income?</em></p></li>
</ul>
<div class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb133" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb133-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># What are the most populated and least states?</span></span>
<span id="cb133-2">a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pop_2016'</span>]].nlargest(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pop_2016'</span>)</span>
<span id="cb133-3">b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pop_2016'</span>]].nsmallest(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pop_2016'</span>)</span>
<span id="cb133-4"></span>
<span id="cb133-5">c_list <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [a, b]</span>
<span id="cb133-6">pd.concat(c_list, keys<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'most populated'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'least pupulated'</span>], axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rows'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="91">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">most populated</td>
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">42</td>
<td>Texas</td>
<td>27862596.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Florida</td>
<td>20612439.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">31</td>
<td>New York</td>
<td>19745289.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>Illinois</td>
<td>12801539.0</td>
</tr>
<tr class="even">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">least pupulated</td>
<td data-quarto-table-cell-role="th">49</td>
<td>Wyoming</td>
<td>585501.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">44</td>
<td>Vermont</td>
<td>624594.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">33</td>
<td>North Dakota</td>
<td>757952.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">40</td>
<td>South Dakota</td>
<td>865454.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb134" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb134-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Which states have highest and least black population?</span></span>
<span id="cb134-2">a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black_pct'</span>]].nlargest(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black_pct'</span>)</span>
<span id="cb134-3">b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black_pct'</span>]].nsmallest(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black_pct'</span>)</span>
<span id="cb134-4"></span>
<span id="cb134-5">c_list <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [a, b]</span>
<span id="cb134-6">pd.concat(c_list, keys<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'high black population'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'low black population'</span>], axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rows'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="92">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">black_pct</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">high black population</td>
<td data-quarto-table-cell-role="th">23</td>
<td>Mississippi</td>
<td>37.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>Louisiana</td>
<td>32.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>Georgia</td>
<td>32.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>Maryland</td>
<td>30.7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">39</td>
<td>South Carolina</td>
<td>27.5</td>
</tr>
<tr class="even">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">low black population</td>
<td data-quarto-table-cell-role="th">25</td>
<td>Montana</td>
<td>0.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">11</td>
<td>Idaho</td>
<td>0.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">44</td>
<td>Vermont</td>
<td>1.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">49</td>
<td>Wyoming</td>
<td>1.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">43</td>
<td>Utah</td>
<td>1.4</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb135" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb135-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Which states have highest and lowest median household income?</span></span>
<span id="cb135-2">a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hh_income'</span>]].nlargest(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hh_income'</span>)</span>
<span id="cb135-3">b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hh_income'</span>]].nsmallest(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hh_income'</span>)</span>
<span id="cb135-4">c_list <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [a, b]</span>
<span id="cb135-5">pd.concat(c_list, keys<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'high median household income ($)'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'low median household income ($)'</span>], axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'rows'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="93">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">high median household income ($)</td>
<td data-quarto-table-cell-role="th">19</td>
<td>Maryland</td>
<td>74551.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>72515.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">29</td>
<td>New Jersey</td>
<td>72093.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">6</td>
<td>Connecticut</td>
<td>70331.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>Hawaii</td>
<td>69515.0</td>
</tr>
<tr class="even">
<td rowspan="5" data-quarto-table-cell-role="th" data-valign="top">low median household income ($)</td>
<td data-quarto-table-cell-role="th">23</td>
<td>Mississippi</td>
<td>39665.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>41371.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">47</td>
<td>West Virginia</td>
<td>41751.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>43623.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">16</td>
<td>Kentucky</td>
<td>43740.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb136" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># saving for later</span></span>
<span id="cb136-2">df1.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_census_cleaned_v2.csv'</span>, index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span></code></pre></div>
</div>
<hr>
</section>
<section id="preparing-gun-sales-data-for-eda" class="level2">
<h2 class="anchored" data-anchor-id="preparing-gun-sales-data-for-eda">Preparing Gun Sales Data for EDA</h2>
<p><em>In this section, I will prepare the dataframe for EDA</em>:</p>
<div class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb137" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Reading in the dataset, and viewing heads, tails and  and random sample of the rows </span></span>
<span id="cb137-2">df2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_gun_cleaned.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb137-3">df2.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="95">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb138" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking tail of data</span></span>
<span id="cb138-2">df2.tail()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="96">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">12480</td>
<td>Virginia</td>
<td>14.0</td>
<td>2.0</td>
<td>8</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12481</td>
<td>Washington</td>
<td>65.0</td>
<td>286.0</td>
<td>8</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12482</td>
<td>West Virginia</td>
<td>149.0</td>
<td>251.0</td>
<td>5</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12483</td>
<td>Wisconsin</td>
<td>25.0</td>
<td>214.0</td>
<td>2</td>
<td>1998</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12484</td>
<td>Wyoming</td>
<td>45.0</td>
<td>49.0</td>
<td>5</td>
<td>1998</td>
<td>11</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb139" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># viewing random sample</span></span>
<span id="cb139-2">df2.sample(n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="97">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">5493</td>
<td>Vermont</td>
<td>619.0</td>
<td>683.0</td>
<td>46</td>
<td>2009</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7244</td>
<td>Oregon</td>
<td>4271.0</td>
<td>8203.0</td>
<td>290</td>
<td>2006</td>
<td>10</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4102</td>
<td>New Jersey</td>
<td>2449.0</td>
<td>1754.0</td>
<td>80</td>
<td>2011</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10568</td>
<td>District of Columbia</td>
<td>1.0</td>
<td>0.0</td>
<td>0</td>
<td>2001</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12033</td>
<td>South Carolina</td>
<td>4369.0</td>
<td>4793.0</td>
<td>77</td>
<td>1999</td>
<td>7</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb140" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb140-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Getting the dimensions of the DataFrame with the .shape attribute:</span></span>
<span id="cb140-2">df2.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="98">
<pre><code>(12485, 6)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb142" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking for nulls</span></span>
<span id="cb142-2">df2.isnull().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="99">
<pre><code>state        0
handgun     20
long_gun    19
multiple     0
year         0
month        0
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb144" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># revealing the nulls</span></span>
<span id="cb144-2">mask <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2.long_gun.isnull()</span>
<span id="cb144-3">df2[mask]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="100">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">7914</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>10</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7969</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8024</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8079</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8134</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8189</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8299</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8354</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8409</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2005</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8491</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2004</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9674</td>
<td>Virgin Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>2003</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12011</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12066</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12121</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12176</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12231</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12286</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12341</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1999</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12396</td>
<td>Mariana Islands</td>
<td>NaN</td>
<td>NaN</td>
<td>0</td>
<td>1998</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>After doing some research, I could not find adequate data on gun purchases on these islands. If any, I figured it is going to be insubstantial anyway. So I proceed to fill these NaNs with zero.</p>
<div class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb145" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb145-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># fill nans with 0</span></span>
<span id="cb145-2">df2.long_gun.fillna(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb145-3">df2.handgun.fillna(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb146" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb146-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># inspecting</span></span>
<span id="cb146-2">df2.isnull().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="102">
<pre><code>state       0
handgun     0
long_gun    0
multiple    0
year        0
month       0
dtype: int64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb148" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb148-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#  List the data type of each column, the number of non-missing values, and memory usage with the .info method:</span></span>
<span id="cb148-2">df2.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Index: 12485 entries, 0 to 12484
Data columns (total 6 columns):
 #   Column    Non-Null Count  Dtype  
---  ------    --------------  -----  
 0   state     12485 non-null  object 
 1   handgun   12485 non-null  float64
 2   long_gun  12485 non-null  float64
 3   multiple  12485 non-null  int64  
 4   year      12485 non-null  int64  
 5   month     12485 non-null  int64  
dtypes: float64(2), int64(3), object(1)
memory usage: 682.8+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb150" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb150-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># saving for later</span></span>
<span id="cb150-2">df2.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_gun_cleaned_v2.csv'</span>, index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb151" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1">df2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_gun_cleaned_v2.csv'</span>)</span>
<span id="cb151-2">df2.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="105">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>5734.0</td>
<td>6320.0</td>
<td>317</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2320.0</td>
<td>2930.0</td>
<td>160</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>11063.0</td>
<td>7946.0</td>
<td>631</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4347.0</td>
<td>6063.0</td>
<td>366</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>37165.0</td>
<td>24581.0</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>There are 12485 rows in this dataset representing each month per state, from 1998 - 2017. The data is clean: there are no null values, and the datatypes are appropriately assigned.</p>
</section>
<section id="data-dictionary-1" class="level2">
<h2 class="anchored" data-anchor-id="data-dictionary-1">Data Dictionary</h2>
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>s/n</strong></th>
<th style="text-align: left;"><strong>Variable</strong></th>
<th style="text-align: left;"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">state</td>
<td style="text-align: left;">Each of the 50 states of the contiguous U.S.</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">handgun</td>
<td style="text-align: left;">Population estimates by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">long_gun</td>
<td style="text-align: left;">Female persons, percent, by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">multiple</td>
<td style="text-align: left;">White alone, percent, by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">year</td>
<td style="text-align: left;">Black or African American alone, percent by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">month</td>
<td style="text-align: left;">Asian alone, percent, July 1, 2016</td>
</tr>
</tbody>
</table>
<div class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb152" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb152-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># displaying summary statistics</span></span>
<span id="cb152-2">df2.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="106">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>12485.000000</td>
<td>12485.000000</td>
<td>12485.000000</td>
<td>12485.000000</td>
<td>12485.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>5931.364277</td>
<td>7798.960833</td>
<td>268.603364</td>
<td>2007.792952</td>
<td>6.484581</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>8614.954626</td>
<td>9307.740581</td>
<td>783.185073</td>
<td>5.468296</td>
<td>3.451944</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>1998.000000</td>
<td>1.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>857.000000</td>
<td>2063.000000</td>
<td>15.000000</td>
<td>2003.000000</td>
<td>3.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>3046.000000</td>
<td>5114.000000</td>
<td>125.000000</td>
<td>2008.000000</td>
<td>6.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>7277.000000</td>
<td>10374.000000</td>
<td>301.000000</td>
<td>2013.000000</td>
<td>9.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>107224.000000</td>
<td>108058.000000</td>
<td>38907.000000</td>
<td>2017.000000</td>
<td>12.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb153" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Following a [NY Times recommendation], gun sales can be approximated from check calls </span></span>
<span id="cb153-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># by multiplying checks for handgun and long_gun by a factor of 1.1 and that of multiple by 2</span></span>
<span id="cb153-3"></span>
<span id="cb153-4">df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>].mul(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>)</span>
<span id="cb153-5">df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>].mul(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.1</span>)</span>
<span id="cb153-6">df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>].mul(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb153-7"></span>
<span id="cb153-8"></span>
<span id="cb153-9">df2.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="107">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>6307.4</td>
<td>6952.0</td>
<td>634</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2552.0</td>
<td>3223.0</td>
<td>320</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>12169.3</td>
<td>8740.6</td>
<td>1262</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4781.7</td>
<td>6669.3</td>
<td>732</td>
<td>2017</td>
<td>9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>40881.5</td>
<td>27039.1</td>
<td>0</td>
<td>2017</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb154" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb154-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># I am interested in gun trends in 2006, 2015 and 2016</span></span>
<span id="cb154-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># so I extract data for those years</span></span>
<span id="cb154-3"></span>
<span id="cb154-4">df2_2006 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2[df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2006</span>]</span>
<span id="cb154-5">df2_2015 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2[df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2015</span>]</span>
<span id="cb154-6">df2_2016 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2[df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2016</span>]</span></code></pre></div>
</div>
<div class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb155" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Since the year variable is now redundant, I opt to drop them</span></span>
<span id="cb155-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># I use the reset_index method to have the index start from 0</span></span>
<span id="cb155-3"></span>
<span id="cb155-4">df2_2006 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>).reset_index(drop<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb155-5">df2_2015 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2015.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>).reset_index(drop<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb155-6">df2_2016 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'year'</span>).reset_index(drop<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb156" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb156-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking the result</span></span>
<span id="cb156-2">df2_2006.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="110">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb157" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># saving for later</span></span>
<span id="cb157-2">df2_2006.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_2006.csv'</span>)</span>
<span id="cb157-3">df2_2015.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_2015.csv'</span>)</span>
<span id="cb157-4">df2_2016.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_2016.csv'</span>)</span></code></pre></div>
</div>
<p>Viewing the head of the three dataframes</p>
<div class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb158" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb158-1">df2_2006 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_2006.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb158-2">df2_2015 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_2015.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb158-3">df2_2016 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_2016.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb158-4"></span>
<span id="cb158-5">df2_2006.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="112">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb159" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb159-1">df2_2015.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="113">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>52365.5</td>
<td>37081.0</td>
<td>3504</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>5791.5</td>
<td>5101.8</td>
<td>428</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>28118.2</td>
<td>16197.5</td>
<td>1990</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>15158.0</td>
<td>16765.1</td>
<td>1042</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>81838.9</td>
<td>53638.2</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb160" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb160-1">df2_2016.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="114">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="exploratory-data-analysis-2" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis-2"><strong>Exploratory Data Analysis 2</strong></h2>
<section id="gun-sales-data" class="level3">
<h3 class="anchored" data-anchor-id="gun-sales-data"><strong>(Gun Sales Data)</strong></h3>
<p><em>In this section, I will answer the following research questions</em>:</p>
<blockquote class="blockquote">
<p>Year Level Questions: - <em>How many guns were sold in the U.S. in 2006?</em> - <em>What kind of gun was bought the most?</em> - <em>What are the overall monthly trends of gun purchases in 2006?</em></p>
<p>State Level Questions</p>
<ul>
<li><p>What are the top 5 states in terms of gun purchases in the U.S. in 2006?</p></li>
<li><p>What are the most bought gun types in those states?</p></li>
<li><p>What kind of gun was bought the most in one of those states?</p></li>
<li><p>What are the overall monthly trends of gun purchases in those states?</p></li>
</ul>
<p>Which states had the highest growth in gun sales over the span of a decade?</p>
</blockquote>
</section>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">2006</h2>
<div class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb161" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1">df2_2006 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_2006.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb161-2">df2_2006.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="115">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb162" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb162-1">df2_2006.describe().T</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="116">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">handgun</td>
<td>660.0</td>
<td>4068.875000</td>
<td>4725.841945</td>
<td>0.0</td>
<td>671.00</td>
<td>2560.25</td>
<td>5929.00</td>
<td>27432.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">long_gun</td>
<td>660.0</td>
<td>7982.651667</td>
<td>9051.901614</td>
<td>0.0</td>
<td>2091.10</td>
<td>5649.60</td>
<td>10799.80</td>
<td>68093.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">multiple</td>
<td>660.0</td>
<td>394.293939</td>
<td>779.232091</td>
<td>0.0</td>
<td>55.50</td>
<td>232.00</td>
<td>522.00</td>
<td>15684.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">month</td>
<td>660.0</td>
<td>6.500000</td>
<td>3.454671</td>
<td>1.0</td>
<td>3.75</td>
<td>6.50</td>
<td>9.25</td>
<td>12.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="117">
<div class="sourceCode cell-code" id="cb163" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plotting the kde of the variables to have a sense of the data distribution</span></span>
<span id="cb163-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># check how to change line color</span></span>
<span id="cb163-3"></span>
<span id="cb163-4">sns.set_style(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'darkgrid'</span>)</span>
<span id="cb163-5"></span>
<span id="cb163-6">fig, (ax1, ax2, ax3, ax4) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb163-7"></span>
<span id="cb163-8">df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"handgun"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1)</span>
<span id="cb163-9">ax1.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for handgun'</span>)</span>
<span id="cb163-10"></span>
<span id="cb163-11">df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"long_gun"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2)</span>
<span id="cb163-12">ax2.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for long_gun'</span>)</span>
<span id="cb163-13"></span>
<span id="cb163-14">df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"multiple"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3)</span>
<span id="cb163-15">ax3.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for multiple'</span>)</span>
<span id="cb163-16"></span>
<span id="cb163-17">df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4)</span>
<span id="cb163-18">ax4.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for month'</span>)</span>
<span id="cb163-19"></span>
<span id="cb163-20">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-118-output-1.png" width="1582" height="356"></p>
</div>
</div>
<section id="year-level-questions" class="level3">
<h3 class="anchored" data-anchor-id="year-level-questions">Year Level Questions</h3>
<ul>
<li><p>How many guns were sold in the U.S. in 2006?</p></li>
<li><p>What kind of gun was bought the most?</p></li>
<li><p>What are the overall monthly trends of gun purchases in 2006?</p></li>
</ul>
<p><em>How many guns were sold in the U.S. in 2006?</em></p>
<div class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb164" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb164-1">df2_2006[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="118">
<pre><code>8214241.6000000015</code></pre>
</div>
</div>
<p><em>What type of gun sold the most?</em></p>
<div class="cell" data-execution_count="119">
<div class="sourceCode cell-code" id="cb166" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb166-1">sns.set_style(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'darkgrid'</span>)</span>
<span id="cb166-2">fig, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb166-3"></span>
<span id="cb166-4">d <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().sort_values(ascending<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb166-5"></span>
<span id="cb166-6">df2_2006[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.barh(table<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>d)</span>
<span id="cb166-7">plt.setp(ax.get_xticklabels(), y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">.05</span>)</span>
<span id="cb166-8">plt.setp(ax.get_xticklines(), visible<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb166-9"></span>
<span id="cb166-10"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(df2_2006[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().sort_values(ascending<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>long_gun    5268550.1
handgun     2685457.5
multiple     260234.0
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-120-output-2.png" width="680" height="527"></p>
</div>
</div>
<p><em>What is the trend of gun sales throughout the year in 2006?</em></p>
<div class="cell" data-execution_count="120">
<div class="sourceCode cell-code" id="cb168" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb168-1">df2_2006.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Trends of Gun Sales in 2006'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="120">
<pre><code>&lt;Axes: title={'center': 'Monthly Trends of Gun Sales in 2006'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-121-output-2.png" width="594" height="447"></p>
</div>
</div>
</section>
<section id="state-level-questions" class="level3">
<h3 class="anchored" data-anchor-id="state-level-questions"><strong>State Level Questions</strong></h3>
<ul>
<li><p>What are the top 5 states in terms of gun purchases in the U.S. in 2006?</p></li>
<li><p>What are the most bought gun types in those states?</p></li>
<li><p>What are the overall monthly trends of gun purchases in those states?</p></li>
</ul>
<p><em>What are the top 5 states in terms of gun purchases in the U.S. in 2006?</em></p>
<div class="cell" data-execution_count="121">
<div class="sourceCode cell-code" id="cb170" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb170-1">df2_2006.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="121">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="122">
<div class="sourceCode cell-code" id="cb171" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb171-1">df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]</span>
<span id="cb171-2">df2_2006.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="122">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
<td>40522.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
<td>5519.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
<td>22014.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
<td>22282.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
<td>56579.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="123">
<div class="sourceCode cell-code" id="cb172" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb172-1">sns.set_style(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'darkgrid'</span>)</span>
<span id="cb172-2">fig, (ax1, ax2) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb172-3"></span>
<span id="cb172-4">df2_2006.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().sort_values(ascending<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>).head().plot.barh(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Top 5 States by Gun Sales'</span>)</span>
<span id="cb172-5">df2_2006.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>)[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().nlargest(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>).plot.bar(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Breakdown of Gun Sales by Type'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="123">
<pre><code>&lt;Axes: title={'center': 'Breakdown of Gun Sales by Type'}, xlabel='state'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-124-output-2.png" width="1018" height="514"></p>
</div>
</div>
<p><em>What are the top 5 states in terms of gun purchases in the U.S. in 2006?</em></p>
<p><em>What are the most bought gun types in those states?</em></p>
<div class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb174" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb174-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># What are the overall monthly trends of gun purchases overall and in those top 5 states?</span></span>
<span id="cb174-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># i.e month on x, sales on y, faceted by states</span></span>
<span id="cb174-3"></span>
<span id="cb174-4">df2_2006.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Overall Monthly Trend of Gun Sales in the U.S. in 2006'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="124">
<pre><code>&lt;Axes: title={'center': 'Overall Monthly Trend of Gun Sales in the U.S. in 2006'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-125-output-2.png" width="568" height="447"></p>
</div>
</div>
<div class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb176" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb176-1">fig, (ax1, ax2, ax3, ax4, ax5) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb176-2">crit_1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Texas'</span></span>
<span id="cb176-3">crit_2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pennsylvania'</span></span>
<span id="cb176-4">crit_3 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'California'</span></span>
<span id="cb176-5">crit_4 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Florida'</span></span>
<span id="cb176-6">crit_5 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ohio'</span></span>
<span id="cb176-7"></span>
<span id="cb176-8">df2_2006[crit_1].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(</span>
<span id="cb176-9">    ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in Texas'</span>)</span>
<span id="cb176-10">df2_2006[crit_2].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(</span>
<span id="cb176-11">    ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in Pennsylvania'</span>)</span>
<span id="cb176-12">df2_2006[crit_3].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(</span>
<span id="cb176-13">    ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in California'</span>)</span>
<span id="cb176-14">df2_2006[crit_4].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(</span>
<span id="cb176-15">    ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in Florida'</span>)</span>
<span id="cb176-16">df2_2006[crit_5].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(</span>
<span id="cb176-17">    ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax5, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in Ohio'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="125">
<pre><code>&lt;Axes: title={'center': 'Monthly Gun Sales Trends in Ohio'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-126-output-2.png" width="1933" height="447"></p>
</div>
</div>
</section>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">2016</h2>
<div class="cell" data-execution_count="126">
<div class="sourceCode cell-code" id="cb178" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb178-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reading in the data</span></span>
<span id="cb178-2">df2_2016 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_2016.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb178-3">df2_2016.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="126">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="127">
<div class="sourceCode cell-code" id="cb179" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb179-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># deriving summary statistics</span></span>
<span id="cb179-2">df2_2016.describe().T</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="127">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">handgun</td>
<td>660.0</td>
<td>13475.830000</td>
<td>15766.508622</td>
<td>0.0</td>
<td>2685.925</td>
<td>7737.95</td>
<td>18134.325</td>
<td>79888.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">long_gun</td>
<td>660.0</td>
<td>9980.851667</td>
<td>10916.172474</td>
<td>0.0</td>
<td>3268.650</td>
<td>6524.10</td>
<td>14035.450</td>
<td>102546.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">multiple</td>
<td>660.0</td>
<td>780.978788</td>
<td>1099.305994</td>
<td>0.0</td>
<td>16.000</td>
<td>401.00</td>
<td>1058.000</td>
<td>7782.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">month</td>
<td>660.0</td>
<td>6.500000</td>
<td>3.454671</td>
<td>1.0</td>
<td>3.750</td>
<td>6.50</td>
<td>9.250</td>
<td>12.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="128">
<div class="sourceCode cell-code" id="cb180" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb180-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plotting the kde of the variables to have a sense of the data distribution</span></span>
<span id="cb180-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># check how to change line color</span></span>
<span id="cb180-3">fig, (ax1, ax2, ax3, ax4) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb180-4"></span>
<span id="cb180-5">df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"handgun"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1)</span>
<span id="cb180-6">ax1.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for handgun'</span>)</span>
<span id="cb180-7"></span>
<span id="cb180-8">df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"long_gun"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2)</span>
<span id="cb180-9">ax2.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for long_gun'</span>)</span>
<span id="cb180-10"></span>
<span id="cb180-11">df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"multiple"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3)</span>
<span id="cb180-12">ax3.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for multiple'</span>)</span>
<span id="cb180-13"></span>
<span id="cb180-14">df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"month"</span>].plot.kde(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4)</span>
<span id="cb180-15">ax4.set_title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'KDE plot for month'</span>)</span>
<span id="cb180-16"></span>
<span id="cb180-17">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-129-output-1.png" width="1541" height="356"></p>
</div>
</div>
<section id="year-level-questions-1" class="level3">
<h3 class="anchored" data-anchor-id="year-level-questions-1">Year Level Questions</h3>
<ul>
<li><p>How many guns were sold in the U.S. in 2016?</p></li>
<li><p>What kind of gun was bought the most?</p></li>
<li><p>What are the overall monthly trends of gun purchases in 2016?</p></li>
</ul>
<p><em>How many guns were sold in the U.S. in 2016?</em></p>
<div class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb181" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb181-1">df2_2016[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="129">
<pre><code>15996855.9</code></pre>
</div>
</div>
<p><em>what type of gun sold the most?</em></p>
<div class="cell" data-execution_count="130">
<div class="sourceCode cell-code" id="cb183" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb183-1">fig, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb183-2"></span>
<span id="cb183-3">d <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().sort_values(ascending<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb183-4"></span>
<span id="cb183-5">df2_2016[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.barh(table<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>d)</span>
<span id="cb183-6">plt.setp(ax.get_xticklabels(), y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">.05</span>)</span>
<span id="cb183-7">plt.setp(ax.get_xticklines(), visible<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb183-8"></span>
<span id="cb183-9"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(df2_2016[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().sort_values(ascending<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>handgun     8894047.8
long_gun    6587362.1
multiple     515446.0
dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-131-output-2.png" width="680" height="527"></p>
</div>
</div>
<p><em>Trend of gun sales throughout the year in 2016</em></p>
<div class="cell" data-execution_count="131">
<div class="sourceCode cell-code" id="cb185" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb185-1">df2_2016.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Trends of Gun Sales in 2016'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="131">
<pre><code>&lt;Axes: title={'center': 'Monthly Trends of Gun Sales in 2016'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-132-output-2.png" width="594" height="447"></p>
</div>
</div>
</section>
<section id="state-level-questions-1" class="level3">
<h3 class="anchored" data-anchor-id="state-level-questions-1"><strong>State Level Questions</strong></h3>
<ul>
<li>What are the top 5 states in terms of gun purchases in the U.S. in 2016?</li>
<li>What are the most bought gun types in those states?</li>
<li>What was the most purchased gun in those states?</li>
<li>What are the overall monthly trends of gun purchases in those states?</li>
</ul>
<div class="cell" data-execution_count="132">
<div class="sourceCode cell-code" id="cb187" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb187-1">df2_2016.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="132">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="133">
<div class="sourceCode cell-code" id="cb188" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb188-1">df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]</span>
<span id="cb188-2">df2_2016.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="133">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
<td>35443.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
<td>8945.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
<td>36395.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
<td>25657.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
<td>172560.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><em>What are the top 5 states in terms of gun purchases in the U.S. in 2016?</em> <em>What are the most bought gun types in those states?</em></p>
<div class="cell" data-execution_count="134">
<div class="sourceCode cell-code" id="cb189" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb189-1">fig, (ax1, ax2) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb189-2"></span>
<span id="cb189-3">df2_2016.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().sort_values(ascending<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>).head().plot.barh(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Top 5 States by Gun Sales'</span>)</span>
<span id="cb189-4">df2_2016.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>)[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().nlargest(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>).plot.bar(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Breakdown of Gun Sales by Type'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="134">
<pre><code>&lt;Axes: title={'center': 'Breakdown of Gun Sales by Type'}, xlabel='state'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-135-output-2.png" width="1018" height="514"></p>
</div>
</div>
<p><em>What are the overall monthly trends of gun purchases?</em></p>
<div class="cell" data-execution_count="135">
<div class="sourceCode cell-code" id="cb191" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb191-1">df2_2016.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(title <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Overall Monthly Trend of Gun Sales in the U.S. in 2016'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="135">
<pre><code>&lt;Axes: title={'center': 'Overall Monthly Trend of Gun Sales in the U.S. in 2016'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-136-output-2.png" width="568" height="447"></p>
</div>
</div>
<div class="cell" data-execution_count="136">
<div class="sourceCode cell-code" id="cb193" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb193-1">fig, (ax1, ax2, ax3, ax4, ax5) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>))</span>
<span id="cb193-2">crit_1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Texas'</span></span>
<span id="cb193-3">crit_2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'California'</span></span>
<span id="cb193-4">crit_3 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Florida'</span></span>
<span id="cb193-5">crit_4 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Pennsylvania'</span></span>
<span id="cb193-6">crit_5 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016.state <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Ohio'</span></span>
<span id="cb193-7"></span>
<span id="cb193-8">df2_2016[crit_1].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in Texas'</span>)</span>
<span id="cb193-9">df2_2016[crit_2].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in California'</span>)</span>
<span id="cb193-10">df2_2016[crit_3].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in Florida'</span>)</span>
<span id="cb193-11">df2_2016[crit_4].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in Pennsylvania'</span>)</span>
<span id="cb193-12">df2_2016[crit_5].groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'month'</span>)[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().plot.line(ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax5, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Monthly Gun Sales Trends in Ohio'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="136">
<pre><code>&lt;Axes: title={'center': 'Monthly Gun Sales Trends in Ohio'}, xlabel='month'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-137-output-2.png" width="1933" height="447"></p>
</div>
</div>
<p><em>Which states have the highest growth in gun registrations over the span of a decade?</em>&nbsp;</p>
<p><strong>To answer this question, I will:</strong></p>
<ol type="1">
<li><p>Load the 2016 dataframe</p></li>
<li><p>Create a new column named&nbsp;<code>total</code>&nbsp;which is the sum of the three form of gun sales</p></li>
<li><p>Drop the individual form of gun sales as they are now irrelevant to the research question</p></li>
<li><p>Rename the columns for clarity</p></li>
<li><p>Follow the above procedure for the 2006 dataframe</p></li>
<li><p>Merge both dataframes on&nbsp;<code>state</code>&nbsp;</p></li>
<li><p>Subtract&nbsp;<code>total_2016</code>&nbsp;from&nbsp;total_2006’ to get a column for change</p></li>
<li><p>Create a percentage change column</p></li>
<li><p>Sort the dataframe by <code>%_change</code> and visualize the result</p></li>
</ol>
<div class="cell" data-execution_count="137">
<div class="sourceCode cell-code" id="cb195" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb195-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 2016 dataframe is loaded</span></span>
<span id="cb195-2">df2_2016.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="137">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
<td>35443.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
<td>8945.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
<td>36395.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
<td>25657.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
<td>172560.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="138">
<div class="sourceCode cell-code" id="cb196" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb196-1">df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2_2016[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]</span></code></pre></div>
</div>
<div class="cell" data-execution_count="139">
<div class="sourceCode cell-code" id="cb197" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb197-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># aggregating df2 on the gun sales columns</span></span>
<span id="cb197-2">df2_2016 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>)[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
</div>
<div class="cell" data-execution_count="140">
<div class="sourceCode cell-code" id="cb198" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb198-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># dropping columns</span></span>
<span id="cb198-2">cols <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]</span>
<span id="cb198-3">df2_2016.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>cols, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb198-4">df2_2016.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="140">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="141">
<div class="sourceCode cell-code" id="cb199" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb199-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># renaming for clarity</span></span>
<span id="cb199-2">df2_2016.rename(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">lambda</span> x: x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_2016"</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb199-3">df2_2016.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="141">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now I follow the sme procedures for the 2006 dataframe</p>
<div class="cell" data-execution_count="142">
<div class="sourceCode cell-code" id="cb200" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb200-1">df2_2006.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="142">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>11031.9</td>
<td>28608.8</td>
<td>882</td>
<td>12</td>
<td>40522.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>2190.1</td>
<td>3166.9</td>
<td>162</td>
<td>12</td>
<td>5519.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>9188.3</td>
<td>12136.3</td>
<td>690</td>
<td>12</td>
<td>22014.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>4814.7</td>
<td>17008.2</td>
<td>460</td>
<td>12</td>
<td>22282.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>17902.5</td>
<td>22993.3</td>
<td>15684</td>
<td>12</td>
<td>56579.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="143">
<div class="sourceCode cell-code" id="cb201" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb201-1">df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2_2006[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]</span></code></pre></div>
</div>
<div class="cell" data-execution_count="144">
<div class="sourceCode cell-code" id="cb202" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb202-1">df2_2006 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2006.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>)[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
</div>
<div class="cell" data-execution_count="145">
<div class="sourceCode cell-code" id="cb203" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb203-1">cols <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]</span>
<span id="cb203-2">df2_2006.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>cols, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb203-3">df2_2006.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="145">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>232324.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>48404.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>177284.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>142397.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>504970.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="146">
<div class="sourceCode cell-code" id="cb204" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb204-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># rename columns for clarity</span></span>
<span id="cb204-2">df2_2006.rename(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">lambda</span> x: x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"_2006"</span>, inplace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb204-3">df2_2006.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="146">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2006</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>232324.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>48404.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>177284.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>142397.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>504970.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Now, I merge both dataframes on ‘state’</p>
<div class="cell" data-execution_count="147">
<div class="sourceCode cell-code" id="cb205" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb205-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># merging the dataframe</span></span>
<span id="cb205-2">combined_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_2016.merge(df2_2006, on<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, how<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'inner'</span>)</span>
<span id="cb205-3">combined_df.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="147">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
<th data-quarto-table-cell-role="th">total_2006</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
<td>232324.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
<td>48404.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
<td>177284.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
<td>142397.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
<td>504970.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="148">
<div class="sourceCode cell-code" id="cb206" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb206-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add column for total_change</span></span>
<span id="cb206-2">combined_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_change'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> combined_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_2016'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> combined_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_2006'</span>]</span>
<span id="cb206-3">combined_df.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="148">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
<th data-quarto-table-cell-role="th">total_2006</th>
<th data-quarto-table-cell-role="th">total_change</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
<td>232324.7</td>
<td>83359.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
<td>48404.4</td>
<td>38043.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
<td>177284.5</td>
<td>141880.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
<td>142397.6</td>
<td>45002.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
<td>504970.9</td>
<td>721424.6</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="149">
<div class="sourceCode cell-code" id="cb207" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb207-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># adding a column for % change and rounding to 2 d.f.</span></span>
<span id="cb207-2">combined_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'%_change'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ((combined_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_change'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> combined_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total_2006'</span>]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>).<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">round</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb207-3">combined_df.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="149">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
<th data-quarto-table-cell-role="th">total_2006</th>
<th data-quarto-table-cell-role="th">total_change</th>
<th data-quarto-table-cell-role="th">%_change</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
<td>232324.7</td>
<td>83359.9</td>
<td>35.88</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
<td>48404.4</td>
<td>38043.4</td>
<td>78.59</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
<td>177284.5</td>
<td>141880.7</td>
<td>80.03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
<td>142397.6</td>
<td>45002.8</td>
<td>31.60</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
<td>504970.9</td>
<td>721424.6</td>
<td>142.86</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-execution_count="150">
<div class="sourceCode cell-code" id="cb208" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb208-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># states with the greatest changes in gun sales from 2006 to 2016</span></span>
<span id="cb208-2">combined_df.sort_values(by<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'%_change'</span>, ascending<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="150">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">total_2016</th>
<th data-quarto-table-cell-role="th">total_2006</th>
<th data-quarto-table-cell-role="th">total_change</th>
<th data-quarto-table-cell-role="th">%_change</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Guam</td>
<td>2233.9</td>
<td>390.9</td>
<td>1843.0</td>
<td>471.48</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Illinois</td>
<td>606898.6</td>
<td>181086.6</td>
<td>425812.0</td>
<td>235.14</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">New Jersey</td>
<td>131282.8</td>
<td>41572.1</td>
<td>89710.7</td>
<td>215.80</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Connecticut</td>
<td>182806.8</td>
<td>58656.7</td>
<td>124150.1</td>
<td>211.66</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Massachusetts</td>
<td>134658.8</td>
<td>43577.9</td>
<td>91080.9</td>
<td>209.01</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Delaware</td>
<td>54120.0</td>
<td>18561.4</td>
<td>35558.6</td>
<td>191.57</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">District of Columbia</td>
<td>811.3</td>
<td>279.0</td>
<td>532.3</td>
<td>190.79</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Rhode Island</td>
<td>30910.6</td>
<td>11853.8</td>
<td>19056.8</td>
<td>160.77</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Indiana</td>
<td>519104.0</td>
<td>200853.4</td>
<td>318250.6</td>
<td>158.45</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New Hampshire</td>
<td>124641.0</td>
<td>48451.3</td>
<td>76189.7</td>
<td>157.25</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Florida</td>
<td>1126678.0</td>
<td>448412.9</td>
<td>678265.1</td>
<td>151.26</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Missouri</td>
<td>550714.2</td>
<td>222703.8</td>
<td>328010.4</td>
<td>147.29</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>1226395.5</td>
<td>504970.9</td>
<td>721424.6</td>
<td>142.86</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Tennessee</td>
<td>604447.0</td>
<td>257610.1</td>
<td>346836.9</td>
<td>134.64</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Washington</td>
<td>417704.5</td>
<td>190076.1</td>
<td>227628.4</td>
<td>119.76</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>493366.8</td>
<td>227299.8</td>
<td>266067.0</td>
<td>117.06</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>735052.3</td>
<td>343179.8</td>
<td>391872.5</td>
<td>114.19</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>368982.5</td>
<td>173129.4</td>
<td>195853.1</td>
<td>113.13</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Virginia</td>
<td>556531.8</td>
<td>265476.9</td>
<td>291054.9</td>
<td>109.63</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Maryland</td>
<td>137290.7</td>
<td>65591.9</td>
<td>71698.8</td>
<td>109.31</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">South Carolina</td>
<td>250854.6</td>
<td>126091.3</td>
<td>124763.3</td>
<td>98.95</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Texas</td>
<td>1297197.5</td>
<td>657275.5</td>
<td>639922.0</td>
<td>97.36</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maine</td>
<td>110103.5</td>
<td>56676.4</td>
<td>53427.1</td>
<td>94.27</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oklahoma</td>
<td>347686.5</td>
<td>179211.3</td>
<td>168475.2</td>
<td>94.01</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>353919.5</td>
<td>182485.6</td>
<td>171433.9</td>
<td>93.94</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Wisconsin</td>
<td>381738.4</td>
<td>205512.6</td>
<td>176225.8</td>
<td>85.75</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Vermont</td>
<td>42660.3</td>
<td>23028.2</td>
<td>19632.1</td>
<td>85.25</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Puerto Rico</td>
<td>17264.5</td>
<td>9504.8</td>
<td>7759.7</td>
<td>81.64</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">South Dakota</td>
<td>99014.2</td>
<td>54671.6</td>
<td>44342.6</td>
<td>81.11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Nevada</td>
<td>122135.3</td>
<td>67496.1</td>
<td>54639.2</td>
<td>80.95</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>319165.2</td>
<td>177284.5</td>
<td>141880.7</td>
<td>80.03</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>86447.8</td>
<td>48404.4</td>
<td>38043.4</td>
<td>78.59</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">New Mexico</td>
<td>145071.8</td>
<td>83798.5</td>
<td>61273.3</td>
<td>73.12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Louisiana</td>
<td>358999.0</td>
<td>214295.7</td>
<td>144703.3</td>
<td>67.53</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">West Virginia</td>
<td>201117.9</td>
<td>122062.6</td>
<td>79055.3</td>
<td>64.77</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Minnesota</td>
<td>315347.5</td>
<td>193136.1</td>
<td>122211.4</td>
<td>63.28</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">North Dakota</td>
<td>61330.8</td>
<td>38198.7</td>
<td>23132.1</td>
<td>60.56</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Idaho</td>
<td>117137.4</td>
<td>72988.4</td>
<td>44149.0</td>
<td>60.49</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Kansas</td>
<td>178892.4</td>
<td>112153.3</td>
<td>66739.1</td>
<td>59.51</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Michigan</td>
<td>328993.7</td>
<td>209450.2</td>
<td>119543.5</td>
<td>57.07</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Pennsylvania</td>
<td>880410.3</td>
<td>571519.3</td>
<td>308891.0</td>
<td>54.05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mississippi</td>
<td>243585.2</td>
<td>168252.6</td>
<td>75332.6</td>
<td>44.77</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Montana</td>
<td>109175.1</td>
<td>75877.6</td>
<td>33297.5</td>
<td>43.88</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Wyoming</td>
<td>55812.4</td>
<td>39540.8</td>
<td>16271.6</td>
<td>41.15</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>315684.6</td>
<td>232324.7</td>
<td>83359.9</td>
<td>35.88</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Georgia</td>
<td>370340.7</td>
<td>273600.3</td>
<td>96740.4</td>
<td>35.36</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>187400.4</td>
<td>142397.6</td>
<td>45002.8</td>
<td>31.60</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">North Carolina</td>
<td>218489.4</td>
<td>166084.1</td>
<td>52405.3</td>
<td>31.55</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Kentucky</td>
<td>288612.1</td>
<td>226781.0</td>
<td>61831.1</td>
<td>27.26</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Utah</td>
<td>114069.4</td>
<td>95817.3</td>
<td>18252.1</td>
<td>19.05</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Virgin Islands</td>
<td>365.3</td>
<td>354.5</td>
<td>10.8</td>
<td>3.05</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Nebraska</td>
<td>31196.1</td>
<td>32570.0</td>
<td>-1373.9</td>
<td>-4.22</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Iowa</td>
<td>41988.4</td>
<td>51636.0</td>
<td>-9647.6</td>
<td>-18.68</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mariana Islands</td>
<td>17.6</td>
<td>25.3</td>
<td>-7.7</td>
<td>-30.43</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Hawaii</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Visualizing results</p>
<div class="cell" data-execution_count="151">
<div class="sourceCode cell-code" id="cb209" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb209-1">combined_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'%_change'</span>].head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>).plot.line(</span>
<span id="cb209-2">    x<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, y<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'%_change'</span>, title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="151">
<pre><code>&lt;Axes: xlabel='state'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-152-output-2.png" width="1539" height="354"></p>
</div>
</div>
</section>
</section>
<section id="which-census-data-variables-are-most-associated-with-gun-sales-data" class="level2">
<h2 class="anchored" data-anchor-id="which-census-data-variables-are-most-associated-with-gun-sales-data">Which census data variables are most associated with gun sales data?</h2>
<p><em>To answer this question, I proceed merge the dataframes</em></p>
<div class="cell" data-execution_count="152">
<div class="sourceCode cell-code" id="cb211" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb211-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reading in the census data</span></span>
<span id="cb211-2">df1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df_census_cleaned_v2.csv'</span>)</span>
<span id="cb211-3">df1.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="152">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">pe_hh</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>2.55</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>2.81</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>2.69</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>2.53</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>2.96</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="data-dictionary-2" class="level3">
<h3 class="anchored" data-anchor-id="data-dictionary-2"><strong>Data Dictionary</strong></h3>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">s/n</th>
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">state</td>
<td style="text-align: left;">Each of the 50 states of the contiguous U.S.</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">pop_2016</td>
<td style="text-align: left;">Population estimates by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">female_pct</td>
<td style="text-align: left;">Female persons, percent, by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">white_pct</td>
<td style="text-align: left;">White alone, percent, by July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">black_pct</td>
<td style="text-align: left;">Black or African American alone, percent by July 1, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">5</td>
<td style="text-align: left;">asian_pct</td>
<td style="text-align: left;">Asian alone, percent, July 1, 2016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">6</td>
<td style="text-align: left;">pe_hh</td>
<td style="text-align: left;">Persons per household, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">7</td>
<td style="text-align: left;">pe_whi</td>
<td style="text-align: left;">Persons without health insurance, under age 65 years, percent</td>
</tr>
<tr class="odd">
<td style="text-align: left;">8</td>
<td style="text-align: left;">adults_below_65</td>
<td style="text-align: left;">adults older than 18, younger than 65, percent, 2016</td>
</tr>
<tr class="even">
<td style="text-align: left;">9</td>
<td style="text-align: left;">high_school_grad_higher</td>
<td style="text-align: left;">High school graduate or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">10</td>
<td style="text-align: left;">bsc_higher</td>
<td style="text-align: left;">Bachelor’s degree or higher, percent of persons age 25 years+, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">11</td>
<td style="text-align: left;">median_hu</td>
<td style="text-align: left;">Median value of owner-occupied housing units, 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12</td>
<td style="text-align: left;">median_gross_rent</td>
<td style="text-align: left;">Median gross rent, 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">13</td>
<td style="text-align: left;">poverty_pct</td>
<td style="text-align: left;">Persons in poverty, percent</td>
</tr>
<tr class="odd">
<td style="text-align: left;">14</td>
<td style="text-align: left;">median_hh_income</td>
<td style="text-align: left;">Median household income (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="even">
<td style="text-align: left;">15</td>
<td style="text-align: left;">per_cap_inc</td>
<td style="text-align: left;">Per capita income in past 12 months (in 2015 dollars), 2011-2015</td>
</tr>
<tr class="odd">
<td style="text-align: left;">16</td>
<td style="text-align: left;">firms</td>
<td style="text-align: left;">All firms, 2012</td>
</tr>
</tbody>
</table>
<div class="cell" data-execution_count="153">
<div class="sourceCode cell-code" id="cb212" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb212-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reading in the gun data </span></span>
<span id="cb212-2">df2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/df2_2016.csv'</span>, index_col<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb212-3">df2.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="153">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">month</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>15106.3</td>
<td>19270.9</td>
<td>1066</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>4495.7</td>
<td>4067.8</td>
<td>382</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>19826.4</td>
<td>15163.5</td>
<td>1406</td>
<td>12</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>10111.2</td>
<td>14776.3</td>
<td>770</td>
<td>12</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>70013.9</td>
<td>102546.4</td>
<td>0</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="data-dictionary-3" class="level3">
<h3 class="anchored" data-anchor-id="data-dictionary-3"><strong>Data Dictionary</strong></h3>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">s/n</th>
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">state</td>
<td style="text-align: left;">Each of the 55 states and territories of the .U.S.</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">handgun</td>
<td style="text-align: left;">handgun checks, transformed into sales by a factor of 1.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">long_gun</td>
<td style="text-align: left;">long-gun checks, transformed into sales by a factor of 1.1</td>
</tr>
<tr class="even">
<td style="text-align: left;">3</td>
<td style="text-align: left;">multiple</td>
<td style="text-align: left;">multiple gun checks, transformed into sales by a factor of 2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">4</td>
<td style="text-align: left;">month</td>
<td style="text-align: left;">months of 2016</td>
</tr>
</tbody>
</table>
<div class="cell" data-execution_count="154">
<div class="sourceCode cell-code" id="cb213" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb213-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of unique states in census dataframe</span></span>
<span id="cb213-2">df1.state.nunique()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="154">
<pre><code>50</code></pre>
</div>
</div>
<div class="cell" data-execution_count="155">
<div class="sourceCode cell-code" id="cb215" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb215-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># number of unique states in gun sales dataframe</span></span>
<span id="cb215-2">df2.state.nunique()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="155">
<pre><code>55</code></pre>
</div>
</div>
<div class="cell" data-execution_count="156">
<div class="sourceCode cell-code" id="cb217" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb217-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># getting the uncommon territories in both datasets</span></span>
<span id="cb217-2">s1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df1.state</span>
<span id="cb217-3">s2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2.state.unique()</span>
<span id="cb217-4">common_states <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> s1[s1.isin(s2)]</span>
<span id="cb217-5"></span>
<span id="cb217-6">s3 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2.query(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"state not in @common_states"</span>)</span>
<span id="cb217-7">s3.loc[:, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>].unique()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="156">
<pre><code>array(['District of Columbia', 'Guam', 'Mariana Islands', 'Puerto Rico',
       'Virgin Islands'], dtype=object)</code></pre>
</div>
</div>
<p>These territories are part of the commonwealth of the United States but are not part of the mainland.</p>
<div class="cell" data-execution_count="157">
<div class="sourceCode cell-code" id="cb219" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb219-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># creating 'total' column</span></span>
<span id="cb219-2">df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> df2[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>]</span></code></pre></div>
</div>
<div class="cell" data-execution_count="158">
<div class="sourceCode cell-code" id="cb220" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb220-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># aggregating df2 on the gun sales columns</span></span>
<span id="cb220-2">df2_agg <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2.groupby(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>)[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>]].<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span>
<span id="cb220-3">df2_agg</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="158">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">total</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Alabama</td>
<td>168435.3</td>
<td>134159.3</td>
<td>13090</td>
<td>315684.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Alaska</td>
<td>41240.1</td>
<td>40575.7</td>
<td>4632</td>
<td>86447.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Arizona</td>
<td>183462.4</td>
<td>119886.8</td>
<td>15816</td>
<td>319165.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Arkansas</td>
<td>88268.4</td>
<td>90332.0</td>
<td>8800</td>
<td>187400.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">California</td>
<td>616390.5</td>
<td>610005.0</td>
<td>0</td>
<td>1226395.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>266752.2</td>
<td>198028.6</td>
<td>28586</td>
<td>493366.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Connecticut</td>
<td>134612.5</td>
<td>48194.3</td>
<td>0</td>
<td>182806.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Delaware</td>
<td>28131.4</td>
<td>23920.6</td>
<td>2068</td>
<td>54120.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">District of Columbia</td>
<td>742.5</td>
<td>52.8</td>
<td>16</td>
<td>811.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Florida</td>
<td>728538.8</td>
<td>347855.2</td>
<td>50284</td>
<td>1126678.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Georgia</td>
<td>214280.0</td>
<td>141104.7</td>
<td>14956</td>
<td>370340.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Guam</td>
<td>1373.9</td>
<td>726.0</td>
<td>134</td>
<td>2233.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Hawaii</td>
<td>0.0</td>
<td>0.0</td>
<td>0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Idaho</td>
<td>51175.3</td>
<td>61150.1</td>
<td>4812</td>
<td>117137.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Illinois</td>
<td>387652.1</td>
<td>194980.5</td>
<td>24266</td>
<td>606898.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Indiana</td>
<td>306000.2</td>
<td>194939.8</td>
<td>18164</td>
<td>519104.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Iowa</td>
<td>3069.0</td>
<td>38779.4</td>
<td>140</td>
<td>41988.4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Kansas</td>
<td>89227.6</td>
<td>81122.8</td>
<td>8542</td>
<td>178892.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Kentucky</td>
<td>154793.1</td>
<td>119933.0</td>
<td>13886</td>
<td>288612.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Louisiana</td>
<td>188746.8</td>
<td>153034.2</td>
<td>17218</td>
<td>358999.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maine</td>
<td>53729.5</td>
<td>51458.0</td>
<td>4916</td>
<td>110103.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Mariana Islands</td>
<td>0.0</td>
<td>17.6</td>
<td>0</td>
<td>17.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Maryland</td>
<td>57535.5</td>
<td>79081.2</td>
<td>674</td>
<td>137290.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Massachusetts</td>
<td>83574.7</td>
<td>46124.1</td>
<td>4960</td>
<td>134658.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Michigan</td>
<td>181365.8</td>
<td>141997.9</td>
<td>5630</td>
<td>328993.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Minnesota</td>
<td>147358.2</td>
<td>157897.3</td>
<td>10092</td>
<td>315347.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Mississippi</td>
<td>130955.0</td>
<td>102104.2</td>
<td>10526</td>
<td>243585.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Missouri</td>
<td>302229.4</td>
<td>222978.8</td>
<td>25506</td>
<td>550714.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Montana</td>
<td>41301.7</td>
<td>62517.4</td>
<td>5356</td>
<td>109175.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Nebraska</td>
<td>1888.7</td>
<td>29143.4</td>
<td>164</td>
<td>31196.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Nevada</td>
<td>72773.8</td>
<td>41915.5</td>
<td>7446</td>
<td>122135.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New Hampshire</td>
<td>75381.9</td>
<td>49149.1</td>
<td>110</td>
<td>124641.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">New Jersey</td>
<td>77273.9</td>
<td>54008.9</td>
<td>0</td>
<td>131282.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New Mexico</td>
<td>76377.4</td>
<td>61230.4</td>
<td>7464</td>
<td>145071.8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">New York</td>
<td>146613.5</td>
<td>217437.0</td>
<td>4932</td>
<td>368982.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">North Carolina</td>
<td>18254.5</td>
<td>194610.9</td>
<td>5624</td>
<td>218489.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">North Dakota</td>
<td>21972.5</td>
<td>37414.3</td>
<td>1944</td>
<td>61330.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>434027.0</td>
<td>268359.3</td>
<td>32666</td>
<td>735052.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Oklahoma</td>
<td>182799.1</td>
<td>143565.4</td>
<td>21322</td>
<td>347686.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>196587.6</td>
<td>157331.9</td>
<td>0</td>
<td>353919.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Pennsylvania</td>
<td>706455.2</td>
<td>173955.1</td>
<td>0</td>
<td>880410.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Puerto Rico</td>
<td>14056.9</td>
<td>2657.6</td>
<td>550</td>
<td>17264.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Rhode Island</td>
<td>15688.2</td>
<td>11224.4</td>
<td>3998</td>
<td>30910.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">South Carolina</td>
<td>145720.3</td>
<td>96154.3</td>
<td>8980</td>
<td>250854.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">South Dakota</td>
<td>40172.0</td>
<td>54474.2</td>
<td>4368</td>
<td>99014.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Tennessee</td>
<td>351085.9</td>
<td>231177.1</td>
<td>22184</td>
<td>604447.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Texas</td>
<td>701223.6</td>
<td>529769.9</td>
<td>66204</td>
<td>1297197.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Utah</td>
<td>52141.1</td>
<td>59546.3</td>
<td>2382</td>
<td>114069.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Vermont</td>
<td>20152.0</td>
<td>20738.3</td>
<td>1770</td>
<td>42660.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Virgin Islands</td>
<td>292.6</td>
<td>62.7</td>
<td>10</td>
<td>365.3</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Virginia</td>
<td>325559.3</td>
<td>230972.5</td>
<td>0</td>
<td>556531.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Washington</td>
<td>235516.6</td>
<td>166131.9</td>
<td>16056</td>
<td>417704.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">West Virginia</td>
<td>101336.4</td>
<td>89215.5</td>
<td>10566</td>
<td>201117.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Wisconsin</td>
<td>204930.0</td>
<td>175762.4</td>
<td>1046</td>
<td>381738.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Wyoming</td>
<td>24825.9</td>
<td>28396.5</td>
<td>2590</td>
<td>55812.4</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Merging on df1’s state column</p>
<div class="cell" data-execution_count="159">
<div class="sourceCode cell-code" id="cb221" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb221-1">merged_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df2_agg.merge(df1, on<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'state'</span>, how<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'inner'</span>)</span>
<span id="cb221-2">merged_df.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="159">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">total</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>168435.3</td>
<td>134159.3</td>
<td>13090</td>
<td>315684.6</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>...</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>41240.1</td>
<td>40575.7</td>
<td>4632</td>
<td>86447.8</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>...</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>183462.4</td>
<td>119886.8</td>
<td>15816</td>
<td>319165.2</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>...</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>88268.4</td>
<td>90332.0</td>
<td>8800</td>
<td>187400.4</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>...</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>616390.5</td>
<td>610005.0</td>
<td>0</td>
<td>1226395.5</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>...</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Colorado</td>
<td>266752.2</td>
<td>198028.6</td>
<td>28586</td>
<td>493366.8</td>
<td>5540545.0</td>
<td>49.7</td>
<td>87.5</td>
<td>4.5</td>
<td>3.3</td>
<td>...</td>
<td>8.6</td>
<td>63.8</td>
<td>90.7</td>
<td>38.1</td>
<td>247800.0</td>
<td>1002.0</td>
<td>11.0</td>
<td>60629.0</td>
<td>32217.0</td>
<td>547352.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Connecticut</td>
<td>134612.5</td>
<td>48194.3</td>
<td>0</td>
<td>182806.8</td>
<td>3576452.0</td>
<td>51.2</td>
<td>80.6</td>
<td>11.8</td>
<td>4.7</td>
<td>...</td>
<td>5.7</td>
<td>62.8</td>
<td>89.9</td>
<td>37.6</td>
<td>270500.0</td>
<td>1075.0</td>
<td>9.8</td>
<td>70331.0</td>
<td>38803.0</td>
<td>326693.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Delaware</td>
<td>28131.4</td>
<td>23920.6</td>
<td>2068</td>
<td>54120.0</td>
<td>952065.0</td>
<td>51.6</td>
<td>70.1</td>
<td>22.6</td>
<td>4.0</td>
<td>...</td>
<td>6.6</td>
<td>61.0</td>
<td>88.4</td>
<td>30.0</td>
<td>231500.0</td>
<td>1018.0</td>
<td>11.7</td>
<td>60509.0</td>
<td>30554.0</td>
<td>73418.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Florida</td>
<td>728538.8</td>
<td>347855.2</td>
<td>50284</td>
<td>1126678.0</td>
<td>20612439.0</td>
<td>51.1</td>
<td>77.6</td>
<td>16.8</td>
<td>2.9</td>
<td>...</td>
<td>15.3</td>
<td>60.0</td>
<td>86.9</td>
<td>27.3</td>
<td>159000.0</td>
<td>1002.0</td>
<td>14.7</td>
<td>47507.0</td>
<td>26829.0</td>
<td>2100187.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Georgia</td>
<td>214280.0</td>
<td>141104.7</td>
<td>14956</td>
<td>370340.7</td>
<td>10310371.0</td>
<td>51.3</td>
<td>61.2</td>
<td>32.0</td>
<td>4.1</td>
<td>...</td>
<td>14.8</td>
<td>62.5</td>
<td>85.4</td>
<td>28.8</td>
<td>148100.0</td>
<td>879.0</td>
<td>16.0</td>
<td>49620.0</td>
<td>25737.0</td>
<td>929864.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>Hawaii</td>
<td>0.0</td>
<td>0.0</td>
<td>0</td>
<td>0.0</td>
<td>1428557.0</td>
<td>49.8</td>
<td>25.8</td>
<td>2.2</td>
<td>37.7</td>
<td>...</td>
<td>4.2</td>
<td>61.3</td>
<td>91.0</td>
<td>30.8</td>
<td>515300.0</td>
<td>1438.0</td>
<td>9.3</td>
<td>69515.0</td>
<td>29822.0</td>
<td>118454.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">11</td>
<td>Idaho</td>
<td>51175.3</td>
<td>61150.1</td>
<td>4812</td>
<td>117137.4</td>
<td>1683140.0</td>
<td>49.9</td>
<td>93.3</td>
<td>0.8</td>
<td>1.5</td>
<td>...</td>
<td>11.8</td>
<td>58.9</td>
<td>89.5</td>
<td>25.9</td>
<td>162900.0</td>
<td>743.0</td>
<td>14.4</td>
<td>47583.0</td>
<td>23399.0</td>
<td>146642.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">12</td>
<td>Illinois</td>
<td>387652.1</td>
<td>194980.5</td>
<td>24266</td>
<td>606898.6</td>
<td>12801539.0</td>
<td>50.9</td>
<td>77.2</td>
<td>14.7</td>
<td>5.5</td>
<td>...</td>
<td>7.4</td>
<td>62.5</td>
<td>87.9</td>
<td>32.3</td>
<td>173800.0</td>
<td>907.0</td>
<td>13.0</td>
<td>57574.0</td>
<td>30494.0</td>
<td>1135017.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">13</td>
<td>Indiana</td>
<td>306000.2</td>
<td>194939.8</td>
<td>18164</td>
<td>519104.0</td>
<td>6633053.0</td>
<td>50.7</td>
<td>85.6</td>
<td>9.7</td>
<td>2.2</td>
<td>...</td>
<td>9.4</td>
<td>61.3</td>
<td>87.8</td>
<td>24.1</td>
<td>124200.0</td>
<td>745.0</td>
<td>14.1</td>
<td>49255.0</td>
<td>25346.0</td>
<td>479059.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">14</td>
<td>Iowa</td>
<td>3069.0</td>
<td>38779.4</td>
<td>140</td>
<td>41988.4</td>
<td>3134693.0</td>
<td>50.3</td>
<td>91.4</td>
<td>3.7</td>
<td>2.5</td>
<td>...</td>
<td>5.0</td>
<td>60.3</td>
<td>91.5</td>
<td>26.7</td>
<td>129200.0</td>
<td>697.0</td>
<td>11.8</td>
<td>53183.0</td>
<td>27950.0</td>
<td>259121.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">15</td>
<td>Kansas</td>
<td>89227.6</td>
<td>81122.8</td>
<td>8542</td>
<td>178892.4</td>
<td>2907289.0</td>
<td>50.2</td>
<td>86.6</td>
<td>6.2</td>
<td>3.0</td>
<td>...</td>
<td>10.1</td>
<td>60.4</td>
<td>90.2</td>
<td>31.0</td>
<td>132000.0</td>
<td>757.0</td>
<td>12.1</td>
<td>52205.0</td>
<td>27706.0</td>
<td>239118.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Kentucky</td>
<td>154793.1</td>
<td>119933.0</td>
<td>13886</td>
<td>288612.1</td>
<td>4436974.0</td>
<td>50.7</td>
<td>88.0</td>
<td>8.3</td>
<td>1.5</td>
<td>...</td>
<td>6.0</td>
<td>61.6</td>
<td>84.2</td>
<td>22.3</td>
<td>123200.0</td>
<td>675.0</td>
<td>18.5</td>
<td>43740.0</td>
<td>24063.0</td>
<td>331546.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">17</td>
<td>Louisiana</td>
<td>188746.8</td>
<td>153034.2</td>
<td>17218</td>
<td>358999.0</td>
<td>4681666.0</td>
<td>51.1</td>
<td>63.2</td>
<td>32.6</td>
<td>1.8</td>
<td>...</td>
<td>11.9</td>
<td>61.8</td>
<td>83.4</td>
<td>22.5</td>
<td>144100.0</td>
<td>788.0</td>
<td>20.2</td>
<td>45047.0</td>
<td>24981.0</td>
<td>414291.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">18</td>
<td>Maine</td>
<td>53729.5</td>
<td>51458.0</td>
<td>4916</td>
<td>110103.5</td>
<td>1331479.0</td>
<td>51.0</td>
<td>94.8</td>
<td>1.5</td>
<td>1.2</td>
<td>...</td>
<td>9.9</td>
<td>61.5</td>
<td>91.6</td>
<td>29.0</td>
<td>173800.0</td>
<td>777.0</td>
<td>12.5</td>
<td>49331.0</td>
<td>27655.0</td>
<td>139570.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19</td>
<td>Maryland</td>
<td>57535.5</td>
<td>79081.2</td>
<td>674</td>
<td>137290.7</td>
<td>6016447.0</td>
<td>51.6</td>
<td>59.3</td>
<td>30.7</td>
<td>6.6</td>
<td>...</td>
<td>7.0</td>
<td>63.0</td>
<td>89.4</td>
<td>37.9</td>
<td>286900.0</td>
<td>1230.0</td>
<td>9.7</td>
<td>74551.0</td>
<td>36897.0</td>
<td>531953.0</td>
</tr>
</tbody>
</table>

<p>20 rows × 21 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="160">
<div class="sourceCode cell-code" id="cb222" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb222-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># checking for nans throughout the dataframe</span></span>
<span id="cb222-2">merged_df.isnull().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>().<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="160">
<pre><code>0</code></pre>
</div>
</div>
<div class="cell" data-execution_count="161">
<div class="sourceCode cell-code" id="cb224" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb224-1">merged_df.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 50 entries, 0 to 49
Data columns (total 21 columns):
 #   Column                   Non-Null Count  Dtype  
---  ------                   --------------  -----  
 0   state                    50 non-null     object 
 1   handgun                  50 non-null     float64
 2   long_gun                 50 non-null     float64
 3   multiple                 50 non-null     int64  
 4   total                    50 non-null     float64
 5   pop_2016                 50 non-null     float64
 6   female_pct               50 non-null     float64
 7   white_pct                50 non-null     float64
 8   black_pct                50 non-null     float64
 9   asian_pct                50 non-null     float64
 10  pe_hh                    50 non-null     float64
 11  pe_whi                   50 non-null     float64
 12  adults_below_65          50 non-null     float64
 13  high_school_grad_higher  50 non-null     float64
 14  bsc_higher               50 non-null     float64
 15  median_hu                50 non-null     float64
 16  median_gross_rent        50 non-null     float64
 17  poverty_pct              50 non-null     float64
 18  median_hh_income         50 non-null     float64
 19  per_cap_inc              50 non-null     float64
 20  firms                    50 non-null     float64
dtypes: float64(19), int64(1), object(1)
memory usage: 8.3+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="162">
<div class="sourceCode cell-code" id="cb226" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb226-1">merged_df.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="162">
<pre><code>(50, 21)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="163">
<div class="sourceCode cell-code" id="cb228" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb228-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># saving for later</span></span>
<span id="cb228-2">merged_df.to_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/merged_cleaned_data.csv'</span>, index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span></code></pre></div>
</div>
</section>
</section>
<section id="exploratory-data-analysisunivariate" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysisunivariate">Exploratory Data Analysis(Univariate)</h2>
<p><em>(Merged dataframe)</em></p>
<section id="lets-explore-the-first-5-columns-representing-the-gun-sales-data" class="level3">
<h3 class="anchored" data-anchor-id="lets-explore-the-first-5-columns-representing-the-gun-sales-data">Let’s explore the first 5 columns, representing the gun sales data</h3>
<div class="cell" data-execution_count="164">
<div class="sourceCode cell-code" id="cb229" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb229-1">merged_df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Data/merged_cleaned_data.csv'</span>)</span>
<span id="cb229-2">merged_df.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="164">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">handgun</th>
<th data-quarto-table-cell-role="th">long_gun</th>
<th data-quarto-table-cell-role="th">multiple</th>
<th data-quarto-table-cell-role="th">total</th>
<th data-quarto-table-cell-role="th">pop_2016</th>
<th data-quarto-table-cell-role="th">female_pct</th>
<th data-quarto-table-cell-role="th">white_pct</th>
<th data-quarto-table-cell-role="th">black_pct</th>
<th data-quarto-table-cell-role="th">asian_pct</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">pe_whi</th>
<th data-quarto-table-cell-role="th">adults_below_65</th>
<th data-quarto-table-cell-role="th">high_school_grad_higher</th>
<th data-quarto-table-cell-role="th">bsc_higher</th>
<th data-quarto-table-cell-role="th">median_hu</th>
<th data-quarto-table-cell-role="th">median_gross_rent</th>
<th data-quarto-table-cell-role="th">poverty_pct</th>
<th data-quarto-table-cell-role="th">median_hh_income</th>
<th data-quarto-table-cell-role="th">per_cap_inc</th>
<th data-quarto-table-cell-role="th">firms</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Alabama</td>
<td>168435.3</td>
<td>134159.3</td>
<td>13090</td>
<td>315684.6</td>
<td>4863300.0</td>
<td>51.6</td>
<td>69.3</td>
<td>26.8</td>
<td>1.4</td>
<td>...</td>
<td>10.7</td>
<td>61.3</td>
<td>84.3</td>
<td>23.5</td>
<td>125500.0</td>
<td>717.0</td>
<td>17.1</td>
<td>43623.0</td>
<td>24091.0</td>
<td>374153.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Alaska</td>
<td>41240.1</td>
<td>40575.7</td>
<td>4632</td>
<td>86447.8</td>
<td>741894.0</td>
<td>47.7</td>
<td>66.1</td>
<td>3.8</td>
<td>6.3</td>
<td>...</td>
<td>15.5</td>
<td>64.4</td>
<td>92.1</td>
<td>28.0</td>
<td>250000.0</td>
<td>1146.0</td>
<td>9.9</td>
<td>72515.0</td>
<td>33413.0</td>
<td>68032.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Arizona</td>
<td>183462.4</td>
<td>119886.8</td>
<td>15816</td>
<td>319165.2</td>
<td>6931071.0</td>
<td>50.3</td>
<td>83.3</td>
<td>4.9</td>
<td>3.4</td>
<td>...</td>
<td>11.9</td>
<td>59.6</td>
<td>86.0</td>
<td>27.5</td>
<td>167500.0</td>
<td>913.0</td>
<td>16.4</td>
<td>50255.0</td>
<td>25848.0</td>
<td>499926.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Arkansas</td>
<td>88268.4</td>
<td>90332.0</td>
<td>8800</td>
<td>187400.4</td>
<td>2988248.0</td>
<td>50.9</td>
<td>79.4</td>
<td>15.7</td>
<td>1.6</td>
<td>...</td>
<td>9.3</td>
<td>60.1</td>
<td>84.8</td>
<td>21.1</td>
<td>111400.0</td>
<td>677.0</td>
<td>17.2</td>
<td>41371.0</td>
<td>22798.0</td>
<td>231959.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>California</td>
<td>616390.5</td>
<td>610005.0</td>
<td>0</td>
<td>1226395.5</td>
<td>39250017.0</td>
<td>50.3</td>
<td>72.7</td>
<td>6.5</td>
<td>14.8</td>
<td>...</td>
<td>8.3</td>
<td>63.2</td>
<td>81.8</td>
<td>31.4</td>
<td>385500.0</td>
<td>1255.0</td>
<td>14.3</td>
<td>61818.0</td>
<td>30318.0</td>
<td>3548449.0</td>
</tr>
</tbody>
</table>

<p>5 rows × 21 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="165">
<div class="sourceCode cell-code" id="cb230" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb230-1">merged_df.info()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 50 entries, 0 to 49
Data columns (total 21 columns):
 #   Column                   Non-Null Count  Dtype  
---  ------                   --------------  -----  
 0   state                    50 non-null     object 
 1   handgun                  50 non-null     float64
 2   long_gun                 50 non-null     float64
 3   multiple                 50 non-null     int64  
 4   total                    50 non-null     float64
 5   pop_2016                 50 non-null     float64
 6   female_pct               50 non-null     float64
 7   white_pct                50 non-null     float64
 8   black_pct                50 non-null     float64
 9   asian_pct                50 non-null     float64
 10  pe_hh                    50 non-null     float64
 11  pe_whi                   50 non-null     float64
 12  adults_below_65          50 non-null     float64
 13  high_school_grad_higher  50 non-null     float64
 14  bsc_higher               50 non-null     float64
 15  median_hu                50 non-null     float64
 16  median_gross_rent        50 non-null     float64
 17  poverty_pct              50 non-null     float64
 18  median_hh_income         50 non-null     float64
 19  per_cap_inc              50 non-null     float64
 20  firms                    50 non-null     float64
dtypes: float64(19), int64(1), object(1)
memory usage: 8.3+ KB</code></pre>
</div>
</div>
<div class="cell" data-execution_count="166">
<div class="sourceCode cell-code" id="cb232" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb232-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plotting</span></span>
<span id="cb232-2">sns.set_style(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'whitegrid'</span>)</span>
<span id="cb232-3">fig, (ax1, ax2, ax3, ax4) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb232-4"></span>
<span id="cb232-5"></span>
<span id="cb232-6">merged_df.handgun.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1)</span>
<span id="cb232-7">merged_df.long_gun.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2)</span>
<span id="cb232-8">merged_df.multiple.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3)</span>
<span id="cb232-9">merged_df.total.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4)</span>
<span id="cb232-10"></span>
<span id="cb232-11">ax1.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of Handgun Sales'</span>)</span>
<span id="cb232-12">ax2.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of Long-gun Sales'</span>)</span>
<span id="cb232-13">ax3.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of Multiple Sales'</span>)</span>
<span id="cb232-14">ax4.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of Total Sales'</span>)</span>
<span id="cb232-15"></span>
<span id="cb232-16">sns.despine(right<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb232-17">sns.despine(offset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, trim<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-167-output-1.png" width="1524" height="372"></p>
</div>
</div>
<div class="cell" data-execution_count="167">
<div class="sourceCode cell-code" id="cb233" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb233-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># summary statistics</span></span>
<span id="cb233-2">merged_df[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'handgun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'long_gun'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'multiple'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>]].describe().T</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="167">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">handgun</td>
<td>50.0</td>
<td>177551.638</td>
<td>185945.395696</td>
<td>0.0</td>
<td>51416.750</td>
<td>132783.75</td>
<td>211942.500</td>
<td>728538.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">long_gun</td>
<td>50.0</td>
<td>131676.908</td>
<td>118931.726762</td>
<td>0.0</td>
<td>49726.325</td>
<td>99129.25</td>
<td>175310.575</td>
<td>610005.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">multiple</td>
<td>50.0</td>
<td>10294.720</td>
<td>13047.318153</td>
<td>0.0</td>
<td>1813.500</td>
<td>5490.00</td>
<td>14688.500</td>
<td>66204.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">total</td>
<td>50.0</td>
<td>319523.266</td>
<td>302625.048243</td>
<td>0.0</td>
<td>114836.400</td>
<td>231037.30</td>
<td>378888.975</td>
<td>1297197.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>As expected with data regarding sales, the data is heavily right-skewed; with most of gun sales on the low end, evidenced by the mean being greater than the median.</p>
</section>
<section id="lets-explore-the-next-5-columns-representing-the-population-by-race" class="level3">
<h3 class="anchored" data-anchor-id="lets-explore-the-next-5-columns-representing-the-population-by-race">Let’s explore the next 5 columns, representing the population % by race</h3>
<div class="cell" data-execution_count="168">
<div class="sourceCode cell-code" id="cb234" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb234-1">sns.set_style(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'whitegrid'</span>)</span>
<span id="cb234-2">fig, (ax1, ax2, ax3, ax4, ax5) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb234-3"></span>
<span id="cb234-4"></span>
<span id="cb234-5">merged_df.pop_2016.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1)</span>
<span id="cb234-6">merged_df.female_pct.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2)</span>
<span id="cb234-7">merged_df.black_pct.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3)</span>
<span id="cb234-8">merged_df.white_pct.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4)</span>
<span id="cb234-9">merged_df.asian_pct.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax5)</span>
<span id="cb234-10"></span>
<span id="cb234-11">ax1.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of the Whole Population'</span>)</span>
<span id="cb234-12">ax2.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of the </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">% F</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">emale Population'</span>)</span>
<span id="cb234-13">ax3.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of the % Black Population'</span>)</span>
<span id="cb234-14">ax4.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of the %  White Population'</span>)</span>
<span id="cb234-15">ax5.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Distribution of the % Asian Population'</span>)</span>
<span id="cb234-16"></span>
<span id="cb234-17">sns.despine(right<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb234-18">sns.despine(offset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, trim<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-169-output-1.png" width="1537" height="372"></p>
</div>
</div>
</section>
<section id="lets-explore-the-next-5-columns-representing-levels-of-education-and-persons-per-household-and-persons-without-health-insurance" class="level3">
<h3 class="anchored" data-anchor-id="lets-explore-the-next-5-columns-representing-levels-of-education-and-persons-per-household-and-persons-without-health-insurance">Let’s explore the next 5 columns, representing levels of education and persons per household and persons without health insurance</h3>
<div class="cell" data-execution_count="169">
<div class="sourceCode cell-code" id="cb235" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb235-1">sns.set_style(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'whitegrid'</span>)</span>
<span id="cb235-2">fig, (ax1, ax2, ax3, ax4, ax5) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb235-3"></span>
<span id="cb235-4"></span>
<span id="cb235-5">merged_df. pe_hh.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1)</span>
<span id="cb235-6">merged_df.pe_whi.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2)</span>
<span id="cb235-7">merged_df.adults_below_65.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3)</span>
<span id="cb235-8">merged_df.high_school_grad_higher.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4)</span>
<span id="cb235-9">merged_df.bsc_higher.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax5)</span>
<span id="cb235-10"></span>
<span id="cb235-11">ax1.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'count of persons per household'</span>)</span>
<span id="cb235-12">ax2.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'count of persons without health insurance'</span>)</span>
<span id="cb235-13">ax3.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'adult population below 65'</span>)</span>
<span id="cb235-14">ax4.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'High School Graduates or Higher'</span>)</span>
<span id="cb235-15">ax5.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Bachelor Degree Holders or Higher'</span>)</span>
<span id="cb235-16"></span>
<span id="cb235-17">sns.despine(right<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb235-18">sns.despine(offset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, trim<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-170-output-1.png" width="1531" height="356"></p>
</div>
</div>
</section>
<section id="lets-explore-the-next-6-columns-representing-economic-data" class="level3">
<h3 class="anchored" data-anchor-id="lets-explore-the-next-6-columns-representing-economic-data">Let’s explore the next 6 columns, representing economic data</h3>
<div class="cell" data-execution_count="170">
<div class="sourceCode cell-code" id="cb236" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb236-1">sns.set_style(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'whitegrid'</span>)</span>
<span id="cb236-2">fig, (ax1, ax2, ax3, ax4, ax5, ax6) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>))</span>
<span id="cb236-3"></span>
<span id="cb236-4"></span>
<span id="cb236-5">merged_df.median_hu.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax1)</span>
<span id="cb236-6">merged_df.median_gross_rent.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax2)</span>
<span id="cb236-7">merged_df.poverty_pct .hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax3)</span>
<span id="cb236-8">merged_df.median_hh_income.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax4)</span>
<span id="cb236-9">merged_df.per_cap_inc.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax5)</span>
<span id="cb236-10">merged_df.firms.hist(bins<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax6)</span>
<span id="cb236-11"></span>
<span id="cb236-12">ax1.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Housing Units Value'</span>)</span>
<span id="cb236-13">ax2.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Median Gross Rent'</span>)</span>
<span id="cb236-14">ax3.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'% Persons in Poverty'</span>)</span>
<span id="cb236-15">ax4.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Median Household Income'</span>)</span>
<span id="cb236-16">ax5.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Per Capita Income'</span>)</span>
<span id="cb236-17">ax6.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(title<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'All firms'</span>)</span>
<span id="cb236-18"></span>
<span id="cb236-19">sns.despine(right<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb236-20">sns.despine(offset<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, trim<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-171-output-1.png" width="1531" height="372"></p>
</div>
</div>
</section>
</section>
<section id="covariate-analysis" class="level2">
<h2 class="anchored" data-anchor-id="covariate-analysis"><strong>Covariate Analysis</strong></h2>
<p>I want to create a new calculated column: <code>gun_sales_per_capita</code>, which would be derived from the division of total gun sales by state populations. This would provide a more appropriate baseline for the comparison of gun sales between states</p>
<div class="cell" data-execution_count="171">
<div class="sourceCode cell-code" id="cb237" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb237-1">merged_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gun_sales_per_capita'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> merged_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'total'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> merged_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pop_2016'</span>]</span></code></pre></div>
</div>
<div class="cell" data-execution_count="172">
<div class="sourceCode cell-code" id="cb238" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb238-1">merged_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gun_sales_per_capita'</span>].describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="172">
<pre><code>count    50.000000
mean      0.060184
std       0.028694
min       0.000000
25%       0.038424
50%       0.063000
75%       0.081355
max       0.116523
Name: gun_sales_per_capita, dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="173">
<div class="sourceCode cell-code" id="cb240" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb240-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># getting the correlations with gun per capita</span></span>
<span id="cb240-2"></span>
<span id="cb240-3">merged_df.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"state"</span>).corrwith(other<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>merged_df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gun_sales_per_capita'</span>])</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="173">
<pre><code>handgun                    0.029506
long_gun                  -0.056207
multiple                   0.122681
total                      0.001330
pop_2016                  -0.335466
female_pct                -0.384595
white_pct                  0.382182
black_pct                 -0.223373
asian_pct                 -0.492825
pe_hh                     -0.386078
pe_whi                     0.275326
adults_below_65            0.103166
high_school_grad_higher    0.147886
bsc_higher                -0.356364
median_hu                 -0.408704
median_gross_rent         -0.462526
poverty_pct                0.169764
median_hh_income          -0.319988
per_cap_inc               -0.260645
firms                     -0.337613
gun_sales_per_capita       1.000000
dtype: float64</code></pre>
</div>
</div>
<div class="cell" data-execution_count="174">
<div class="sourceCode cell-code" id="cb242" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb242-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># visualizing the correlations</span></span>
<span id="cb242-2"></span>
<span id="cb242-3">fig, ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots(figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>))</span>
<span id="cb242-4">corr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> merged_df.drop(columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"state"</span>).corr()</span>
<span id="cb242-5"></span>
<span id="cb242-6">mask <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.zeros_like(corr, dtype<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">bool</span>)</span>
<span id="cb242-7">mask[np.triu_indices_from(mask)] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span></span>
<span id="cb242-8"></span>
<span id="cb242-9">sns.heatmap(corr, mask<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>mask, fmt<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".2f"</span>, annot<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>, ax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>ax,</span>
<span id="cb242-10">            cmap<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"RdBu"</span>, vmin<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, vmax<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, square<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="174">
<pre><code>&lt;Axes: &gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-175-output-2.png" width="1225" height="1184"></p>
</div>
</div>
<section id="plotting-the-variables-against-gun_sales_per_capita-to-spot-associations" class="level3">
<h3 class="anchored" data-anchor-id="plotting-the-variables-against-gun_sales_per_capita-to-spot-associations"><strong>Plotting the variables against <code>gun_sales_per_capita</code> to spot associations</strong></h3>
<div class="cell" data-execution_count="175">
<div class="sourceCode cell-code" id="cb244" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb244-1">sns.pairplot(merged_df, x_vars<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pop_2016'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'female_pct'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'white_pct'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'black_pct'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'asian_pct'</span>], y_vars<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gun_sales_per_capita'</span>], kind<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'reg'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-176-output-1.png" width="1181" height="241"></p>
</div>
</div>
<div class="cell" data-execution_count="176">
<div class="sourceCode cell-code" id="cb245" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb245-1">sns.pairplot(merged_df, x_vars<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pe_hh'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'pe_whi'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'adults_below_65'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'high_school_grad_higher'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'bsc_higher'</span>], y_vars<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gun_sales_per_capita'</span>], kind<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'reg'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-177-output-1.png" width="1181" height="241"></p>
</div>
</div>
<div class="cell" data-execution_count="177">
<div class="sourceCode cell-code" id="cb246" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb246-1">sns.pairplot(merged_df, x_vars<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hu'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_gross_rent'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'poverty_pct'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'median_hh_income'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'per_cap_inc'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'firms'</span>], y_vars<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'gun_sales_per_capita'</span>], kind<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'reg'</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index_files/figure-html/cell-178-output-1.png" width="1417" height="241"></p>
</div>
</div>
<p><em>Which census data is most associated with high gun sales per capita</em></p>
<table class="table">
<colgroup>
<col style="width: 59%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: left;">Positive/Negative Correlation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">persons per household (pe_hh)</td>
<td style="text-align: left;">negative</td>
</tr>
<tr class="even">
<td style="text-align: left;">persons without health insurance (pe_whi)</td>
<td style="text-align: left;">positive</td>
</tr>
<tr class="odd">
<td style="text-align: left;">bachelor degree holder or higher (bsc_higher)</td>
<td style="text-align: left;">negative</td>
</tr>
<tr class="even">
<td style="text-align: left;">median housing unit costs (median_hu)</td>
<td style="text-align: left;">negative</td>
</tr>
<tr class="odd">
<td style="text-align: left;">median gross rent</td>
<td style="text-align: left;">negative</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="conclusions" class="level2">
<h2 class="anchored" data-anchor-id="conclusions">Conclusions</h2>
<p><em>Caveats!</em><br>
<strong>The findings of these analysis are summarised below. These are tentative and do indicate any causal relationship between variables.</strong></p>
<blockquote class="blockquote">
<ul>
<li><p><em>The most populous states in the United States in 2016 are California, Texas, Florida, New York and Illinois.</em></p></li>
<li><p><em>The least populous states are Wyoming, Vermont, Alaska, North Dakota and South Dakota.</em></p></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><p><em>States with the highest median household income in 2016 are Maryland, Alaska, New Jersey, Connecticut and Hawaii.</em></p></li>
<li><p><em>States with the lowest median household income in 2016 are Mississippi, Arkankas, West Virginia, Alabama, and Kentucky.</em></p></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><p><em>States with the highest black population in 2016 are Mississippi, Louisiana, Georgia, Maryland and South Carolina.</em></p></li>
<li><p><em>States with the lowest black population in 2016 are Montana, Idaho, Vermont, Wyoming and Utah.</em></p></li>
</ul>
</blockquote>
<section id="section-2" class="level3">
<h3 class="anchored" data-anchor-id="section-2"><strong>2006</strong></h3>
<blockquote class="blockquote">
<ul>
<li><em>Long guns were sold the most in 2006 with about 5,268,550 units sold.</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>In 2006, handgun sales varied between 200 thousand and 300 thousand units throughout the year. However, long-gun sales started strongly at around 400 thousand units in January, started sinking in March till a year-low of just below 300 thousand units before dramatically shooting up to about 800 thousand units at the end of the year</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>The top 5 states in terms of gun sales are Texas, Pennsylvania, California, Florida and Ohio.</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>Among these states, only in Florida were handgun sales greater than long-gun sales.</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>All these states experience a remarkable dip in sales in the middle of the year.</em></li>
</ul>
</blockquote>
</section>
<section id="section-3" class="level3">
<h3 class="anchored" data-anchor-id="section-3"><strong>2015</strong></h3>
<blockquote class="blockquote">
<p><em>9 years later in 2015, handguns became most bought gun types with a total of about 8 million units sold across all states in the U.S.</em></p>
</blockquote>
<blockquote class="blockquote">
<p><em>The same trend of a dip in sales around the middle of the year and a sharp rise in purchases towards the end of the year persists.</em></p>
</blockquote>
<blockquote class="blockquote">
<p><em>Texas remains the top state in terms of gun purchases.</em></p>
</blockquote>
</section>
<section id="section-4" class="level3">
<h3 class="anchored" data-anchor-id="section-4"><strong>2016</strong></h3>
<blockquote class="blockquote">
<p><em>A year later in 2016, total gun sales reached a little short of 16 million units. Handguns led the way at more than 8 million units.</em></p>
</blockquote>
<blockquote class="blockquote">
<p><em>Gun sales started relatively high compared to the previous years. I note the double dip in sales with second dip occuring around September. This double dip was mostly prominent in Florida. Another trend of note is that long-gun sales almost superceded handgun sales country-wise in November.</em></p>
</blockquote>
<blockquote class="blockquote">
<p><em>Texas, California, Florida, Pennsylvania and Ohio remains the top states in terms of gun purchases</em></p>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>Guam, Illinois, New Jersey, Connecticut and Massachusetts show the highest percentage increase in gun sales over the span of a decade (2006 - 2016). Hawaii, Mariana Islands, Iowa and Nebraska actually had gun sales reduced.</em></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><em>Gun sales per capita is weakly negatively correlated with <code>persons per household</code>; <code>persons without health insurance</code> (positive); <code>bachelor degree holder or higher</code> (negative)</em>; <em><code>median housing unit costs</code> (negative)</em>; <em><code>median gross rent</code> (negative)</em></li>
</ul>
</blockquote>


</section>
</section>

 ]]></description>
  <category>python</category>
  <category>data wrangling</category>
  <guid>https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/index.html</guid>
  <pubDate>Tue, 04 Oct 2022 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2022-10-05_FBI-Gun-Data-EDA/dashboard.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Deriving insights from bike traffic data</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2022-09-23_go-ford-bike-share-analysis/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>I pushed python data wrangling and visualisation to the limit in this project. I hope you rate it highly.</p>
<iframe src="https://www.kaggle.com/embed/joshuaolubori/udacity-goford-bike-share-analysis?kernelSessionId=106326569" height="800" style="margin: 0 auto; width: 100%; max-width: 950px;" frameborder="0" scrolling="auto" title="Udacity_GoFord_Bike_Share_Analysis"></iframe>
<p>This code is hosted on Kaggle. View this and more on my <a href="https://www.kaggle.com/code/joshuaolubori/udacity-goford-bike-share-analysis">Kaggle page</a></p>


</section>

 ]]></description>
  <category>python</category>
  <category>data visualisation</category>
  <category>data wrangling</category>
  <guid>https://joshuaolubori.onrender.com/posts/2022-09-23_go-ford-bike-share-analysis/index.html</guid>
  <pubDate>Thu, 22 Sep 2022 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2022-09-23_go-ford-bike-share-analysis/image.png" medium="image" type="image/png" height="106" width="144"/>
</item>
<item>
  <title>Tweet Data Analysis</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2022-09-18_tweet-wrangling/index.html</link>
  <description><![CDATA[ 




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>As part of the Udacity Data Analysis with Python Nanodegree, I was the first to complete this project in my cohort. Feel free to review and offer your thoughts.</p>
<iframe src="https://www.kaggle.com/embed/joshuaolubori/tweet-data-wrangling-and-analysis?kernelSessionId=105920798" height="800" style="margin: 0 auto; width: 100%; max-width: 950px;" frameborder="0" scrolling="auto" title="Tweet Data Wrangling and Analysis">

</iframe>
<p>This code is hosted on Kaggle. View this and more on my <a href="https://www.kaggle.com/code/joshuaolubori/tweet-data-wrangling-and-analysis">Kaggle page</a></p>


</section>

 ]]></description>
  <category>python</category>
  <category>data visualisation</category>
  <category>data wrangling</category>
  <guid>https://joshuaolubori.onrender.com/posts/2022-09-18_tweet-wrangling/index.html</guid>
  <pubDate>Sat, 17 Sep 2022 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2022-09-18_tweet-wrangling/image.png" medium="image" type="image/png" height="102" width="144"/>
</item>
<item>
  <title>Sales Monitoring Dashboard</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2022_05_28_Adventure-works/index.html</link>
  <description><![CDATA[ 




<section id="about-the-project" class="level2">
<h2 class="anchored" data-anchor-id="about-the-project">About The Project 🍪</h2>
<div>
<iframe title="adventureworks" width="600" height="373.5" src="https://app.powerbi.com/
view?
r=eyJrIjoiNzEwMmY3OWMtNmU3Zi00ZWU3LWFkNmYtYjQ1NGMwZjBjNjNiIiwidCI6ImRmODY3O
WNkLWE4MGUtNDVkOC05OWFjLWM4M2VkN2ZmOTVhMCJ9&amp;embedImagePlaceholder=true" frameborder="0" allowfullscreen="true">
</iframe>
</div>
<section id="requirement-gathering" class="level3">
<h3 class="anchored" data-anchor-id="requirement-gathering">Requirement Gathering</h3>
<p>Client wants a dashboard monitoring sales of company’s product</p>
<section id="a.-primary-kpis" class="level4">
<h4 class="anchored" data-anchor-id="a.-primary-kpis">a. Primary KPIs</h4>
<ul>
<li>Top ten customers, filtered by:
<ul>
<li>product name</li>
<li>product category</li>
<li>product status</li>
<li>product line</li>
</ul></li>
<li>Top ten products by sales, filtered by:
<ul>
<li>product name</li>
<li>product category</li>
<li>product status</li>
<li>product line</li>
</ul></li>
</ul>
</section>
<section id="b.-secondary-kpis" class="level4">
<h4 class="anchored" data-anchor-id="b.-secondary-kpis">b. Secondary KPIs</h4>
<ul>
<li><p>Total sales by category</p></li>
<li><p>Daily sales trend</p></li>
<li></li>
</ul>
</section>
</section>
</section>
<section id="identifying-stakeholders" class="level2">
<h2 class="anchored" data-anchor-id="identifying-stakeholders">Identifying Stakeholders 🧑🏽‍💼</h2>
<ul>
<li>Sales team</li>
<li>Marketing Department</li>
</ul>
<section id="understanding-raw-data" class="level3">
<h3 class="anchored" data-anchor-id="understanding-raw-data">Understanding Raw Data 🥩</h3>
<p>The raw data exists in 9 CSV files representing 1 fact table and 8 dimension tables</p>
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 74%">
</colgroup>
<thead>
<tr class="header">
<th>Table</th>
<th>description (datatype)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Budget</td>
<td>details budget of each product and product categories per period</td>
</tr>
<tr class="even">
<td>BudgetPeriod</td>
<td>date table for the budget table</td>
</tr>
<tr class="odd">
<td>customer</td>
<td>each row records a customer information</td>
</tr>
<tr class="even">
<td>dimdates</td>
<td>date table for the fact table</td>
</tr>
<tr class="odd">
<td>dimProductCategory</td>
<td>records the various product categories available</td>
</tr>
<tr class="even">
<td>dimProductSubCategory</td>
<td>lists the product subcategories available</td>
</tr>
<tr class="odd">
<td>product</td>
<td>lists individual products</td>
</tr>
<tr class="even">
<td>Sales</td>
<td>The fact table: records individual sales transaction</td>
</tr>
<tr class="odd">
<td>Territory</td>
<td>Lists regional locations</td>
</tr>
</tbody>
</table>
</section>
<section id="converting-csv-to-sql-insert-statements-with-python" class="level3">
<h3 class="anchored" data-anchor-id="converting-csv-to-sql-insert-statements-with-python">Converting CSV to SQL INSERT statements with Python 🐍</h3>
<p>I wrote a Python script using the <code>csv</code> and <code>os</code> modules, that takes in a <code>csv</code> file and outputs an SQL file with INSERT statements for each row in the CSV.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> csv</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> escape_quotes(value):</span>
<span id="cb1-5">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> value.replace(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"'"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"''"</span>)</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> convert_csv_to_sql(csv_file):</span>
<span id="cb1-8">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">try</span>:</span>
<span id="cb1-9">        table_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.path.splitext(os.path.basename(csv_file))[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].lower()</span>
<span id="cb1-10">        </span>
<span id="cb1-11">        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(csv_file, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'r'</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> csvfile:</span>
<span id="cb1-12">            reader <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> csv.reader(csvfile)</span>
<span id="cb1-13">            </span>
<span id="cb1-14">            headers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">next</span>(reader)</span>
<span id="cb1-15">            columns <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">', '</span>.join(headers)</span>
<span id="cb1-16">            </span>
<span id="cb1-17">            sql_file <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>table_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">.sql"</span></span>
<span id="cb1-18">            </span>
<span id="cb1-19">            os.makedirs(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'results'</span>, exist_ok<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb1-20">            </span>
<span id="cb1-21">            sql_file <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> os.path.join(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'results'</span>, sql_file)</span>
<span id="cb1-22">            </span>
<span id="cb1-23">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">with</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">open</span>(sql_file, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'w'</span>) <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> sqlfile:</span>
<span id="cb1-24">                all_values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb1-25">                </span>
<span id="cb1-26">                <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> row <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> reader:</span>
<span id="cb1-27">                    values <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb1-28">                    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> header, value <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">zip</span>(headers, row):</span>
<span id="cb1-29">                        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> header.lower() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'id'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> header.lower().endswith(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'_id'</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> header.lower() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'quantity'</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">or</span> header.lower() <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'unit_price'</span>:</span>
<span id="cb1-30">                            values.append(value)</span>
<span id="cb1-31">                        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">elif</span> value <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">''</span>:</span>
<span id="cb1-32">                            values.append(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'NULL'</span>)</span>
<span id="cb1-33">                        <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>:</span>
<span id="cb1-34">                            values.append(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"'</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>escape_quotes(value)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">'"</span>)</span>
<span id="cb1-35">                    </span>
<span id="cb1-36">                    all_values.append(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"(</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">', '</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>join(values)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">)"</span>)</span>
<span id="cb1-37"></span>
<span id="cb1-38">                sql_insert <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"INSERT INTO </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>table_name<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;"> (</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>columns<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">) VALUES </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">', '</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">.</span>join(all_values)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">;</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span></span>
<span id="cb1-39">                </span>
<span id="cb1-40">                sqlfile.write(sql_insert)</span>
<span id="cb1-41">                </span>
<span id="cb1-42">                <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Conversion completed successfully. SQL file '</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sql_file<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">' generated."</span>)</span>
<span id="cb1-43">    </span>
<span id="cb1-44">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">FileNotFoundError</span>:</span>
<span id="cb1-45">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"The specified CSV file does not exist."</span>)</span>
<span id="cb1-46">    </span>
<span id="cb1-47">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">except</span> <span class="pp" style="color: #AD0000;
background-color: null;
font-style: inherit;">Exception</span> <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> e:</span>
<span id="cb1-48">        <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"An error occurred during the conversion: </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">str</span>(e)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb1-49"></span>
<span id="cb1-50"></span>
<span id="cb1-51">files <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"customer.csv"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"department.csv"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"employee.csv"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"employee_product.csv"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"orders.csv"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"product.csv"</span>]</span>
<span id="cb1-52"></span>
<span id="cb1-53"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">file</span> <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> files:</span>
<span id="cb1-54">    convert_csv_to_sql(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">file</span>)</span>
<span id="cb1-55"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Conversion Completed"</span>)</span></code></pre></div>
</div>
</section>
<section id="loading-into-database" class="level3">
<h3 class="anchored" data-anchor-id="loading-into-database">Loading into database 🧺</h3>
<p>a MySQL database was created to host the data. The ERD is shown below and using MySQL’s built-in GUI tool, it was converted into a database schema</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2022_05_28_Adventure-works/Adw ERD.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>To lessen the load on the BI tool further down the pipeline, and to make modelling easier, I created 4 views on top of the data (dim_customer, dim_calendar, dim_product and fact_sales)</p>
</section>
<section id="data-cleansing" class="level3">
<h3 class="anchored" data-anchor-id="data-cleansing">Data cleansing 🧹</h3>
<p>Issues - No major cleaning issues; data was loaded directly into the BI tool</p>
</section>
<section id="data-modeling" class="level3">
<h3 class="anchored" data-anchor-id="data-modeling">Data Modeling 🏛</h3>
<p>The following star schema was created for the data model in Power BI</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://joshuaolubori.onrender.com/posts/2022_05_28_Adventure-works/Adw data model.png" class="img-fluid figure-img" width="643"></p>
</figure>
</div>
</section>
<section id="data-visualization" class="level3">
<h3 class="anchored" data-anchor-id="data-visualization">Data Visualization 🎨</h3>
<ul>
<li><p>Power BI magic!✨</p>
<p>The following DAX measures were used:</p></li>
</ul>
<pre><code>Non-Null Days = 
CALCULATE(
    COUNTROWS('awdb dim_calendar'),
    NOT(ISBLANK('awdb dim_calendar'[Day]))
)

Top 10 Customers by Sales = 
IF(RANKX(ALL('awdb dim_customer'[fullname]), [Total Sales],,DESC)&lt;=10,[Total Sales], BLANK())

Top 10 Products by Sales = 
IF(RANKX(ALL('awdb dim_product'[product_name]), [Total Sales],,DESC)&lt;=10,[Total Sales], BLANK())

Total Sales = 
SUM('awdb fact_sales'[SalesAmount])</code></pre>


</section>
</section>

 ]]></description>
  <category>python</category>
  <category>data visualisation</category>
  <category>data engineering</category>
  <guid>https://joshuaolubori.onrender.com/posts/2022_05_28_Adventure-works/index.html</guid>
  <pubDate>Fri, 27 May 2022 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2022_05_28_Adventure-works/Adw ERD.png" medium="image" type="image/png" height="107" width="144"/>
</item>
<item>
  <title>Visualising COVID-19’s Impact in Nigeria</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2022_05_28_COVID-NGA-analysis/index.html</link>
  <description><![CDATA[ 




<section id="about-the-project" class="level2">
<h2 class="anchored" data-anchor-id="about-the-project">About The Project 🍪</h2>
<p>Live Demo: <a href="https://public.tableau.com/app/profile/joshua1294/viz/Covid-19InNigeria/Dashboard">here</a></p>
<div>
<div id="viz1702032459805" class="tableauPlaceholder" style="position: relative">
<noscript>
<img src="https://joshuaolubori.onrender.com/posts/2022_05_28_COVID-NGA-analysis/https:/public.tableau.com/static/images/Co/Covid-19InNigeria/Dashboard/1_rss.png" alt="Dashboard  " style="border: none">
</noscript>

<object class="tableauViz" style="display:none;">
<p><param name="host_url" value="https%3A%2F%2Fpublic.tableau.com%2F"> <param name="embed_code_version" value="3"> <param name="site_root" value=""><param name="name" value="Covid-19InNigeria/Dashboard"><param name="tabs" value="no"><param name="toolbar" value="yes"><param name="static_image" value="https://public.tableau.com/static/images/Co/Covid-19InNigeria/Dashboard/1.png"> <param name="animate_transition" value="yes"><param name="display_static_image" value="yes"><param name="display_spinner" value="yes"><param name="display_overlay" value="yes"><param name="display_count" value="yes"><param name="language" value="en-GB"></p>
</object>
</div>
</div>

<script type="text/javascript">                    var divElement = document.getElementById('viz1702032459805');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1920px';vizElement.style.height='1107px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1920px';vizElement.style.height='1107px';} else { vizElement.style.width='100%';vizElement.style.height='2227px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
<p>The year 2020 will be remembered for the global impact of a virus that had infected over 40 million people by late October. While drawing comparisons to the 1918 flu pandemic, one notable difference is the role of technology in providing real-time insights into the spread, mutations, and economic effects of the virus.</p>
<p>This enhanced understanding of COVID-19 is made possible by vast amounts of data, including hundreds of genomes and millions of tweets, coupled with advancements in computing power and analytical methods. (Credits Katherine Unger Baillie et al., 2020)<sup>1</sup></p>
<p>The Nigeria Centre for Disease Control (NCDC) and the National Emergency Operations Centre (EOC) have been at the forefront of Nigeria’s public health response, working in coordination with the Presidential Task Force on COVID-19 (PTF-COVID-19). The NCDC also collaborates closely with all states of the Federation to support their pandemic response efforts. (NCDC coronavirus COVID-19 advisory, 2022)<sup>2</sup></p>
<p>Given these circumstances, data collection and analysis are vital for informing appropriate responses, planning, and resource allocation.</p>
<p>This interactive dashboard provides information on the COVID-19 pandemic in Nigeria, offering insights into the disease and its impact on the Nigerian population.This is an interactive dashboard on the COVID-19 pandemic in Nigeria, reflecting information emerging on the disease and its impact on the Nigerian population.</p>
</section>
<section id="task" class="level2">
<h2 class="anchored" data-anchor-id="task">Task 📌</h2>
<p>To design a Tableau dashboard to clearly visualize the COVID-19 pandemic in Nigeria since the start of the pandemic in 2020. Key metrics to show include total number of cases, infection rate, fatality rate e.t.c. My audience is the general public and therefore the viz is to be hosted on Tableau Public.</p>
</section>
<section id="prepare" class="level2">
<h2 class="anchored" data-anchor-id="prepare">Prepare 🧹</h2>
<p><em>Where was the data located and organized?</em></p>
<p>The data was sourced from the NCDC (Nigerian Centre for Disease Control) and accessed via <a href="https://data.humdata.org/m/dataset/nigeria_covid19_subnational">link</a> on the 15th of May, 2022. The dataset was contained in a CSV file, arranged in 14 columns with the headers written in French. That had to be taken care of in the data cleaning process.</p>
<p><em>Are there issues with bias or credibility in this data?</em> There are concerns that the data from Nigeria may not completely reflective of the true situation on ground due to low testing rates compared to Western countries. #Are there any problems with the data? Problems of note include the columns headers being in French and a few redundant columns.</p>
</section>
<section id="process" class="level2">
<h2 class="anchored" data-anchor-id="process">Process ⚙️</h2>
<p><em>What tools are you choosing and why?</em></p>
<p>For data cleaning, exploratory data analysis (EDA) and visualization, I choose Python’s pandas with Jupyter Notebooks. I like pandas versatility with handling data and together with Jupyter Notebook’s flexible running of code in cells, it makes for an efficient workflow.</p>
<p><em>What steps have you taken to ensure that your data is clean?</em></p>
<p>I opened a folder for the project on my PC and named the file with an appropriate naming convention. Then I imported the dataset using pandas and inspected the first few rows, the last few rows, the columns, the shape and some summary statistics of the data to confirm that it was imported correctly and to have a feel of the data. Using a mapping function, I renamed the column headers appropriately. Where null values where present, I filled in with zero. The Jupyter Notebook file delineates the whole data preparation process</p>
<p>On preliminary exploration on Excel, I discovered that date values on some of the tables were inconsistently formatted. Therefore all date fields have to be homogenized going forward</p>
<p>I did all data cleaning and wrangling with Python’s pandas on Jupyter Notebooks. The codes can be accessed checked <a href="https://github.com/JoshuaOlubori/Covid19-in-Nigeria/blob/a8bbb53505da3baae032347552ed12e430d83046/notebook.ipynb">here</a></p>
</section>
<section id="insights" class="level2">
<h2 class="anchored" data-anchor-id="insights">Insights 🕵🏽‍♂️</h2>
<ul class="task-list">
<li><p><input type="checkbox" checked="">The states of Lagos, Federal Capital Territory (Abuja), and Rivers have the highest confirmed cases most likely due to their being port cities and Lagos’ high population density.</p></li>
<li><p><input type="checkbox" checked="">There are 246,889 confirmed cases, 223,634 recoveries and 3079 deaths.</p></li>
<li><p><input type="checkbox" checked="">December 22nd, 2021 saw the highest number of confirmed cases at 4,006 while August 29th, 2021 was the peak of total deaths at 93.</p></li>
</ul>
<p>The visual can be viewed and interacted with at <a href="https://public.tableau.com/views/Covid-19InNigeria/Dashboard?:language=en-GB&amp;publish=yes&amp;:display_count=n&amp;:origin=viz_share_link">link</a></p>
</section>
<section id="contact" class="level2">
<h2 class="anchored" data-anchor-id="contact">Contact</h2>
<p>Edun Joshua Olubori - <a href="https://www.linkedin.com/in/joshua-edun">connect on linkedin</a> - joshuaolubori@gmail.com</p>
<p>Live Demo: <a href="https://public.tableau.com/app/profile/joshua1294/viz/Covid-19InNigeria/Dashboard">here</a></p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Katherine Unger Baillie, Credits, Baillie, K. U., Berger, M. W., Brockmeier, E. K., Writers, Date October 28, Date, 28, O., Subtopics Data Science, Subtopics, Science, D., Schools School of Engineering &amp; Applied Science, Schools, School of Engineering &amp; Applied Science, Share Twitter Facebook, Share, &amp; Twitter Facebook. (1970, May 26). The role of data in a world reshaped by covid-19. Penn Today. Retrieved May 30, 2022, from <a href="https://penntoday.upenn.edu/news/role-data-world-reshaped-covid-19" class="uri">https://penntoday.upenn.edu/news/role-data-world-reshaped-covid-19</a>↩︎</p></li>
<li id="fn2"><p>NCDC coronavirus COVID-19 microsite. Retrieved May 30, 2022, from <a href="https://covid19.ncdc.gov.ng/advisory/" class="uri">https://covid19.ncdc.gov.ng/advisory/</a>↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>python</category>
  <category>data visualisation</category>
  <guid>https://joshuaolubori.onrender.com/posts/2022_05_28_COVID-NGA-analysis/index.html</guid>
  <pubDate>Fri, 27 May 2022 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2022_05_28_COVID-NGA-analysis/dashboard.png" medium="image" type="image/png" height="81" width="144"/>
</item>
<item>
  <title>UK Road Accidents and Casualties Tracking Dashboard (2021 - 2022)</title>
  <dc:creator>Edun Joshua</dc:creator>
  <link>https://joshuaolubori.onrender.com/posts/2022_05_28_UK-accidents/index.html</link>
  <description><![CDATA[ 




<section id="about-the-project" class="level2">
<h2 class="anchored" data-anchor-id="about-the-project">About The Project 🍪</h2>
<div>
<iframe title="uk_accident_report" width="600" height="373.5" src="https://app.powerbi.com/
view?
r=eyJrIjoiYjZiNDYwMTctY2EwOC00NGQ2LWJmOGEtMzVlN2I2YTFlZTEwIiwidCI6ImRmODY3OWN
kLWE4MGUtNDVkOC05OWFjLWM4M2VkN2ZmOTVhMCJ9&amp;embedImagePlaceholder=true" frameborder="0" allowfullscreen="true">
</div>
</section>
<section id="requirement-gathering" class="level2">
<h2>Requirement Gathering</h2>
<p>Client wants to create a dashboard on road accidents for the year 2021 and 2022.</p>
<section id="a.-primary-kpis" class="level4">
<h4>a. Primary KPIs</h4>
<ul>
<li>Total Casualties and Total Accident Values:
<ul>
<li>Current Year</li>
<li>Year-over-Year (YoY) Growth</li>
</ul></li>
<li>Total Casualties by Accident Severity:
<ul>
<li>Current Year</li>
<li>Year-over-Year (YoY) Growth</li>
</ul></li>
</ul>
</section>
<section id="b.-secondary-kpis" class="level4">
<h4>b. Secondary KPIs</h4>
<ul>
<li><p>Total Casualties with Respect to Vehicle Type:</p>
<ul>
<li>Current Year</li>
</ul></li>
<li><p>Monthly Trend Comparison of Casualties:</p>
<ul>
<li>Current Year vs. Previous Year</li>
</ul></li>
<li><p>Casualties by Road Type:</p>
<ul>
<li>Current Year</li>
</ul></li>
<li><p>Current Year Casualties by Area/Location &amp; Day/Night</p></li>
<li><p>Total Casualties and Total Accidents by Location Total casualties and total accidents by location</p></li>
</ul>
</section>
</section>
<section id="identifying-stakeholders" class="level2">
<h2>Identifying Stakeholders 🧑🏽‍💼</h2>
<ul>
<li>Emergency Services Departments</li>
<li>Road Safety Corps</li>
<li>Traffic Management Agencies</li>
<li>Police Force</li>
<li>General public</li>
</ul>
</section>
<section id="understanding-raw-data" class="level2">
<h2>Understanding Raw Data 🥩</h2>
<p>Data Grain: A single instance of a reported accident event in the UK in 2021 and 2022</p>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="header">
<th>Fields</th>
<th>description (datatype)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Accident_Index</td>
<td>unique row identifier (string)</td>
</tr>
<tr class="even">
<td>Accident Date</td>
<td>date of accident event (date)</td>
</tr>
<tr class="odd">
<td>Day_of_Week</td>
<td>day of the week (string)</td>
</tr>
<tr class="even">
<td>Junction_Control</td>
<td>mechanism of traffic control at junction (string)</td>
</tr>
<tr class="odd">
<td>Junction_Detail</td>
<td>type of junction (string)</td>
</tr>
<tr class="even">
<td>Accident_Severity</td>
<td>severity of accident (string)</td>
</tr>
<tr class="odd">
<td>Latitude</td>
<td>latitude (float)</td>
</tr>
<tr class="even">
<td>Light_Conditions</td>
<td>light conditions at accident scene (string)</td>
</tr>
<tr class="odd">
<td>Local_Authority_(District)</td>
<td>name of district (string)</td>
</tr>
<tr class="even">
<td>Carriageway_Hazards</td>
<td>hazards on the road if any</td>
</tr>
<tr class="odd">
<td>Number_of_Casualties</td>
<td>number of causalities (integer)</td>
</tr>
<tr class="even">
<td>Number_of_Vehicles</td>
<td>number of vehicles involved in the accident (integer)</td>
</tr>
<tr class="odd">
<td>Police_Force</td>
<td>Police force jurisdiction (string)</td>
</tr>
<tr class="even">
<td>Road_Surface_Conditions</td>
<td>condition of road surface (string)</td>
</tr>
<tr class="odd">
<td>Road_Type</td>
<td>road type (string)</td>
</tr>
<tr class="even">
<td>Speed_limit</td>
<td>road speed limit in mph (string)</td>
</tr>
<tr class="odd">
<td>Time</td>
<td>time of day accident occurred (time)</td>
</tr>
<tr class="even">
<td>Urban_or_Rural_Area</td>
<td>Whether accident occurred in an urban or rural area (string)</td>
</tr>
<tr class="odd">
<td>Weather_Conditions</td>
<td>weather condition at time of accident (string)</td>
</tr>
<tr class="even">
<td>Vehicle_Type</td>
<td>type of vehicle involved in the accident</td>
</tr>
</tbody>
</table>
</section>
<section id="data-cleansing" class="level2">
<h2>Data cleansing 🧹</h2>
<p>Issues - Junction_Control column has, among others, two values “Auto traffic sigl” and “Auto traffic signal” of which the former is a misspelling of the latter</p>
<ul>
<li><p>Instances where “Fatal” is misspelled as “Fetal” in Accident_Severity column</p></li>
<li><p>“Time” column was represented as a datetime data type in Power BI</p></li>
</ul>
<p>Fixes - Used the Replace Values feature to correct the misspellings of Issues 1 &amp; 2 - Changed the data type to time accordingly - All fixes were done in Power Query.</p>
<section id="data-processing" class="level3">
<h3>Data Processing ⚙️</h3>
<ul>
<li><p>The data needs a calendar table so as to use Time Intelligence functions further down the line.</p></li>
<li><p>Using the CALENDAR function, a new table with calculated, dynamic columns of Date, Month and Year was generated.</p></li>
</ul>
</section>
<section id="data-modeling" class="level3">
<h3>Data Modeling 🏛</h3>
<p>a one-to-many active relationship was established between the calendar table and the data table <img src="data-model.png" class="img-fluid" alt="Schema" /></p>
</section>
<section id="data-visualization" class="level3">
<h3>Data Visualization 🎨</h3>
<ul>
<li>Power BI magic!✨ The report pbix file is available in this repo to explore design decisions The following DAX measures were used:</li>
</ul>
<pre><code>Count of Accidents = DISTINCTCOUNT(Data[Accident_Index])

Current Year Accident Count = TOTALYTD(COUNT(Data[Accident_Index]),&#39;Calendar&#39;[Date])

Current Year Casualties = TOTALYTD(SUM(Data[Number_of_Casualties]),&#39;Calendar&#39;[Date])

Previous Year Accident Counts = CALCULATE(COUNT(Data[Accident_Index]), SAMEPERIODLASTYEAR(&#39;Calendar&#39;[Date]))

Previous Year Casualties = CALCULATE(SUM(Data[Number_of_Casualties]),
SAMEPERIODLASTYEAR(&#39;Calendar&#39;[Date]))

YoY Accident Count = DIVIDE([Current Year Accident Count] - [Previous Year Accident Counts], [Previous Year Accident Counts])

YoY Casualties = (DIVIDE([Current Year Casualties] - [Previous Year Casualties],[Previous Year Casualties]))</code></pre>
</section>
<section id="deriving-insights" class="level3">
<h3>Deriving Insights</h3>
<ul>
<li><p>The vehicle type most involved in accidents was cars. This can be explained by the fact that most vehicles plying UK roads are cars</p></li>
<li><p>There is a general decrease in casualty counts in 2022 compared to 2021</p></li>
</ul>
</section>
</section>
<section id="contact" class="level2">
<h2>Contact</h2>
<p>Edun Joshua Olubori - <a href="https://www.linkedin.com/in/joshua-edun">connect on linkedin</a> - joshuaolubori@gmail.com</p>
<p>Live Demo: <a href="https://app.powerbi.com/view?r=eyJrIjoiYjZiNDYwMTctY2EwOC00NGQ2LWJmOGEtMzVlN2I2YTFlZTEwIiwidCI6ImRmODY3OWNkLWE4MGUtNDVkOC05OWFjLWM4M2VkN2ZmOTVhMCJ9&amp;embedImagePlaceholder=true">here</a></p>
<div id="quarto-navigation-envelope" class="hidden">
<p><span class="hidden" data-render-id="quarto-int-sidebar-title">Chamber of (data) secrets</span> <span class="hidden" data-render-id="quarto-int-navbar-title">Chamber of (data) secrets</span> <span class="hidden" data-render-id="quarto-int-navbar:Home">Home</span> <span class="hidden" data-render-id="quarto-int-navbar:/index.html">/index.html</span> <span class="hidden" data-render-id="quarto-int-navbar:Posts">Posts</span> <span class="hidden" data-render-id="quarto-int-navbar:/posts_index.html">/posts_index.html</span> <span class="hidden" data-render-id="quarto-int-navbar:About">About</span> <span class="hidden" data-render-id="quarto-int-navbar:/about.html">/about.html</span> <span class="hidden" data-render-id="footer-left">Blog made with 💚 and <a href="https://quarto.org/">Quarto</a>, by Edun Joshua. License: <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC BY-SA 2.0</a>.</span></p>
</div>
<div id="quarto-meta-markdown" class="hidden">
<p><span class="hidden" data-render-id="quarto-metatitle">Chamber of (data) secrets - UK Road Accidents and Casualties Tracking Dashboard (2021 - 2022)</span> <span class="hidden" data-render-id="quarto-twittercardtitle">Chamber of (data) secrets - UK Road Accidents and Casualties Tracking Dashboard (2021 - 2022)</span> <span class="hidden" data-render-id="quarto-ogcardtitle">Chamber of (data) secrets - UK Road Accidents and Casualties Tracking Dashboard (2021 - 2022)</span> <span class="hidden" data-render-id="quarto-metasitename">Chamber of (data) secrets</span> <span class="hidden" data-render-id="quarto-twittercarddesc">Featuring data modeling in Power BI, and Dax</span> <span class="hidden" data-render-id="quarto-ogcardddesc">Featuring data modeling in Power BI, and Dax</span></p>
</div>
</section>

</main> <!-- /main -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js"
        data-repo="JoshuaOlubori/qblog"
        data-repo-id="R_kgDOKvhXew"
        data-category="General"
        data-category-id="DIC_kwDOKvhXe84CbFeH"
        data-mapping="title"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <div class='footer-contents'>Blog made with 💚 and [Quarto](https://quarto.org/),  by Edun Joshua.  License: [CC BY-SA 2.0](https://creativecommons.org/licenses/by-sa/2.0/).</div>  
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>

</body>

</html></iframe></div></section> ]]></description>
  <category>power bi</category>
  <category>data visualisation</category>
  <guid>https://joshuaolubori.onrender.com/posts/2022_05_28_UK-accidents/index.html</guid>
  <pubDate>Fri, 27 May 2022 23:00:00 GMT</pubDate>
  <media:content url="https://joshuaolubori.onrender.com/posts/2022_05_28_UK-accidents/report.png" medium="image" type="image/png" height="84" width="144"/>
</item>
</channel>
</rss>
